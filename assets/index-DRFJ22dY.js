function YA(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const o=Object.getOwnPropertyDescriptor(r,i);o&&Object.defineProperty(t,i,o.get?o:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();function jA(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var IE={exports:{}},sc={},SE={exports:{}},ae={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ka=Symbol.for("react.element"),QA=Symbol.for("react.portal"),XA=Symbol.for("react.fragment"),ZA=Symbol.for("react.strict_mode"),eR=Symbol.for("react.profiler"),tR=Symbol.for("react.provider"),nR=Symbol.for("react.context"),rR=Symbol.for("react.forward_ref"),iR=Symbol.for("react.suspense"),oR=Symbol.for("react.memo"),sR=Symbol.for("react.lazy"),oy=Symbol.iterator;function aR(t){return t===null||typeof t!="object"?null:(t=oy&&t[oy]||t["@@iterator"],typeof t=="function"?t:null)}var CE={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},AE=Object.assign,RE={};function $o(t,e,n){this.props=t,this.context=e,this.refs=RE,this.updater=n||CE}$o.prototype.isReactComponent={};$o.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};$o.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function xE(){}xE.prototype=$o.prototype;function jh(t,e,n){this.props=t,this.context=e,this.refs=RE,this.updater=n||CE}var Qh=jh.prototype=new xE;Qh.constructor=jh;AE(Qh,$o.prototype);Qh.isPureReactComponent=!0;var sy=Array.isArray,PE=Object.prototype.hasOwnProperty,Xh={current:null},NE={key:!0,ref:!0,__self:!0,__source:!0};function kE(t,e,n){var r,i={},o=null,s=null;if(e!=null)for(r in e.ref!==void 0&&(s=e.ref),e.key!==void 0&&(o=""+e.key),e)PE.call(e,r)&&!NE.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];i.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:ka,type:t,key:o,ref:s,props:i,_owner:Xh.current}}function lR(t,e){return{$$typeof:ka,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Zh(t){return typeof t=="object"&&t!==null&&t.$$typeof===ka}function uR(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var ay=/\/+/g;function Ed(t,e){return typeof t=="object"&&t!==null&&t.key!=null?uR(""+t.key):e.toString(36)}function Hl(t,e,n,r,i){var o=typeof t;(o==="undefined"||o==="boolean")&&(t=null);var s=!1;if(t===null)s=!0;else switch(o){case"string":case"number":s=!0;break;case"object":switch(t.$$typeof){case ka:case QA:s=!0}}if(s)return s=t,i=i(s),t=r===""?"."+Ed(s,0):r,sy(i)?(n="",t!=null&&(n=t.replace(ay,"$&/")+"/"),Hl(i,e,n,"",function(u){return u})):i!=null&&(Zh(i)&&(i=lR(i,n+(!i.key||s&&s.key===i.key?"":(""+i.key).replace(ay,"$&/")+"/")+t)),e.push(i)),1;if(s=0,r=r===""?".":r+":",sy(t))for(var a=0;a<t.length;a++){o=t[a];var l=r+Ed(o,a);s+=Hl(o,e,n,l,i)}else if(l=aR(t),typeof l=="function")for(t=l.call(t),a=0;!(o=t.next()).done;)o=o.value,l=r+Ed(o,a++),s+=Hl(o,e,n,l,i);else if(o==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return s}function hl(t,e,n){if(t==null)return t;var r=[],i=0;return Hl(t,r,"","",function(o){return e.call(n,o,i++)}),r}function cR(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Lt={current:null},ql={transition:null},dR={ReactCurrentDispatcher:Lt,ReactCurrentBatchConfig:ql,ReactCurrentOwner:Xh};function DE(){throw Error("act(...) is not supported in production builds of React.")}ae.Children={map:hl,forEach:function(t,e,n){hl(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return hl(t,function(){e++}),e},toArray:function(t){return hl(t,function(e){return e})||[]},only:function(t){if(!Zh(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ae.Component=$o;ae.Fragment=XA;ae.Profiler=eR;ae.PureComponent=jh;ae.StrictMode=ZA;ae.Suspense=iR;ae.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=dR;ae.act=DE;ae.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=AE({},t.props),i=t.key,o=t.ref,s=t._owner;if(e!=null){if(e.ref!==void 0&&(o=e.ref,s=Xh.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)PE.call(e,l)&&!NE.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var u=0;u<l;u++)a[u]=arguments[u+2];r.children=a}return{$$typeof:ka,type:t.type,key:i,ref:o,props:r,_owner:s}};ae.createContext=function(t){return t={$$typeof:nR,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:tR,_context:t},t.Consumer=t};ae.createElement=kE;ae.createFactory=function(t){var e=kE.bind(null,t);return e.type=t,e};ae.createRef=function(){return{current:null}};ae.forwardRef=function(t){return{$$typeof:rR,render:t}};ae.isValidElement=Zh;ae.lazy=function(t){return{$$typeof:sR,_payload:{_status:-1,_result:t},_init:cR}};ae.memo=function(t,e){return{$$typeof:oR,type:t,compare:e===void 0?null:e}};ae.startTransition=function(t){var e=ql.transition;ql.transition={};try{t()}finally{ql.transition=e}};ae.unstable_act=DE;ae.useCallback=function(t,e){return Lt.current.useCallback(t,e)};ae.useContext=function(t){return Lt.current.useContext(t)};ae.useDebugValue=function(){};ae.useDeferredValue=function(t){return Lt.current.useDeferredValue(t)};ae.useEffect=function(t,e){return Lt.current.useEffect(t,e)};ae.useId=function(){return Lt.current.useId()};ae.useImperativeHandle=function(t,e,n){return Lt.current.useImperativeHandle(t,e,n)};ae.useInsertionEffect=function(t,e){return Lt.current.useInsertionEffect(t,e)};ae.useLayoutEffect=function(t,e){return Lt.current.useLayoutEffect(t,e)};ae.useMemo=function(t,e){return Lt.current.useMemo(t,e)};ae.useReducer=function(t,e,n){return Lt.current.useReducer(t,e,n)};ae.useRef=function(t){return Lt.current.useRef(t)};ae.useState=function(t){return Lt.current.useState(t)};ae.useSyncExternalStore=function(t,e,n){return Lt.current.useSyncExternalStore(t,e,n)};ae.useTransition=function(){return Lt.current.useTransition()};ae.version="18.3.1";SE.exports=ae;var F=SE.exports;const ME=jA(F),fR=YA({__proto__:null,default:ME},[F]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hR=F,pR=Symbol.for("react.element"),mR=Symbol.for("react.fragment"),gR=Object.prototype.hasOwnProperty,yR=hR.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,vR={key:!0,ref:!0,__self:!0,__source:!0};function bE(t,e,n){var r,i={},o=null,s=null;n!==void 0&&(o=""+n),e.key!==void 0&&(o=""+e.key),e.ref!==void 0&&(s=e.ref);for(r in e)gR.call(e,r)&&!vR.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:pR,type:t,key:o,ref:s,props:i,_owner:yR.current}}sc.Fragment=mR;sc.jsx=bE;sc.jsxs=bE;IE.exports=sc;var y=IE.exports,cf={},LE={exports:{}},Zt={},VE={exports:{}},UE={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(z,X){var te=z.length;z.push(X);e:for(;0<te;){var Ee=te-1>>>1,me=z[Ee];if(0<i(me,X))z[Ee]=X,z[te]=me,te=Ee;else break e}}function n(z){return z.length===0?null:z[0]}function r(z){if(z.length===0)return null;var X=z[0],te=z.pop();if(te!==X){z[0]=te;e:for(var Ee=0,me=z.length,Ie=me>>>1;Ee<Ie;){var Ut=2*(Ee+1)-1,At=z[Ut],Y=Ut+1,se=z[Y];if(0>i(At,te))Y<me&&0>i(se,At)?(z[Ee]=se,z[Y]=te,Ee=Y):(z[Ee]=At,z[Ut]=te,Ee=Ut);else if(Y<me&&0>i(se,te))z[Ee]=se,z[Y]=te,Ee=Y;else break e}}return X}function i(z,X){var te=z.sortIndex-X.sortIndex;return te!==0?te:z.id-X.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var s=Date,a=s.now();t.unstable_now=function(){return s.now()-a}}var l=[],u=[],h=1,p=null,m=3,_=!1,E=!1,P=!1,x=typeof setTimeout=="function"?setTimeout:null,I=typeof clearTimeout=="function"?clearTimeout:null,T=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function C(z){for(var X=n(u);X!==null;){if(X.callback===null)r(u);else if(X.startTime<=z)r(u),X.sortIndex=X.expirationTime,e(l,X);else break;X=n(u)}}function M(z){if(P=!1,C(z),!E)if(n(l)!==null)E=!0,Je(U);else{var X=n(u);X!==null&&it(M,X.startTime-z)}}function U(z,X){E=!1,P&&(P=!1,I(w),w=-1),_=!0;var te=m;try{for(C(X),p=n(l);p!==null&&(!(p.expirationTime>X)||z&&!D());){var Ee=p.callback;if(typeof Ee=="function"){p.callback=null,m=p.priorityLevel;var me=Ee(p.expirationTime<=X);X=t.unstable_now(),typeof me=="function"?p.callback=me:p===n(l)&&r(l),C(X)}else r(l);p=n(l)}if(p!==null)var Ie=!0;else{var Ut=n(u);Ut!==null&&it(M,Ut.startTime-X),Ie=!1}return Ie}finally{p=null,m=te,_=!1}}var L=!1,R=null,w=-1,A=5,N=-1;function D(){return!(t.unstable_now()-N<A)}function b(){if(R!==null){var z=t.unstable_now();N=z;var X=!0;try{X=R(!0,z)}finally{X?k():(L=!1,R=null)}}else L=!1}var k;if(typeof T=="function")k=function(){T(b)};else if(typeof MessageChannel<"u"){var ge=new MessageChannel,ht=ge.port2;ge.port1.onmessage=b,k=function(){ht.postMessage(null)}}else k=function(){x(b,0)};function Je(z){R=z,L||(L=!0,k())}function it(z,X){w=x(function(){z(t.unstable_now())},X)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(z){z.callback=null},t.unstable_continueExecution=function(){E||_||(E=!0,Je(U))},t.unstable_forceFrameRate=function(z){0>z||125<z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<z?Math.floor(1e3/z):5},t.unstable_getCurrentPriorityLevel=function(){return m},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(z){switch(m){case 1:case 2:case 3:var X=3;break;default:X=m}var te=m;m=X;try{return z()}finally{m=te}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(z,X){switch(z){case 1:case 2:case 3:case 4:case 5:break;default:z=3}var te=m;m=z;try{return X()}finally{m=te}},t.unstable_scheduleCallback=function(z,X,te){var Ee=t.unstable_now();switch(typeof te=="object"&&te!==null?(te=te.delay,te=typeof te=="number"&&0<te?Ee+te:Ee):te=Ee,z){case 1:var me=-1;break;case 2:me=250;break;case 5:me=1073741823;break;case 4:me=1e4;break;default:me=5e3}return me=te+me,z={id:h++,callback:X,priorityLevel:z,startTime:te,expirationTime:me,sortIndex:-1},te>Ee?(z.sortIndex=te,e(u,z),n(l)===null&&z===n(u)&&(P?(I(w),w=-1):P=!0,it(M,te-Ee))):(z.sortIndex=me,e(l,z),E||_||(E=!0,Je(U))),z},t.unstable_shouldYield=D,t.unstable_wrapCallback=function(z){var X=m;return function(){var te=m;m=X;try{return z.apply(this,arguments)}finally{m=te}}}})(UE);VE.exports=UE;var _R=VE.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ER=F,Xt=_R;function q(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var FE=new Set,na={};function Vi(t,e){Po(t,e),Po(t+"Capture",e)}function Po(t,e){for(na[t]=e,t=0;t<e.length;t++)FE.add(e[t])}var nr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),df=Object.prototype.hasOwnProperty,TR=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,ly={},uy={};function wR(t){return df.call(uy,t)?!0:df.call(ly,t)?!1:TR.test(t)?uy[t]=!0:(ly[t]=!0,!1)}function IR(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function SR(t,e,n,r){if(e===null||typeof e>"u"||IR(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Vt(t,e,n,r,i,o,s){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=o,this.removeEmptyString=s}var dt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){dt[t]=new Vt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];dt[e]=new Vt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){dt[t]=new Vt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){dt[t]=new Vt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){dt[t]=new Vt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){dt[t]=new Vt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){dt[t]=new Vt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){dt[t]=new Vt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){dt[t]=new Vt(t,5,!1,t.toLowerCase(),null,!1,!1)});var ep=/[\-:]([a-z])/g;function tp(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(ep,tp);dt[e]=new Vt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(ep,tp);dt[e]=new Vt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(ep,tp);dt[e]=new Vt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){dt[t]=new Vt(t,1,!1,t.toLowerCase(),null,!1,!1)});dt.xlinkHref=new Vt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){dt[t]=new Vt(t,1,!1,t.toLowerCase(),null,!0,!0)});function np(t,e,n,r){var i=dt.hasOwnProperty(e)?dt[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(SR(e,n,i,r)&&(n=null),r||i===null?wR(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var dr=ER.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,pl=Symbol.for("react.element"),to=Symbol.for("react.portal"),no=Symbol.for("react.fragment"),rp=Symbol.for("react.strict_mode"),ff=Symbol.for("react.profiler"),OE=Symbol.for("react.provider"),BE=Symbol.for("react.context"),ip=Symbol.for("react.forward_ref"),hf=Symbol.for("react.suspense"),pf=Symbol.for("react.suspense_list"),op=Symbol.for("react.memo"),Er=Symbol.for("react.lazy"),GE=Symbol.for("react.offscreen"),cy=Symbol.iterator;function vs(t){return t===null||typeof t!="object"?null:(t=cy&&t[cy]||t["@@iterator"],typeof t=="function"?t:null)}var Me=Object.assign,Td;function Ns(t){if(Td===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Td=e&&e[1]||""}return`
`+Td+t}var wd=!1;function Id(t,e){if(!t||wd)return"";wd=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){r=u}t.call(e.prototype)}else{try{throw Error()}catch(u){r=u}t()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),o=r.stack.split(`
`),s=i.length-1,a=o.length-1;1<=s&&0<=a&&i[s]!==o[a];)a--;for(;1<=s&&0<=a;s--,a--)if(i[s]!==o[a]){if(s!==1||a!==1)do if(s--,a--,0>a||i[s]!==o[a]){var l=`
`+i[s].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=s&&0<=a);break}}}finally{wd=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Ns(t):""}function CR(t){switch(t.tag){case 5:return Ns(t.type);case 16:return Ns("Lazy");case 13:return Ns("Suspense");case 19:return Ns("SuspenseList");case 0:case 2:case 15:return t=Id(t.type,!1),t;case 11:return t=Id(t.type.render,!1),t;case 1:return t=Id(t.type,!0),t;default:return""}}function mf(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case no:return"Fragment";case to:return"Portal";case ff:return"Profiler";case rp:return"StrictMode";case hf:return"Suspense";case pf:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case BE:return(t.displayName||"Context")+".Consumer";case OE:return(t._context.displayName||"Context")+".Provider";case ip:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case op:return e=t.displayName||null,e!==null?e:mf(t.type)||"Memo";case Er:e=t._payload,t=t._init;try{return mf(t(e))}catch{}}return null}function AR(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return mf(e);case 8:return e===rp?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Wr(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function HE(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function RR(t){var e=HE(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,o=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(s){r=""+s,o.call(this,s)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(s){r=""+s},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function ml(t){t._valueTracker||(t._valueTracker=RR(t))}function qE(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=HE(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function du(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function gf(t,e){var n=e.checked;return Me({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function dy(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Wr(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function $E(t,e){e=e.checked,e!=null&&np(t,"checked",e,!1)}function yf(t,e){$E(t,e);var n=Wr(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?vf(t,e.type,n):e.hasOwnProperty("defaultValue")&&vf(t,e.type,Wr(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function fy(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function vf(t,e,n){(e!=="number"||du(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var ks=Array.isArray;function yo(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Wr(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function _f(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(q(91));return Me({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function hy(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(q(92));if(ks(n)){if(1<n.length)throw Error(q(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Wr(n)}}function zE(t,e){var n=Wr(e.value),r=Wr(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function py(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function WE(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ef(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?WE(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var gl,KE=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(gl=gl||document.createElement("div"),gl.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=gl.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function ra(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Gs={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},xR=["Webkit","ms","Moz","O"];Object.keys(Gs).forEach(function(t){xR.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Gs[e]=Gs[t]})});function JE(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Gs.hasOwnProperty(t)&&Gs[t]?(""+e).trim():e+"px"}function YE(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=JE(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var PR=Me({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Tf(t,e){if(e){if(PR[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(q(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(q(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(q(61))}if(e.style!=null&&typeof e.style!="object")throw Error(q(62))}}function wf(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var If=null;function sp(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Sf=null,vo=null,_o=null;function my(t){if(t=ba(t)){if(typeof Sf!="function")throw Error(q(280));var e=t.stateNode;e&&(e=dc(e),Sf(t.stateNode,t.type,e))}}function jE(t){vo?_o?_o.push(t):_o=[t]:vo=t}function QE(){if(vo){var t=vo,e=_o;if(_o=vo=null,my(t),e)for(t=0;t<e.length;t++)my(e[t])}}function XE(t,e){return t(e)}function ZE(){}var Sd=!1;function eT(t,e,n){if(Sd)return t(e,n);Sd=!0;try{return XE(t,e,n)}finally{Sd=!1,(vo!==null||_o!==null)&&(ZE(),QE())}}function ia(t,e){var n=t.stateNode;if(n===null)return null;var r=dc(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(q(231,e,typeof n));return n}var Cf=!1;if(nr)try{var _s={};Object.defineProperty(_s,"passive",{get:function(){Cf=!0}}),window.addEventListener("test",_s,_s),window.removeEventListener("test",_s,_s)}catch{Cf=!1}function NR(t,e,n,r,i,o,s,a,l){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(h){this.onError(h)}}var Hs=!1,fu=null,hu=!1,Af=null,kR={onError:function(t){Hs=!0,fu=t}};function DR(t,e,n,r,i,o,s,a,l){Hs=!1,fu=null,NR.apply(kR,arguments)}function MR(t,e,n,r,i,o,s,a,l){if(DR.apply(this,arguments),Hs){if(Hs){var u=fu;Hs=!1,fu=null}else throw Error(q(198));hu||(hu=!0,Af=u)}}function Ui(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function tT(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function gy(t){if(Ui(t)!==t)throw Error(q(188))}function bR(t){var e=t.alternate;if(!e){if(e=Ui(t),e===null)throw Error(q(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var o=i.alternate;if(o===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return gy(i),t;if(o===r)return gy(i),e;o=o.sibling}throw Error(q(188))}if(n.return!==r.return)n=i,r=o;else{for(var s=!1,a=i.child;a;){if(a===n){s=!0,n=i,r=o;break}if(a===r){s=!0,r=i,n=o;break}a=a.sibling}if(!s){for(a=o.child;a;){if(a===n){s=!0,n=o,r=i;break}if(a===r){s=!0,r=o,n=i;break}a=a.sibling}if(!s)throw Error(q(189))}}if(n.alternate!==r)throw Error(q(190))}if(n.tag!==3)throw Error(q(188));return n.stateNode.current===n?t:e}function nT(t){return t=bR(t),t!==null?rT(t):null}function rT(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=rT(t);if(e!==null)return e;t=t.sibling}return null}var iT=Xt.unstable_scheduleCallback,yy=Xt.unstable_cancelCallback,LR=Xt.unstable_shouldYield,VR=Xt.unstable_requestPaint,Ge=Xt.unstable_now,UR=Xt.unstable_getCurrentPriorityLevel,ap=Xt.unstable_ImmediatePriority,oT=Xt.unstable_UserBlockingPriority,pu=Xt.unstable_NormalPriority,FR=Xt.unstable_LowPriority,sT=Xt.unstable_IdlePriority,ac=null,Mn=null;function OR(t){if(Mn&&typeof Mn.onCommitFiberRoot=="function")try{Mn.onCommitFiberRoot(ac,t,void 0,(t.current.flags&128)===128)}catch{}}var yn=Math.clz32?Math.clz32:HR,BR=Math.log,GR=Math.LN2;function HR(t){return t>>>=0,t===0?32:31-(BR(t)/GR|0)|0}var yl=64,vl=4194304;function Ds(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function mu(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,o=t.pingedLanes,s=n&268435455;if(s!==0){var a=s&~i;a!==0?r=Ds(a):(o&=s,o!==0&&(r=Ds(o)))}else s=n&~i,s!==0?r=Ds(s):o!==0&&(r=Ds(o));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,o=e&-e,i>=o||i===16&&(o&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-yn(e),i=1<<n,r|=t[n],e&=~i;return r}function qR(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function $R(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,o=t.pendingLanes;0<o;){var s=31-yn(o),a=1<<s,l=i[s];l===-1?(!(a&n)||a&r)&&(i[s]=qR(a,e)):l<=e&&(t.expiredLanes|=a),o&=~a}}function Rf(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function aT(){var t=yl;return yl<<=1,!(yl&4194240)&&(yl=64),t}function Cd(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Da(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-yn(e),t[e]=n}function zR(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-yn(n),o=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~o}}function lp(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-yn(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var ve=0;function lT(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var uT,up,cT,dT,fT,xf=!1,_l=[],br=null,Lr=null,Vr=null,oa=new Map,sa=new Map,wr=[],WR="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function vy(t,e){switch(t){case"focusin":case"focusout":br=null;break;case"dragenter":case"dragleave":Lr=null;break;case"mouseover":case"mouseout":Vr=null;break;case"pointerover":case"pointerout":oa.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":sa.delete(e.pointerId)}}function Es(t,e,n,r,i,o){return t===null||t.nativeEvent!==o?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[i]},e!==null&&(e=ba(e),e!==null&&up(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function KR(t,e,n,r,i){switch(e){case"focusin":return br=Es(br,t,e,n,r,i),!0;case"dragenter":return Lr=Es(Lr,t,e,n,r,i),!0;case"mouseover":return Vr=Es(Vr,t,e,n,r,i),!0;case"pointerover":var o=i.pointerId;return oa.set(o,Es(oa.get(o)||null,t,e,n,r,i)),!0;case"gotpointercapture":return o=i.pointerId,sa.set(o,Es(sa.get(o)||null,t,e,n,r,i)),!0}return!1}function hT(t){var e=gi(t.target);if(e!==null){var n=Ui(e);if(n!==null){if(e=n.tag,e===13){if(e=tT(n),e!==null){t.blockedOn=e,fT(t.priority,function(){cT(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function $l(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Pf(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);If=r,n.target.dispatchEvent(r),If=null}else return e=ba(n),e!==null&&up(e),t.blockedOn=n,!1;e.shift()}return!0}function _y(t,e,n){$l(t)&&n.delete(e)}function JR(){xf=!1,br!==null&&$l(br)&&(br=null),Lr!==null&&$l(Lr)&&(Lr=null),Vr!==null&&$l(Vr)&&(Vr=null),oa.forEach(_y),sa.forEach(_y)}function Ts(t,e){t.blockedOn===e&&(t.blockedOn=null,xf||(xf=!0,Xt.unstable_scheduleCallback(Xt.unstable_NormalPriority,JR)))}function aa(t){function e(i){return Ts(i,t)}if(0<_l.length){Ts(_l[0],t);for(var n=1;n<_l.length;n++){var r=_l[n];r.blockedOn===t&&(r.blockedOn=null)}}for(br!==null&&Ts(br,t),Lr!==null&&Ts(Lr,t),Vr!==null&&Ts(Vr,t),oa.forEach(e),sa.forEach(e),n=0;n<wr.length;n++)r=wr[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<wr.length&&(n=wr[0],n.blockedOn===null);)hT(n),n.blockedOn===null&&wr.shift()}var Eo=dr.ReactCurrentBatchConfig,gu=!0;function YR(t,e,n,r){var i=ve,o=Eo.transition;Eo.transition=null;try{ve=1,cp(t,e,n,r)}finally{ve=i,Eo.transition=o}}function jR(t,e,n,r){var i=ve,o=Eo.transition;Eo.transition=null;try{ve=4,cp(t,e,n,r)}finally{ve=i,Eo.transition=o}}function cp(t,e,n,r){if(gu){var i=Pf(t,e,n,r);if(i===null)Ld(t,e,r,yu,n),vy(t,r);else if(KR(i,t,e,n,r))r.stopPropagation();else if(vy(t,r),e&4&&-1<WR.indexOf(t)){for(;i!==null;){var o=ba(i);if(o!==null&&uT(o),o=Pf(t,e,n,r),o===null&&Ld(t,e,r,yu,n),o===i)break;i=o}i!==null&&r.stopPropagation()}else Ld(t,e,r,null,n)}}var yu=null;function Pf(t,e,n,r){if(yu=null,t=sp(r),t=gi(t),t!==null)if(e=Ui(t),e===null)t=null;else if(n=e.tag,n===13){if(t=tT(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return yu=t,null}function pT(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(UR()){case ap:return 1;case oT:return 4;case pu:case FR:return 16;case sT:return 536870912;default:return 16}default:return 16}}var Nr=null,dp=null,zl=null;function mT(){if(zl)return zl;var t,e=dp,n=e.length,r,i="value"in Nr?Nr.value:Nr.textContent,o=i.length;for(t=0;t<n&&e[t]===i[t];t++);var s=n-t;for(r=1;r<=s&&e[n-r]===i[o-r];r++);return zl=i.slice(t,1<r?1-r:void 0)}function Wl(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function El(){return!0}function Ey(){return!1}function en(t){function e(n,r,i,o,s){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=o,this.target=s,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(o):o[a]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?El:Ey,this.isPropagationStopped=Ey,this}return Me(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=El)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=El)},persist:function(){},isPersistent:El}),e}var zo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},fp=en(zo),Ma=Me({},zo,{view:0,detail:0}),QR=en(Ma),Ad,Rd,ws,lc=Me({},Ma,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:hp,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==ws&&(ws&&t.type==="mousemove"?(Ad=t.screenX-ws.screenX,Rd=t.screenY-ws.screenY):Rd=Ad=0,ws=t),Ad)},movementY:function(t){return"movementY"in t?t.movementY:Rd}}),Ty=en(lc),XR=Me({},lc,{dataTransfer:0}),ZR=en(XR),ex=Me({},Ma,{relatedTarget:0}),xd=en(ex),tx=Me({},zo,{animationName:0,elapsedTime:0,pseudoElement:0}),nx=en(tx),rx=Me({},zo,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),ix=en(rx),ox=Me({},zo,{data:0}),wy=en(ox),sx={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ax={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},lx={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ux(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=lx[t])?!!e[t]:!1}function hp(){return ux}var cx=Me({},Ma,{key:function(t){if(t.key){var e=sx[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Wl(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?ax[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:hp,charCode:function(t){return t.type==="keypress"?Wl(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Wl(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),dx=en(cx),fx=Me({},lc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Iy=en(fx),hx=Me({},Ma,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:hp}),px=en(hx),mx=Me({},zo,{propertyName:0,elapsedTime:0,pseudoElement:0}),gx=en(mx),yx=Me({},lc,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),vx=en(yx),_x=[9,13,27,32],pp=nr&&"CompositionEvent"in window,qs=null;nr&&"documentMode"in document&&(qs=document.documentMode);var Ex=nr&&"TextEvent"in window&&!qs,gT=nr&&(!pp||qs&&8<qs&&11>=qs),Sy=" ",Cy=!1;function yT(t,e){switch(t){case"keyup":return _x.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function vT(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var ro=!1;function Tx(t,e){switch(t){case"compositionend":return vT(e);case"keypress":return e.which!==32?null:(Cy=!0,Sy);case"textInput":return t=e.data,t===Sy&&Cy?null:t;default:return null}}function wx(t,e){if(ro)return t==="compositionend"||!pp&&yT(t,e)?(t=mT(),zl=dp=Nr=null,ro=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return gT&&e.locale!=="ko"?null:e.data;default:return null}}var Ix={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ay(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!Ix[t.type]:e==="textarea"}function _T(t,e,n,r){jE(r),e=vu(e,"onChange"),0<e.length&&(n=new fp("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var $s=null,la=null;function Sx(t){NT(t,0)}function uc(t){var e=so(t);if(qE(e))return t}function Cx(t,e){if(t==="change")return e}var ET=!1;if(nr){var Pd;if(nr){var Nd="oninput"in document;if(!Nd){var Ry=document.createElement("div");Ry.setAttribute("oninput","return;"),Nd=typeof Ry.oninput=="function"}Pd=Nd}else Pd=!1;ET=Pd&&(!document.documentMode||9<document.documentMode)}function xy(){$s&&($s.detachEvent("onpropertychange",TT),la=$s=null)}function TT(t){if(t.propertyName==="value"&&uc(la)){var e=[];_T(e,la,t,sp(t)),eT(Sx,e)}}function Ax(t,e,n){t==="focusin"?(xy(),$s=e,la=n,$s.attachEvent("onpropertychange",TT)):t==="focusout"&&xy()}function Rx(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return uc(la)}function xx(t,e){if(t==="click")return uc(e)}function Px(t,e){if(t==="input"||t==="change")return uc(e)}function Nx(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var wn=typeof Object.is=="function"?Object.is:Nx;function ua(t,e){if(wn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!df.call(e,i)||!wn(t[i],e[i]))return!1}return!0}function Py(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Ny(t,e){var n=Py(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Py(n)}}function wT(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?wT(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function IT(){for(var t=window,e=du();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=du(t.document)}return e}function mp(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function kx(t){var e=IT(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&wT(n.ownerDocument.documentElement,n)){if(r!==null&&mp(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,o=Math.min(r.start,i);r=r.end===void 0?o:Math.min(r.end,i),!t.extend&&o>r&&(i=r,r=o,o=i),i=Ny(n,o);var s=Ny(n,r);i&&s&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==s.node||t.focusOffset!==s.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),o>r?(t.addRange(e),t.extend(s.node,s.offset)):(e.setEnd(s.node,s.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var Dx=nr&&"documentMode"in document&&11>=document.documentMode,io=null,Nf=null,zs=null,kf=!1;function ky(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;kf||io==null||io!==du(r)||(r=io,"selectionStart"in r&&mp(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),zs&&ua(zs,r)||(zs=r,r=vu(Nf,"onSelect"),0<r.length&&(e=new fp("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=io)))}function Tl(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var oo={animationend:Tl("Animation","AnimationEnd"),animationiteration:Tl("Animation","AnimationIteration"),animationstart:Tl("Animation","AnimationStart"),transitionend:Tl("Transition","TransitionEnd")},kd={},ST={};nr&&(ST=document.createElement("div").style,"AnimationEvent"in window||(delete oo.animationend.animation,delete oo.animationiteration.animation,delete oo.animationstart.animation),"TransitionEvent"in window||delete oo.transitionend.transition);function cc(t){if(kd[t])return kd[t];if(!oo[t])return t;var e=oo[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in ST)return kd[t]=e[n];return t}var CT=cc("animationend"),AT=cc("animationiteration"),RT=cc("animationstart"),xT=cc("transitionend"),PT=new Map,Dy="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Zr(t,e){PT.set(t,e),Vi(e,[t])}for(var Dd=0;Dd<Dy.length;Dd++){var Md=Dy[Dd],Mx=Md.toLowerCase(),bx=Md[0].toUpperCase()+Md.slice(1);Zr(Mx,"on"+bx)}Zr(CT,"onAnimationEnd");Zr(AT,"onAnimationIteration");Zr(RT,"onAnimationStart");Zr("dblclick","onDoubleClick");Zr("focusin","onFocus");Zr("focusout","onBlur");Zr(xT,"onTransitionEnd");Po("onMouseEnter",["mouseout","mouseover"]);Po("onMouseLeave",["mouseout","mouseover"]);Po("onPointerEnter",["pointerout","pointerover"]);Po("onPointerLeave",["pointerout","pointerover"]);Vi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Vi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Vi("onBeforeInput",["compositionend","keypress","textInput","paste"]);Vi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Vi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Vi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ms="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Lx=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ms));function My(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,MR(r,e,void 0,t),t.currentTarget=null}function NT(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var o=void 0;if(e)for(var s=r.length-1;0<=s;s--){var a=r[s],l=a.instance,u=a.currentTarget;if(a=a.listener,l!==o&&i.isPropagationStopped())break e;My(i,a,u),o=l}else for(s=0;s<r.length;s++){if(a=r[s],l=a.instance,u=a.currentTarget,a=a.listener,l!==o&&i.isPropagationStopped())break e;My(i,a,u),o=l}}}if(hu)throw t=Af,hu=!1,Af=null,t}function Ae(t,e){var n=e[Vf];n===void 0&&(n=e[Vf]=new Set);var r=t+"__bubble";n.has(r)||(kT(e,t,2,!1),n.add(r))}function bd(t,e,n){var r=0;e&&(r|=4),kT(n,t,r,e)}var wl="_reactListening"+Math.random().toString(36).slice(2);function ca(t){if(!t[wl]){t[wl]=!0,FE.forEach(function(n){n!=="selectionchange"&&(Lx.has(n)||bd(n,!1,t),bd(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[wl]||(e[wl]=!0,bd("selectionchange",!1,e))}}function kT(t,e,n,r){switch(pT(e)){case 1:var i=YR;break;case 4:i=jR;break;default:i=cp}n=i.bind(null,e,n,t),i=void 0,!Cf||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function Ld(t,e,n,r,i){var o=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var s=r.tag;if(s===3||s===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(s===4)for(s=r.return;s!==null;){var l=s.tag;if((l===3||l===4)&&(l=s.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;s=s.return}for(;a!==null;){if(s=gi(a),s===null)return;if(l=s.tag,l===5||l===6){r=o=s;continue e}a=a.parentNode}}r=r.return}eT(function(){var u=o,h=sp(n),p=[];e:{var m=PT.get(t);if(m!==void 0){var _=fp,E=t;switch(t){case"keypress":if(Wl(n)===0)break e;case"keydown":case"keyup":_=dx;break;case"focusin":E="focus",_=xd;break;case"focusout":E="blur",_=xd;break;case"beforeblur":case"afterblur":_=xd;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":_=Ty;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":_=ZR;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":_=px;break;case CT:case AT:case RT:_=nx;break;case xT:_=gx;break;case"scroll":_=QR;break;case"wheel":_=vx;break;case"copy":case"cut":case"paste":_=ix;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":_=Iy}var P=(e&4)!==0,x=!P&&t==="scroll",I=P?m!==null?m+"Capture":null:m;P=[];for(var T=u,C;T!==null;){C=T;var M=C.stateNode;if(C.tag===5&&M!==null&&(C=M,I!==null&&(M=ia(T,I),M!=null&&P.push(da(T,M,C)))),x)break;T=T.return}0<P.length&&(m=new _(m,E,null,n,h),p.push({event:m,listeners:P}))}}if(!(e&7)){e:{if(m=t==="mouseover"||t==="pointerover",_=t==="mouseout"||t==="pointerout",m&&n!==If&&(E=n.relatedTarget||n.fromElement)&&(gi(E)||E[rr]))break e;if((_||m)&&(m=h.window===h?h:(m=h.ownerDocument)?m.defaultView||m.parentWindow:window,_?(E=n.relatedTarget||n.toElement,_=u,E=E?gi(E):null,E!==null&&(x=Ui(E),E!==x||E.tag!==5&&E.tag!==6)&&(E=null)):(_=null,E=u),_!==E)){if(P=Ty,M="onMouseLeave",I="onMouseEnter",T="mouse",(t==="pointerout"||t==="pointerover")&&(P=Iy,M="onPointerLeave",I="onPointerEnter",T="pointer"),x=_==null?m:so(_),C=E==null?m:so(E),m=new P(M,T+"leave",_,n,h),m.target=x,m.relatedTarget=C,M=null,gi(h)===u&&(P=new P(I,T+"enter",E,n,h),P.target=C,P.relatedTarget=x,M=P),x=M,_&&E)t:{for(P=_,I=E,T=0,C=P;C;C=ji(C))T++;for(C=0,M=I;M;M=ji(M))C++;for(;0<T-C;)P=ji(P),T--;for(;0<C-T;)I=ji(I),C--;for(;T--;){if(P===I||I!==null&&P===I.alternate)break t;P=ji(P),I=ji(I)}P=null}else P=null;_!==null&&by(p,m,_,P,!1),E!==null&&x!==null&&by(p,x,E,P,!0)}}e:{if(m=u?so(u):window,_=m.nodeName&&m.nodeName.toLowerCase(),_==="select"||_==="input"&&m.type==="file")var U=Cx;else if(Ay(m))if(ET)U=Px;else{U=Rx;var L=Ax}else(_=m.nodeName)&&_.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(U=xx);if(U&&(U=U(t,u))){_T(p,U,n,h);break e}L&&L(t,m,u),t==="focusout"&&(L=m._wrapperState)&&L.controlled&&m.type==="number"&&vf(m,"number",m.value)}switch(L=u?so(u):window,t){case"focusin":(Ay(L)||L.contentEditable==="true")&&(io=L,Nf=u,zs=null);break;case"focusout":zs=Nf=io=null;break;case"mousedown":kf=!0;break;case"contextmenu":case"mouseup":case"dragend":kf=!1,ky(p,n,h);break;case"selectionchange":if(Dx)break;case"keydown":case"keyup":ky(p,n,h)}var R;if(pp)e:{switch(t){case"compositionstart":var w="onCompositionStart";break e;case"compositionend":w="onCompositionEnd";break e;case"compositionupdate":w="onCompositionUpdate";break e}w=void 0}else ro?yT(t,n)&&(w="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(w="onCompositionStart");w&&(gT&&n.locale!=="ko"&&(ro||w!=="onCompositionStart"?w==="onCompositionEnd"&&ro&&(R=mT()):(Nr=h,dp="value"in Nr?Nr.value:Nr.textContent,ro=!0)),L=vu(u,w),0<L.length&&(w=new wy(w,t,null,n,h),p.push({event:w,listeners:L}),R?w.data=R:(R=vT(n),R!==null&&(w.data=R)))),(R=Ex?Tx(t,n):wx(t,n))&&(u=vu(u,"onBeforeInput"),0<u.length&&(h=new wy("onBeforeInput","beforeinput",null,n,h),p.push({event:h,listeners:u}),h.data=R))}NT(p,e)})}function da(t,e,n){return{instance:t,listener:e,currentTarget:n}}function vu(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,o=i.stateNode;i.tag===5&&o!==null&&(i=o,o=ia(t,n),o!=null&&r.unshift(da(t,o,i)),o=ia(t,e),o!=null&&r.push(da(t,o,i))),t=t.return}return r}function ji(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function by(t,e,n,r,i){for(var o=e._reactName,s=[];n!==null&&n!==r;){var a=n,l=a.alternate,u=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&u!==null&&(a=u,i?(l=ia(n,o),l!=null&&s.unshift(da(n,l,a))):i||(l=ia(n,o),l!=null&&s.push(da(n,l,a)))),n=n.return}s.length!==0&&t.push({event:e,listeners:s})}var Vx=/\r\n?/g,Ux=/\u0000|\uFFFD/g;function Ly(t){return(typeof t=="string"?t:""+t).replace(Vx,`
`).replace(Ux,"")}function Il(t,e,n){if(e=Ly(e),Ly(t)!==e&&n)throw Error(q(425))}function _u(){}var Df=null,Mf=null;function bf(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Lf=typeof setTimeout=="function"?setTimeout:void 0,Fx=typeof clearTimeout=="function"?clearTimeout:void 0,Vy=typeof Promise=="function"?Promise:void 0,Ox=typeof queueMicrotask=="function"?queueMicrotask:typeof Vy<"u"?function(t){return Vy.resolve(null).then(t).catch(Bx)}:Lf;function Bx(t){setTimeout(function(){throw t})}function Vd(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),aa(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);aa(e)}function Ur(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Uy(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Wo=Math.random().toString(36).slice(2),Nn="__reactFiber$"+Wo,fa="__reactProps$"+Wo,rr="__reactContainer$"+Wo,Vf="__reactEvents$"+Wo,Gx="__reactListeners$"+Wo,Hx="__reactHandles$"+Wo;function gi(t){var e=t[Nn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[rr]||n[Nn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Uy(t);t!==null;){if(n=t[Nn])return n;t=Uy(t)}return e}t=n,n=t.parentNode}return null}function ba(t){return t=t[Nn]||t[rr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function so(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(q(33))}function dc(t){return t[fa]||null}var Uf=[],ao=-1;function ei(t){return{current:t}}function xe(t){0>ao||(t.current=Uf[ao],Uf[ao]=null,ao--)}function Se(t,e){ao++,Uf[ao]=t.current,t.current=e}var Kr={},St=ei(Kr),Gt=ei(!1),Si=Kr;function No(t,e){var n=t.type.contextTypes;if(!n)return Kr;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},o;for(o in n)i[o]=e[o];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function Ht(t){return t=t.childContextTypes,t!=null}function Eu(){xe(Gt),xe(St)}function Fy(t,e,n){if(St.current!==Kr)throw Error(q(168));Se(St,e),Se(Gt,n)}function DT(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(q(108,AR(t)||"Unknown",i));return Me({},n,r)}function Tu(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Kr,Si=St.current,Se(St,t),Se(Gt,Gt.current),!0}function Oy(t,e,n){var r=t.stateNode;if(!r)throw Error(q(169));n?(t=DT(t,e,Si),r.__reactInternalMemoizedMergedChildContext=t,xe(Gt),xe(St),Se(St,t)):xe(Gt),Se(Gt,n)}var Wn=null,fc=!1,Ud=!1;function MT(t){Wn===null?Wn=[t]:Wn.push(t)}function qx(t){fc=!0,MT(t)}function ti(){if(!Ud&&Wn!==null){Ud=!0;var t=0,e=ve;try{var n=Wn;for(ve=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Wn=null,fc=!1}catch(i){throw Wn!==null&&(Wn=Wn.slice(t+1)),iT(ap,ti),i}finally{ve=e,Ud=!1}}return null}var lo=[],uo=0,wu=null,Iu=0,nn=[],rn=0,Ci=null,Kn=1,Jn="";function fi(t,e){lo[uo++]=Iu,lo[uo++]=wu,wu=t,Iu=e}function bT(t,e,n){nn[rn++]=Kn,nn[rn++]=Jn,nn[rn++]=Ci,Ci=t;var r=Kn;t=Jn;var i=32-yn(r)-1;r&=~(1<<i),n+=1;var o=32-yn(e)+i;if(30<o){var s=i-i%5;o=(r&(1<<s)-1).toString(32),r>>=s,i-=s,Kn=1<<32-yn(e)+i|n<<i|r,Jn=o+t}else Kn=1<<o|n<<i|r,Jn=t}function gp(t){t.return!==null&&(fi(t,1),bT(t,1,0))}function yp(t){for(;t===wu;)wu=lo[--uo],lo[uo]=null,Iu=lo[--uo],lo[uo]=null;for(;t===Ci;)Ci=nn[--rn],nn[rn]=null,Jn=nn[--rn],nn[rn]=null,Kn=nn[--rn],nn[rn]=null}var Qt=null,Jt=null,Ne=!1,mn=null;function LT(t,e){var n=on(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function By(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Qt=t,Jt=Ur(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Qt=t,Jt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Ci!==null?{id:Kn,overflow:Jn}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=on(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Qt=t,Jt=null,!0):!1;default:return!1}}function Ff(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Of(t){if(Ne){var e=Jt;if(e){var n=e;if(!By(t,e)){if(Ff(t))throw Error(q(418));e=Ur(n.nextSibling);var r=Qt;e&&By(t,e)?LT(r,n):(t.flags=t.flags&-4097|2,Ne=!1,Qt=t)}}else{if(Ff(t))throw Error(q(418));t.flags=t.flags&-4097|2,Ne=!1,Qt=t}}}function Gy(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Qt=t}function Sl(t){if(t!==Qt)return!1;if(!Ne)return Gy(t),Ne=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!bf(t.type,t.memoizedProps)),e&&(e=Jt)){if(Ff(t))throw VT(),Error(q(418));for(;e;)LT(t,e),e=Ur(e.nextSibling)}if(Gy(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(q(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Jt=Ur(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Jt=null}}else Jt=Qt?Ur(t.stateNode.nextSibling):null;return!0}function VT(){for(var t=Jt;t;)t=Ur(t.nextSibling)}function ko(){Jt=Qt=null,Ne=!1}function vp(t){mn===null?mn=[t]:mn.push(t)}var $x=dr.ReactCurrentBatchConfig;function Is(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(q(309));var r=n.stateNode}if(!r)throw Error(q(147,t));var i=r,o=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===o?e.ref:(e=function(s){var a=i.refs;s===null?delete a[o]:a[o]=s},e._stringRef=o,e)}if(typeof t!="string")throw Error(q(284));if(!n._owner)throw Error(q(290,t))}return t}function Cl(t,e){throw t=Object.prototype.toString.call(e),Error(q(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Hy(t){var e=t._init;return e(t._payload)}function UT(t){function e(I,T){if(t){var C=I.deletions;C===null?(I.deletions=[T],I.flags|=16):C.push(T)}}function n(I,T){if(!t)return null;for(;T!==null;)e(I,T),T=T.sibling;return null}function r(I,T){for(I=new Map;T!==null;)T.key!==null?I.set(T.key,T):I.set(T.index,T),T=T.sibling;return I}function i(I,T){return I=Gr(I,T),I.index=0,I.sibling=null,I}function o(I,T,C){return I.index=C,t?(C=I.alternate,C!==null?(C=C.index,C<T?(I.flags|=2,T):C):(I.flags|=2,T)):(I.flags|=1048576,T)}function s(I){return t&&I.alternate===null&&(I.flags|=2),I}function a(I,T,C,M){return T===null||T.tag!==6?(T=$d(C,I.mode,M),T.return=I,T):(T=i(T,C),T.return=I,T)}function l(I,T,C,M){var U=C.type;return U===no?h(I,T,C.props.children,M,C.key):T!==null&&(T.elementType===U||typeof U=="object"&&U!==null&&U.$$typeof===Er&&Hy(U)===T.type)?(M=i(T,C.props),M.ref=Is(I,T,C),M.return=I,M):(M=Zl(C.type,C.key,C.props,null,I.mode,M),M.ref=Is(I,T,C),M.return=I,M)}function u(I,T,C,M){return T===null||T.tag!==4||T.stateNode.containerInfo!==C.containerInfo||T.stateNode.implementation!==C.implementation?(T=zd(C,I.mode,M),T.return=I,T):(T=i(T,C.children||[]),T.return=I,T)}function h(I,T,C,M,U){return T===null||T.tag!==7?(T=Ti(C,I.mode,M,U),T.return=I,T):(T=i(T,C),T.return=I,T)}function p(I,T,C){if(typeof T=="string"&&T!==""||typeof T=="number")return T=$d(""+T,I.mode,C),T.return=I,T;if(typeof T=="object"&&T!==null){switch(T.$$typeof){case pl:return C=Zl(T.type,T.key,T.props,null,I.mode,C),C.ref=Is(I,null,T),C.return=I,C;case to:return T=zd(T,I.mode,C),T.return=I,T;case Er:var M=T._init;return p(I,M(T._payload),C)}if(ks(T)||vs(T))return T=Ti(T,I.mode,C,null),T.return=I,T;Cl(I,T)}return null}function m(I,T,C,M){var U=T!==null?T.key:null;if(typeof C=="string"&&C!==""||typeof C=="number")return U!==null?null:a(I,T,""+C,M);if(typeof C=="object"&&C!==null){switch(C.$$typeof){case pl:return C.key===U?l(I,T,C,M):null;case to:return C.key===U?u(I,T,C,M):null;case Er:return U=C._init,m(I,T,U(C._payload),M)}if(ks(C)||vs(C))return U!==null?null:h(I,T,C,M,null);Cl(I,C)}return null}function _(I,T,C,M,U){if(typeof M=="string"&&M!==""||typeof M=="number")return I=I.get(C)||null,a(T,I,""+M,U);if(typeof M=="object"&&M!==null){switch(M.$$typeof){case pl:return I=I.get(M.key===null?C:M.key)||null,l(T,I,M,U);case to:return I=I.get(M.key===null?C:M.key)||null,u(T,I,M,U);case Er:var L=M._init;return _(I,T,C,L(M._payload),U)}if(ks(M)||vs(M))return I=I.get(C)||null,h(T,I,M,U,null);Cl(T,M)}return null}function E(I,T,C,M){for(var U=null,L=null,R=T,w=T=0,A=null;R!==null&&w<C.length;w++){R.index>w?(A=R,R=null):A=R.sibling;var N=m(I,R,C[w],M);if(N===null){R===null&&(R=A);break}t&&R&&N.alternate===null&&e(I,R),T=o(N,T,w),L===null?U=N:L.sibling=N,L=N,R=A}if(w===C.length)return n(I,R),Ne&&fi(I,w),U;if(R===null){for(;w<C.length;w++)R=p(I,C[w],M),R!==null&&(T=o(R,T,w),L===null?U=R:L.sibling=R,L=R);return Ne&&fi(I,w),U}for(R=r(I,R);w<C.length;w++)A=_(R,I,w,C[w],M),A!==null&&(t&&A.alternate!==null&&R.delete(A.key===null?w:A.key),T=o(A,T,w),L===null?U=A:L.sibling=A,L=A);return t&&R.forEach(function(D){return e(I,D)}),Ne&&fi(I,w),U}function P(I,T,C,M){var U=vs(C);if(typeof U!="function")throw Error(q(150));if(C=U.call(C),C==null)throw Error(q(151));for(var L=U=null,R=T,w=T=0,A=null,N=C.next();R!==null&&!N.done;w++,N=C.next()){R.index>w?(A=R,R=null):A=R.sibling;var D=m(I,R,N.value,M);if(D===null){R===null&&(R=A);break}t&&R&&D.alternate===null&&e(I,R),T=o(D,T,w),L===null?U=D:L.sibling=D,L=D,R=A}if(N.done)return n(I,R),Ne&&fi(I,w),U;if(R===null){for(;!N.done;w++,N=C.next())N=p(I,N.value,M),N!==null&&(T=o(N,T,w),L===null?U=N:L.sibling=N,L=N);return Ne&&fi(I,w),U}for(R=r(I,R);!N.done;w++,N=C.next())N=_(R,I,w,N.value,M),N!==null&&(t&&N.alternate!==null&&R.delete(N.key===null?w:N.key),T=o(N,T,w),L===null?U=N:L.sibling=N,L=N);return t&&R.forEach(function(b){return e(I,b)}),Ne&&fi(I,w),U}function x(I,T,C,M){if(typeof C=="object"&&C!==null&&C.type===no&&C.key===null&&(C=C.props.children),typeof C=="object"&&C!==null){switch(C.$$typeof){case pl:e:{for(var U=C.key,L=T;L!==null;){if(L.key===U){if(U=C.type,U===no){if(L.tag===7){n(I,L.sibling),T=i(L,C.props.children),T.return=I,I=T;break e}}else if(L.elementType===U||typeof U=="object"&&U!==null&&U.$$typeof===Er&&Hy(U)===L.type){n(I,L.sibling),T=i(L,C.props),T.ref=Is(I,L,C),T.return=I,I=T;break e}n(I,L);break}else e(I,L);L=L.sibling}C.type===no?(T=Ti(C.props.children,I.mode,M,C.key),T.return=I,I=T):(M=Zl(C.type,C.key,C.props,null,I.mode,M),M.ref=Is(I,T,C),M.return=I,I=M)}return s(I);case to:e:{for(L=C.key;T!==null;){if(T.key===L)if(T.tag===4&&T.stateNode.containerInfo===C.containerInfo&&T.stateNode.implementation===C.implementation){n(I,T.sibling),T=i(T,C.children||[]),T.return=I,I=T;break e}else{n(I,T);break}else e(I,T);T=T.sibling}T=zd(C,I.mode,M),T.return=I,I=T}return s(I);case Er:return L=C._init,x(I,T,L(C._payload),M)}if(ks(C))return E(I,T,C,M);if(vs(C))return P(I,T,C,M);Cl(I,C)}return typeof C=="string"&&C!==""||typeof C=="number"?(C=""+C,T!==null&&T.tag===6?(n(I,T.sibling),T=i(T,C),T.return=I,I=T):(n(I,T),T=$d(C,I.mode,M),T.return=I,I=T),s(I)):n(I,T)}return x}var Do=UT(!0),FT=UT(!1),Su=ei(null),Cu=null,co=null,_p=null;function Ep(){_p=co=Cu=null}function Tp(t){var e=Su.current;xe(Su),t._currentValue=e}function Bf(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function To(t,e){Cu=t,_p=co=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Bt=!0),t.firstContext=null)}function ln(t){var e=t._currentValue;if(_p!==t)if(t={context:t,memoizedValue:e,next:null},co===null){if(Cu===null)throw Error(q(308));co=t,Cu.dependencies={lanes:0,firstContext:t}}else co=co.next=t;return e}var yi=null;function wp(t){yi===null?yi=[t]:yi.push(t)}function OT(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,wp(e)):(n.next=i.next,i.next=n),e.interleaved=n,ir(t,r)}function ir(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Tr=!1;function Ip(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function BT(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Zn(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Fr(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,de&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,ir(t,n)}return i=r.interleaved,i===null?(e.next=e,wp(r)):(e.next=i.next,i.next=e),r.interleaved=e,ir(t,n)}function Kl(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,lp(t,n)}}function qy(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var s={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};o===null?i=o=s:o=o.next=s,n=n.next}while(n!==null);o===null?i=o=e:o=o.next=e}else i=o=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Au(t,e,n,r){var i=t.updateQueue;Tr=!1;var o=i.firstBaseUpdate,s=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,u=l.next;l.next=null,s===null?o=u:s.next=u,s=l;var h=t.alternate;h!==null&&(h=h.updateQueue,a=h.lastBaseUpdate,a!==s&&(a===null?h.firstBaseUpdate=u:a.next=u,h.lastBaseUpdate=l))}if(o!==null){var p=i.baseState;s=0,h=u=l=null,a=o;do{var m=a.lane,_=a.eventTime;if((r&m)===m){h!==null&&(h=h.next={eventTime:_,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var E=t,P=a;switch(m=e,_=n,P.tag){case 1:if(E=P.payload,typeof E=="function"){p=E.call(_,p,m);break e}p=E;break e;case 3:E.flags=E.flags&-65537|128;case 0:if(E=P.payload,m=typeof E=="function"?E.call(_,p,m):E,m==null)break e;p=Me({},p,m);break e;case 2:Tr=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,m=i.effects,m===null?i.effects=[a]:m.push(a))}else _={eventTime:_,lane:m,tag:a.tag,payload:a.payload,callback:a.callback,next:null},h===null?(u=h=_,l=p):h=h.next=_,s|=m;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;m=a,a=m.next,m.next=null,i.lastBaseUpdate=m,i.shared.pending=null}}while(!0);if(h===null&&(l=p),i.baseState=l,i.firstBaseUpdate=u,i.lastBaseUpdate=h,e=i.shared.interleaved,e!==null){i=e;do s|=i.lane,i=i.next;while(i!==e)}else o===null&&(i.shared.lanes=0);Ri|=s,t.lanes=s,t.memoizedState=p}}function $y(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(q(191,i));i.call(r)}}}var La={},bn=ei(La),ha=ei(La),pa=ei(La);function vi(t){if(t===La)throw Error(q(174));return t}function Sp(t,e){switch(Se(pa,e),Se(ha,t),Se(bn,La),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Ef(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Ef(e,t)}xe(bn),Se(bn,e)}function Mo(){xe(bn),xe(ha),xe(pa)}function GT(t){vi(pa.current);var e=vi(bn.current),n=Ef(e,t.type);e!==n&&(Se(ha,t),Se(bn,n))}function Cp(t){ha.current===t&&(xe(bn),xe(ha))}var ke=ei(0);function Ru(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Fd=[];function Ap(){for(var t=0;t<Fd.length;t++)Fd[t]._workInProgressVersionPrimary=null;Fd.length=0}var Jl=dr.ReactCurrentDispatcher,Od=dr.ReactCurrentBatchConfig,Ai=0,De=null,Ye=null,et=null,xu=!1,Ws=!1,ma=0,zx=0;function yt(){throw Error(q(321))}function Rp(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!wn(t[n],e[n]))return!1;return!0}function xp(t,e,n,r,i,o){if(Ai=o,De=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Jl.current=t===null||t.memoizedState===null?Yx:jx,t=n(r,i),Ws){o=0;do{if(Ws=!1,ma=0,25<=o)throw Error(q(301));o+=1,et=Ye=null,e.updateQueue=null,Jl.current=Qx,t=n(r,i)}while(Ws)}if(Jl.current=Pu,e=Ye!==null&&Ye.next!==null,Ai=0,et=Ye=De=null,xu=!1,e)throw Error(q(300));return t}function Pp(){var t=ma!==0;return ma=0,t}function Pn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return et===null?De.memoizedState=et=t:et=et.next=t,et}function un(){if(Ye===null){var t=De.alternate;t=t!==null?t.memoizedState:null}else t=Ye.next;var e=et===null?De.memoizedState:et.next;if(e!==null)et=e,Ye=t;else{if(t===null)throw Error(q(310));Ye=t,t={memoizedState:Ye.memoizedState,baseState:Ye.baseState,baseQueue:Ye.baseQueue,queue:Ye.queue,next:null},et===null?De.memoizedState=et=t:et=et.next=t}return et}function ga(t,e){return typeof e=="function"?e(t):e}function Bd(t){var e=un(),n=e.queue;if(n===null)throw Error(q(311));n.lastRenderedReducer=t;var r=Ye,i=r.baseQueue,o=n.pending;if(o!==null){if(i!==null){var s=i.next;i.next=o.next,o.next=s}r.baseQueue=i=o,n.pending=null}if(i!==null){o=i.next,r=r.baseState;var a=s=null,l=null,u=o;do{var h=u.lane;if((Ai&h)===h)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:t(r,u.action);else{var p={lane:h,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(a=l=p,s=r):l=l.next=p,De.lanes|=h,Ri|=h}u=u.next}while(u!==null&&u!==o);l===null?s=r:l.next=a,wn(r,e.memoizedState)||(Bt=!0),e.memoizedState=r,e.baseState=s,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do o=i.lane,De.lanes|=o,Ri|=o,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Gd(t){var e=un(),n=e.queue;if(n===null)throw Error(q(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,o=e.memoizedState;if(i!==null){n.pending=null;var s=i=i.next;do o=t(o,s.action),s=s.next;while(s!==i);wn(o,e.memoizedState)||(Bt=!0),e.memoizedState=o,e.baseQueue===null&&(e.baseState=o),n.lastRenderedState=o}return[o,r]}function HT(){}function qT(t,e){var n=De,r=un(),i=e(),o=!wn(r.memoizedState,i);if(o&&(r.memoizedState=i,Bt=!0),r=r.queue,Np(WT.bind(null,n,r,t),[t]),r.getSnapshot!==e||o||et!==null&&et.memoizedState.tag&1){if(n.flags|=2048,ya(9,zT.bind(null,n,r,i,e),void 0,null),tt===null)throw Error(q(349));Ai&30||$T(n,e,i)}return i}function $T(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=De.updateQueue,e===null?(e={lastEffect:null,stores:null},De.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function zT(t,e,n,r){e.value=n,e.getSnapshot=r,KT(e)&&JT(t)}function WT(t,e,n){return n(function(){KT(e)&&JT(t)})}function KT(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!wn(t,n)}catch{return!0}}function JT(t){var e=ir(t,1);e!==null&&vn(e,t,1,-1)}function zy(t){var e=Pn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ga,lastRenderedState:t},e.queue=t,t=t.dispatch=Jx.bind(null,De,t),[e.memoizedState,t]}function ya(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=De.updateQueue,e===null?(e={lastEffect:null,stores:null},De.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function YT(){return un().memoizedState}function Yl(t,e,n,r){var i=Pn();De.flags|=t,i.memoizedState=ya(1|e,n,void 0,r===void 0?null:r)}function hc(t,e,n,r){var i=un();r=r===void 0?null:r;var o=void 0;if(Ye!==null){var s=Ye.memoizedState;if(o=s.destroy,r!==null&&Rp(r,s.deps)){i.memoizedState=ya(e,n,o,r);return}}De.flags|=t,i.memoizedState=ya(1|e,n,o,r)}function Wy(t,e){return Yl(8390656,8,t,e)}function Np(t,e){return hc(2048,8,t,e)}function jT(t,e){return hc(4,2,t,e)}function QT(t,e){return hc(4,4,t,e)}function XT(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function ZT(t,e,n){return n=n!=null?n.concat([t]):null,hc(4,4,XT.bind(null,e,t),n)}function kp(){}function ew(t,e){var n=un();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Rp(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function tw(t,e){var n=un();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Rp(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function nw(t,e,n){return Ai&21?(wn(n,e)||(n=aT(),De.lanes|=n,Ri|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Bt=!0),t.memoizedState=n)}function Wx(t,e){var n=ve;ve=n!==0&&4>n?n:4,t(!0);var r=Od.transition;Od.transition={};try{t(!1),e()}finally{ve=n,Od.transition=r}}function rw(){return un().memoizedState}function Kx(t,e,n){var r=Br(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},iw(t))ow(e,n);else if(n=OT(t,e,n,r),n!==null){var i=Dt();vn(n,t,r,i),sw(n,e,r)}}function Jx(t,e,n){var r=Br(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(iw(t))ow(e,i);else{var o=t.alternate;if(t.lanes===0&&(o===null||o.lanes===0)&&(o=e.lastRenderedReducer,o!==null))try{var s=e.lastRenderedState,a=o(s,n);if(i.hasEagerState=!0,i.eagerState=a,wn(a,s)){var l=e.interleaved;l===null?(i.next=i,wp(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}n=OT(t,e,i,r),n!==null&&(i=Dt(),vn(n,t,r,i),sw(n,e,r))}}function iw(t){var e=t.alternate;return t===De||e!==null&&e===De}function ow(t,e){Ws=xu=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function sw(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,lp(t,n)}}var Pu={readContext:ln,useCallback:yt,useContext:yt,useEffect:yt,useImperativeHandle:yt,useInsertionEffect:yt,useLayoutEffect:yt,useMemo:yt,useReducer:yt,useRef:yt,useState:yt,useDebugValue:yt,useDeferredValue:yt,useTransition:yt,useMutableSource:yt,useSyncExternalStore:yt,useId:yt,unstable_isNewReconciler:!1},Yx={readContext:ln,useCallback:function(t,e){return Pn().memoizedState=[t,e===void 0?null:e],t},useContext:ln,useEffect:Wy,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Yl(4194308,4,XT.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Yl(4194308,4,t,e)},useInsertionEffect:function(t,e){return Yl(4,2,t,e)},useMemo:function(t,e){var n=Pn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Pn();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=Kx.bind(null,De,t),[r.memoizedState,t]},useRef:function(t){var e=Pn();return t={current:t},e.memoizedState=t},useState:zy,useDebugValue:kp,useDeferredValue:function(t){return Pn().memoizedState=t},useTransition:function(){var t=zy(!1),e=t[0];return t=Wx.bind(null,t[1]),Pn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=De,i=Pn();if(Ne){if(n===void 0)throw Error(q(407));n=n()}else{if(n=e(),tt===null)throw Error(q(349));Ai&30||$T(r,e,n)}i.memoizedState=n;var o={value:n,getSnapshot:e};return i.queue=o,Wy(WT.bind(null,r,o,t),[t]),r.flags|=2048,ya(9,zT.bind(null,r,o,n,e),void 0,null),n},useId:function(){var t=Pn(),e=tt.identifierPrefix;if(Ne){var n=Jn,r=Kn;n=(r&~(1<<32-yn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=ma++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=zx++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},jx={readContext:ln,useCallback:ew,useContext:ln,useEffect:Np,useImperativeHandle:ZT,useInsertionEffect:jT,useLayoutEffect:QT,useMemo:tw,useReducer:Bd,useRef:YT,useState:function(){return Bd(ga)},useDebugValue:kp,useDeferredValue:function(t){var e=un();return nw(e,Ye.memoizedState,t)},useTransition:function(){var t=Bd(ga)[0],e=un().memoizedState;return[t,e]},useMutableSource:HT,useSyncExternalStore:qT,useId:rw,unstable_isNewReconciler:!1},Qx={readContext:ln,useCallback:ew,useContext:ln,useEffect:Np,useImperativeHandle:ZT,useInsertionEffect:jT,useLayoutEffect:QT,useMemo:tw,useReducer:Gd,useRef:YT,useState:function(){return Gd(ga)},useDebugValue:kp,useDeferredValue:function(t){var e=un();return Ye===null?e.memoizedState=t:nw(e,Ye.memoizedState,t)},useTransition:function(){var t=Gd(ga)[0],e=un().memoizedState;return[t,e]},useMutableSource:HT,useSyncExternalStore:qT,useId:rw,unstable_isNewReconciler:!1};function hn(t,e){if(t&&t.defaultProps){e=Me({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Gf(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Me({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var pc={isMounted:function(t){return(t=t._reactInternals)?Ui(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Dt(),i=Br(t),o=Zn(r,i);o.payload=e,n!=null&&(o.callback=n),e=Fr(t,o,i),e!==null&&(vn(e,t,i,r),Kl(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Dt(),i=Br(t),o=Zn(r,i);o.tag=1,o.payload=e,n!=null&&(o.callback=n),e=Fr(t,o,i),e!==null&&(vn(e,t,i,r),Kl(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Dt(),r=Br(t),i=Zn(n,r);i.tag=2,e!=null&&(i.callback=e),e=Fr(t,i,r),e!==null&&(vn(e,t,r,n),Kl(e,t,r))}};function Ky(t,e,n,r,i,o,s){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,o,s):e.prototype&&e.prototype.isPureReactComponent?!ua(n,r)||!ua(i,o):!0}function aw(t,e,n){var r=!1,i=Kr,o=e.contextType;return typeof o=="object"&&o!==null?o=ln(o):(i=Ht(e)?Si:St.current,r=e.contextTypes,o=(r=r!=null)?No(t,i):Kr),e=new e(n,o),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=pc,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=o),e}function Jy(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&pc.enqueueReplaceState(e,e.state,null)}function Hf(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},Ip(t);var o=e.contextType;typeof o=="object"&&o!==null?i.context=ln(o):(o=Ht(e)?Si:St.current,i.context=No(t,o)),i.state=t.memoizedState,o=e.getDerivedStateFromProps,typeof o=="function"&&(Gf(t,e,o,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&pc.enqueueReplaceState(i,i.state,null),Au(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function bo(t,e){try{var n="",r=e;do n+=CR(r),r=r.return;while(r);var i=n}catch(o){i=`
Error generating stack: `+o.message+`
`+o.stack}return{value:t,source:e,stack:i,digest:null}}function Hd(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function qf(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var Xx=typeof WeakMap=="function"?WeakMap:Map;function lw(t,e,n){n=Zn(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){ku||(ku=!0,Zf=r),qf(t,e)},n}function uw(t,e,n){n=Zn(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){qf(t,e)}}var o=t.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(n.callback=function(){qf(t,e),typeof r!="function"&&(Or===null?Or=new Set([this]):Or.add(this));var s=e.stack;this.componentDidCatch(e.value,{componentStack:s!==null?s:""})}),n}function Yy(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new Xx;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=fP.bind(null,t,e,n),e.then(t,t))}function jy(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Qy(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Zn(-1,1),e.tag=2,Fr(n,e,1))),n.lanes|=1),t)}var Zx=dr.ReactCurrentOwner,Bt=!1;function kt(t,e,n,r){e.child=t===null?FT(e,null,n,r):Do(e,t.child,n,r)}function Xy(t,e,n,r,i){n=n.render;var o=e.ref;return To(e,i),r=xp(t,e,n,r,o,i),n=Pp(),t!==null&&!Bt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,or(t,e,i)):(Ne&&n&&gp(e),e.flags|=1,kt(t,e,r,i),e.child)}function Zy(t,e,n,r,i){if(t===null){var o=n.type;return typeof o=="function"&&!Op(o)&&o.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=o,cw(t,e,o,r,i)):(t=Zl(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(o=t.child,!(t.lanes&i)){var s=o.memoizedProps;if(n=n.compare,n=n!==null?n:ua,n(s,r)&&t.ref===e.ref)return or(t,e,i)}return e.flags|=1,t=Gr(o,r),t.ref=e.ref,t.return=e,e.child=t}function cw(t,e,n,r,i){if(t!==null){var o=t.memoizedProps;if(ua(o,r)&&t.ref===e.ref)if(Bt=!1,e.pendingProps=r=o,(t.lanes&i)!==0)t.flags&131072&&(Bt=!0);else return e.lanes=t.lanes,or(t,e,i)}return $f(t,e,n,r,i)}function dw(t,e,n){var r=e.pendingProps,i=r.children,o=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Se(ho,Wt),Wt|=n;else{if(!(n&1073741824))return t=o!==null?o.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Se(ho,Wt),Wt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=o!==null?o.baseLanes:n,Se(ho,Wt),Wt|=r}else o!==null?(r=o.baseLanes|n,e.memoizedState=null):r=n,Se(ho,Wt),Wt|=r;return kt(t,e,i,n),e.child}function fw(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function $f(t,e,n,r,i){var o=Ht(n)?Si:St.current;return o=No(e,o),To(e,i),n=xp(t,e,n,r,o,i),r=Pp(),t!==null&&!Bt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,or(t,e,i)):(Ne&&r&&gp(e),e.flags|=1,kt(t,e,n,i),e.child)}function ev(t,e,n,r,i){if(Ht(n)){var o=!0;Tu(e)}else o=!1;if(To(e,i),e.stateNode===null)jl(t,e),aw(e,n,r),Hf(e,n,r,i),r=!0;else if(t===null){var s=e.stateNode,a=e.memoizedProps;s.props=a;var l=s.context,u=n.contextType;typeof u=="object"&&u!==null?u=ln(u):(u=Ht(n)?Si:St.current,u=No(e,u));var h=n.getDerivedStateFromProps,p=typeof h=="function"||typeof s.getSnapshotBeforeUpdate=="function";p||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(a!==r||l!==u)&&Jy(e,s,r,u),Tr=!1;var m=e.memoizedState;s.state=m,Au(e,r,s,i),l=e.memoizedState,a!==r||m!==l||Gt.current||Tr?(typeof h=="function"&&(Gf(e,n,h,r),l=e.memoizedState),(a=Tr||Ky(e,n,a,r,m,l,u))?(p||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount()),typeof s.componentDidMount=="function"&&(e.flags|=4194308)):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),s.props=r,s.state=l,s.context=u,r=a):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{s=e.stateNode,BT(t,e),a=e.memoizedProps,u=e.type===e.elementType?a:hn(e.type,a),s.props=u,p=e.pendingProps,m=s.context,l=n.contextType,typeof l=="object"&&l!==null?l=ln(l):(l=Ht(n)?Si:St.current,l=No(e,l));var _=n.getDerivedStateFromProps;(h=typeof _=="function"||typeof s.getSnapshotBeforeUpdate=="function")||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(a!==p||m!==l)&&Jy(e,s,r,l),Tr=!1,m=e.memoizedState,s.state=m,Au(e,r,s,i);var E=e.memoizedState;a!==p||m!==E||Gt.current||Tr?(typeof _=="function"&&(Gf(e,n,_,r),E=e.memoizedState),(u=Tr||Ky(e,n,u,r,m,E,l)||!1)?(h||typeof s.UNSAFE_componentWillUpdate!="function"&&typeof s.componentWillUpdate!="function"||(typeof s.componentWillUpdate=="function"&&s.componentWillUpdate(r,E,l),typeof s.UNSAFE_componentWillUpdate=="function"&&s.UNSAFE_componentWillUpdate(r,E,l)),typeof s.componentDidUpdate=="function"&&(e.flags|=4),typeof s.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof s.componentDidUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=E),s.props=r,s.state=E,s.context=l,r=u):(typeof s.componentDidUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),r=!1)}return zf(t,e,n,r,o,i)}function zf(t,e,n,r,i,o){fw(t,e);var s=(e.flags&128)!==0;if(!r&&!s)return i&&Oy(e,n,!1),or(t,e,o);r=e.stateNode,Zx.current=e;var a=s&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&s?(e.child=Do(e,t.child,null,o),e.child=Do(e,null,a,o)):kt(t,e,a,o),e.memoizedState=r.state,i&&Oy(e,n,!0),e.child}function hw(t){var e=t.stateNode;e.pendingContext?Fy(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Fy(t,e.context,!1),Sp(t,e.containerInfo)}function tv(t,e,n,r,i){return ko(),vp(i),e.flags|=256,kt(t,e,n,r),e.child}var Wf={dehydrated:null,treeContext:null,retryLane:0};function Kf(t){return{baseLanes:t,cachePool:null,transitions:null}}function pw(t,e,n){var r=e.pendingProps,i=ke.current,o=!1,s=(e.flags&128)!==0,a;if((a=s)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(o=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),Se(ke,i&1),t===null)return Of(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(s=r.children,t=r.fallback,o?(r=e.mode,o=e.child,s={mode:"hidden",children:s},!(r&1)&&o!==null?(o.childLanes=0,o.pendingProps=s):o=yc(s,r,0,null),t=Ti(t,r,n,null),o.return=e,t.return=e,o.sibling=t,e.child=o,e.child.memoizedState=Kf(n),e.memoizedState=Wf,t):Dp(e,s));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return eP(t,e,s,r,a,i,n);if(o){o=r.fallback,s=e.mode,i=t.child,a=i.sibling;var l={mode:"hidden",children:r.children};return!(s&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=Gr(i,l),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?o=Gr(a,o):(o=Ti(o,s,n,null),o.flags|=2),o.return=e,r.return=e,r.sibling=o,e.child=r,r=o,o=e.child,s=t.child.memoizedState,s=s===null?Kf(n):{baseLanes:s.baseLanes|n,cachePool:null,transitions:s.transitions},o.memoizedState=s,o.childLanes=t.childLanes&~n,e.memoizedState=Wf,r}return o=t.child,t=o.sibling,r=Gr(o,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Dp(t,e){return e=yc({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Al(t,e,n,r){return r!==null&&vp(r),Do(e,t.child,null,n),t=Dp(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function eP(t,e,n,r,i,o,s){if(n)return e.flags&256?(e.flags&=-257,r=Hd(Error(q(422))),Al(t,e,s,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(o=r.fallback,i=e.mode,r=yc({mode:"visible",children:r.children},i,0,null),o=Ti(o,i,s,null),o.flags|=2,r.return=e,o.return=e,r.sibling=o,e.child=r,e.mode&1&&Do(e,t.child,null,s),e.child.memoizedState=Kf(s),e.memoizedState=Wf,o);if(!(e.mode&1))return Al(t,e,s,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,o=Error(q(419)),r=Hd(o,r,void 0),Al(t,e,s,r)}if(a=(s&t.childLanes)!==0,Bt||a){if(r=tt,r!==null){switch(s&-s){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|s)?0:i,i!==0&&i!==o.retryLane&&(o.retryLane=i,ir(t,i),vn(r,t,i,-1))}return Fp(),r=Hd(Error(q(421))),Al(t,e,s,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=hP.bind(null,t),i._reactRetry=e,null):(t=o.treeContext,Jt=Ur(i.nextSibling),Qt=e,Ne=!0,mn=null,t!==null&&(nn[rn++]=Kn,nn[rn++]=Jn,nn[rn++]=Ci,Kn=t.id,Jn=t.overflow,Ci=e),e=Dp(e,r.children),e.flags|=4096,e)}function nv(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Bf(t.return,e,n)}function qd(t,e,n,r,i){var o=t.memoizedState;o===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(o.isBackwards=e,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i)}function mw(t,e,n){var r=e.pendingProps,i=r.revealOrder,o=r.tail;if(kt(t,e,r.children,n),r=ke.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&nv(t,n,e);else if(t.tag===19)nv(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Se(ke,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&Ru(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),qd(e,!1,i,n,o);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&Ru(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}qd(e,!0,n,null,o);break;case"together":qd(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function jl(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function or(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Ri|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(q(153));if(e.child!==null){for(t=e.child,n=Gr(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Gr(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function tP(t,e,n){switch(e.tag){case 3:hw(e),ko();break;case 5:GT(e);break;case 1:Ht(e.type)&&Tu(e);break;case 4:Sp(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;Se(Su,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Se(ke,ke.current&1),e.flags|=128,null):n&e.child.childLanes?pw(t,e,n):(Se(ke,ke.current&1),t=or(t,e,n),t!==null?t.sibling:null);Se(ke,ke.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return mw(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Se(ke,ke.current),r)break;return null;case 22:case 23:return e.lanes=0,dw(t,e,n)}return or(t,e,n)}var gw,Jf,yw,vw;gw=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Jf=function(){};yw=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,vi(bn.current);var o=null;switch(n){case"input":i=gf(t,i),r=gf(t,r),o=[];break;case"select":i=Me({},i,{value:void 0}),r=Me({},r,{value:void 0}),o=[];break;case"textarea":i=_f(t,i),r=_f(t,r),o=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=_u)}Tf(n,r);var s;n=null;for(u in i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var a=i[u];for(s in a)a.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(na.hasOwnProperty(u)?o||(o=[]):(o=o||[]).push(u,null));for(u in r){var l=r[u];if(a=i!=null?i[u]:void 0,r.hasOwnProperty(u)&&l!==a&&(l!=null||a!=null))if(u==="style")if(a){for(s in a)!a.hasOwnProperty(s)||l&&l.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in l)l.hasOwnProperty(s)&&a[s]!==l[s]&&(n||(n={}),n[s]=l[s])}else n||(o||(o=[]),o.push(u,n)),n=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(o=o||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(o=o||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(na.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&Ae("scroll",t),o||a===l||(o=[])):(o=o||[]).push(u,l))}n&&(o=o||[]).push("style",n);var u=o;(e.updateQueue=u)&&(e.flags|=4)}};vw=function(t,e,n,r){n!==r&&(e.flags|=4)};function Ss(t,e){if(!Ne)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function vt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function nP(t,e,n){var r=e.pendingProps;switch(yp(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return vt(e),null;case 1:return Ht(e.type)&&Eu(),vt(e),null;case 3:return r=e.stateNode,Mo(),xe(Gt),xe(St),Ap(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Sl(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,mn!==null&&(nh(mn),mn=null))),Jf(t,e),vt(e),null;case 5:Cp(e);var i=vi(pa.current);if(n=e.type,t!==null&&e.stateNode!=null)yw(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(q(166));return vt(e),null}if(t=vi(bn.current),Sl(e)){r=e.stateNode,n=e.type;var o=e.memoizedProps;switch(r[Nn]=e,r[fa]=o,t=(e.mode&1)!==0,n){case"dialog":Ae("cancel",r),Ae("close",r);break;case"iframe":case"object":case"embed":Ae("load",r);break;case"video":case"audio":for(i=0;i<Ms.length;i++)Ae(Ms[i],r);break;case"source":Ae("error",r);break;case"img":case"image":case"link":Ae("error",r),Ae("load",r);break;case"details":Ae("toggle",r);break;case"input":dy(r,o),Ae("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},Ae("invalid",r);break;case"textarea":hy(r,o),Ae("invalid",r)}Tf(n,o),i=null;for(var s in o)if(o.hasOwnProperty(s)){var a=o[s];s==="children"?typeof a=="string"?r.textContent!==a&&(o.suppressHydrationWarning!==!0&&Il(r.textContent,a,t),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(o.suppressHydrationWarning!==!0&&Il(r.textContent,a,t),i=["children",""+a]):na.hasOwnProperty(s)&&a!=null&&s==="onScroll"&&Ae("scroll",r)}switch(n){case"input":ml(r),fy(r,o,!0);break;case"textarea":ml(r),py(r);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(r.onclick=_u)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{s=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=WE(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=s.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=s.createElement(n,{is:r.is}):(t=s.createElement(n),n==="select"&&(s=t,r.multiple?s.multiple=!0:r.size&&(s.size=r.size))):t=s.createElementNS(t,n),t[Nn]=e,t[fa]=r,gw(t,e,!1,!1),e.stateNode=t;e:{switch(s=wf(n,r),n){case"dialog":Ae("cancel",t),Ae("close",t),i=r;break;case"iframe":case"object":case"embed":Ae("load",t),i=r;break;case"video":case"audio":for(i=0;i<Ms.length;i++)Ae(Ms[i],t);i=r;break;case"source":Ae("error",t),i=r;break;case"img":case"image":case"link":Ae("error",t),Ae("load",t),i=r;break;case"details":Ae("toggle",t),i=r;break;case"input":dy(t,r),i=gf(t,r),Ae("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=Me({},r,{value:void 0}),Ae("invalid",t);break;case"textarea":hy(t,r),i=_f(t,r),Ae("invalid",t);break;default:i=r}Tf(n,i),a=i;for(o in a)if(a.hasOwnProperty(o)){var l=a[o];o==="style"?YE(t,l):o==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&KE(t,l)):o==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&ra(t,l):typeof l=="number"&&ra(t,""+l):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(na.hasOwnProperty(o)?l!=null&&o==="onScroll"&&Ae("scroll",t):l!=null&&np(t,o,l,s))}switch(n){case"input":ml(t),fy(t,r,!1);break;case"textarea":ml(t),py(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Wr(r.value));break;case"select":t.multiple=!!r.multiple,o=r.value,o!=null?yo(t,!!r.multiple,o,!1):r.defaultValue!=null&&yo(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=_u)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return vt(e),null;case 6:if(t&&e.stateNode!=null)vw(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(q(166));if(n=vi(pa.current),vi(bn.current),Sl(e)){if(r=e.stateNode,n=e.memoizedProps,r[Nn]=e,(o=r.nodeValue!==n)&&(t=Qt,t!==null))switch(t.tag){case 3:Il(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Il(r.nodeValue,n,(t.mode&1)!==0)}o&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Nn]=e,e.stateNode=r}return vt(e),null;case 13:if(xe(ke),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Ne&&Jt!==null&&e.mode&1&&!(e.flags&128))VT(),ko(),e.flags|=98560,o=!1;else if(o=Sl(e),r!==null&&r.dehydrated!==null){if(t===null){if(!o)throw Error(q(318));if(o=e.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(q(317));o[Nn]=e}else ko(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;vt(e),o=!1}else mn!==null&&(nh(mn),mn=null),o=!0;if(!o)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||ke.current&1?Qe===0&&(Qe=3):Fp())),e.updateQueue!==null&&(e.flags|=4),vt(e),null);case 4:return Mo(),Jf(t,e),t===null&&ca(e.stateNode.containerInfo),vt(e),null;case 10:return Tp(e.type._context),vt(e),null;case 17:return Ht(e.type)&&Eu(),vt(e),null;case 19:if(xe(ke),o=e.memoizedState,o===null)return vt(e),null;if(r=(e.flags&128)!==0,s=o.rendering,s===null)if(r)Ss(o,!1);else{if(Qe!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(s=Ru(t),s!==null){for(e.flags|=128,Ss(o,!1),r=s.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)o=n,t=r,o.flags&=14680066,s=o.alternate,s===null?(o.childLanes=0,o.lanes=t,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=s.childLanes,o.lanes=s.lanes,o.child=s.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=s.memoizedProps,o.memoizedState=s.memoizedState,o.updateQueue=s.updateQueue,o.type=s.type,t=s.dependencies,o.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Se(ke,ke.current&1|2),e.child}t=t.sibling}o.tail!==null&&Ge()>Lo&&(e.flags|=128,r=!0,Ss(o,!1),e.lanes=4194304)}else{if(!r)if(t=Ru(s),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Ss(o,!0),o.tail===null&&o.tailMode==="hidden"&&!s.alternate&&!Ne)return vt(e),null}else 2*Ge()-o.renderingStartTime>Lo&&n!==1073741824&&(e.flags|=128,r=!0,Ss(o,!1),e.lanes=4194304);o.isBackwards?(s.sibling=e.child,e.child=s):(n=o.last,n!==null?n.sibling=s:e.child=s,o.last=s)}return o.tail!==null?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=Ge(),e.sibling=null,n=ke.current,Se(ke,r?n&1|2:n&1),e):(vt(e),null);case 22:case 23:return Up(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Wt&1073741824&&(vt(e),e.subtreeFlags&6&&(e.flags|=8192)):vt(e),null;case 24:return null;case 25:return null}throw Error(q(156,e.tag))}function rP(t,e){switch(yp(e),e.tag){case 1:return Ht(e.type)&&Eu(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Mo(),xe(Gt),xe(St),Ap(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Cp(e),null;case 13:if(xe(ke),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(q(340));ko()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return xe(ke),null;case 4:return Mo(),null;case 10:return Tp(e.type._context),null;case 22:case 23:return Up(),null;case 24:return null;default:return null}}var Rl=!1,Tt=!1,iP=typeof WeakSet=="function"?WeakSet:Set,J=null;function fo(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Ve(t,e,r)}else n.current=null}function Yf(t,e,n){try{n()}catch(r){Ve(t,e,r)}}var rv=!1;function oP(t,e){if(Df=gu,t=IT(),mp(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break e}var s=0,a=-1,l=-1,u=0,h=0,p=t,m=null;t:for(;;){for(var _;p!==n||i!==0&&p.nodeType!==3||(a=s+i),p!==o||r!==0&&p.nodeType!==3||(l=s+r),p.nodeType===3&&(s+=p.nodeValue.length),(_=p.firstChild)!==null;)m=p,p=_;for(;;){if(p===t)break t;if(m===n&&++u===i&&(a=s),m===o&&++h===r&&(l=s),(_=p.nextSibling)!==null)break;p=m,m=p.parentNode}p=_}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(Mf={focusedElem:t,selectionRange:n},gu=!1,J=e;J!==null;)if(e=J,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,J=t;else for(;J!==null;){e=J;try{var E=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(E!==null){var P=E.memoizedProps,x=E.memoizedState,I=e.stateNode,T=I.getSnapshotBeforeUpdate(e.elementType===e.type?P:hn(e.type,P),x);I.__reactInternalSnapshotBeforeUpdate=T}break;case 3:var C=e.stateNode.containerInfo;C.nodeType===1?C.textContent="":C.nodeType===9&&C.documentElement&&C.removeChild(C.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(q(163))}}catch(M){Ve(e,e.return,M)}if(t=e.sibling,t!==null){t.return=e.return,J=t;break}J=e.return}return E=rv,rv=!1,E}function Ks(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var o=i.destroy;i.destroy=void 0,o!==void 0&&Yf(e,n,o)}i=i.next}while(i!==r)}}function mc(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function jf(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function _w(t){var e=t.alternate;e!==null&&(t.alternate=null,_w(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Nn],delete e[fa],delete e[Vf],delete e[Gx],delete e[Hx])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Ew(t){return t.tag===5||t.tag===3||t.tag===4}function iv(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Ew(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Qf(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=_u));else if(r!==4&&(t=t.child,t!==null))for(Qf(t,e,n),t=t.sibling;t!==null;)Qf(t,e,n),t=t.sibling}function Xf(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Xf(t,e,n),t=t.sibling;t!==null;)Xf(t,e,n),t=t.sibling}var st=null,pn=!1;function vr(t,e,n){for(n=n.child;n!==null;)Tw(t,e,n),n=n.sibling}function Tw(t,e,n){if(Mn&&typeof Mn.onCommitFiberUnmount=="function")try{Mn.onCommitFiberUnmount(ac,n)}catch{}switch(n.tag){case 5:Tt||fo(n,e);case 6:var r=st,i=pn;st=null,vr(t,e,n),st=r,pn=i,st!==null&&(pn?(t=st,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):st.removeChild(n.stateNode));break;case 18:st!==null&&(pn?(t=st,n=n.stateNode,t.nodeType===8?Vd(t.parentNode,n):t.nodeType===1&&Vd(t,n),aa(t)):Vd(st,n.stateNode));break;case 4:r=st,i=pn,st=n.stateNode.containerInfo,pn=!0,vr(t,e,n),st=r,pn=i;break;case 0:case 11:case 14:case 15:if(!Tt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var o=i,s=o.destroy;o=o.tag,s!==void 0&&(o&2||o&4)&&Yf(n,e,s),i=i.next}while(i!==r)}vr(t,e,n);break;case 1:if(!Tt&&(fo(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Ve(n,e,a)}vr(t,e,n);break;case 21:vr(t,e,n);break;case 22:n.mode&1?(Tt=(r=Tt)||n.memoizedState!==null,vr(t,e,n),Tt=r):vr(t,e,n);break;default:vr(t,e,n)}}function ov(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new iP),e.forEach(function(r){var i=pP.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function fn(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var o=t,s=e,a=s;e:for(;a!==null;){switch(a.tag){case 5:st=a.stateNode,pn=!1;break e;case 3:st=a.stateNode.containerInfo,pn=!0;break e;case 4:st=a.stateNode.containerInfo,pn=!0;break e}a=a.return}if(st===null)throw Error(q(160));Tw(o,s,i),st=null,pn=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(u){Ve(i,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)ww(e,t),e=e.sibling}function ww(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(fn(e,t),Rn(t),r&4){try{Ks(3,t,t.return),mc(3,t)}catch(P){Ve(t,t.return,P)}try{Ks(5,t,t.return)}catch(P){Ve(t,t.return,P)}}break;case 1:fn(e,t),Rn(t),r&512&&n!==null&&fo(n,n.return);break;case 5:if(fn(e,t),Rn(t),r&512&&n!==null&&fo(n,n.return),t.flags&32){var i=t.stateNode;try{ra(i,"")}catch(P){Ve(t,t.return,P)}}if(r&4&&(i=t.stateNode,i!=null)){var o=t.memoizedProps,s=n!==null?n.memoizedProps:o,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&o.type==="radio"&&o.name!=null&&$E(i,o),wf(a,s);var u=wf(a,o);for(s=0;s<l.length;s+=2){var h=l[s],p=l[s+1];h==="style"?YE(i,p):h==="dangerouslySetInnerHTML"?KE(i,p):h==="children"?ra(i,p):np(i,h,p,u)}switch(a){case"input":yf(i,o);break;case"textarea":zE(i,o);break;case"select":var m=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var _=o.value;_!=null?yo(i,!!o.multiple,_,!1):m!==!!o.multiple&&(o.defaultValue!=null?yo(i,!!o.multiple,o.defaultValue,!0):yo(i,!!o.multiple,o.multiple?[]:"",!1))}i[fa]=o}catch(P){Ve(t,t.return,P)}}break;case 6:if(fn(e,t),Rn(t),r&4){if(t.stateNode===null)throw Error(q(162));i=t.stateNode,o=t.memoizedProps;try{i.nodeValue=o}catch(P){Ve(t,t.return,P)}}break;case 3:if(fn(e,t),Rn(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{aa(e.containerInfo)}catch(P){Ve(t,t.return,P)}break;case 4:fn(e,t),Rn(t);break;case 13:fn(e,t),Rn(t),i=t.child,i.flags&8192&&(o=i.memoizedState!==null,i.stateNode.isHidden=o,!o||i.alternate!==null&&i.alternate.memoizedState!==null||(Lp=Ge())),r&4&&ov(t);break;case 22:if(h=n!==null&&n.memoizedState!==null,t.mode&1?(Tt=(u=Tt)||h,fn(e,t),Tt=u):fn(e,t),Rn(t),r&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!h&&t.mode&1)for(J=t,h=t.child;h!==null;){for(p=J=h;J!==null;){switch(m=J,_=m.child,m.tag){case 0:case 11:case 14:case 15:Ks(4,m,m.return);break;case 1:fo(m,m.return);var E=m.stateNode;if(typeof E.componentWillUnmount=="function"){r=m,n=m.return;try{e=r,E.props=e.memoizedProps,E.state=e.memoizedState,E.componentWillUnmount()}catch(P){Ve(r,n,P)}}break;case 5:fo(m,m.return);break;case 22:if(m.memoizedState!==null){av(p);continue}}_!==null?(_.return=m,J=_):av(p)}h=h.sibling}e:for(h=null,p=t;;){if(p.tag===5){if(h===null){h=p;try{i=p.stateNode,u?(o=i.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(a=p.stateNode,l=p.memoizedProps.style,s=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=JE("display",s))}catch(P){Ve(t,t.return,P)}}}else if(p.tag===6){if(h===null)try{p.stateNode.nodeValue=u?"":p.memoizedProps}catch(P){Ve(t,t.return,P)}}else if((p.tag!==22&&p.tag!==23||p.memoizedState===null||p===t)&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===t)break e;for(;p.sibling===null;){if(p.return===null||p.return===t)break e;h===p&&(h=null),p=p.return}h===p&&(h=null),p.sibling.return=p.return,p=p.sibling}}break;case 19:fn(e,t),Rn(t),r&4&&ov(t);break;case 21:break;default:fn(e,t),Rn(t)}}function Rn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(Ew(n)){var r=n;break e}n=n.return}throw Error(q(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(ra(i,""),r.flags&=-33);var o=iv(t);Xf(t,o,i);break;case 3:case 4:var s=r.stateNode.containerInfo,a=iv(t);Qf(t,a,s);break;default:throw Error(q(161))}}catch(l){Ve(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function sP(t,e,n){J=t,Iw(t)}function Iw(t,e,n){for(var r=(t.mode&1)!==0;J!==null;){var i=J,o=i.child;if(i.tag===22&&r){var s=i.memoizedState!==null||Rl;if(!s){var a=i.alternate,l=a!==null&&a.memoizedState!==null||Tt;a=Rl;var u=Tt;if(Rl=s,(Tt=l)&&!u)for(J=i;J!==null;)s=J,l=s.child,s.tag===22&&s.memoizedState!==null?lv(i):l!==null?(l.return=s,J=l):lv(i);for(;o!==null;)J=o,Iw(o),o=o.sibling;J=i,Rl=a,Tt=u}sv(t)}else i.subtreeFlags&8772&&o!==null?(o.return=i,J=o):sv(t)}}function sv(t){for(;J!==null;){var e=J;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Tt||mc(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Tt)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:hn(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=e.updateQueue;o!==null&&$y(e,o,r);break;case 3:var s=e.updateQueue;if(s!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}$y(e,s,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var h=u.memoizedState;if(h!==null){var p=h.dehydrated;p!==null&&aa(p)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(q(163))}Tt||e.flags&512&&jf(e)}catch(m){Ve(e,e.return,m)}}if(e===t){J=null;break}if(n=e.sibling,n!==null){n.return=e.return,J=n;break}J=e.return}}function av(t){for(;J!==null;){var e=J;if(e===t){J=null;break}var n=e.sibling;if(n!==null){n.return=e.return,J=n;break}J=e.return}}function lv(t){for(;J!==null;){var e=J;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{mc(4,e)}catch(l){Ve(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){Ve(e,i,l)}}var o=e.return;try{jf(e)}catch(l){Ve(e,o,l)}break;case 5:var s=e.return;try{jf(e)}catch(l){Ve(e,s,l)}}}catch(l){Ve(e,e.return,l)}if(e===t){J=null;break}var a=e.sibling;if(a!==null){a.return=e.return,J=a;break}J=e.return}}var aP=Math.ceil,Nu=dr.ReactCurrentDispatcher,Mp=dr.ReactCurrentOwner,sn=dr.ReactCurrentBatchConfig,de=0,tt=null,ze=null,ut=0,Wt=0,ho=ei(0),Qe=0,va=null,Ri=0,gc=0,bp=0,Js=null,Ft=null,Lp=0,Lo=1/0,zn=null,ku=!1,Zf=null,Or=null,xl=!1,kr=null,Du=0,Ys=0,eh=null,Ql=-1,Xl=0;function Dt(){return de&6?Ge():Ql!==-1?Ql:Ql=Ge()}function Br(t){return t.mode&1?de&2&&ut!==0?ut&-ut:$x.transition!==null?(Xl===0&&(Xl=aT()),Xl):(t=ve,t!==0||(t=window.event,t=t===void 0?16:pT(t.type)),t):1}function vn(t,e,n,r){if(50<Ys)throw Ys=0,eh=null,Error(q(185));Da(t,n,r),(!(de&2)||t!==tt)&&(t===tt&&(!(de&2)&&(gc|=n),Qe===4&&Ir(t,ut)),qt(t,r),n===1&&de===0&&!(e.mode&1)&&(Lo=Ge()+500,fc&&ti()))}function qt(t,e){var n=t.callbackNode;$R(t,e);var r=mu(t,t===tt?ut:0);if(r===0)n!==null&&yy(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&yy(n),e===1)t.tag===0?qx(uv.bind(null,t)):MT(uv.bind(null,t)),Ox(function(){!(de&6)&&ti()}),n=null;else{switch(lT(r)){case 1:n=ap;break;case 4:n=oT;break;case 16:n=pu;break;case 536870912:n=sT;break;default:n=pu}n=kw(n,Sw.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function Sw(t,e){if(Ql=-1,Xl=0,de&6)throw Error(q(327));var n=t.callbackNode;if(wo()&&t.callbackNode!==n)return null;var r=mu(t,t===tt?ut:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Mu(t,r);else{e=r;var i=de;de|=2;var o=Aw();(tt!==t||ut!==e)&&(zn=null,Lo=Ge()+500,Ei(t,e));do try{cP();break}catch(a){Cw(t,a)}while(!0);Ep(),Nu.current=o,de=i,ze!==null?e=0:(tt=null,ut=0,e=Qe)}if(e!==0){if(e===2&&(i=Rf(t),i!==0&&(r=i,e=th(t,i))),e===1)throw n=va,Ei(t,0),Ir(t,r),qt(t,Ge()),n;if(e===6)Ir(t,r);else{if(i=t.current.alternate,!(r&30)&&!lP(i)&&(e=Mu(t,r),e===2&&(o=Rf(t),o!==0&&(r=o,e=th(t,o))),e===1))throw n=va,Ei(t,0),Ir(t,r),qt(t,Ge()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(q(345));case 2:hi(t,Ft,zn);break;case 3:if(Ir(t,r),(r&130023424)===r&&(e=Lp+500-Ge(),10<e)){if(mu(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){Dt(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=Lf(hi.bind(null,t,Ft,zn),e);break}hi(t,Ft,zn);break;case 4:if(Ir(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var s=31-yn(r);o=1<<s,s=e[s],s>i&&(i=s),r&=~o}if(r=i,r=Ge()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*aP(r/1960))-r,10<r){t.timeoutHandle=Lf(hi.bind(null,t,Ft,zn),r);break}hi(t,Ft,zn);break;case 5:hi(t,Ft,zn);break;default:throw Error(q(329))}}}return qt(t,Ge()),t.callbackNode===n?Sw.bind(null,t):null}function th(t,e){var n=Js;return t.current.memoizedState.isDehydrated&&(Ei(t,e).flags|=256),t=Mu(t,e),t!==2&&(e=Ft,Ft=n,e!==null&&nh(e)),t}function nh(t){Ft===null?Ft=t:Ft.push.apply(Ft,t)}function lP(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],o=i.getSnapshot;i=i.value;try{if(!wn(o(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Ir(t,e){for(e&=~bp,e&=~gc,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-yn(e),r=1<<n;t[n]=-1,e&=~r}}function uv(t){if(de&6)throw Error(q(327));wo();var e=mu(t,0);if(!(e&1))return qt(t,Ge()),null;var n=Mu(t,e);if(t.tag!==0&&n===2){var r=Rf(t);r!==0&&(e=r,n=th(t,r))}if(n===1)throw n=va,Ei(t,0),Ir(t,e),qt(t,Ge()),n;if(n===6)throw Error(q(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,hi(t,Ft,zn),qt(t,Ge()),null}function Vp(t,e){var n=de;de|=1;try{return t(e)}finally{de=n,de===0&&(Lo=Ge()+500,fc&&ti())}}function xi(t){kr!==null&&kr.tag===0&&!(de&6)&&wo();var e=de;de|=1;var n=sn.transition,r=ve;try{if(sn.transition=null,ve=1,t)return t()}finally{ve=r,sn.transition=n,de=e,!(de&6)&&ti()}}function Up(){Wt=ho.current,xe(ho)}function Ei(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,Fx(n)),ze!==null)for(n=ze.return;n!==null;){var r=n;switch(yp(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Eu();break;case 3:Mo(),xe(Gt),xe(St),Ap();break;case 5:Cp(r);break;case 4:Mo();break;case 13:xe(ke);break;case 19:xe(ke);break;case 10:Tp(r.type._context);break;case 22:case 23:Up()}n=n.return}if(tt=t,ze=t=Gr(t.current,null),ut=Wt=e,Qe=0,va=null,bp=gc=Ri=0,Ft=Js=null,yi!==null){for(e=0;e<yi.length;e++)if(n=yi[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,o=n.pending;if(o!==null){var s=o.next;o.next=i,r.next=s}n.pending=r}yi=null}return t}function Cw(t,e){do{var n=ze;try{if(Ep(),Jl.current=Pu,xu){for(var r=De.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}xu=!1}if(Ai=0,et=Ye=De=null,Ws=!1,ma=0,Mp.current=null,n===null||n.return===null){Qe=1,va=e,ze=null;break}e:{var o=t,s=n.return,a=n,l=e;if(e=ut,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,h=a,p=h.tag;if(!(h.mode&1)&&(p===0||p===11||p===15)){var m=h.alternate;m?(h.updateQueue=m.updateQueue,h.memoizedState=m.memoizedState,h.lanes=m.lanes):(h.updateQueue=null,h.memoizedState=null)}var _=jy(s);if(_!==null){_.flags&=-257,Qy(_,s,a,o,e),_.mode&1&&Yy(o,u,e),e=_,l=u;var E=e.updateQueue;if(E===null){var P=new Set;P.add(l),e.updateQueue=P}else E.add(l);break e}else{if(!(e&1)){Yy(o,u,e),Fp();break e}l=Error(q(426))}}else if(Ne&&a.mode&1){var x=jy(s);if(x!==null){!(x.flags&65536)&&(x.flags|=256),Qy(x,s,a,o,e),vp(bo(l,a));break e}}o=l=bo(l,a),Qe!==4&&(Qe=2),Js===null?Js=[o]:Js.push(o),o=s;do{switch(o.tag){case 3:o.flags|=65536,e&=-e,o.lanes|=e;var I=lw(o,l,e);qy(o,I);break e;case 1:a=l;var T=o.type,C=o.stateNode;if(!(o.flags&128)&&(typeof T.getDerivedStateFromError=="function"||C!==null&&typeof C.componentDidCatch=="function"&&(Or===null||!Or.has(C)))){o.flags|=65536,e&=-e,o.lanes|=e;var M=uw(o,a,e);qy(o,M);break e}}o=o.return}while(o!==null)}xw(n)}catch(U){e=U,ze===n&&n!==null&&(ze=n=n.return);continue}break}while(!0)}function Aw(){var t=Nu.current;return Nu.current=Pu,t===null?Pu:t}function Fp(){(Qe===0||Qe===3||Qe===2)&&(Qe=4),tt===null||!(Ri&268435455)&&!(gc&268435455)||Ir(tt,ut)}function Mu(t,e){var n=de;de|=2;var r=Aw();(tt!==t||ut!==e)&&(zn=null,Ei(t,e));do try{uP();break}catch(i){Cw(t,i)}while(!0);if(Ep(),de=n,Nu.current=r,ze!==null)throw Error(q(261));return tt=null,ut=0,Qe}function uP(){for(;ze!==null;)Rw(ze)}function cP(){for(;ze!==null&&!LR();)Rw(ze)}function Rw(t){var e=Nw(t.alternate,t,Wt);t.memoizedProps=t.pendingProps,e===null?xw(t):ze=e,Mp.current=null}function xw(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=rP(n,e),n!==null){n.flags&=32767,ze=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Qe=6,ze=null;return}}else if(n=nP(n,e,Wt),n!==null){ze=n;return}if(e=e.sibling,e!==null){ze=e;return}ze=e=t}while(e!==null);Qe===0&&(Qe=5)}function hi(t,e,n){var r=ve,i=sn.transition;try{sn.transition=null,ve=1,dP(t,e,n,r)}finally{sn.transition=i,ve=r}return null}function dP(t,e,n,r){do wo();while(kr!==null);if(de&6)throw Error(q(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(q(177));t.callbackNode=null,t.callbackPriority=0;var o=n.lanes|n.childLanes;if(zR(t,o),t===tt&&(ze=tt=null,ut=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||xl||(xl=!0,kw(pu,function(){return wo(),null})),o=(n.flags&15990)!==0,n.subtreeFlags&15990||o){o=sn.transition,sn.transition=null;var s=ve;ve=1;var a=de;de|=4,Mp.current=null,oP(t,n),ww(n,t),kx(Mf),gu=!!Df,Mf=Df=null,t.current=n,sP(n),VR(),de=a,ve=s,sn.transition=o}else t.current=n;if(xl&&(xl=!1,kr=t,Du=i),o=t.pendingLanes,o===0&&(Or=null),OR(n.stateNode),qt(t,Ge()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(ku)throw ku=!1,t=Zf,Zf=null,t;return Du&1&&t.tag!==0&&wo(),o=t.pendingLanes,o&1?t===eh?Ys++:(Ys=0,eh=t):Ys=0,ti(),null}function wo(){if(kr!==null){var t=lT(Du),e=sn.transition,n=ve;try{if(sn.transition=null,ve=16>t?16:t,kr===null)var r=!1;else{if(t=kr,kr=null,Du=0,de&6)throw Error(q(331));var i=de;for(de|=4,J=t.current;J!==null;){var o=J,s=o.child;if(J.flags&16){var a=o.deletions;if(a!==null){for(var l=0;l<a.length;l++){var u=a[l];for(J=u;J!==null;){var h=J;switch(h.tag){case 0:case 11:case 15:Ks(8,h,o)}var p=h.child;if(p!==null)p.return=h,J=p;else for(;J!==null;){h=J;var m=h.sibling,_=h.return;if(_w(h),h===u){J=null;break}if(m!==null){m.return=_,J=m;break}J=_}}}var E=o.alternate;if(E!==null){var P=E.child;if(P!==null){E.child=null;do{var x=P.sibling;P.sibling=null,P=x}while(P!==null)}}J=o}}if(o.subtreeFlags&2064&&s!==null)s.return=o,J=s;else e:for(;J!==null;){if(o=J,o.flags&2048)switch(o.tag){case 0:case 11:case 15:Ks(9,o,o.return)}var I=o.sibling;if(I!==null){I.return=o.return,J=I;break e}J=o.return}}var T=t.current;for(J=T;J!==null;){s=J;var C=s.child;if(s.subtreeFlags&2064&&C!==null)C.return=s,J=C;else e:for(s=T;J!==null;){if(a=J,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:mc(9,a)}}catch(U){Ve(a,a.return,U)}if(a===s){J=null;break e}var M=a.sibling;if(M!==null){M.return=a.return,J=M;break e}J=a.return}}if(de=i,ti(),Mn&&typeof Mn.onPostCommitFiberRoot=="function")try{Mn.onPostCommitFiberRoot(ac,t)}catch{}r=!0}return r}finally{ve=n,sn.transition=e}}return!1}function cv(t,e,n){e=bo(n,e),e=lw(t,e,1),t=Fr(t,e,1),e=Dt(),t!==null&&(Da(t,1,e),qt(t,e))}function Ve(t,e,n){if(t.tag===3)cv(t,t,n);else for(;e!==null;){if(e.tag===3){cv(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Or===null||!Or.has(r))){t=bo(n,t),t=uw(e,t,1),e=Fr(e,t,1),t=Dt(),e!==null&&(Da(e,1,t),qt(e,t));break}}e=e.return}}function fP(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Dt(),t.pingedLanes|=t.suspendedLanes&n,tt===t&&(ut&n)===n&&(Qe===4||Qe===3&&(ut&130023424)===ut&&500>Ge()-Lp?Ei(t,0):bp|=n),qt(t,e)}function Pw(t,e){e===0&&(t.mode&1?(e=vl,vl<<=1,!(vl&130023424)&&(vl=4194304)):e=1);var n=Dt();t=ir(t,e),t!==null&&(Da(t,e,n),qt(t,n))}function hP(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),Pw(t,n)}function pP(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(q(314))}r!==null&&r.delete(e),Pw(t,n)}var Nw;Nw=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Gt.current)Bt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Bt=!1,tP(t,e,n);Bt=!!(t.flags&131072)}else Bt=!1,Ne&&e.flags&1048576&&bT(e,Iu,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;jl(t,e),t=e.pendingProps;var i=No(e,St.current);To(e,n),i=xp(null,e,r,t,i,n);var o=Pp();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Ht(r)?(o=!0,Tu(e)):o=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Ip(e),i.updater=pc,e.stateNode=i,i._reactInternals=e,Hf(e,r,t,n),e=zf(null,e,r,!0,o,n)):(e.tag=0,Ne&&o&&gp(e),kt(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(jl(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=gP(r),t=hn(r,t),i){case 0:e=$f(null,e,r,t,n);break e;case 1:e=ev(null,e,r,t,n);break e;case 11:e=Xy(null,e,r,t,n);break e;case 14:e=Zy(null,e,r,hn(r.type,t),n);break e}throw Error(q(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:hn(r,i),$f(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:hn(r,i),ev(t,e,r,i,n);case 3:e:{if(hw(e),t===null)throw Error(q(387));r=e.pendingProps,o=e.memoizedState,i=o.element,BT(t,e),Au(e,r,null,n);var s=e.memoizedState;if(r=s.element,o.isDehydrated)if(o={element:r,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},e.updateQueue.baseState=o,e.memoizedState=o,e.flags&256){i=bo(Error(q(423)),e),e=tv(t,e,r,n,i);break e}else if(r!==i){i=bo(Error(q(424)),e),e=tv(t,e,r,n,i);break e}else for(Jt=Ur(e.stateNode.containerInfo.firstChild),Qt=e,Ne=!0,mn=null,n=FT(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(ko(),r===i){e=or(t,e,n);break e}kt(t,e,r,n)}e=e.child}return e;case 5:return GT(e),t===null&&Of(e),r=e.type,i=e.pendingProps,o=t!==null?t.memoizedProps:null,s=i.children,bf(r,i)?s=null:o!==null&&bf(r,o)&&(e.flags|=32),fw(t,e),kt(t,e,s,n),e.child;case 6:return t===null&&Of(e),null;case 13:return pw(t,e,n);case 4:return Sp(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Do(e,null,r,n):kt(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:hn(r,i),Xy(t,e,r,i,n);case 7:return kt(t,e,e.pendingProps,n),e.child;case 8:return kt(t,e,e.pendingProps.children,n),e.child;case 12:return kt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,o=e.memoizedProps,s=i.value,Se(Su,r._currentValue),r._currentValue=s,o!==null)if(wn(o.value,s)){if(o.children===i.children&&!Gt.current){e=or(t,e,n);break e}}else for(o=e.child,o!==null&&(o.return=e);o!==null;){var a=o.dependencies;if(a!==null){s=o.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(o.tag===1){l=Zn(-1,n&-n),l.tag=2;var u=o.updateQueue;if(u!==null){u=u.shared;var h=u.pending;h===null?l.next=l:(l.next=h.next,h.next=l),u.pending=l}}o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),Bf(o.return,n,e),a.lanes|=n;break}l=l.next}}else if(o.tag===10)s=o.type===e.type?null:o.child;else if(o.tag===18){if(s=o.return,s===null)throw Error(q(341));s.lanes|=n,a=s.alternate,a!==null&&(a.lanes|=n),Bf(s,n,e),s=o.sibling}else s=o.child;if(s!==null)s.return=o;else for(s=o;s!==null;){if(s===e){s=null;break}if(o=s.sibling,o!==null){o.return=s.return,s=o;break}s=s.return}o=s}kt(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,To(e,n),i=ln(i),r=r(i),e.flags|=1,kt(t,e,r,n),e.child;case 14:return r=e.type,i=hn(r,e.pendingProps),i=hn(r.type,i),Zy(t,e,r,i,n);case 15:return cw(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:hn(r,i),jl(t,e),e.tag=1,Ht(r)?(t=!0,Tu(e)):t=!1,To(e,n),aw(e,r,i),Hf(e,r,i,n),zf(null,e,r,!0,t,n);case 19:return mw(t,e,n);case 22:return dw(t,e,n)}throw Error(q(156,e.tag))};function kw(t,e){return iT(t,e)}function mP(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function on(t,e,n,r){return new mP(t,e,n,r)}function Op(t){return t=t.prototype,!(!t||!t.isReactComponent)}function gP(t){if(typeof t=="function")return Op(t)?1:0;if(t!=null){if(t=t.$$typeof,t===ip)return 11;if(t===op)return 14}return 2}function Gr(t,e){var n=t.alternate;return n===null?(n=on(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Zl(t,e,n,r,i,o){var s=2;if(r=t,typeof t=="function")Op(t)&&(s=1);else if(typeof t=="string")s=5;else e:switch(t){case no:return Ti(n.children,i,o,e);case rp:s=8,i|=8;break;case ff:return t=on(12,n,e,i|2),t.elementType=ff,t.lanes=o,t;case hf:return t=on(13,n,e,i),t.elementType=hf,t.lanes=o,t;case pf:return t=on(19,n,e,i),t.elementType=pf,t.lanes=o,t;case GE:return yc(n,i,o,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case OE:s=10;break e;case BE:s=9;break e;case ip:s=11;break e;case op:s=14;break e;case Er:s=16,r=null;break e}throw Error(q(130,t==null?t:typeof t,""))}return e=on(s,n,e,i),e.elementType=t,e.type=r,e.lanes=o,e}function Ti(t,e,n,r){return t=on(7,t,r,e),t.lanes=n,t}function yc(t,e,n,r){return t=on(22,t,r,e),t.elementType=GE,t.lanes=n,t.stateNode={isHidden:!1},t}function $d(t,e,n){return t=on(6,t,null,e),t.lanes=n,t}function zd(t,e,n){return e=on(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function yP(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Cd(0),this.expirationTimes=Cd(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Cd(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Bp(t,e,n,r,i,o,s,a,l){return t=new yP(t,e,n,a,l),e===1?(e=1,o===!0&&(e|=8)):e=0,o=on(3,null,null,e),t.current=o,o.stateNode=t,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ip(o),t}function vP(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:to,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function Dw(t){if(!t)return Kr;t=t._reactInternals;e:{if(Ui(t)!==t||t.tag!==1)throw Error(q(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Ht(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(q(171))}if(t.tag===1){var n=t.type;if(Ht(n))return DT(t,n,e)}return e}function Mw(t,e,n,r,i,o,s,a,l){return t=Bp(n,r,!0,t,i,o,s,a,l),t.context=Dw(null),n=t.current,r=Dt(),i=Br(n),o=Zn(r,i),o.callback=e??null,Fr(n,o,i),t.current.lanes=i,Da(t,i,r),qt(t,r),t}function vc(t,e,n,r){var i=e.current,o=Dt(),s=Br(i);return n=Dw(n),e.context===null?e.context=n:e.pendingContext=n,e=Zn(o,s),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Fr(i,e,s),t!==null&&(vn(t,i,s,o),Kl(t,i,s)),s}function bu(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function dv(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Gp(t,e){dv(t,e),(t=t.alternate)&&dv(t,e)}function _P(){return null}var bw=typeof reportError=="function"?reportError:function(t){console.error(t)};function Hp(t){this._internalRoot=t}_c.prototype.render=Hp.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(q(409));vc(t,e,null,null)};_c.prototype.unmount=Hp.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;xi(function(){vc(null,t,null,null)}),e[rr]=null}};function _c(t){this._internalRoot=t}_c.prototype.unstable_scheduleHydration=function(t){if(t){var e=dT();t={blockedOn:null,target:t,priority:e};for(var n=0;n<wr.length&&e!==0&&e<wr[n].priority;n++);wr.splice(n,0,t),n===0&&hT(t)}};function qp(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Ec(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function fv(){}function EP(t,e,n,r,i){if(i){if(typeof r=="function"){var o=r;r=function(){var u=bu(s);o.call(u)}}var s=Mw(e,r,t,0,null,!1,!1,"",fv);return t._reactRootContainer=s,t[rr]=s.current,ca(t.nodeType===8?t.parentNode:t),xi(),s}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var u=bu(l);a.call(u)}}var l=Bp(t,0,!1,null,null,!1,!1,"",fv);return t._reactRootContainer=l,t[rr]=l.current,ca(t.nodeType===8?t.parentNode:t),xi(function(){vc(e,l,n,r)}),l}function Tc(t,e,n,r,i){var o=n._reactRootContainer;if(o){var s=o;if(typeof i=="function"){var a=i;i=function(){var l=bu(s);a.call(l)}}vc(e,s,t,i)}else s=EP(n,e,t,i,r);return bu(s)}uT=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Ds(e.pendingLanes);n!==0&&(lp(e,n|1),qt(e,Ge()),!(de&6)&&(Lo=Ge()+500,ti()))}break;case 13:xi(function(){var r=ir(t,1);if(r!==null){var i=Dt();vn(r,t,1,i)}}),Gp(t,1)}};up=function(t){if(t.tag===13){var e=ir(t,134217728);if(e!==null){var n=Dt();vn(e,t,134217728,n)}Gp(t,134217728)}};cT=function(t){if(t.tag===13){var e=Br(t),n=ir(t,e);if(n!==null){var r=Dt();vn(n,t,e,r)}Gp(t,e)}};dT=function(){return ve};fT=function(t,e){var n=ve;try{return ve=t,e()}finally{ve=n}};Sf=function(t,e,n){switch(e){case"input":if(yf(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=dc(r);if(!i)throw Error(q(90));qE(r),yf(r,i)}}}break;case"textarea":zE(t,n);break;case"select":e=n.value,e!=null&&yo(t,!!n.multiple,e,!1)}};XE=Vp;ZE=xi;var TP={usingClientEntryPoint:!1,Events:[ba,so,dc,jE,QE,Vp]},Cs={findFiberByHostInstance:gi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},wP={bundleType:Cs.bundleType,version:Cs.version,rendererPackageName:Cs.rendererPackageName,rendererConfig:Cs.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:dr.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=nT(t),t===null?null:t.stateNode},findFiberByHostInstance:Cs.findFiberByHostInstance||_P,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Pl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Pl.isDisabled&&Pl.supportsFiber)try{ac=Pl.inject(wP),Mn=Pl}catch{}}Zt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=TP;Zt.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!qp(e))throw Error(q(200));return vP(t,e,null,n)};Zt.createRoot=function(t,e){if(!qp(t))throw Error(q(299));var n=!1,r="",i=bw;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=Bp(t,1,!1,null,null,n,!1,r,i),t[rr]=e.current,ca(t.nodeType===8?t.parentNode:t),new Hp(e)};Zt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(q(188)):(t=Object.keys(t).join(","),Error(q(268,t)));return t=nT(e),t=t===null?null:t.stateNode,t};Zt.flushSync=function(t){return xi(t)};Zt.hydrate=function(t,e,n){if(!Ec(e))throw Error(q(200));return Tc(null,t,e,!0,n)};Zt.hydrateRoot=function(t,e,n){if(!qp(t))throw Error(q(405));var r=n!=null&&n.hydratedSources||null,i=!1,o="",s=bw;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onRecoverableError!==void 0&&(s=n.onRecoverableError)),e=Mw(e,null,t,1,n??null,i,!1,o,s),t[rr]=e.current,ca(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new _c(e)};Zt.render=function(t,e,n){if(!Ec(e))throw Error(q(200));return Tc(null,t,e,!1,n)};Zt.unmountComponentAtNode=function(t){if(!Ec(t))throw Error(q(40));return t._reactRootContainer?(xi(function(){Tc(null,null,t,!1,function(){t._reactRootContainer=null,t[rr]=null})}),!0):!1};Zt.unstable_batchedUpdates=Vp;Zt.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Ec(n))throw Error(q(200));if(t==null||t._reactInternals===void 0)throw Error(q(38));return Tc(t,e,n,!1,r)};Zt.version="18.3.1-next-f1338f8080-20240426";function Lw(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Lw)}catch(t){console.error(t)}}Lw(),LE.exports=Zt;var IP=LE.exports,hv=IP;cf.createRoot=hv.createRoot,cf.hydrateRoot=hv.hydrateRoot;/**
 * @remix-run/router v1.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function _a(){return _a=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},_a.apply(this,arguments)}var Dr;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Dr||(Dr={}));const pv="popstate";function SP(t){t===void 0&&(t={});function e(i,o){let{pathname:s="/",search:a="",hash:l=""}=Fi(i.location.hash.substr(1));return!s.startsWith("/")&&!s.startsWith(".")&&(s="/"+s),rh("",{pathname:s,search:a,hash:l},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function n(i,o){let s=i.document.querySelector("base"),a="";if(s&&s.getAttribute("href")){let l=i.location.href,u=l.indexOf("#");a=u===-1?l:l.slice(0,u)}return a+"#"+(typeof o=="string"?o:Lu(o))}function r(i,o){wc(i.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(o)+")")}return AP(e,n,r,t)}function He(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function wc(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function CP(){return Math.random().toString(36).substr(2,8)}function mv(t,e){return{usr:t.state,key:t.key,idx:e}}function rh(t,e,n,r){return n===void 0&&(n=null),_a({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Fi(e):e,{state:n,key:e&&e.key||r||CP()})}function Lu(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Fi(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function AP(t,e,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:o=!1}=r,s=i.history,a=Dr.Pop,l=null,u=h();u==null&&(u=0,s.replaceState(_a({},s.state,{idx:u}),""));function h(){return(s.state||{idx:null}).idx}function p(){a=Dr.Pop;let x=h(),I=x==null?null:x-u;u=x,l&&l({action:a,location:P.location,delta:I})}function m(x,I){a=Dr.Push;let T=rh(P.location,x,I);n&&n(T,x),u=h()+1;let C=mv(T,u),M=P.createHref(T);try{s.pushState(C,"",M)}catch(U){if(U instanceof DOMException&&U.name==="DataCloneError")throw U;i.location.assign(M)}o&&l&&l({action:a,location:P.location,delta:1})}function _(x,I){a=Dr.Replace;let T=rh(P.location,x,I);n&&n(T,x),u=h();let C=mv(T,u),M=P.createHref(T);s.replaceState(C,"",M),o&&l&&l({action:a,location:P.location,delta:0})}function E(x){let I=i.location.origin!=="null"?i.location.origin:i.location.href,T=typeof x=="string"?x:Lu(x);return T=T.replace(/ $/,"%20"),He(I,"No window.location.(origin|href) available to create URL for href: "+T),new URL(T,I)}let P={get action(){return a},get location(){return t(i,s)},listen(x){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(pv,p),l=x,()=>{i.removeEventListener(pv,p),l=null}},createHref(x){return e(i,x)},createURL:E,encodeLocation(x){let I=E(x);return{pathname:I.pathname,search:I.search,hash:I.hash}},push:m,replace:_,go(x){return s.go(x)}};return P}var gv;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(gv||(gv={}));function RP(t,e,n){return n===void 0&&(n="/"),xP(t,e,n)}function xP(t,e,n,r){let i=typeof e=="string"?Fi(e):e,o=$p(i.pathname||"/",n);if(o==null)return null;let s=Vw(t);PP(s);let a=null;for(let l=0;a==null&&l<s.length;++l){let u=GP(o);a=FP(s[l],u)}return a}function Vw(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(o,s,a)=>{let l={relativePath:a===void 0?o.path||"":a,caseSensitive:o.caseSensitive===!0,childrenIndex:s,route:o};l.relativePath.startsWith("/")&&(He(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let u=Hr([r,l.relativePath]),h=n.concat(l);o.children&&o.children.length>0&&(He(o.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),Vw(o.children,e,h,u)),!(o.path==null&&!o.index)&&e.push({path:u,score:VP(u,o.index),routesMeta:h})};return t.forEach((o,s)=>{var a;if(o.path===""||!((a=o.path)!=null&&a.includes("?")))i(o,s);else for(let l of Uw(o.path))i(o,s,l)}),e}function Uw(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),o=n.replace(/\?$/,"");if(r.length===0)return i?[o,""]:[o];let s=Uw(r.join("/")),a=[];return a.push(...s.map(l=>l===""?o:[o,l].join("/"))),i&&a.push(...s),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function PP(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:UP(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const NP=/^:[\w-]+$/,kP=3,DP=2,MP=1,bP=10,LP=-2,yv=t=>t==="*";function VP(t,e){let n=t.split("/"),r=n.length;return n.some(yv)&&(r+=LP),e&&(r+=DP),n.filter(i=>!yv(i)).reduce((i,o)=>i+(NP.test(o)?kP:o===""?MP:bP),r)}function UP(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function FP(t,e,n){let{routesMeta:r}=t,i={},o="/",s=[];for(let a=0;a<r.length;++a){let l=r[a],u=a===r.length-1,h=o==="/"?e:e.slice(o.length)||"/",p=OP({path:l.relativePath,caseSensitive:l.caseSensitive,end:u},h),m=l.route;if(!p)return null;Object.assign(i,p.params),s.push({params:i,pathname:Hr([o,p.pathname]),pathnameBase:WP(Hr([o,p.pathnameBase])),route:m}),p.pathnameBase!=="/"&&(o=Hr([o,p.pathnameBase]))}return s}function OP(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=BP(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let o=i[0],s=o.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((u,h,p)=>{let{paramName:m,isOptional:_}=h;if(m==="*"){let P=a[p]||"";s=o.slice(0,o.length-P.length).replace(/(.)\/+$/,"$1")}const E=a[p];return _&&!E?u[m]=void 0:u[m]=(E||"").replace(/%2F/g,"/"),u},{}),pathname:o,pathnameBase:s,pattern:t}}function BP(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),wc(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(s,a,l)=>(r.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function GP(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return wc(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function $p(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}const HP=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,qP=t=>HP.test(t);function $P(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?Fi(t):t,o;if(n)if(qP(n))o=n;else{if(n.includes("//")){let s=n;n=n.replace(/\/\/+/g,"/"),wc(!1,"Pathnames cannot have embedded double slashes - normalizing "+(s+" -> "+n))}n.startsWith("/")?o=vv(n.substring(1),"/"):o=vv(n,e)}else o=e;return{pathname:o,search:KP(r),hash:JP(i)}}function vv(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function Wd(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function zP(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function zp(t,e){let n=zP(t);return e?n.map((r,i)=>i===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function Wp(t,e,n,r){r===void 0&&(r=!1);let i;typeof t=="string"?i=Fi(t):(i=_a({},t),He(!i.pathname||!i.pathname.includes("?"),Wd("?","pathname","search",i)),He(!i.pathname||!i.pathname.includes("#"),Wd("#","pathname","hash",i)),He(!i.search||!i.search.includes("#"),Wd("#","search","hash",i)));let o=t===""||i.pathname==="",s=o?"/":i.pathname,a;if(s==null)a=n;else{let p=e.length-1;if(!r&&s.startsWith("..")){let m=s.split("/");for(;m[0]==="..";)m.shift(),p-=1;i.pathname=m.join("/")}a=p>=0?e[p]:"/"}let l=$P(i,a),u=s&&s!=="/"&&s.endsWith("/"),h=(o||s===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(u||h)&&(l.pathname+="/"),l}const Hr=t=>t.join("/").replace(/\/\/+/g,"/"),WP=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),KP=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,JP=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function YP(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const Fw=["post","put","patch","delete"];new Set(Fw);const jP=["get",...Fw];new Set(jP);/**
 * React Router v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ea(){return Ea=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ea.apply(this,arguments)}const Kp=F.createContext(null),QP=F.createContext(null),ni=F.createContext(null),Ic=F.createContext(null),fr=F.createContext({outlet:null,matches:[],isDataRoute:!1}),Ow=F.createContext(null);function XP(t,e){let{relative:n}=e===void 0?{}:e;Ko()||He(!1);let{basename:r,navigator:i}=F.useContext(ni),{hash:o,pathname:s,search:a}=Gw(t,{relative:n}),l=s;return r!=="/"&&(l=s==="/"?r:Hr([r,s])),i.createHref({pathname:l,search:a,hash:o})}function Ko(){return F.useContext(Ic)!=null}function Oi(){return Ko()||He(!1),F.useContext(Ic).location}function Bw(t){F.useContext(ni).static||F.useLayoutEffect(t)}function Cn(){let{isDataRoute:t}=F.useContext(fr);return t?fN():ZP()}function ZP(){Ko()||He(!1);let t=F.useContext(Kp),{basename:e,future:n,navigator:r}=F.useContext(ni),{matches:i}=F.useContext(fr),{pathname:o}=Oi(),s=JSON.stringify(zp(i,n.v7_relativeSplatPath)),a=F.useRef(!1);return Bw(()=>{a.current=!0}),F.useCallback(function(u,h){if(h===void 0&&(h={}),!a.current)return;if(typeof u=="number"){r.go(u);return}let p=Wp(u,JSON.parse(s),o,h.relative==="path");t==null&&e!=="/"&&(p.pathname=p.pathname==="/"?e:Hr([e,p.pathname])),(h.replace?r.replace:r.push)(p,h.state,h)},[e,r,s,o,t])}function eN(){let{matches:t}=F.useContext(fr),e=t[t.length-1];return e?e.params:{}}function Gw(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=F.useContext(ni),{matches:i}=F.useContext(fr),{pathname:o}=Oi(),s=JSON.stringify(zp(i,r.v7_relativeSplatPath));return F.useMemo(()=>Wp(t,JSON.parse(s),o,n==="path"),[t,s,o,n])}function tN(t,e){return nN(t,e)}function nN(t,e,n,r){Ko()||He(!1);let{navigator:i}=F.useContext(ni),{matches:o}=F.useContext(fr),s=o[o.length-1],a=s?s.params:{};s&&s.pathname;let l=s?s.pathnameBase:"/";s&&s.route;let u=Oi(),h;if(e){var p;let x=typeof e=="string"?Fi(e):e;l==="/"||(p=x.pathname)!=null&&p.startsWith(l)||He(!1),h=x}else h=u;let m=h.pathname||"/",_=m;if(l!=="/"){let x=l.replace(/^\//,"").split("/");_="/"+m.replace(/^\//,"").split("/").slice(x.length).join("/")}let E=RP(t,{pathname:_}),P=aN(E&&E.map(x=>Object.assign({},x,{params:Object.assign({},a,x.params),pathname:Hr([l,i.encodeLocation?i.encodeLocation(x.pathname).pathname:x.pathname]),pathnameBase:x.pathnameBase==="/"?l:Hr([l,i.encodeLocation?i.encodeLocation(x.pathnameBase).pathname:x.pathnameBase])})),o,n,r);return e&&P?F.createElement(Ic.Provider,{value:{location:Ea({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:Dr.Pop}},P):P}function rN(){let t=dN(),e=YP(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return F.createElement(F.Fragment,null,F.createElement("h2",null,"Unexpected Application Error!"),F.createElement("h3",{style:{fontStyle:"italic"}},e),n?F.createElement("pre",{style:i},n):null,null)}const iN=F.createElement(rN,null);class oN extends F.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?F.createElement(fr.Provider,{value:this.props.routeContext},F.createElement(Ow.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function sN(t){let{routeContext:e,match:n,children:r}=t,i=F.useContext(Kp);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),F.createElement(fr.Provider,{value:e},r)}function aN(t,e,n,r){var i;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var o;if(!n)return null;if(n.errors)t=n.matches;else if((o=r)!=null&&o.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let s=t,a=(i=n)==null?void 0:i.errors;if(a!=null){let h=s.findIndex(p=>p.route.id&&(a==null?void 0:a[p.route.id])!==void 0);h>=0||He(!1),s=s.slice(0,Math.min(s.length,h+1))}let l=!1,u=-1;if(n&&r&&r.v7_partialHydration)for(let h=0;h<s.length;h++){let p=s[h];if((p.route.HydrateFallback||p.route.hydrateFallbackElement)&&(u=h),p.route.id){let{loaderData:m,errors:_}=n,E=p.route.loader&&m[p.route.id]===void 0&&(!_||_[p.route.id]===void 0);if(p.route.lazy||E){l=!0,u>=0?s=s.slice(0,u+1):s=[s[0]];break}}}return s.reduceRight((h,p,m)=>{let _,E=!1,P=null,x=null;n&&(_=a&&p.route.id?a[p.route.id]:void 0,P=p.route.errorElement||iN,l&&(u<0&&m===0?(hN("route-fallback"),E=!0,x=null):u===m&&(E=!0,x=p.route.hydrateFallbackElement||null)));let I=e.concat(s.slice(0,m+1)),T=()=>{let C;return _?C=P:E?C=x:p.route.Component?C=F.createElement(p.route.Component,null):p.route.element?C=p.route.element:C=h,F.createElement(sN,{match:p,routeContext:{outlet:h,matches:I,isDataRoute:n!=null},children:C})};return n&&(p.route.ErrorBoundary||p.route.errorElement||m===0)?F.createElement(oN,{location:n.location,revalidation:n.revalidation,component:P,error:_,children:T(),routeContext:{outlet:null,matches:I,isDataRoute:!0}}):T()},null)}var Hw=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(Hw||{}),qw=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(qw||{});function lN(t){let e=F.useContext(Kp);return e||He(!1),e}function uN(t){let e=F.useContext(QP);return e||He(!1),e}function cN(t){let e=F.useContext(fr);return e||He(!1),e}function $w(t){let e=cN(),n=e.matches[e.matches.length-1];return n.route.id||He(!1),n.route.id}function dN(){var t;let e=F.useContext(Ow),n=uN(),r=$w();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function fN(){let{router:t}=lN(Hw.UseNavigateStable),e=$w(qw.UseNavigateStable),n=F.useRef(!1);return Bw(()=>{n.current=!0}),F.useCallback(function(i,o){o===void 0&&(o={}),n.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,Ea({fromRouteId:e},o)))},[t,e])}const _v={};function hN(t,e,n){_v[t]||(_v[t]=!0)}function pN(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function zw(t){let{to:e,replace:n,state:r,relative:i}=t;Ko()||He(!1);let{future:o,static:s}=F.useContext(ni),{matches:a}=F.useContext(fr),{pathname:l}=Oi(),u=Cn(),h=Wp(e,zp(a,o.v7_relativeSplatPath),l,i==="path"),p=JSON.stringify(h);return F.useEffect(()=>u(JSON.parse(p),{replace:n,state:r,relative:i}),[u,p,i,n,r]),null}function xn(t){He(!1)}function mN(t){let{basename:e="/",children:n=null,location:r,navigationType:i=Dr.Pop,navigator:o,static:s=!1,future:a}=t;Ko()&&He(!1);let l=e.replace(/^\/*/,"/"),u=F.useMemo(()=>({basename:l,navigator:o,static:s,future:Ea({v7_relativeSplatPath:!1},a)}),[l,a,o,s]);typeof r=="string"&&(r=Fi(r));let{pathname:h="/",search:p="",hash:m="",state:_=null,key:E="default"}=r,P=F.useMemo(()=>{let x=$p(h,l);return x==null?null:{location:{pathname:x,search:p,hash:m,state:_,key:E},navigationType:i}},[l,h,p,m,_,E,i]);return P==null?null:F.createElement(ni.Provider,{value:u},F.createElement(Ic.Provider,{children:n,value:P}))}function gN(t){let{children:e,location:n}=t;return tN(ih(e),n)}new Promise(()=>{});function ih(t,e){e===void 0&&(e=[]);let n=[];return F.Children.forEach(t,(r,i)=>{if(!F.isValidElement(r))return;let o=[...e,i];if(r.type===F.Fragment){n.push.apply(n,ih(r.props.children,o));return}r.type!==xn&&He(!1),!r.props.index||!r.props.children||He(!1);let s={id:r.props.id||o.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(s.children=ih(r.props.children,o)),n.push(s)}),n}/**
 * React Router DOM v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function oh(){return oh=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},oh.apply(this,arguments)}function yN(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,o;for(o=0;o<r.length;o++)i=r[o],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function vN(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function _N(t,e){return t.button===0&&(!e||e==="_self")&&!vN(t)}function sh(t){return t===void 0&&(t=""),new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,n)=>{let r=t[n];return e.concat(Array.isArray(r)?r.map(i=>[n,i]):[[n,r]])},[]))}function EN(t,e){let n=sh(t);return e&&e.forEach((r,i)=>{n.has(i)||e.getAll(i).forEach(o=>{n.append(i,o)})}),n}const TN=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],wN="6";try{window.__reactRouterVersion=wN}catch{}const IN="startTransition",Ev=fR[IN];function SN(t){let{basename:e,children:n,future:r,window:i}=t,o=F.useRef();o.current==null&&(o.current=SP({window:i,v5Compat:!0}));let s=o.current,[a,l]=F.useState({action:s.action,location:s.location}),{v7_startTransition:u}=r||{},h=F.useCallback(p=>{u&&Ev?Ev(()=>l(p)):l(p)},[l,u]);return F.useLayoutEffect(()=>s.listen(h),[s,h]),F.useEffect(()=>pN(r),[r]),F.createElement(mN,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:s,future:r})}const CN=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",AN=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Sr=F.forwardRef(function(e,n){let{onClick:r,relative:i,reloadDocument:o,replace:s,state:a,target:l,to:u,preventScrollReset:h,viewTransition:p}=e,m=yN(e,TN),{basename:_}=F.useContext(ni),E,P=!1;if(typeof u=="string"&&AN.test(u)&&(E=u,CN))try{let C=new URL(window.location.href),M=u.startsWith("//")?new URL(C.protocol+u):new URL(u),U=$p(M.pathname,_);M.origin===C.origin&&U!=null?u=U+M.search+M.hash:P=!0}catch{}let x=XP(u,{relative:i}),I=RN(u,{replace:s,state:a,target:l,preventScrollReset:h,relative:i,viewTransition:p});function T(C){r&&r(C),C.defaultPrevented||I(C)}return F.createElement("a",oh({},m,{href:E||x,onClick:P||o?r:T,ref:n,target:l}))});var Tv;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(Tv||(Tv={}));var wv;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(wv||(wv={}));function RN(t,e){let{target:n,replace:r,state:i,preventScrollReset:o,relative:s,viewTransition:a}=e===void 0?{}:e,l=Cn(),u=Oi(),h=Gw(t,{relative:s});return F.useCallback(p=>{if(_N(p,n)){p.preventDefault();let m=r!==void 0?r:Lu(u)===Lu(h);l(t,{replace:m,state:i,preventScrollReset:o,relative:s,viewTransition:a})}},[u,l,h,r,i,n,t,o,s,a])}function xN(t){let e=F.useRef(sh(t)),n=F.useRef(!1),r=Oi(),i=F.useMemo(()=>EN(r.search,n.current?null:e.current),[r.search]),o=Cn(),s=F.useCallback((a,l)=>{const u=sh(typeof a=="function"?a(i):a);n.current=!0,o("?"+u,l)},[o,i]);return[i,s]}var Iv={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ww=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},PN=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const o=t[n++];e[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){const o=t[n++],s=t[n++],a=t[n++],l=((i&7)<<18|(o&63)<<12|(s&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const o=t[n++],s=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|s&63)}}return e.join("")},Kw={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const o=t[i],s=i+1<t.length,a=s?t[i+1]:0,l=i+2<t.length,u=l?t[i+2]:0,h=o>>2,p=(o&3)<<4|a>>4;let m=(a&15)<<2|u>>6,_=u&63;l||(_=64,s||(m=64)),r.push(n[h],n[p],n[m],n[_])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Ww(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):PN(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const o=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;const u=i<t.length?n[t.charAt(i)]:64;++i;const p=i<t.length?n[t.charAt(i)]:64;if(++i,o==null||a==null||u==null||p==null)throw new NN;const m=o<<2|a>>4;if(r.push(m),u!==64){const _=a<<4&240|u>>2;if(r.push(_),p!==64){const E=u<<6&192|p;r.push(E)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class NN extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const kN=function(t){const e=Ww(t);return Kw.encodeByteArray(e,!0)},Vu=function(t){return kN(t).replace(/\./g,"")},Jw=function(t){try{return Kw.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DN(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MN=()=>DN().__FIREBASE_DEFAULTS__,bN=()=>{if(typeof process>"u"||typeof Iv>"u")return;const t=Iv.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},LN=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&Jw(t[1]);return e&&JSON.parse(e)},Sc=()=>{try{return MN()||bN()||LN()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},Yw=t=>{var e,n;return(n=(e=Sc())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},jw=t=>{const e=Yw(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},Qw=()=>{var t;return(t=Sc())===null||t===void 0?void 0:t.config},Xw=t=>{var e;return(e=Sc())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VN{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zw(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Vu(JSON.stringify(n)),Vu(JSON.stringify(s)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ct(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function UN(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ct())}function FN(){var t;const e=(t=Sc())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function ON(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function BN(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function GN(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function HN(){const t=Ct();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function qN(){return!FN()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function $N(){try{return typeof indexedDB=="object"}catch{return!1}}function zN(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var o;e(((o=i.error)===null||o===void 0?void 0:o.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WN="FirebaseError";class Hn extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=WN,Object.setPrototypeOf(this,Hn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Va.prototype.create)}}class Va{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,o=this.errors[e],s=o?KN(o,r):"Error",a=`${this.serviceName}: ${s} (${i}).`;return new Hn(i,a,r)}}function KN(t,e){return t.replace(JN,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const JN=/\{\$([^}]+)}/g;function YN(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Ta(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const o=t[i],s=e[i];if(Sv(o)&&Sv(s)){if(!Ta(o,s))return!1}else if(o!==s)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function Sv(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ua(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function bs(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,o]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(o)}}),e}function Ls(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function jN(t,e){const n=new QN(t,e);return n.subscribe.bind(n)}class QN{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");XN(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=Kd),i.error===void 0&&(i.error=Kd),i.complete===void 0&&(i.complete=Kd);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function XN(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Kd(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ue(t){return t&&t._delegate?t._delegate:t}class Jr{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pi="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZN{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new VN;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(tk(e))try{this.getOrInitializeService({instanceIdentifier:pi})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(e=pi){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=pi){return this.instances.has(e)}getOptions(e=pi){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[o,s]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(o);r===a&&s.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),o=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;o.add(e),this.onInitCallbacks.set(i,o);const s=this.instances.get(i);return s&&e(s,i),()=>{o.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:ek(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=pi){return this.component?this.component.multipleInstances?e:pi:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function ek(t){return t===pi?void 0:t}function tk(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nk{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new ZN(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ue;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(ue||(ue={}));const rk={debug:ue.DEBUG,verbose:ue.VERBOSE,info:ue.INFO,warn:ue.WARN,error:ue.ERROR,silent:ue.SILENT},ik=ue.INFO,ok={[ue.DEBUG]:"log",[ue.VERBOSE]:"log",[ue.INFO]:"info",[ue.WARN]:"warn",[ue.ERROR]:"error"},sk=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=ok[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Jp{constructor(e){this.name=e,this._logLevel=ik,this._logHandler=sk,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ue))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?rk[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ue.DEBUG,...e),this._logHandler(this,ue.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ue.VERBOSE,...e),this._logHandler(this,ue.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ue.INFO,...e),this._logHandler(this,ue.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ue.WARN,...e),this._logHandler(this,ue.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ue.ERROR,...e),this._logHandler(this,ue.ERROR,...e)}}const ak=(t,e)=>e.some(n=>t instanceof n);let Cv,Av;function lk(){return Cv||(Cv=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function uk(){return Av||(Av=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const eI=new WeakMap,ah=new WeakMap,tI=new WeakMap,Jd=new WeakMap,Yp=new WeakMap;function ck(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",o),t.removeEventListener("error",s)},o=()=>{n(qr(t.result)),i()},s=()=>{r(t.error),i()};t.addEventListener("success",o),t.addEventListener("error",s)});return e.then(n=>{n instanceof IDBCursor&&eI.set(n,t)}).catch(()=>{}),Yp.set(e,t),e}function dk(t){if(ah.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",s),t.removeEventListener("abort",s)},o=()=>{n(),i()},s=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",o),t.addEventListener("error",s),t.addEventListener("abort",s)});ah.set(t,e)}let lh={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return ah.get(t);if(e==="objectStoreNames")return t.objectStoreNames||tI.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return qr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function fk(t){lh=t(lh)}function hk(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Yd(this),e,...n);return tI.set(r,e.sort?e.sort():[e]),qr(r)}:uk().includes(t)?function(...e){return t.apply(Yd(this),e),qr(eI.get(this))}:function(...e){return qr(t.apply(Yd(this),e))}}function pk(t){return typeof t=="function"?hk(t):(t instanceof IDBTransaction&&dk(t),ak(t,lk())?new Proxy(t,lh):t)}function qr(t){if(t instanceof IDBRequest)return ck(t);if(Jd.has(t))return Jd.get(t);const e=pk(t);return e!==t&&(Jd.set(t,e),Yp.set(e,t)),e}const Yd=t=>Yp.get(t);function mk(t,e,{blocked:n,upgrade:r,blocking:i,terminated:o}={}){const s=indexedDB.open(t,e),a=qr(s);return r&&s.addEventListener("upgradeneeded",l=>{r(qr(s.result),l.oldVersion,l.newVersion,qr(s.transaction),l)}),n&&s.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{o&&l.addEventListener("close",()=>o()),i&&l.addEventListener("versionchange",u=>i(u.oldVersion,u.newVersion,u))}).catch(()=>{}),a}const gk=["get","getKey","getAll","getAllKeys","count"],yk=["put","add","delete","clear"],jd=new Map;function Rv(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(jd.get(e))return jd.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=yk.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||gk.includes(n)))return;const o=async function(s,...a){const l=this.transaction(s,i?"readwrite":"readonly");let u=l.store;return r&&(u=u.index(a.shift())),(await Promise.all([u[n](...a),i&&l.done]))[0]};return jd.set(e,o),o}fk(t=>({...t,get:(e,n,r)=>Rv(e,n)||t.get(e,n,r),has:(e,n)=>!!Rv(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vk{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(_k(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function _k(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const uh="@firebase/app",xv="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sr=new Jp("@firebase/app"),Ek="@firebase/app-compat",Tk="@firebase/analytics-compat",wk="@firebase/analytics",Ik="@firebase/app-check-compat",Sk="@firebase/app-check",Ck="@firebase/auth",Ak="@firebase/auth-compat",Rk="@firebase/database",xk="@firebase/data-connect",Pk="@firebase/database-compat",Nk="@firebase/functions",kk="@firebase/functions-compat",Dk="@firebase/installations",Mk="@firebase/installations-compat",bk="@firebase/messaging",Lk="@firebase/messaging-compat",Vk="@firebase/performance",Uk="@firebase/performance-compat",Fk="@firebase/remote-config",Ok="@firebase/remote-config-compat",Bk="@firebase/storage",Gk="@firebase/storage-compat",Hk="@firebase/firestore",qk="@firebase/vertexai-preview",$k="@firebase/firestore-compat",zk="firebase",Wk="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ch="[DEFAULT]",Kk={[uh]:"fire-core",[Ek]:"fire-core-compat",[wk]:"fire-analytics",[Tk]:"fire-analytics-compat",[Sk]:"fire-app-check",[Ik]:"fire-app-check-compat",[Ck]:"fire-auth",[Ak]:"fire-auth-compat",[Rk]:"fire-rtdb",[xk]:"fire-data-connect",[Pk]:"fire-rtdb-compat",[Nk]:"fire-fn",[kk]:"fire-fn-compat",[Dk]:"fire-iid",[Mk]:"fire-iid-compat",[bk]:"fire-fcm",[Lk]:"fire-fcm-compat",[Vk]:"fire-perf",[Uk]:"fire-perf-compat",[Fk]:"fire-rc",[Ok]:"fire-rc-compat",[Bk]:"fire-gcs",[Gk]:"fire-gcs-compat",[Hk]:"fire-fst",[$k]:"fire-fst-compat",[qk]:"fire-vertex","fire-js":"fire-js",[zk]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uu=new Map,Jk=new Map,dh=new Map;function Pv(t,e){try{t.container.addComponent(e)}catch(n){sr.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Pi(t){const e=t.name;if(dh.has(e))return sr.debug(`There were multiple attempts to register component ${e}.`),!1;dh.set(e,t);for(const n of Uu.values())Pv(n,t);for(const n of Jk.values())Pv(n,t);return!0}function Fa(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function kn(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yk={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},$r=new Va("app","Firebase",Yk);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jk{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Jr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw $r.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bi=Wk;function nI(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:ch,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw $r.create("bad-app-name",{appName:String(i)});if(n||(n=Qw()),!n)throw $r.create("no-options");const o=Uu.get(i);if(o){if(Ta(n,o.options)&&Ta(r,o.config))return o;throw $r.create("duplicate-app",{appName:i})}const s=new nk(i);for(const l of dh.values())s.addComponent(l);const a=new jk(n,r,s);return Uu.set(i,a),a}function jp(t=ch){const e=Uu.get(t);if(!e&&t===ch&&Qw())return nI();if(!e)throw $r.create("no-app",{appName:t});return e}function Ln(t,e,n){var r;let i=(r=Kk[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const o=i.match(/\s|\//),s=e.match(/\s|\//);if(o||s){const a=[`Unable to register library "${i}" with version "${e}":`];o&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&s&&a.push("and"),s&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),sr.warn(a.join(" "));return}Pi(new Jr(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qk="firebase-heartbeat-database",Xk=1,wa="firebase-heartbeat-store";let Qd=null;function rI(){return Qd||(Qd=mk(Qk,Xk,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(wa)}catch(n){console.warn(n)}}}}).catch(t=>{throw $r.create("idb-open",{originalErrorMessage:t.message})})),Qd}async function Zk(t){try{const n=(await rI()).transaction(wa),r=await n.objectStore(wa).get(iI(t));return await n.done,r}catch(e){if(e instanceof Hn)sr.warn(e.message);else{const n=$r.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});sr.warn(n.message)}}}async function Nv(t,e){try{const r=(await rI()).transaction(wa,"readwrite");await r.objectStore(wa).put(e,iI(t)),await r.done}catch(n){if(n instanceof Hn)sr.warn(n.message);else{const r=$r.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});sr.warn(r.message)}}}function iI(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eD=1024,tD=30*24*60*60*1e3;class nD{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new iD(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=kv();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(s=>s.date===o)?void 0:(this._heartbeatsCache.heartbeats.push({date:o,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(s=>{const a=new Date(s.date).valueOf();return Date.now()-a<=tD}),this._storage.overwrite(this._heartbeatsCache))}catch(r){sr.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=kv(),{heartbeatsToSend:r,unsentEntries:i}=rD(this._heartbeatsCache.heartbeats),o=Vu(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(n){return sr.warn(n),""}}}function kv(){return new Date().toISOString().substring(0,10)}function rD(t,e=eD){const n=[];let r=t.slice();for(const i of t){const o=n.find(s=>s.agent===i.agent);if(o){if(o.dates.push(i.date),Dv(n)>e){o.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),Dv(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class iD{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return $N()?zN().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await Zk(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return Nv(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return Nv(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function Dv(t){return Vu(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oD(t){Pi(new Jr("platform-logger",e=>new vk(e),"PRIVATE")),Pi(new Jr("heartbeat",e=>new nD(e),"PRIVATE")),Ln(uh,xv,t),Ln(uh,xv,"esm2017"),Ln("fire-js","")}oD("");var sD="firebase",aD="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ln(sD,aD,"app");var Mv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var wi,oI;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(R,w){function A(){}A.prototype=w.prototype,R.D=w.prototype,R.prototype=new A,R.prototype.constructor=R,R.C=function(N,D,b){for(var k=Array(arguments.length-2),ge=2;ge<arguments.length;ge++)k[ge-2]=arguments[ge];return w.prototype[D].apply(N,k)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(R,w,A){A||(A=0);var N=Array(16);if(typeof w=="string")for(var D=0;16>D;++D)N[D]=w.charCodeAt(A++)|w.charCodeAt(A++)<<8|w.charCodeAt(A++)<<16|w.charCodeAt(A++)<<24;else for(D=0;16>D;++D)N[D]=w[A++]|w[A++]<<8|w[A++]<<16|w[A++]<<24;w=R.g[0],A=R.g[1],D=R.g[2];var b=R.g[3],k=w+(b^A&(D^b))+N[0]+3614090360&4294967295;w=A+(k<<7&4294967295|k>>>25),k=b+(D^w&(A^D))+N[1]+3905402710&4294967295,b=w+(k<<12&4294967295|k>>>20),k=D+(A^b&(w^A))+N[2]+606105819&4294967295,D=b+(k<<17&4294967295|k>>>15),k=A+(w^D&(b^w))+N[3]+3250441966&4294967295,A=D+(k<<22&4294967295|k>>>10),k=w+(b^A&(D^b))+N[4]+4118548399&4294967295,w=A+(k<<7&4294967295|k>>>25),k=b+(D^w&(A^D))+N[5]+1200080426&4294967295,b=w+(k<<12&4294967295|k>>>20),k=D+(A^b&(w^A))+N[6]+2821735955&4294967295,D=b+(k<<17&4294967295|k>>>15),k=A+(w^D&(b^w))+N[7]+4249261313&4294967295,A=D+(k<<22&4294967295|k>>>10),k=w+(b^A&(D^b))+N[8]+1770035416&4294967295,w=A+(k<<7&4294967295|k>>>25),k=b+(D^w&(A^D))+N[9]+2336552879&4294967295,b=w+(k<<12&4294967295|k>>>20),k=D+(A^b&(w^A))+N[10]+4294925233&4294967295,D=b+(k<<17&4294967295|k>>>15),k=A+(w^D&(b^w))+N[11]+2304563134&4294967295,A=D+(k<<22&4294967295|k>>>10),k=w+(b^A&(D^b))+N[12]+1804603682&4294967295,w=A+(k<<7&4294967295|k>>>25),k=b+(D^w&(A^D))+N[13]+4254626195&4294967295,b=w+(k<<12&4294967295|k>>>20),k=D+(A^b&(w^A))+N[14]+2792965006&4294967295,D=b+(k<<17&4294967295|k>>>15),k=A+(w^D&(b^w))+N[15]+1236535329&4294967295,A=D+(k<<22&4294967295|k>>>10),k=w+(D^b&(A^D))+N[1]+4129170786&4294967295,w=A+(k<<5&4294967295|k>>>27),k=b+(A^D&(w^A))+N[6]+3225465664&4294967295,b=w+(k<<9&4294967295|k>>>23),k=D+(w^A&(b^w))+N[11]+643717713&4294967295,D=b+(k<<14&4294967295|k>>>18),k=A+(b^w&(D^b))+N[0]+3921069994&4294967295,A=D+(k<<20&4294967295|k>>>12),k=w+(D^b&(A^D))+N[5]+3593408605&4294967295,w=A+(k<<5&4294967295|k>>>27),k=b+(A^D&(w^A))+N[10]+38016083&4294967295,b=w+(k<<9&4294967295|k>>>23),k=D+(w^A&(b^w))+N[15]+3634488961&4294967295,D=b+(k<<14&4294967295|k>>>18),k=A+(b^w&(D^b))+N[4]+3889429448&4294967295,A=D+(k<<20&4294967295|k>>>12),k=w+(D^b&(A^D))+N[9]+568446438&4294967295,w=A+(k<<5&4294967295|k>>>27),k=b+(A^D&(w^A))+N[14]+3275163606&4294967295,b=w+(k<<9&4294967295|k>>>23),k=D+(w^A&(b^w))+N[3]+4107603335&4294967295,D=b+(k<<14&4294967295|k>>>18),k=A+(b^w&(D^b))+N[8]+1163531501&4294967295,A=D+(k<<20&4294967295|k>>>12),k=w+(D^b&(A^D))+N[13]+2850285829&4294967295,w=A+(k<<5&4294967295|k>>>27),k=b+(A^D&(w^A))+N[2]+4243563512&4294967295,b=w+(k<<9&4294967295|k>>>23),k=D+(w^A&(b^w))+N[7]+1735328473&4294967295,D=b+(k<<14&4294967295|k>>>18),k=A+(b^w&(D^b))+N[12]+2368359562&4294967295,A=D+(k<<20&4294967295|k>>>12),k=w+(A^D^b)+N[5]+4294588738&4294967295,w=A+(k<<4&4294967295|k>>>28),k=b+(w^A^D)+N[8]+2272392833&4294967295,b=w+(k<<11&4294967295|k>>>21),k=D+(b^w^A)+N[11]+1839030562&4294967295,D=b+(k<<16&4294967295|k>>>16),k=A+(D^b^w)+N[14]+4259657740&4294967295,A=D+(k<<23&4294967295|k>>>9),k=w+(A^D^b)+N[1]+2763975236&4294967295,w=A+(k<<4&4294967295|k>>>28),k=b+(w^A^D)+N[4]+1272893353&4294967295,b=w+(k<<11&4294967295|k>>>21),k=D+(b^w^A)+N[7]+4139469664&4294967295,D=b+(k<<16&4294967295|k>>>16),k=A+(D^b^w)+N[10]+3200236656&4294967295,A=D+(k<<23&4294967295|k>>>9),k=w+(A^D^b)+N[13]+681279174&4294967295,w=A+(k<<4&4294967295|k>>>28),k=b+(w^A^D)+N[0]+3936430074&4294967295,b=w+(k<<11&4294967295|k>>>21),k=D+(b^w^A)+N[3]+3572445317&4294967295,D=b+(k<<16&4294967295|k>>>16),k=A+(D^b^w)+N[6]+76029189&4294967295,A=D+(k<<23&4294967295|k>>>9),k=w+(A^D^b)+N[9]+3654602809&4294967295,w=A+(k<<4&4294967295|k>>>28),k=b+(w^A^D)+N[12]+3873151461&4294967295,b=w+(k<<11&4294967295|k>>>21),k=D+(b^w^A)+N[15]+530742520&4294967295,D=b+(k<<16&4294967295|k>>>16),k=A+(D^b^w)+N[2]+3299628645&4294967295,A=D+(k<<23&4294967295|k>>>9),k=w+(D^(A|~b))+N[0]+4096336452&4294967295,w=A+(k<<6&4294967295|k>>>26),k=b+(A^(w|~D))+N[7]+1126891415&4294967295,b=w+(k<<10&4294967295|k>>>22),k=D+(w^(b|~A))+N[14]+2878612391&4294967295,D=b+(k<<15&4294967295|k>>>17),k=A+(b^(D|~w))+N[5]+4237533241&4294967295,A=D+(k<<21&4294967295|k>>>11),k=w+(D^(A|~b))+N[12]+1700485571&4294967295,w=A+(k<<6&4294967295|k>>>26),k=b+(A^(w|~D))+N[3]+2399980690&4294967295,b=w+(k<<10&4294967295|k>>>22),k=D+(w^(b|~A))+N[10]+4293915773&4294967295,D=b+(k<<15&4294967295|k>>>17),k=A+(b^(D|~w))+N[1]+2240044497&4294967295,A=D+(k<<21&4294967295|k>>>11),k=w+(D^(A|~b))+N[8]+1873313359&4294967295,w=A+(k<<6&4294967295|k>>>26),k=b+(A^(w|~D))+N[15]+4264355552&4294967295,b=w+(k<<10&4294967295|k>>>22),k=D+(w^(b|~A))+N[6]+2734768916&4294967295,D=b+(k<<15&4294967295|k>>>17),k=A+(b^(D|~w))+N[13]+1309151649&4294967295,A=D+(k<<21&4294967295|k>>>11),k=w+(D^(A|~b))+N[4]+4149444226&4294967295,w=A+(k<<6&4294967295|k>>>26),k=b+(A^(w|~D))+N[11]+3174756917&4294967295,b=w+(k<<10&4294967295|k>>>22),k=D+(w^(b|~A))+N[2]+718787259&4294967295,D=b+(k<<15&4294967295|k>>>17),k=A+(b^(D|~w))+N[9]+3951481745&4294967295,R.g[0]=R.g[0]+w&4294967295,R.g[1]=R.g[1]+(D+(k<<21&4294967295|k>>>11))&4294967295,R.g[2]=R.g[2]+D&4294967295,R.g[3]=R.g[3]+b&4294967295}r.prototype.u=function(R,w){w===void 0&&(w=R.length);for(var A=w-this.blockSize,N=this.B,D=this.h,b=0;b<w;){if(D==0)for(;b<=A;)i(this,R,b),b+=this.blockSize;if(typeof R=="string"){for(;b<w;)if(N[D++]=R.charCodeAt(b++),D==this.blockSize){i(this,N),D=0;break}}else for(;b<w;)if(N[D++]=R[b++],D==this.blockSize){i(this,N),D=0;break}}this.h=D,this.o+=w},r.prototype.v=function(){var R=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);R[0]=128;for(var w=1;w<R.length-8;++w)R[w]=0;var A=8*this.o;for(w=R.length-8;w<R.length;++w)R[w]=A&255,A/=256;for(this.u(R),R=Array(16),w=A=0;4>w;++w)for(var N=0;32>N;N+=8)R[A++]=this.g[w]>>>N&255;return R};function o(R,w){var A=a;return Object.prototype.hasOwnProperty.call(A,R)?A[R]:A[R]=w(R)}function s(R,w){this.h=w;for(var A=[],N=!0,D=R.length-1;0<=D;D--){var b=R[D]|0;N&&b==w||(A[D]=b,N=!1)}this.g=A}var a={};function l(R){return-128<=R&&128>R?o(R,function(w){return new s([w|0],0>w?-1:0)}):new s([R|0],0>R?-1:0)}function u(R){if(isNaN(R)||!isFinite(R))return p;if(0>R)return x(u(-R));for(var w=[],A=1,N=0;R>=A;N++)w[N]=R/A|0,A*=4294967296;return new s(w,0)}function h(R,w){if(R.length==0)throw Error("number format error: empty string");if(w=w||10,2>w||36<w)throw Error("radix out of range: "+w);if(R.charAt(0)=="-")return x(h(R.substring(1),w));if(0<=R.indexOf("-"))throw Error('number format error: interior "-" character');for(var A=u(Math.pow(w,8)),N=p,D=0;D<R.length;D+=8){var b=Math.min(8,R.length-D),k=parseInt(R.substring(D,D+b),w);8>b?(b=u(Math.pow(w,b)),N=N.j(b).add(u(k))):(N=N.j(A),N=N.add(u(k)))}return N}var p=l(0),m=l(1),_=l(16777216);t=s.prototype,t.m=function(){if(P(this))return-x(this).m();for(var R=0,w=1,A=0;A<this.g.length;A++){var N=this.i(A);R+=(0<=N?N:4294967296+N)*w,w*=4294967296}return R},t.toString=function(R){if(R=R||10,2>R||36<R)throw Error("radix out of range: "+R);if(E(this))return"0";if(P(this))return"-"+x(this).toString(R);for(var w=u(Math.pow(R,6)),A=this,N="";;){var D=M(A,w).g;A=I(A,D.j(w));var b=((0<A.g.length?A.g[0]:A.h)>>>0).toString(R);if(A=D,E(A))return b+N;for(;6>b.length;)b="0"+b;N=b+N}},t.i=function(R){return 0>R?0:R<this.g.length?this.g[R]:this.h};function E(R){if(R.h!=0)return!1;for(var w=0;w<R.g.length;w++)if(R.g[w]!=0)return!1;return!0}function P(R){return R.h==-1}t.l=function(R){return R=I(this,R),P(R)?-1:E(R)?0:1};function x(R){for(var w=R.g.length,A=[],N=0;N<w;N++)A[N]=~R.g[N];return new s(A,~R.h).add(m)}t.abs=function(){return P(this)?x(this):this},t.add=function(R){for(var w=Math.max(this.g.length,R.g.length),A=[],N=0,D=0;D<=w;D++){var b=N+(this.i(D)&65535)+(R.i(D)&65535),k=(b>>>16)+(this.i(D)>>>16)+(R.i(D)>>>16);N=k>>>16,b&=65535,k&=65535,A[D]=k<<16|b}return new s(A,A[A.length-1]&-2147483648?-1:0)};function I(R,w){return R.add(x(w))}t.j=function(R){if(E(this)||E(R))return p;if(P(this))return P(R)?x(this).j(x(R)):x(x(this).j(R));if(P(R))return x(this.j(x(R)));if(0>this.l(_)&&0>R.l(_))return u(this.m()*R.m());for(var w=this.g.length+R.g.length,A=[],N=0;N<2*w;N++)A[N]=0;for(N=0;N<this.g.length;N++)for(var D=0;D<R.g.length;D++){var b=this.i(N)>>>16,k=this.i(N)&65535,ge=R.i(D)>>>16,ht=R.i(D)&65535;A[2*N+2*D]+=k*ht,T(A,2*N+2*D),A[2*N+2*D+1]+=b*ht,T(A,2*N+2*D+1),A[2*N+2*D+1]+=k*ge,T(A,2*N+2*D+1),A[2*N+2*D+2]+=b*ge,T(A,2*N+2*D+2)}for(N=0;N<w;N++)A[N]=A[2*N+1]<<16|A[2*N];for(N=w;N<2*w;N++)A[N]=0;return new s(A,0)};function T(R,w){for(;(R[w]&65535)!=R[w];)R[w+1]+=R[w]>>>16,R[w]&=65535,w++}function C(R,w){this.g=R,this.h=w}function M(R,w){if(E(w))throw Error("division by zero");if(E(R))return new C(p,p);if(P(R))return w=M(x(R),w),new C(x(w.g),x(w.h));if(P(w))return w=M(R,x(w)),new C(x(w.g),w.h);if(30<R.g.length){if(P(R)||P(w))throw Error("slowDivide_ only works with positive integers.");for(var A=m,N=w;0>=N.l(R);)A=U(A),N=U(N);var D=L(A,1),b=L(N,1);for(N=L(N,2),A=L(A,2);!E(N);){var k=b.add(N);0>=k.l(R)&&(D=D.add(A),b=k),N=L(N,1),A=L(A,1)}return w=I(R,D.j(w)),new C(D,w)}for(D=p;0<=R.l(w);){for(A=Math.max(1,Math.floor(R.m()/w.m())),N=Math.ceil(Math.log(A)/Math.LN2),N=48>=N?1:Math.pow(2,N-48),b=u(A),k=b.j(w);P(k)||0<k.l(R);)A-=N,b=u(A),k=b.j(w);E(b)&&(b=m),D=D.add(b),R=I(R,k)}return new C(D,R)}t.A=function(R){return M(this,R).h},t.and=function(R){for(var w=Math.max(this.g.length,R.g.length),A=[],N=0;N<w;N++)A[N]=this.i(N)&R.i(N);return new s(A,this.h&R.h)},t.or=function(R){for(var w=Math.max(this.g.length,R.g.length),A=[],N=0;N<w;N++)A[N]=this.i(N)|R.i(N);return new s(A,this.h|R.h)},t.xor=function(R){for(var w=Math.max(this.g.length,R.g.length),A=[],N=0;N<w;N++)A[N]=this.i(N)^R.i(N);return new s(A,this.h^R.h)};function U(R){for(var w=R.g.length+1,A=[],N=0;N<w;N++)A[N]=R.i(N)<<1|R.i(N-1)>>>31;return new s(A,R.h)}function L(R,w){var A=w>>5;w%=32;for(var N=R.g.length-A,D=[],b=0;b<N;b++)D[b]=0<w?R.i(b+A)>>>w|R.i(b+A+1)<<32-w:R.i(b+A);return new s(D,R.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,oI=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=u,s.fromString=h,wi=s}).apply(typeof Mv<"u"?Mv:typeof self<"u"?self:typeof window<"u"?window:{});var Nl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var sI,Vs,aI,eu,fh,lI,uI,cI;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(d,g,v){return d==Array.prototype||d==Object.prototype||(d[g]=v.value),d};function n(d){d=[typeof globalThis=="object"&&globalThis,d,typeof window=="object"&&window,typeof self=="object"&&self,typeof Nl=="object"&&Nl];for(var g=0;g<d.length;++g){var v=d[g];if(v&&v.Math==Math)return v}throw Error("Cannot find global object")}var r=n(this);function i(d,g){if(g)e:{var v=r;d=d.split(".");for(var S=0;S<d.length-1;S++){var V=d[S];if(!(V in v))break e;v=v[V]}d=d[d.length-1],S=v[d],g=g(S),g!=S&&g!=null&&e(v,d,{configurable:!0,writable:!0,value:g})}}function o(d,g){d instanceof String&&(d+="");var v=0,S=!1,V={next:function(){if(!S&&v<d.length){var O=v++;return{value:g(O,d[O]),done:!1}}return S=!0,{done:!0,value:void 0}}};return V[Symbol.iterator]=function(){return V},V}i("Array.prototype.values",function(d){return d||function(){return o(this,function(g,v){return v})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var s=s||{},a=this||self;function l(d){var g=typeof d;return g=g!="object"?g:d?Array.isArray(d)?"array":g:"null",g=="array"||g=="object"&&typeof d.length=="number"}function u(d){var g=typeof d;return g=="object"&&d!=null||g=="function"}function h(d,g,v){return d.call.apply(d.bind,arguments)}function p(d,g,v){if(!d)throw Error();if(2<arguments.length){var S=Array.prototype.slice.call(arguments,2);return function(){var V=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(V,S),d.apply(g,V)}}return function(){return d.apply(g,arguments)}}function m(d,g,v){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:p,m.apply(null,arguments)}function _(d,g){var v=Array.prototype.slice.call(arguments,1);return function(){var S=v.slice();return S.push.apply(S,arguments),d.apply(this,S)}}function E(d,g){function v(){}v.prototype=g.prototype,d.aa=g.prototype,d.prototype=new v,d.prototype.constructor=d,d.Qb=function(S,V,O){for(var $=Array(arguments.length-2),Te=2;Te<arguments.length;Te++)$[Te-2]=arguments[Te];return g.prototype[V].apply(S,$)}}function P(d){const g=d.length;if(0<g){const v=Array(g);for(let S=0;S<g;S++)v[S]=d[S];return v}return[]}function x(d,g){for(let v=1;v<arguments.length;v++){const S=arguments[v];if(l(S)){const V=d.length||0,O=S.length||0;d.length=V+O;for(let $=0;$<O;$++)d[V+$]=S[$]}else d.push(S)}}class I{constructor(g,v){this.i=g,this.j=v,this.h=0,this.g=null}get(){let g;return 0<this.h?(this.h--,g=this.g,this.g=g.next,g.next=null):g=this.i(),g}}function T(d){return/^[\s\xa0]*$/.test(d)}function C(){var d=a.navigator;return d&&(d=d.userAgent)?d:""}function M(d){return M[" "](d),d}M[" "]=function(){};var U=C().indexOf("Gecko")!=-1&&!(C().toLowerCase().indexOf("webkit")!=-1&&C().indexOf("Edge")==-1)&&!(C().indexOf("Trident")!=-1||C().indexOf("MSIE")!=-1)&&C().indexOf("Edge")==-1;function L(d,g,v){for(const S in d)g.call(v,d[S],S,d)}function R(d,g){for(const v in d)g.call(void 0,d[v],v,d)}function w(d){const g={};for(const v in d)g[v]=d[v];return g}const A="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function N(d,g){let v,S;for(let V=1;V<arguments.length;V++){S=arguments[V];for(v in S)d[v]=S[v];for(let O=0;O<A.length;O++)v=A[O],Object.prototype.hasOwnProperty.call(S,v)&&(d[v]=S[v])}}function D(d){var g=1;d=d.split(":");const v=[];for(;0<g&&d.length;)v.push(d.shift()),g--;return d.length&&v.push(d.join(":")),v}function b(d){a.setTimeout(()=>{throw d},0)}function k(){var d=X;let g=null;return d.g&&(g=d.g,d.g=d.g.next,d.g||(d.h=null),g.next=null),g}class ge{constructor(){this.h=this.g=null}add(g,v){const S=ht.get();S.set(g,v),this.h?this.h.next=S:this.g=S,this.h=S}}var ht=new I(()=>new Je,d=>d.reset());class Je{constructor(){this.next=this.g=this.h=null}set(g,v){this.h=g,this.g=v,this.next=null}reset(){this.next=this.g=this.h=null}}let it,z=!1,X=new ge,te=()=>{const d=a.Promise.resolve(void 0);it=()=>{d.then(Ee)}};var Ee=()=>{for(var d;d=k();){try{d.h.call(d.g)}catch(v){b(v)}var g=ht;g.j(d),100>g.h&&(g.h++,d.next=g.g,g.g=d)}z=!1};function me(){this.s=this.s,this.C=this.C}me.prototype.s=!1,me.prototype.ma=function(){this.s||(this.s=!0,this.N())},me.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Ie(d,g){this.type=d,this.g=this.target=g,this.defaultPrevented=!1}Ie.prototype.h=function(){this.defaultPrevented=!0};var Ut=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var d=!1,g=Object.defineProperty({},"passive",{get:function(){d=!0}});try{const v=()=>{};a.addEventListener("test",v,g),a.removeEventListener("test",v,g)}catch{}return d}();function At(d,g){if(Ie.call(this,d?d.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,d){var v=this.type=d.type,S=d.changedTouches&&d.changedTouches.length?d.changedTouches[0]:null;if(this.target=d.target||d.srcElement,this.g=g,g=d.relatedTarget){if(U){e:{try{M(g.nodeName);var V=!0;break e}catch{}V=!1}V||(g=null)}}else v=="mouseover"?g=d.fromElement:v=="mouseout"&&(g=d.toElement);this.relatedTarget=g,S?(this.clientX=S.clientX!==void 0?S.clientX:S.pageX,this.clientY=S.clientY!==void 0?S.clientY:S.pageY,this.screenX=S.screenX||0,this.screenY=S.screenY||0):(this.clientX=d.clientX!==void 0?d.clientX:d.pageX,this.clientY=d.clientY!==void 0?d.clientY:d.pageY,this.screenX=d.screenX||0,this.screenY=d.screenY||0),this.button=d.button,this.key=d.key||"",this.ctrlKey=d.ctrlKey,this.altKey=d.altKey,this.shiftKey=d.shiftKey,this.metaKey=d.metaKey,this.pointerId=d.pointerId||0,this.pointerType=typeof d.pointerType=="string"?d.pointerType:Y[d.pointerType]||"",this.state=d.state,this.i=d,d.defaultPrevented&&At.aa.h.call(this)}}E(At,Ie);var Y={2:"touch",3:"pen",4:"mouse"};At.prototype.h=function(){At.aa.h.call(this);var d=this.i;d.preventDefault?d.preventDefault():d.returnValue=!1};var se="closure_listenable_"+(1e6*Math.random()|0),qe=0;function tn(d,g,v,S,V){this.listener=d,this.proxy=null,this.src=g,this.type=v,this.capture=!!S,this.ha=V,this.key=++qe,this.da=this.fa=!1}function H(d){d.da=!0,d.listener=null,d.proxy=null,d.src=null,d.ha=null}function Pe(d){this.src=d,this.g={},this.h=0}Pe.prototype.add=function(d,g,v,S,V){var O=d.toString();d=this.g[O],d||(d=this.g[O]=[],this.h++);var $=is(d,g,S,V);return-1<$?(g=d[$],v||(g.fa=!1)):(g=new tn(g,this.src,O,!!S,V),g.fa=v,d.push(g)),g};function zi(d,g){var v=g.type;if(v in d.g){var S=d.g[v],V=Array.prototype.indexOf.call(S,g,void 0),O;(O=0<=V)&&Array.prototype.splice.call(S,V,1),O&&(H(g),d.g[v].length==0&&(delete d.g[v],d.h--))}}function is(d,g,v,S){for(var V=0;V<d.length;++V){var O=d[V];if(!O.da&&O.listener==g&&O.capture==!!v&&O.ha==S)return V}return-1}var Zc="closure_lm_"+(1e6*Math.random()|0),ed={};function sg(d,g,v,S,V){if(Array.isArray(g)){for(var O=0;O<g.length;O++)sg(d,g[O],v,S,V);return null}return v=ug(v),d&&d[se]?d.K(g,v,u(S)?!!S.capture:!1,V):EA(d,g,v,!1,S,V)}function EA(d,g,v,S,V,O){if(!g)throw Error("Invalid event type");var $=u(V)?!!V.capture:!!V,Te=nd(d);if(Te||(d[Zc]=Te=new Pe(d)),v=Te.add(g,v,S,$,O),v.proxy)return v;if(S=TA(),v.proxy=S,S.src=d,S.listener=v,d.addEventListener)Ut||(V=$),V===void 0&&(V=!1),d.addEventListener(g.toString(),S,V);else if(d.attachEvent)d.attachEvent(lg(g.toString()),S);else if(d.addListener&&d.removeListener)d.addListener(S);else throw Error("addEventListener and attachEvent are unavailable.");return v}function TA(){function d(v){return g.call(d.src,d.listener,v)}const g=wA;return d}function ag(d,g,v,S,V){if(Array.isArray(g))for(var O=0;O<g.length;O++)ag(d,g[O],v,S,V);else S=u(S)?!!S.capture:!!S,v=ug(v),d&&d[se]?(d=d.i,g=String(g).toString(),g in d.g&&(O=d.g[g],v=is(O,v,S,V),-1<v&&(H(O[v]),Array.prototype.splice.call(O,v,1),O.length==0&&(delete d.g[g],d.h--)))):d&&(d=nd(d))&&(g=d.g[g.toString()],d=-1,g&&(d=is(g,v,S,V)),(v=-1<d?g[d]:null)&&td(v))}function td(d){if(typeof d!="number"&&d&&!d.da){var g=d.src;if(g&&g[se])zi(g.i,d);else{var v=d.type,S=d.proxy;g.removeEventListener?g.removeEventListener(v,S,d.capture):g.detachEvent?g.detachEvent(lg(v),S):g.addListener&&g.removeListener&&g.removeListener(S),(v=nd(g))?(zi(v,d),v.h==0&&(v.src=null,g[Zc]=null)):H(d)}}}function lg(d){return d in ed?ed[d]:ed[d]="on"+d}function wA(d,g){if(d.da)d=!0;else{g=new At(g,this);var v=d.listener,S=d.ha||d.src;d.fa&&td(d),d=v.call(S,g)}return d}function nd(d){return d=d[Zc],d instanceof Pe?d:null}var rd="__closure_events_fn_"+(1e9*Math.random()>>>0);function ug(d){return typeof d=="function"?d:(d[rd]||(d[rd]=function(g){return d.handleEvent(g)}),d[rd])}function pt(){me.call(this),this.i=new Pe(this),this.M=this,this.F=null}E(pt,me),pt.prototype[se]=!0,pt.prototype.removeEventListener=function(d,g,v,S){ag(this,d,g,v,S)};function Rt(d,g){var v,S=d.F;if(S)for(v=[];S;S=S.F)v.push(S);if(d=d.M,S=g.type||g,typeof g=="string")g=new Ie(g,d);else if(g instanceof Ie)g.target=g.target||d;else{var V=g;g=new Ie(S,d),N(g,V)}if(V=!0,v)for(var O=v.length-1;0<=O;O--){var $=g.g=v[O];V=Qa($,S,!0,g)&&V}if($=g.g=d,V=Qa($,S,!0,g)&&V,V=Qa($,S,!1,g)&&V,v)for(O=0;O<v.length;O++)$=g.g=v[O],V=Qa($,S,!1,g)&&V}pt.prototype.N=function(){if(pt.aa.N.call(this),this.i){var d=this.i,g;for(g in d.g){for(var v=d.g[g],S=0;S<v.length;S++)H(v[S]);delete d.g[g],d.h--}}this.F=null},pt.prototype.K=function(d,g,v,S){return this.i.add(String(d),g,!1,v,S)},pt.prototype.L=function(d,g,v,S){return this.i.add(String(d),g,!0,v,S)};function Qa(d,g,v,S){if(g=d.i.g[String(g)],!g)return!0;g=g.concat();for(var V=!0,O=0;O<g.length;++O){var $=g[O];if($&&!$.da&&$.capture==v){var Te=$.listener,ot=$.ha||$.src;$.fa&&zi(d.i,$),V=Te.call(ot,S)!==!1&&V}}return V&&!S.defaultPrevented}function cg(d,g,v){if(typeof d=="function")v&&(d=m(d,v));else if(d&&typeof d.handleEvent=="function")d=m(d.handleEvent,d);else throw Error("Invalid listener argument");return 2147483647<Number(g)?-1:a.setTimeout(d,g||0)}function dg(d){d.g=cg(()=>{d.g=null,d.i&&(d.i=!1,dg(d))},d.l);const g=d.h;d.h=null,d.m.apply(null,g)}class IA extends me{constructor(g,v){super(),this.m=g,this.l=v,this.h=null,this.i=!1,this.g=null}j(g){this.h=arguments,this.g?this.i=!0:dg(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function os(d){me.call(this),this.h=d,this.g={}}E(os,me);var fg=[];function hg(d){L(d.g,function(g,v){this.g.hasOwnProperty(v)&&td(g)},d),d.g={}}os.prototype.N=function(){os.aa.N.call(this),hg(this)},os.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var id=a.JSON.stringify,SA=a.JSON.parse,CA=class{stringify(d){return a.JSON.stringify(d,void 0)}parse(d){return a.JSON.parse(d,void 0)}};function od(){}od.prototype.h=null;function pg(d){return d.h||(d.h=d.i())}function mg(){}var ss={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function sd(){Ie.call(this,"d")}E(sd,Ie);function ad(){Ie.call(this,"c")}E(ad,Ie);var li={},gg=null;function Xa(){return gg=gg||new pt}li.La="serverreachability";function yg(d){Ie.call(this,li.La,d)}E(yg,Ie);function as(d){const g=Xa();Rt(g,new yg(g))}li.STAT_EVENT="statevent";function vg(d,g){Ie.call(this,li.STAT_EVENT,d),this.stat=g}E(vg,Ie);function xt(d){const g=Xa();Rt(g,new vg(g,d))}li.Ma="timingevent";function _g(d,g){Ie.call(this,li.Ma,d),this.size=g}E(_g,Ie);function ls(d,g){if(typeof d!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){d()},g)}function us(){this.g=!0}us.prototype.xa=function(){this.g=!1};function AA(d,g,v,S,V,O){d.info(function(){if(d.g)if(O)for(var $="",Te=O.split("&"),ot=0;ot<Te.length;ot++){var fe=Te[ot].split("=");if(1<fe.length){var mt=fe[0];fe=fe[1];var gt=mt.split("_");$=2<=gt.length&&gt[1]=="type"?$+(mt+"="+fe+"&"):$+(mt+"=redacted&")}}else $=null;else $=O;return"XMLHTTP REQ ("+S+") [attempt "+V+"]: "+g+`
`+v+`
`+$})}function RA(d,g,v,S,V,O,$){d.info(function(){return"XMLHTTP RESP ("+S+") [ attempt "+V+"]: "+g+`
`+v+`
`+O+" "+$})}function Wi(d,g,v,S){d.info(function(){return"XMLHTTP TEXT ("+g+"): "+PA(d,v)+(S?" "+S:"")})}function xA(d,g){d.info(function(){return"TIMEOUT: "+g})}us.prototype.info=function(){};function PA(d,g){if(!d.g)return g;if(!g)return null;try{var v=JSON.parse(g);if(v){for(d=0;d<v.length;d++)if(Array.isArray(v[d])){var S=v[d];if(!(2>S.length)){var V=S[1];if(Array.isArray(V)&&!(1>V.length)){var O=V[0];if(O!="noop"&&O!="stop"&&O!="close")for(var $=1;$<V.length;$++)V[$]=""}}}}return id(v)}catch{return g}}var Za={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Eg={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},ld;function el(){}E(el,od),el.prototype.g=function(){return new XMLHttpRequest},el.prototype.i=function(){return{}},ld=new el;function mr(d,g,v,S){this.j=d,this.i=g,this.l=v,this.R=S||1,this.U=new os(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Tg}function Tg(){this.i=null,this.g="",this.h=!1}var wg={},ud={};function cd(d,g,v){d.L=1,d.v=il(qn(g)),d.m=v,d.P=!0,Ig(d,null)}function Ig(d,g){d.F=Date.now(),tl(d),d.A=qn(d.v);var v=d.A,S=d.R;Array.isArray(S)||(S=[String(S)]),Ug(v.i,"t",S),d.C=0,v=d.j.J,d.h=new Tg,d.g=ty(d.j,v?g:null,!d.m),0<d.O&&(d.M=new IA(m(d.Y,d,d.g),d.O)),g=d.U,v=d.g,S=d.ca;var V="readystatechange";Array.isArray(V)||(V&&(fg[0]=V.toString()),V=fg);for(var O=0;O<V.length;O++){var $=sg(v,V[O],S||g.handleEvent,!1,g.h||g);if(!$)break;g.g[$.key]=$}g=d.H?w(d.H):{},d.m?(d.u||(d.u="POST"),g["Content-Type"]="application/x-www-form-urlencoded",d.g.ea(d.A,d.u,d.m,g)):(d.u="GET",d.g.ea(d.A,d.u,null,g)),as(),AA(d.i,d.u,d.A,d.l,d.R,d.m)}mr.prototype.ca=function(d){d=d.target;const g=this.M;g&&$n(d)==3?g.j():this.Y(d)},mr.prototype.Y=function(d){try{if(d==this.g)e:{const gt=$n(this.g);var g=this.g.Ba();const Yi=this.g.Z();if(!(3>gt)&&(gt!=3||this.g&&(this.h.h||this.g.oa()||$g(this.g)))){this.J||gt!=4||g==7||(g==8||0>=Yi?as(3):as(2)),dd(this);var v=this.g.Z();this.X=v;t:if(Sg(this)){var S=$g(this.g);d="";var V=S.length,O=$n(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){ui(this),cs(this);var $="";break t}this.h.i=new a.TextDecoder}for(g=0;g<V;g++)this.h.h=!0,d+=this.h.i.decode(S[g],{stream:!(O&&g==V-1)});S.length=0,this.h.g+=d,this.C=0,$=this.h.g}else $=this.g.oa();if(this.o=v==200,RA(this.i,this.u,this.A,this.l,this.R,gt,v),this.o){if(this.T&&!this.K){t:{if(this.g){var Te,ot=this.g;if((Te=ot.g?ot.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!T(Te)){var fe=Te;break t}}fe=null}if(v=fe)Wi(this.i,this.l,v,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,fd(this,v);else{this.o=!1,this.s=3,xt(12),ui(this),cs(this);break e}}if(this.P){v=!0;let dn;for(;!this.J&&this.C<$.length;)if(dn=NA(this,$),dn==ud){gt==4&&(this.s=4,xt(14),v=!1),Wi(this.i,this.l,null,"[Incomplete Response]");break}else if(dn==wg){this.s=4,xt(15),Wi(this.i,this.l,$,"[Invalid Chunk]"),v=!1;break}else Wi(this.i,this.l,dn,null),fd(this,dn);if(Sg(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),gt!=4||$.length!=0||this.h.h||(this.s=1,xt(16),v=!1),this.o=this.o&&v,!v)Wi(this.i,this.l,$,"[Invalid Chunked Response]"),ui(this),cs(this);else if(0<$.length&&!this.W){this.W=!0;var mt=this.j;mt.g==this&&mt.ba&&!mt.M&&(mt.j.info("Great, no buffering proxy detected. Bytes received: "+$.length),vd(mt),mt.M=!0,xt(11))}}else Wi(this.i,this.l,$,null),fd(this,$);gt==4&&ui(this),this.o&&!this.J&&(gt==4?Qg(this.j,this):(this.o=!1,tl(this)))}else KA(this.g),v==400&&0<$.indexOf("Unknown SID")?(this.s=3,xt(12)):(this.s=0,xt(13)),ui(this),cs(this)}}}catch{}finally{}};function Sg(d){return d.g?d.u=="GET"&&d.L!=2&&d.j.Ca:!1}function NA(d,g){var v=d.C,S=g.indexOf(`
`,v);return S==-1?ud:(v=Number(g.substring(v,S)),isNaN(v)?wg:(S+=1,S+v>g.length?ud:(g=g.slice(S,S+v),d.C=S+v,g)))}mr.prototype.cancel=function(){this.J=!0,ui(this)};function tl(d){d.S=Date.now()+d.I,Cg(d,d.I)}function Cg(d,g){if(d.B!=null)throw Error("WatchDog timer not null");d.B=ls(m(d.ba,d),g)}function dd(d){d.B&&(a.clearTimeout(d.B),d.B=null)}mr.prototype.ba=function(){this.B=null;const d=Date.now();0<=d-this.S?(xA(this.i,this.A),this.L!=2&&(as(),xt(17)),ui(this),this.s=2,cs(this)):Cg(this,this.S-d)};function cs(d){d.j.G==0||d.J||Qg(d.j,d)}function ui(d){dd(d);var g=d.M;g&&typeof g.ma=="function"&&g.ma(),d.M=null,hg(d.U),d.g&&(g=d.g,d.g=null,g.abort(),g.ma())}function fd(d,g){try{var v=d.j;if(v.G!=0&&(v.g==d||hd(v.h,d))){if(!d.K&&hd(v.h,d)&&v.G==3){try{var S=v.Da.g.parse(g)}catch{S=null}if(Array.isArray(S)&&S.length==3){var V=S;if(V[0]==0){e:if(!v.u){if(v.g)if(v.g.F+3e3<d.F)cl(v),ll(v);else break e;yd(v),xt(18)}}else v.za=V[1],0<v.za-v.T&&37500>V[2]&&v.F&&v.v==0&&!v.C&&(v.C=ls(m(v.Za,v),6e3));if(1>=xg(v.h)&&v.ca){try{v.ca()}catch{}v.ca=void 0}}else di(v,11)}else if((d.K||v.g==d)&&cl(v),!T(g))for(V=v.Da.g.parse(g),g=0;g<V.length;g++){let fe=V[g];if(v.T=fe[0],fe=fe[1],v.G==2)if(fe[0]=="c"){v.K=fe[1],v.ia=fe[2];const mt=fe[3];mt!=null&&(v.la=mt,v.j.info("VER="+v.la));const gt=fe[4];gt!=null&&(v.Aa=gt,v.j.info("SVER="+v.Aa));const Yi=fe[5];Yi!=null&&typeof Yi=="number"&&0<Yi&&(S=1.5*Yi,v.L=S,v.j.info("backChannelRequestTimeoutMs_="+S)),S=v;const dn=d.g;if(dn){const fl=dn.g?dn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(fl){var O=S.h;O.g||fl.indexOf("spdy")==-1&&fl.indexOf("quic")==-1&&fl.indexOf("h2")==-1||(O.j=O.l,O.g=new Set,O.h&&(pd(O,O.h),O.h=null))}if(S.D){const _d=dn.g?dn.g.getResponseHeader("X-HTTP-Session-Id"):null;_d&&(S.ya=_d,Ce(S.I,S.D,_d))}}v.G=3,v.l&&v.l.ua(),v.ba&&(v.R=Date.now()-d.F,v.j.info("Handshake RTT: "+v.R+"ms")),S=v;var $=d;if(S.qa=ey(S,S.J?S.ia:null,S.W),$.K){Pg(S.h,$);var Te=$,ot=S.L;ot&&(Te.I=ot),Te.B&&(dd(Te),tl(Te)),S.g=$}else Yg(S);0<v.i.length&&ul(v)}else fe[0]!="stop"&&fe[0]!="close"||di(v,7);else v.G==3&&(fe[0]=="stop"||fe[0]=="close"?fe[0]=="stop"?di(v,7):gd(v):fe[0]!="noop"&&v.l&&v.l.ta(fe),v.v=0)}}as(4)}catch{}}var kA=class{constructor(d,g){this.g=d,this.map=g}};function Ag(d){this.l=d||10,a.PerformanceNavigationTiming?(d=a.performance.getEntriesByType("navigation"),d=0<d.length&&(d[0].nextHopProtocol=="hq"||d[0].nextHopProtocol=="h2")):d=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=d?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Rg(d){return d.h?!0:d.g?d.g.size>=d.j:!1}function xg(d){return d.h?1:d.g?d.g.size:0}function hd(d,g){return d.h?d.h==g:d.g?d.g.has(g):!1}function pd(d,g){d.g?d.g.add(g):d.h=g}function Pg(d,g){d.h&&d.h==g?d.h=null:d.g&&d.g.has(g)&&d.g.delete(g)}Ag.prototype.cancel=function(){if(this.i=Ng(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const d of this.g.values())d.cancel();this.g.clear()}};function Ng(d){if(d.h!=null)return d.i.concat(d.h.D);if(d.g!=null&&d.g.size!==0){let g=d.i;for(const v of d.g.values())g=g.concat(v.D);return g}return P(d.i)}function DA(d){if(d.V&&typeof d.V=="function")return d.V();if(typeof Map<"u"&&d instanceof Map||typeof Set<"u"&&d instanceof Set)return Array.from(d.values());if(typeof d=="string")return d.split("");if(l(d)){for(var g=[],v=d.length,S=0;S<v;S++)g.push(d[S]);return g}g=[],v=0;for(S in d)g[v++]=d[S];return g}function MA(d){if(d.na&&typeof d.na=="function")return d.na();if(!d.V||typeof d.V!="function"){if(typeof Map<"u"&&d instanceof Map)return Array.from(d.keys());if(!(typeof Set<"u"&&d instanceof Set)){if(l(d)||typeof d=="string"){var g=[];d=d.length;for(var v=0;v<d;v++)g.push(v);return g}g=[],v=0;for(const S in d)g[v++]=S;return g}}}function kg(d,g){if(d.forEach&&typeof d.forEach=="function")d.forEach(g,void 0);else if(l(d)||typeof d=="string")Array.prototype.forEach.call(d,g,void 0);else for(var v=MA(d),S=DA(d),V=S.length,O=0;O<V;O++)g.call(void 0,S[O],v&&v[O],d)}var Dg=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function bA(d,g){if(d){d=d.split("&");for(var v=0;v<d.length;v++){var S=d[v].indexOf("="),V=null;if(0<=S){var O=d[v].substring(0,S);V=d[v].substring(S+1)}else O=d[v];g(O,V?decodeURIComponent(V.replace(/\+/g," ")):"")}}}function ci(d){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,d instanceof ci){this.h=d.h,nl(this,d.j),this.o=d.o,this.g=d.g,rl(this,d.s),this.l=d.l;var g=d.i,v=new hs;v.i=g.i,g.g&&(v.g=new Map(g.g),v.h=g.h),Mg(this,v),this.m=d.m}else d&&(g=String(d).match(Dg))?(this.h=!1,nl(this,g[1]||"",!0),this.o=ds(g[2]||""),this.g=ds(g[3]||"",!0),rl(this,g[4]),this.l=ds(g[5]||"",!0),Mg(this,g[6]||"",!0),this.m=ds(g[7]||"")):(this.h=!1,this.i=new hs(null,this.h))}ci.prototype.toString=function(){var d=[],g=this.j;g&&d.push(fs(g,bg,!0),":");var v=this.g;return(v||g=="file")&&(d.push("//"),(g=this.o)&&d.push(fs(g,bg,!0),"@"),d.push(encodeURIComponent(String(v)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),v=this.s,v!=null&&d.push(":",String(v))),(v=this.l)&&(this.g&&v.charAt(0)!="/"&&d.push("/"),d.push(fs(v,v.charAt(0)=="/"?UA:VA,!0))),(v=this.i.toString())&&d.push("?",v),(v=this.m)&&d.push("#",fs(v,OA)),d.join("")};function qn(d){return new ci(d)}function nl(d,g,v){d.j=v?ds(g,!0):g,d.j&&(d.j=d.j.replace(/:$/,""))}function rl(d,g){if(g){if(g=Number(g),isNaN(g)||0>g)throw Error("Bad port number "+g);d.s=g}else d.s=null}function Mg(d,g,v){g instanceof hs?(d.i=g,BA(d.i,d.h)):(v||(g=fs(g,FA)),d.i=new hs(g,d.h))}function Ce(d,g,v){d.i.set(g,v)}function il(d){return Ce(d,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),d}function ds(d,g){return d?g?decodeURI(d.replace(/%25/g,"%2525")):decodeURIComponent(d):""}function fs(d,g,v){return typeof d=="string"?(d=encodeURI(d).replace(g,LA),v&&(d=d.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d):null}function LA(d){return d=d.charCodeAt(0),"%"+(d>>4&15).toString(16)+(d&15).toString(16)}var bg=/[#\/\?@]/g,VA=/[#\?:]/g,UA=/[#\?]/g,FA=/[#\?@]/g,OA=/#/g;function hs(d,g){this.h=this.g=null,this.i=d||null,this.j=!!g}function gr(d){d.g||(d.g=new Map,d.h=0,d.i&&bA(d.i,function(g,v){d.add(decodeURIComponent(g.replace(/\+/g," ")),v)}))}t=hs.prototype,t.add=function(d,g){gr(this),this.i=null,d=Ki(this,d);var v=this.g.get(d);return v||this.g.set(d,v=[]),v.push(g),this.h+=1,this};function Lg(d,g){gr(d),g=Ki(d,g),d.g.has(g)&&(d.i=null,d.h-=d.g.get(g).length,d.g.delete(g))}function Vg(d,g){return gr(d),g=Ki(d,g),d.g.has(g)}t.forEach=function(d,g){gr(this),this.g.forEach(function(v,S){v.forEach(function(V){d.call(g,V,S,this)},this)},this)},t.na=function(){gr(this);const d=Array.from(this.g.values()),g=Array.from(this.g.keys()),v=[];for(let S=0;S<g.length;S++){const V=d[S];for(let O=0;O<V.length;O++)v.push(g[S])}return v},t.V=function(d){gr(this);let g=[];if(typeof d=="string")Vg(this,d)&&(g=g.concat(this.g.get(Ki(this,d))));else{d=Array.from(this.g.values());for(let v=0;v<d.length;v++)g=g.concat(d[v])}return g},t.set=function(d,g){return gr(this),this.i=null,d=Ki(this,d),Vg(this,d)&&(this.h-=this.g.get(d).length),this.g.set(d,[g]),this.h+=1,this},t.get=function(d,g){return d?(d=this.V(d),0<d.length?String(d[0]):g):g};function Ug(d,g,v){Lg(d,g),0<v.length&&(d.i=null,d.g.set(Ki(d,g),P(v)),d.h+=v.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const d=[],g=Array.from(this.g.keys());for(var v=0;v<g.length;v++){var S=g[v];const O=encodeURIComponent(String(S)),$=this.V(S);for(S=0;S<$.length;S++){var V=O;$[S]!==""&&(V+="="+encodeURIComponent(String($[S]))),d.push(V)}}return this.i=d.join("&")};function Ki(d,g){return g=String(g),d.j&&(g=g.toLowerCase()),g}function BA(d,g){g&&!d.j&&(gr(d),d.i=null,d.g.forEach(function(v,S){var V=S.toLowerCase();S!=V&&(Lg(this,S),Ug(this,V,v))},d)),d.j=g}function GA(d,g){const v=new us;if(a.Image){const S=new Image;S.onload=_(yr,v,"TestLoadImage: loaded",!0,g,S),S.onerror=_(yr,v,"TestLoadImage: error",!1,g,S),S.onabort=_(yr,v,"TestLoadImage: abort",!1,g,S),S.ontimeout=_(yr,v,"TestLoadImage: timeout",!1,g,S),a.setTimeout(function(){S.ontimeout&&S.ontimeout()},1e4),S.src=d}else g(!1)}function HA(d,g){const v=new us,S=new AbortController,V=setTimeout(()=>{S.abort(),yr(v,"TestPingServer: timeout",!1,g)},1e4);fetch(d,{signal:S.signal}).then(O=>{clearTimeout(V),O.ok?yr(v,"TestPingServer: ok",!0,g):yr(v,"TestPingServer: server error",!1,g)}).catch(()=>{clearTimeout(V),yr(v,"TestPingServer: error",!1,g)})}function yr(d,g,v,S,V){try{V&&(V.onload=null,V.onerror=null,V.onabort=null,V.ontimeout=null),S(v)}catch{}}function qA(){this.g=new CA}function $A(d,g,v){const S=v||"";try{kg(d,function(V,O){let $=V;u(V)&&($=id(V)),g.push(S+O+"="+encodeURIComponent($))})}catch(V){throw g.push(S+"type="+encodeURIComponent("_badmap")),V}}function ol(d){this.l=d.Ub||null,this.j=d.eb||!1}E(ol,od),ol.prototype.g=function(){return new sl(this.l,this.j)},ol.prototype.i=function(d){return function(){return d}}({});function sl(d,g){pt.call(this),this.D=d,this.o=g,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}E(sl,pt),t=sl.prototype,t.open=function(d,g){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=d,this.A=g,this.readyState=1,ms(this)},t.send=function(d){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const g={headers:this.u,method:this.B,credentials:this.m,cache:void 0};d&&(g.body=d),(this.D||a).fetch(new Request(this.A,g)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,ps(this)),this.readyState=0},t.Sa=function(d){if(this.g&&(this.l=d,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=d.headers,this.readyState=2,ms(this)),this.g&&(this.readyState=3,ms(this),this.g)))if(this.responseType==="arraybuffer")d.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in d){if(this.j=d.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Fg(this)}else d.text().then(this.Ra.bind(this),this.ga.bind(this))};function Fg(d){d.j.read().then(d.Pa.bind(d)).catch(d.ga.bind(d))}t.Pa=function(d){if(this.g){if(this.o&&d.value)this.response.push(d.value);else if(!this.o){var g=d.value?d.value:new Uint8Array(0);(g=this.v.decode(g,{stream:!d.done}))&&(this.response=this.responseText+=g)}d.done?ps(this):ms(this),this.readyState==3&&Fg(this)}},t.Ra=function(d){this.g&&(this.response=this.responseText=d,ps(this))},t.Qa=function(d){this.g&&(this.response=d,ps(this))},t.ga=function(){this.g&&ps(this)};function ps(d){d.readyState=4,d.l=null,d.j=null,d.v=null,ms(d)}t.setRequestHeader=function(d,g){this.u.append(d,g)},t.getResponseHeader=function(d){return this.h&&this.h.get(d.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const d=[],g=this.h.entries();for(var v=g.next();!v.done;)v=v.value,d.push(v[0]+": "+v[1]),v=g.next();return d.join(`\r
`)};function ms(d){d.onreadystatechange&&d.onreadystatechange.call(d)}Object.defineProperty(sl.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(d){this.m=d?"include":"same-origin"}});function Og(d){let g="";return L(d,function(v,S){g+=S,g+=":",g+=v,g+=`\r
`}),g}function md(d,g,v){e:{for(S in v){var S=!1;break e}S=!0}S||(v=Og(v),typeof d=="string"?v!=null&&encodeURIComponent(String(v)):Ce(d,g,v))}function Le(d){pt.call(this),this.headers=new Map,this.o=d||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}E(Le,pt);var zA=/^https?$/i,WA=["POST","PUT"];t=Le.prototype,t.Ha=function(d){this.J=d},t.ea=function(d,g,v,S){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+d);g=g?g.toUpperCase():"GET",this.D=d,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():ld.g(),this.v=this.o?pg(this.o):pg(ld),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(g,String(d),!0),this.B=!1}catch(O){Bg(this,O);return}if(d=v||"",v=new Map(this.headers),S)if(Object.getPrototypeOf(S)===Object.prototype)for(var V in S)v.set(V,S[V]);else if(typeof S.keys=="function"&&typeof S.get=="function")for(const O of S.keys())v.set(O,S.get(O));else throw Error("Unknown input type for opt_headers: "+String(S));S=Array.from(v.keys()).find(O=>O.toLowerCase()=="content-type"),V=a.FormData&&d instanceof a.FormData,!(0<=Array.prototype.indexOf.call(WA,g,void 0))||S||V||v.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[O,$]of v)this.g.setRequestHeader(O,$);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{qg(this),this.u=!0,this.g.send(d),this.u=!1}catch(O){Bg(this,O)}};function Bg(d,g){d.h=!1,d.g&&(d.j=!0,d.g.abort(),d.j=!1),d.l=g,d.m=5,Gg(d),al(d)}function Gg(d){d.A||(d.A=!0,Rt(d,"complete"),Rt(d,"error"))}t.abort=function(d){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=d||7,Rt(this,"complete"),Rt(this,"abort"),al(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),al(this,!0)),Le.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Hg(this):this.bb())},t.bb=function(){Hg(this)};function Hg(d){if(d.h&&typeof s<"u"&&(!d.v[1]||$n(d)!=4||d.Z()!=2)){if(d.u&&$n(d)==4)cg(d.Ea,0,d);else if(Rt(d,"readystatechange"),$n(d)==4){d.h=!1;try{const $=d.Z();e:switch($){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var g=!0;break e;default:g=!1}var v;if(!(v=g)){var S;if(S=$===0){var V=String(d.D).match(Dg)[1]||null;!V&&a.self&&a.self.location&&(V=a.self.location.protocol.slice(0,-1)),S=!zA.test(V?V.toLowerCase():"")}v=S}if(v)Rt(d,"complete"),Rt(d,"success");else{d.m=6;try{var O=2<$n(d)?d.g.statusText:""}catch{O=""}d.l=O+" ["+d.Z()+"]",Gg(d)}}finally{al(d)}}}}function al(d,g){if(d.g){qg(d);const v=d.g,S=d.v[0]?()=>{}:null;d.g=null,d.v=null,g||Rt(d,"ready");try{v.onreadystatechange=S}catch{}}}function qg(d){d.I&&(a.clearTimeout(d.I),d.I=null)}t.isActive=function(){return!!this.g};function $n(d){return d.g?d.g.readyState:0}t.Z=function(){try{return 2<$n(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(d){if(this.g){var g=this.g.responseText;return d&&g.indexOf(d)==0&&(g=g.substring(d.length)),SA(g)}};function $g(d){try{if(!d.g)return null;if("response"in d.g)return d.g.response;switch(d.H){case"":case"text":return d.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in d.g)return d.g.mozResponseArrayBuffer}return null}catch{return null}}function KA(d){const g={};d=(d.g&&2<=$n(d)&&d.g.getAllResponseHeaders()||"").split(`\r
`);for(let S=0;S<d.length;S++){if(T(d[S]))continue;var v=D(d[S]);const V=v[0];if(v=v[1],typeof v!="string")continue;v=v.trim();const O=g[V]||[];g[V]=O,O.push(v)}R(g,function(S){return S.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function gs(d,g,v){return v&&v.internalChannelParams&&v.internalChannelParams[d]||g}function zg(d){this.Aa=0,this.i=[],this.j=new us,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=gs("failFast",!1,d),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=gs("baseRetryDelayMs",5e3,d),this.cb=gs("retryDelaySeedMs",1e4,d),this.Wa=gs("forwardChannelMaxRetries",2,d),this.wa=gs("forwardChannelRequestTimeoutMs",2e4,d),this.pa=d&&d.xmlHttpFactory||void 0,this.Xa=d&&d.Tb||void 0,this.Ca=d&&d.useFetchStreams||!1,this.L=void 0,this.J=d&&d.supportsCrossDomainXhr||!1,this.K="",this.h=new Ag(d&&d.concurrentRequestLimit),this.Da=new qA,this.P=d&&d.fastHandshake||!1,this.O=d&&d.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=d&&d.Rb||!1,d&&d.xa&&this.j.xa(),d&&d.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&d&&d.detectBufferingProxy||!1,this.ja=void 0,d&&d.longPollingTimeout&&0<d.longPollingTimeout&&(this.ja=d.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=zg.prototype,t.la=8,t.G=1,t.connect=function(d,g,v,S){xt(0),this.W=d,this.H=g||{},v&&S!==void 0&&(this.H.OSID=v,this.H.OAID=S),this.F=this.X,this.I=ey(this,null,this.W),ul(this)};function gd(d){if(Wg(d),d.G==3){var g=d.U++,v=qn(d.I);if(Ce(v,"SID",d.K),Ce(v,"RID",g),Ce(v,"TYPE","terminate"),ys(d,v),g=new mr(d,d.j,g),g.L=2,g.v=il(qn(v)),v=!1,a.navigator&&a.navigator.sendBeacon)try{v=a.navigator.sendBeacon(g.v.toString(),"")}catch{}!v&&a.Image&&(new Image().src=g.v,v=!0),v||(g.g=ty(g.j,null),g.g.ea(g.v)),g.F=Date.now(),tl(g)}Zg(d)}function ll(d){d.g&&(vd(d),d.g.cancel(),d.g=null)}function Wg(d){ll(d),d.u&&(a.clearTimeout(d.u),d.u=null),cl(d),d.h.cancel(),d.s&&(typeof d.s=="number"&&a.clearTimeout(d.s),d.s=null)}function ul(d){if(!Rg(d.h)&&!d.s){d.s=!0;var g=d.Ga;it||te(),z||(it(),z=!0),X.add(g,d),d.B=0}}function JA(d,g){return xg(d.h)>=d.h.j-(d.s?1:0)?!1:d.s?(d.i=g.D.concat(d.i),!0):d.G==1||d.G==2||d.B>=(d.Va?0:d.Wa)?!1:(d.s=ls(m(d.Ga,d,g),Xg(d,d.B)),d.B++,!0)}t.Ga=function(d){if(this.s)if(this.s=null,this.G==1){if(!d){this.U=Math.floor(1e5*Math.random()),d=this.U++;const V=new mr(this,this.j,d);let O=this.o;if(this.S&&(O?(O=w(O),N(O,this.S)):O=this.S),this.m!==null||this.O||(V.H=O,O=null),this.P)e:{for(var g=0,v=0;v<this.i.length;v++){t:{var S=this.i[v];if("__data__"in S.map&&(S=S.map.__data__,typeof S=="string")){S=S.length;break t}S=void 0}if(S===void 0)break;if(g+=S,4096<g){g=v;break e}if(g===4096||v===this.i.length-1){g=v+1;break e}}g=1e3}else g=1e3;g=Jg(this,V,g),v=qn(this.I),Ce(v,"RID",d),Ce(v,"CVER",22),this.D&&Ce(v,"X-HTTP-Session-Id",this.D),ys(this,v),O&&(this.O?g="headers="+encodeURIComponent(String(Og(O)))+"&"+g:this.m&&md(v,this.m,O)),pd(this.h,V),this.Ua&&Ce(v,"TYPE","init"),this.P?(Ce(v,"$req",g),Ce(v,"SID","null"),V.T=!0,cd(V,v,null)):cd(V,v,g),this.G=2}}else this.G==3&&(d?Kg(this,d):this.i.length==0||Rg(this.h)||Kg(this))};function Kg(d,g){var v;g?v=g.l:v=d.U++;const S=qn(d.I);Ce(S,"SID",d.K),Ce(S,"RID",v),Ce(S,"AID",d.T),ys(d,S),d.m&&d.o&&md(S,d.m,d.o),v=new mr(d,d.j,v,d.B+1),d.m===null&&(v.H=d.o),g&&(d.i=g.D.concat(d.i)),g=Jg(d,v,1e3),v.I=Math.round(.5*d.wa)+Math.round(.5*d.wa*Math.random()),pd(d.h,v),cd(v,S,g)}function ys(d,g){d.H&&L(d.H,function(v,S){Ce(g,S,v)}),d.l&&kg({},function(v,S){Ce(g,S,v)})}function Jg(d,g,v){v=Math.min(d.i.length,v);var S=d.l?m(d.l.Na,d.l,d):null;e:{var V=d.i;let O=-1;for(;;){const $=["count="+v];O==-1?0<v?(O=V[0].g,$.push("ofs="+O)):O=0:$.push("ofs="+O);let Te=!0;for(let ot=0;ot<v;ot++){let fe=V[ot].g;const mt=V[ot].map;if(fe-=O,0>fe)O=Math.max(0,V[ot].g-100),Te=!1;else try{$A(mt,$,"req"+fe+"_")}catch{S&&S(mt)}}if(Te){S=$.join("&");break e}}}return d=d.i.splice(0,v),g.D=d,S}function Yg(d){if(!d.g&&!d.u){d.Y=1;var g=d.Fa;it||te(),z||(it(),z=!0),X.add(g,d),d.v=0}}function yd(d){return d.g||d.u||3<=d.v?!1:(d.Y++,d.u=ls(m(d.Fa,d),Xg(d,d.v)),d.v++,!0)}t.Fa=function(){if(this.u=null,jg(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var d=2*this.R;this.j.info("BP detection timer enabled: "+d),this.A=ls(m(this.ab,this),d)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,xt(10),ll(this),jg(this))};function vd(d){d.A!=null&&(a.clearTimeout(d.A),d.A=null)}function jg(d){d.g=new mr(d,d.j,"rpc",d.Y),d.m===null&&(d.g.H=d.o),d.g.O=0;var g=qn(d.qa);Ce(g,"RID","rpc"),Ce(g,"SID",d.K),Ce(g,"AID",d.T),Ce(g,"CI",d.F?"0":"1"),!d.F&&d.ja&&Ce(g,"TO",d.ja),Ce(g,"TYPE","xmlhttp"),ys(d,g),d.m&&d.o&&md(g,d.m,d.o),d.L&&(d.g.I=d.L);var v=d.g;d=d.ia,v.L=1,v.v=il(qn(g)),v.m=null,v.P=!0,Ig(v,d)}t.Za=function(){this.C!=null&&(this.C=null,ll(this),yd(this),xt(19))};function cl(d){d.C!=null&&(a.clearTimeout(d.C),d.C=null)}function Qg(d,g){var v=null;if(d.g==g){cl(d),vd(d),d.g=null;var S=2}else if(hd(d.h,g))v=g.D,Pg(d.h,g),S=1;else return;if(d.G!=0){if(g.o)if(S==1){v=g.m?g.m.length:0,g=Date.now()-g.F;var V=d.B;S=Xa(),Rt(S,new _g(S,v)),ul(d)}else Yg(d);else if(V=g.s,V==3||V==0&&0<g.X||!(S==1&&JA(d,g)||S==2&&yd(d)))switch(v&&0<v.length&&(g=d.h,g.i=g.i.concat(v)),V){case 1:di(d,5);break;case 4:di(d,10);break;case 3:di(d,6);break;default:di(d,2)}}}function Xg(d,g){let v=d.Ta+Math.floor(Math.random()*d.cb);return d.isActive()||(v*=2),v*g}function di(d,g){if(d.j.info("Error code "+g),g==2){var v=m(d.fb,d),S=d.Xa;const V=!S;S=new ci(S||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||nl(S,"https"),il(S),V?GA(S.toString(),v):HA(S.toString(),v)}else xt(2);d.G=0,d.l&&d.l.sa(g),Zg(d),Wg(d)}t.fb=function(d){d?(this.j.info("Successfully pinged google.com"),xt(2)):(this.j.info("Failed to ping google.com"),xt(1))};function Zg(d){if(d.G=0,d.ka=[],d.l){const g=Ng(d.h);(g.length!=0||d.i.length!=0)&&(x(d.ka,g),x(d.ka,d.i),d.h.i.length=0,P(d.i),d.i.length=0),d.l.ra()}}function ey(d,g,v){var S=v instanceof ci?qn(v):new ci(v);if(S.g!="")g&&(S.g=g+"."+S.g),rl(S,S.s);else{var V=a.location;S=V.protocol,g=g?g+"."+V.hostname:V.hostname,V=+V.port;var O=new ci(null);S&&nl(O,S),g&&(O.g=g),V&&rl(O,V),v&&(O.l=v),S=O}return v=d.D,g=d.ya,v&&g&&Ce(S,v,g),Ce(S,"VER",d.la),ys(d,S),S}function ty(d,g,v){if(g&&!d.J)throw Error("Can't create secondary domain capable XhrIo object.");return g=d.Ca&&!d.pa?new Le(new ol({eb:v})):new Le(d.pa),g.Ha(d.J),g}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function ny(){}t=ny.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function dl(){}dl.prototype.g=function(d,g){return new zt(d,g)};function zt(d,g){pt.call(this),this.g=new zg(g),this.l=d,this.h=g&&g.messageUrlParams||null,d=g&&g.messageHeaders||null,g&&g.clientProtocolHeaderRequired&&(d?d["X-Client-Protocol"]="webchannel":d={"X-Client-Protocol":"webchannel"}),this.g.o=d,d=g&&g.initMessageHeaders||null,g&&g.messageContentType&&(d?d["X-WebChannel-Content-Type"]=g.messageContentType:d={"X-WebChannel-Content-Type":g.messageContentType}),g&&g.va&&(d?d["X-WebChannel-Client-Profile"]=g.va:d={"X-WebChannel-Client-Profile":g.va}),this.g.S=d,(d=g&&g.Sb)&&!T(d)&&(this.g.m=d),this.v=g&&g.supportsCrossDomainXhr||!1,this.u=g&&g.sendRawJson||!1,(g=g&&g.httpSessionIdParam)&&!T(g)&&(this.g.D=g,d=this.h,d!==null&&g in d&&(d=this.h,g in d&&delete d[g])),this.j=new Ji(this)}E(zt,pt),zt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},zt.prototype.close=function(){gd(this.g)},zt.prototype.o=function(d){var g=this.g;if(typeof d=="string"){var v={};v.__data__=d,d=v}else this.u&&(v={},v.__data__=id(d),d=v);g.i.push(new kA(g.Ya++,d)),g.G==3&&ul(g)},zt.prototype.N=function(){this.g.l=null,delete this.j,gd(this.g),delete this.g,zt.aa.N.call(this)};function ry(d){sd.call(this),d.__headers__&&(this.headers=d.__headers__,this.statusCode=d.__status__,delete d.__headers__,delete d.__status__);var g=d.__sm__;if(g){e:{for(const v in g){d=v;break e}d=void 0}(this.i=d)&&(d=this.i,g=g!==null&&d in g?g[d]:void 0),this.data=g}else this.data=d}E(ry,sd);function iy(){ad.call(this),this.status=1}E(iy,ad);function Ji(d){this.g=d}E(Ji,ny),Ji.prototype.ua=function(){Rt(this.g,"a")},Ji.prototype.ta=function(d){Rt(this.g,new ry(d))},Ji.prototype.sa=function(d){Rt(this.g,new iy)},Ji.prototype.ra=function(){Rt(this.g,"b")},dl.prototype.createWebChannel=dl.prototype.g,zt.prototype.send=zt.prototype.o,zt.prototype.open=zt.prototype.m,zt.prototype.close=zt.prototype.close,cI=function(){return new dl},uI=function(){return Xa()},lI=li,fh={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Za.NO_ERROR=0,Za.TIMEOUT=8,Za.HTTP_ERROR=6,eu=Za,Eg.COMPLETE="complete",aI=Eg,mg.EventType=ss,ss.OPEN="a",ss.CLOSE="b",ss.ERROR="c",ss.MESSAGE="d",pt.prototype.listen=pt.prototype.K,Vs=mg,Le.prototype.listenOnce=Le.prototype.L,Le.prototype.getLastError=Le.prototype.Ka,Le.prototype.getLastErrorCode=Le.prototype.Ba,Le.prototype.getStatus=Le.prototype.Z,Le.prototype.getResponseJson=Le.prototype.Oa,Le.prototype.getResponseText=Le.prototype.oa,Le.prototype.send=Le.prototype.ea,Le.prototype.setWithCredentials=Le.prototype.Ha,sI=Le}).apply(typeof Nl<"u"?Nl:typeof self<"u"?self:typeof window<"u"?window:{});const bv="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Et{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Et.UNAUTHENTICATED=new Et(null),Et.GOOGLE_CREDENTIALS=new Et("google-credentials-uid"),Et.FIRST_PARTY=new Et("first-party-uid"),Et.MOCK_USER=new Et("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Jo="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ni=new Jp("@firebase/firestore");function As(){return Ni.logLevel}function j(t,...e){if(Ni.logLevel<=ue.DEBUG){const n=e.map(Qp);Ni.debug(`Firestore (${Jo}): ${t}`,...n)}}function ar(t,...e){if(Ni.logLevel<=ue.ERROR){const n=e.map(Qp);Ni.error(`Firestore (${Jo}): ${t}`,...n)}}function Vo(t,...e){if(Ni.logLevel<=ue.WARN){const n=e.map(Qp);Ni.warn(`Firestore (${Jo}): ${t}`,...n)}}function Qp(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ee(t="Unexpected state"){const e=`FIRESTORE (${Jo}) INTERNAL ASSERTION FAILED: `+t;throw ar(e),new Error(e)}function _e(t,e){t||ee()}function oe(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class K extends Hn{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class er{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dI{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class lD{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Et.UNAUTHENTICATED))}shutdown(){}}class uD{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class cD{constructor(e){this.t=e,this.currentUser=Et.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){_e(this.o===void 0);let r=this.i;const i=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let o=new er;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new er,e.enqueueRetryable(()=>i(this.currentUser))};const s=()=>{const l=o;e.enqueueRetryable(async()=>{await l.promise,await i(this.currentUser)})},a=l=>{j("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(j("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new er)}},0),s()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(j("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(_e(typeof r.accessToken=="string"),new dI(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return _e(e===null||typeof e=="string"),new Et(e)}}class dD{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=Et.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class fD{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new dD(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(Et.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class hD{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class pD{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){_e(this.o===void 0);const r=o=>{o.error!=null&&j("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const s=o.token!==this.R;return this.R=o.token,j("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?n(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};const i=o=>{j("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){const o=this.A.getImmediate({optional:!0});o?i(o):j("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(_e(typeof n.token=="string"),this.R=n.token,new hD(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mD(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fI{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=mD(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<n&&(r+=e.charAt(i[o]%e.length))}return r}}function he(t,e){return t<e?-1:t>e?1:0}function Uo(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xe{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new K(B.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new K(B.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new K(B.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new K(B.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Xe.fromMillis(Date.now())}static fromDate(e){return Xe.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new Xe(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?he(this.nanoseconds,e.nanoseconds):he(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ie{constructor(e){this.timestamp=e}static fromTimestamp(e){return new ie(e)}static min(){return new ie(new Xe(0,0))}static max(){return new ie(new Xe(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ia{constructor(e,n,r){n===void 0?n=0:n>e.length&&ee(),r===void 0?r=e.length-n:r>e.length-n&&ee(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Ia.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Ia?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const o=e.get(i),s=n.get(i);if(o<s)return-1;if(o>s)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class Re extends Ia{construct(e,n,r){return new Re(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new K(B.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new Re(n)}static emptyPath(){return new Re([])}}const gD=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class lt extends Ia{construct(e,n,r){return new lt(e,n,r)}static isValidIdentifier(e){return gD.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),lt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new lt(["__name__"])}static fromServerFormat(e){const n=[];let r="",i=0;const o=()=>{if(r.length===0)throw new K(B.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let s=!1;for(;i<e.length;){const a=e[i];if(a==="\\"){if(i+1===e.length)throw new K(B.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new K(B.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,i+=2}else a==="`"?(s=!s,i++):a!=="."||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new K(B.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new lt(n)}static emptyPath(){return new lt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q{constructor(e){this.path=e}static fromPath(e){return new Q(Re.fromString(e))}static fromName(e){return new Q(Re.fromString(e).popFirst(5))}static empty(){return new Q(Re.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Re.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Re.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Q(new Re(e.slice()))}}function yD(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=ie.fromTimestamp(r===1e9?new Xe(n+1,0):new Xe(n,r));return new Yr(i,Q.empty(),e)}function vD(t){return new Yr(t.readTime,t.key,-1)}class Yr{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Yr(ie.min(),Q.empty(),-1)}static max(){return new Yr(ie.max(),Q.empty(),-1)}}function _D(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=Q.comparator(t.documentKey,e.documentKey),n!==0?n:he(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ED="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class TD{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Oa(t){if(t.code!==B.FAILED_PRECONDITION||t.message!==ED)throw t;j("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&ee(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new G((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(n,o).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof G?n:G.resolve(n)}catch(n){return G.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):G.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):G.reject(n)}static resolve(e){return new G((n,r)=>{n(e)})}static reject(e){return new G((n,r)=>{r(e)})}static waitFor(e){return new G((n,r)=>{let i=0,o=0,s=!1;e.forEach(a=>{++i,a.next(()=>{++o,s&&o===i&&n()},l=>r(l))}),s=!0,o===i&&n()})}static or(e){let n=G.resolve(!1);for(const r of e)n=n.next(i=>i?G.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,o)=>{r.push(n.call(this,i,o))}),this.waitFor(r)}static mapArray(e,n){return new G((r,i)=>{const o=e.length,s=new Array(o);let a=0;for(let l=0;l<o;l++){const u=l;n(e[u]).next(h=>{s[u]=h,++a,a===o&&r(s)},h=>i(h))}})}static doWhile(e,n){return new G((r,i)=>{const o=()=>{e()===!0?n().next(()=>{o()},i):r()};o()})}}function wD(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Ba(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xp{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}Xp.oe=-1;function Cc(t){return t==null}function Fu(t){return t===0&&1/t==-1/0}function ID(t){return typeof t=="number"&&Number.isInteger(t)&&!Fu(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lv(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Gi(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function hI(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class be{constructor(e,n){this.comparator=e,this.root=n||at.EMPTY}insert(e,n){return new be(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,at.BLACK,null,null))}remove(e){return new be(this.comparator,this.root.remove(e,this.comparator).copy(null,null,at.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new kl(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new kl(this.root,e,this.comparator,!1)}getReverseIterator(){return new kl(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new kl(this.root,e,this.comparator,!0)}}class kl{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=n?r(e.key,n):1,n&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class at{constructor(e,n,r,i,o){this.key=e,this.value=n,this.color=r??at.RED,this.left=i??at.EMPTY,this.right=o??at.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,o){return new at(e??this.key,n??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,n,r),null):o===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return at.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return at.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,at.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,at.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ee();const e=this.left.check();if(e!==this.right.check())throw ee();return e+(this.isRed()?0:1)}}at.EMPTY=null,at.RED=!0,at.BLACK=!1;at.EMPTY=new class{constructor(){this.size=0}get key(){throw ee()}get value(){throw ee()}get color(){throw ee()}get left(){throw ee()}get right(){throw ee()}copy(e,n,r,i,o){return this}insert(e,n,r){return new at(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ct{constructor(e){this.comparator=e,this.data=new be(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Vv(this.data.getIterator())}getIteratorFrom(e){return new Vv(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof ct)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new ct(this.comparator);return n.data=e,n}}class Vv{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yt{constructor(e){this.fields=e,e.sort(lt.comparator)}static empty(){return new Yt([])}unionWith(e){let n=new ct(lt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Yt(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Uo(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pI extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ft{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new pI("Invalid base64 string: "+o):o}}(e);return new ft(n)}static fromUint8Array(e){const n=function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o}(e);return new ft(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return he(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ft.EMPTY_BYTE_STRING=new ft("");const SD=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function jr(t){if(_e(!!t),typeof t=="string"){let e=0;const n=SD.exec(t);if(_e(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Be(t.seconds),nanos:Be(t.nanos)}}function Be(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function ki(t){return typeof t=="string"?ft.fromBase64String(t):ft.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zp(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function em(t){const e=t.mapValue.fields.__previous_value__;return Zp(e)?em(e):e}function Sa(t){const e=jr(t.mapValue.fields.__local_write_time__.timestampValue);return new Xe(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CD{constructor(e,n,r,i,o,s,a,l,u){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=u}}class Ca{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Ca("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Ca&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dl={mapValue:{}};function Di(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Zp(t)?4:RD(t)?9007199254740991:AD(t)?10:11:ee()}function Bn(t,e){if(t===e)return!0;const n=Di(t);if(n!==Di(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Sa(t).isEqual(Sa(e));case 3:return function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;const s=jr(i.timestampValue),a=jr(o.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,o){return ki(i.bytesValue).isEqual(ki(o.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,o){return Be(i.geoPointValue.latitude)===Be(o.geoPointValue.latitude)&&Be(i.geoPointValue.longitude)===Be(o.geoPointValue.longitude)}(t,e);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return Be(i.integerValue)===Be(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){const s=Be(i.doubleValue),a=Be(o.doubleValue);return s===a?Fu(s)===Fu(a):isNaN(s)&&isNaN(a)}return!1}(t,e);case 9:return Uo(t.arrayValue.values||[],e.arrayValue.values||[],Bn);case 10:case 11:return function(i,o){const s=i.mapValue.fields||{},a=o.mapValue.fields||{};if(Lv(s)!==Lv(a))return!1;for(const l in s)if(s.hasOwnProperty(l)&&(a[l]===void 0||!Bn(s[l],a[l])))return!1;return!0}(t,e);default:return ee()}}function Aa(t,e){return(t.values||[]).find(n=>Bn(n,e))!==void 0}function Fo(t,e){if(t===e)return 0;const n=Di(t),r=Di(e);if(n!==r)return he(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return he(t.booleanValue,e.booleanValue);case 2:return function(o,s){const a=Be(o.integerValue||o.doubleValue),l=Be(s.integerValue||s.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(t,e);case 3:return Uv(t.timestampValue,e.timestampValue);case 4:return Uv(Sa(t),Sa(e));case 5:return he(t.stringValue,e.stringValue);case 6:return function(o,s){const a=ki(o),l=ki(s);return a.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(o,s){const a=o.split("/"),l=s.split("/");for(let u=0;u<a.length&&u<l.length;u++){const h=he(a[u],l[u]);if(h!==0)return h}return he(a.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(o,s){const a=he(Be(o.latitude),Be(s.latitude));return a!==0?a:he(Be(o.longitude),Be(s.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return Fv(t.arrayValue,e.arrayValue);case 10:return function(o,s){var a,l,u,h;const p=o.fields||{},m=s.fields||{},_=(a=p.value)===null||a===void 0?void 0:a.arrayValue,E=(l=m.value)===null||l===void 0?void 0:l.arrayValue,P=he(((u=_==null?void 0:_.values)===null||u===void 0?void 0:u.length)||0,((h=E==null?void 0:E.values)===null||h===void 0?void 0:h.length)||0);return P!==0?P:Fv(_,E)}(t.mapValue,e.mapValue);case 11:return function(o,s){if(o===Dl.mapValue&&s===Dl.mapValue)return 0;if(o===Dl.mapValue)return 1;if(s===Dl.mapValue)return-1;const a=o.fields||{},l=Object.keys(a),u=s.fields||{},h=Object.keys(u);l.sort(),h.sort();for(let p=0;p<l.length&&p<h.length;++p){const m=he(l[p],h[p]);if(m!==0)return m;const _=Fo(a[l[p]],u[h[p]]);if(_!==0)return _}return he(l.length,h.length)}(t.mapValue,e.mapValue);default:throw ee()}}function Uv(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return he(t,e);const n=jr(t),r=jr(e),i=he(n.seconds,r.seconds);return i!==0?i:he(n.nanos,r.nanos)}function Fv(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const o=Fo(n[i],r[i]);if(o)return o}return he(n.length,r.length)}function Oo(t){return hh(t)}function hh(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=jr(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return ki(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return Q.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const o of n.values||[])i?i=!1:r+=",",r+=hh(o);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",o=!0;for(const s of r)o?o=!1:i+=",",i+=`${s}:${hh(n.fields[s])}`;return i+"}"}(t.mapValue):ee()}function Ov(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function ph(t){return!!t&&"integerValue"in t}function tm(t){return!!t&&"arrayValue"in t}function Bv(t){return!!t&&"nullValue"in t}function Gv(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function tu(t){return!!t&&"mapValue"in t}function AD(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function js(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Gi(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=js(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=js(t.arrayValue.values[n]);return e}return Object.assign({},t)}function RD(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ot{constructor(e){this.value=e}static empty(){return new Ot({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!tu(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=js(n)}setAll(e){let n=lt.emptyPath(),r={},i=[];e.forEach((s,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,r,i),r={},i=[],n=a.popLast()}s?r[a.lastSegment()]=js(s):i.push(a.lastSegment())});const o=this.getFieldsMap(n);this.applyChanges(o,r,i)}delete(e){const n=this.field(e.popLast());tu(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Bn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];tu(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){Gi(n,(i,o)=>e[i]=o);for(const i of r)delete e[i]}clone(){return new Ot(js(this.value))}}function mI(t){const e=[];return Gi(t.fields,(n,r)=>{const i=new lt([n]);if(tu(r)){const o=mI(r.mapValue).fields;if(o.length===0)e.push(i);else for(const s of o)e.push(i.child(s))}else e.push(i)}),new Yt(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wt{constructor(e,n,r,i,o,s,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=a}static newInvalidDocument(e){return new wt(e,0,ie.min(),ie.min(),ie.min(),Ot.empty(),0)}static newFoundDocument(e,n,r,i){return new wt(e,1,n,ie.min(),r,i,0)}static newNoDocument(e,n){return new wt(e,2,n,ie.min(),ie.min(),Ot.empty(),0)}static newUnknownDocument(e,n){return new wt(e,3,n,ie.min(),ie.min(),Ot.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ie.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ot.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ot.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ie.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof wt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new wt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ou{constructor(e,n){this.position=e,this.inclusive=n}}function Hv(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const o=e[i],s=t.position[i];if(o.field.isKeyField()?r=Q.comparator(Q.fromName(s.referenceValue),n.key):r=Fo(s,n.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function qv(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Bn(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bu{constructor(e,n="asc"){this.field=e,this.dir=n}}function xD(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gI{}class We extends gI{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new ND(e,n,r):n==="array-contains"?new MD(e,r):n==="in"?new bD(e,r):n==="not-in"?new LD(e,r):n==="array-contains-any"?new VD(e,r):new We(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new kD(e,r):new DD(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Fo(n,this.value)):n!==null&&Di(this.value)===Di(n)&&this.matchesComparison(Fo(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ee()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class In extends gI{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new In(e,n)}matches(e){return yI(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function yI(t){return t.op==="and"}function vI(t){return PD(t)&&yI(t)}function PD(t){for(const e of t.filters)if(e instanceof In)return!1;return!0}function mh(t){if(t instanceof We)return t.field.canonicalString()+t.op.toString()+Oo(t.value);if(vI(t))return t.filters.map(e=>mh(e)).join(",");{const e=t.filters.map(n=>mh(n)).join(",");return`${t.op}(${e})`}}function _I(t,e){return t instanceof We?function(r,i){return i instanceof We&&r.op===i.op&&r.field.isEqual(i.field)&&Bn(r.value,i.value)}(t,e):t instanceof In?function(r,i){return i instanceof In&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,s,a)=>o&&_I(s,i.filters[a]),!0):!1}(t,e):void ee()}function EI(t){return t instanceof We?function(n){return`${n.field.canonicalString()} ${n.op} ${Oo(n.value)}`}(t):t instanceof In?function(n){return n.op.toString()+" {"+n.getFilters().map(EI).join(" ,")+"}"}(t):"Filter"}class ND extends We{constructor(e,n,r){super(e,n,r),this.key=Q.fromName(r.referenceValue)}matches(e){const n=Q.comparator(e.key,this.key);return this.matchesComparison(n)}}class kD extends We{constructor(e,n){super(e,"in",n),this.keys=TI("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class DD extends We{constructor(e,n){super(e,"not-in",n),this.keys=TI("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function TI(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>Q.fromName(r.referenceValue))}class MD extends We{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return tm(n)&&Aa(n.arrayValue,this.value)}}class bD extends We{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Aa(this.value.arrayValue,n)}}class LD extends We{constructor(e,n){super(e,"not-in",n)}matches(e){if(Aa(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!Aa(this.value.arrayValue,n)}}class VD extends We{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!tm(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Aa(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UD{constructor(e,n=null,r=[],i=[],o=null,s=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=a,this.ue=null}}function $v(t,e=null,n=[],r=[],i=null,o=null,s=null){return new UD(t,e,n,r,i,o,s)}function nm(t){const e=oe(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>mh(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(o){return o.field.canonicalString()+o.dir}(r)).join(","),Cc(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Oo(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Oo(r)).join(",")),e.ue=n}return e.ue}function rm(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!xD(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!_I(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!qv(t.startAt,e.startAt)&&qv(t.endAt,e.endAt)}function gh(t){return Q.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ga{constructor(e,n=null,r=[],i=[],o=null,s="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=a,this.endAt=l,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function FD(t,e,n,r,i,o,s,a){return new Ga(t,e,n,r,i,o,s,a)}function im(t){return new Ga(t)}function zv(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function wI(t){return t.collectionGroup!==null}function Qs(t){const e=oe(t);if(e.ce===null){e.ce=[];const n=new Set;for(const o of e.explicitOrderBy)e.ce.push(o),n.add(o.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let a=new ct(lt.comparator);return s.filters.forEach(l=>{l.getFlattenedFilters().forEach(u=>{u.isInequality()&&(a=a.add(u.field))})}),a})(e).forEach(o=>{n.has(o.canonicalString())||o.isKeyField()||e.ce.push(new Bu(o,r))}),n.has(lt.keyField().canonicalString())||e.ce.push(new Bu(lt.keyField(),r))}return e.ce}function Vn(t){const e=oe(t);return e.le||(e.le=OD(e,Qs(t))),e.le}function OD(t,e){if(t.limitType==="F")return $v(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const o=i.dir==="desc"?"asc":"desc";return new Bu(i.field,o)});const n=t.endAt?new Ou(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Ou(t.startAt.position,t.startAt.inclusive):null;return $v(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function yh(t,e){const n=t.filters.concat([e]);return new Ga(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function vh(t,e,n){return new Ga(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Ac(t,e){return rm(Vn(t),Vn(e))&&t.limitType===e.limitType}function II(t){return`${nm(Vn(t))}|lt:${t.limitType}`}function Qi(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>EI(i)).join(", ")}]`),Cc(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(s){return`${s.field.canonicalString()} (${s.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>Oo(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>Oo(i)).join(",")),`Target(${r})`}(Vn(t))}; limitType=${t.limitType})`}function Rc(t,e){return e.isFoundDocument()&&function(r,i){const o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):Q.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(t,e)&&function(r,i){for(const o of Qs(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const o of r.filters)if(!o.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(s,a,l){const u=Hv(s,a,l);return s.inclusive?u<=0:u<0}(r.startAt,Qs(r),i)||r.endAt&&!function(s,a,l){const u=Hv(s,a,l);return s.inclusive?u>=0:u>0}(r.endAt,Qs(r),i))}(t,e)}function BD(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function SI(t){return(e,n)=>{let r=!1;for(const i of Qs(t)){const o=GD(i,e,n);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function GD(t,e,n){const r=t.field.isKeyField()?Q.comparator(e.key,n.key):function(o,s,a){const l=s.data.field(o),u=a.data.field(o);return l!==null&&u!==null?Fo(l,u):ee()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return ee()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yo{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Gi(this.inner,(n,r)=>{for(const[i,o]of r)e(i,o)})}isEmpty(){return hI(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HD=new be(Q.comparator);function lr(){return HD}const CI=new be(Q.comparator);function Us(...t){let e=CI;for(const n of t)e=e.insert(n.key,n);return e}function AI(t){let e=CI;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function _i(){return Xs()}function RI(){return Xs()}function Xs(){return new Yo(t=>t.toString(),(t,e)=>t.isEqual(e))}const qD=new be(Q.comparator),$D=new ct(Q.comparator);function le(...t){let e=$D;for(const n of t)e=e.add(n);return e}const zD=new ct(he);function WD(){return zD}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function om(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Fu(e)?"-0":e}}function xI(t){return{integerValue:""+t}}function KD(t,e){return ID(e)?xI(e):om(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xc{constructor(){this._=void 0}}function JD(t,e,n){return t instanceof Gu?function(i,o){const s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&Zp(o)&&(o=em(o)),o&&(s.fields.__previous_value__=o),{mapValue:s}}(n,e):t instanceof Ra?NI(t,e):t instanceof xa?kI(t,e):function(i,o){const s=PI(i,o),a=Wv(s)+Wv(i.Pe);return ph(s)&&ph(i.Pe)?xI(a):om(i.serializer,a)}(t,e)}function YD(t,e,n){return t instanceof Ra?NI(t,e):t instanceof xa?kI(t,e):n}function PI(t,e){return t instanceof Hu?function(r){return ph(r)||function(o){return!!o&&"doubleValue"in o}(r)}(e)?e:{integerValue:0}:null}class Gu extends xc{}class Ra extends xc{constructor(e){super(),this.elements=e}}function NI(t,e){const n=DI(e);for(const r of t.elements)n.some(i=>Bn(i,r))||n.push(r);return{arrayValue:{values:n}}}class xa extends xc{constructor(e){super(),this.elements=e}}function kI(t,e){let n=DI(e);for(const r of t.elements)n=n.filter(i=>!Bn(i,r));return{arrayValue:{values:n}}}class Hu extends xc{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function Wv(t){return Be(t.integerValue||t.doubleValue)}function DI(t){return tm(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function jD(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof Ra&&i instanceof Ra||r instanceof xa&&i instanceof xa?Uo(r.elements,i.elements,Bn):r instanceof Hu&&i instanceof Hu?Bn(r.Pe,i.Pe):r instanceof Gu&&i instanceof Gu}(t.transform,e.transform)}class QD{constructor(e,n){this.version=e,this.transformResults=n}}class _n{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new _n}static exists(e){return new _n(void 0,e)}static updateTime(e){return new _n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function nu(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Pc{}function MI(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new sm(t.key,_n.none()):new Ha(t.key,t.data,_n.none());{const n=t.data,r=Ot.empty();let i=new ct(lt.comparator);for(let o of e.fields)if(!i.has(o)){let s=n.field(o);s===null&&o.length>1&&(o=o.popLast(),s=n.field(o)),s===null?r.delete(o):r.set(o,s),i=i.add(o)}return new ri(t.key,r,new Yt(i.toArray()),_n.none())}}function XD(t,e,n){t instanceof Ha?function(i,o,s){const a=i.value.clone(),l=Jv(i.fieldTransforms,o,s.transformResults);a.setAll(l),o.convertToFoundDocument(s.version,a).setHasCommittedMutations()}(t,e,n):t instanceof ri?function(i,o,s){if(!nu(i.precondition,o))return void o.convertToUnknownDocument(s.version);const a=Jv(i.fieldTransforms,o,s.transformResults),l=o.data;l.setAll(bI(i)),l.setAll(a),o.convertToFoundDocument(s.version,l).setHasCommittedMutations()}(t,e,n):function(i,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()}(0,e,n)}function Zs(t,e,n,r){return t instanceof Ha?function(o,s,a,l){if(!nu(o.precondition,s))return a;const u=o.value.clone(),h=Yv(o.fieldTransforms,l,s);return u.setAll(h),s.convertToFoundDocument(s.version,u).setHasLocalMutations(),null}(t,e,n,r):t instanceof ri?function(o,s,a,l){if(!nu(o.precondition,s))return a;const u=Yv(o.fieldTransforms,l,s),h=s.data;return h.setAll(bI(o)),h.setAll(u),s.convertToFoundDocument(s.version,h).setHasLocalMutations(),a===null?null:a.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(p=>p.field))}(t,e,n,r):function(o,s,a){return nu(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):a}(t,e,n)}function ZD(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),o=PI(r.transform,i||null);o!=null&&(n===null&&(n=Ot.empty()),n.set(r.field,o))}return n||null}function Kv(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Uo(r,i,(o,s)=>jD(o,s))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Ha extends Pc{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class ri extends Pc{constructor(e,n,r,i,o=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function bI(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function Jv(t,e,n){const r=new Map;_e(t.length===n.length);for(let i=0;i<n.length;i++){const o=t[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,YD(s,a,n[i]))}return r}function Yv(t,e,n){const r=new Map;for(const i of t){const o=i.transform,s=n.data.field(i.field);r.set(i.field,JD(o,s,e))}return r}class sm extends Pc{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class eM extends Pc{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tM{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const o=this.mutations[i];o.key.isEqual(e.key)&&XD(o,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Zs(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Zs(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=RI();return this.mutations.forEach(i=>{const o=e.get(i.key),s=o.overlayedDocument;let a=this.applyToLocalView(s,o.mutatedFields);a=n.has(i.key)?null:a;const l=MI(s,a);l!==null&&r.set(i.key,l),s.isValidDocument()||s.convertToNoDocument(ie.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),le())}isEqual(e){return this.batchId===e.batchId&&Uo(this.mutations,e.mutations,(n,r)=>Kv(n,r))&&Uo(this.baseMutations,e.baseMutations,(n,r)=>Kv(n,r))}}class am{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){_e(e.mutations.length===r.length);let i=function(){return qD}();const o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new am(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nM{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rM{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var $e,ce;function iM(t){switch(t){default:return ee();case B.CANCELLED:case B.UNKNOWN:case B.DEADLINE_EXCEEDED:case B.RESOURCE_EXHAUSTED:case B.INTERNAL:case B.UNAVAILABLE:case B.UNAUTHENTICATED:return!1;case B.INVALID_ARGUMENT:case B.NOT_FOUND:case B.ALREADY_EXISTS:case B.PERMISSION_DENIED:case B.FAILED_PRECONDITION:case B.ABORTED:case B.OUT_OF_RANGE:case B.UNIMPLEMENTED:case B.DATA_LOSS:return!0}}function LI(t){if(t===void 0)return ar("GRPC error has no .code"),B.UNKNOWN;switch(t){case $e.OK:return B.OK;case $e.CANCELLED:return B.CANCELLED;case $e.UNKNOWN:return B.UNKNOWN;case $e.DEADLINE_EXCEEDED:return B.DEADLINE_EXCEEDED;case $e.RESOURCE_EXHAUSTED:return B.RESOURCE_EXHAUSTED;case $e.INTERNAL:return B.INTERNAL;case $e.UNAVAILABLE:return B.UNAVAILABLE;case $e.UNAUTHENTICATED:return B.UNAUTHENTICATED;case $e.INVALID_ARGUMENT:return B.INVALID_ARGUMENT;case $e.NOT_FOUND:return B.NOT_FOUND;case $e.ALREADY_EXISTS:return B.ALREADY_EXISTS;case $e.PERMISSION_DENIED:return B.PERMISSION_DENIED;case $e.FAILED_PRECONDITION:return B.FAILED_PRECONDITION;case $e.ABORTED:return B.ABORTED;case $e.OUT_OF_RANGE:return B.OUT_OF_RANGE;case $e.UNIMPLEMENTED:return B.UNIMPLEMENTED;case $e.DATA_LOSS:return B.DATA_LOSS;default:return ee()}}(ce=$e||($e={}))[ce.OK=0]="OK",ce[ce.CANCELLED=1]="CANCELLED",ce[ce.UNKNOWN=2]="UNKNOWN",ce[ce.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ce[ce.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ce[ce.NOT_FOUND=5]="NOT_FOUND",ce[ce.ALREADY_EXISTS=6]="ALREADY_EXISTS",ce[ce.PERMISSION_DENIED=7]="PERMISSION_DENIED",ce[ce.UNAUTHENTICATED=16]="UNAUTHENTICATED",ce[ce.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ce[ce.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ce[ce.ABORTED=10]="ABORTED",ce[ce.OUT_OF_RANGE=11]="OUT_OF_RANGE",ce[ce.UNIMPLEMENTED=12]="UNIMPLEMENTED",ce[ce.INTERNAL=13]="INTERNAL",ce[ce.UNAVAILABLE=14]="UNAVAILABLE",ce[ce.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oM(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sM=new wi([4294967295,4294967295],0);function jv(t){const e=oM().encode(t),n=new oI;return n.update(e),new Uint8Array(n.digest())}function Qv(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new wi([n,r],0),new wi([i,o],0)]}class lm{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Fs(`Invalid padding: ${n}`);if(r<0)throw new Fs(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Fs(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Fs(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=wi.fromNumber(this.Ie)}Ee(e,n,r){let i=e.add(n.multiply(wi.fromNumber(r)));return i.compare(sM)===1&&(i=new wi([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=jv(e),[r,i]=Qv(n);for(let o=0;o<this.hashCount;o++){const s=this.Ee(r,i,o);if(!this.de(s))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new lm(o,i,n);return r.forEach(a=>s.insert(a)),s}insert(e){if(this.Ie===0)return;const n=jv(e),[r,i]=Qv(n);for(let o=0;o<this.hashCount;o++){const s=this.Ee(r,i,o);this.Ae(s)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Fs extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nc{constructor(e,n,r,i,o){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,qa.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Nc(ie.min(),i,new be(he),lr(),le())}}class qa{constructor(e,n,r,i,o){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new qa(r,n,le(),le(),le())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ru{constructor(e,n,r,i){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=i}}class VI{constructor(e,n){this.targetId=e,this.me=n}}class UI{constructor(e,n,r=ft.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class Xv{constructor(){this.fe=0,this.ge=e_(),this.pe=ft.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=le(),n=le(),r=le();return this.ge.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:ee()}}),new qa(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=e_()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,_e(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class aM{constructor(e){this.Le=e,this.Be=new Map,this.ke=lr(),this.qe=Zv(),this.Qe=new be(he)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:ee()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,i)=>{this.ze(i)&&n(i)})}He(e){const n=e.targetId,r=e.me.count,i=this.Je(n);if(i){const o=i.target;if(gh(o))if(r===0){const s=new Q(o.path);this.Ue(n,s,wt.newNoDocument(s,ie.min()))}else _e(r===1);else{const s=this.Ye(n);if(s!==r){const a=this.Ze(e),l=a?this.Xe(a,e,s):1;if(l!==0){this.je(n);const u=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,u)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=n;let s,a;try{s=ki(r).toUint8Array()}catch(l){if(l instanceof pI)return Vo("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new lm(s,i,o)}catch(l){return Vo(l instanceof Fs?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.Ie===0?null:a}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let i=0;return r.forEach(o=>{const s=this.Le.tt(),a=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(a)||(this.Ue(n,o,null),i++)}),i}rt(e){const n=new Map;this.Be.forEach((o,s)=>{const a=this.Je(s);if(a){if(o.current&&gh(a.target)){const l=new Q(a.target.path);this.ke.get(l)!==null||this.it(s,l)||this.Ue(s,l,wt.newNoDocument(l,e))}o.be&&(n.set(s,o.ve()),o.Ce())}});let r=le();this.qe.forEach((o,s)=>{let a=!0;s.forEachWhile(l=>{const u=this.Je(l);return!u||u.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(o))}),this.ke.forEach((o,s)=>s.setReadTime(e));const i=new Nc(e,n,this.Qe,this.ke,r);return this.ke=lr(),this.qe=Zv(),this.Qe=new be(he),i}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const i=this.Ge(e);this.it(e,n)?i.Fe(n,1):i.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new Xv,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new ct(he),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||j("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new Xv),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function Zv(){return new be(Q.comparator)}function e_(){return new be(Q.comparator)}const lM={asc:"ASCENDING",desc:"DESCENDING"},uM={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},cM={and:"AND",or:"OR"};class dM{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function _h(t,e){return t.useProto3Json||Cc(e)?e:{value:e}}function qu(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function FI(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function fM(t,e){return qu(t,e.toTimestamp())}function Un(t){return _e(!!t),ie.fromTimestamp(function(n){const r=jr(n);return new Xe(r.seconds,r.nanos)}(t))}function um(t,e){return Eh(t,e).canonicalString()}function Eh(t,e){const n=function(i){return new Re(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function OI(t){const e=Re.fromString(t);return _e($I(e)),e}function Th(t,e){return um(t.databaseId,e.path)}function Xd(t,e){const n=OI(e);if(n.get(1)!==t.databaseId.projectId)throw new K(B.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new K(B.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Q(GI(n))}function BI(t,e){return um(t.databaseId,e)}function hM(t){const e=OI(t);return e.length===4?Re.emptyPath():GI(e)}function wh(t){return new Re(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function GI(t){return _e(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function t_(t,e,n){return{name:Th(t,e),fields:n.value.mapValue.fields}}function pM(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:ee()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(u,h){return u.useProto3Json?(_e(h===void 0||typeof h=="string"),ft.fromBase64String(h||"")):(_e(h===void 0||h instanceof Buffer||h instanceof Uint8Array),ft.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),s=e.targetChange.cause,a=s&&function(u){const h=u.code===void 0?B.UNKNOWN:LI(u.code);return new K(h,u.message||"")}(s);n=new UI(r,i,o,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=Xd(t,r.document.name),o=Un(r.document.updateTime),s=r.document.createTime?Un(r.document.createTime):ie.min(),a=new Ot({mapValue:{fields:r.document.fields}}),l=wt.newFoundDocument(i,o,s,a),u=r.targetIds||[],h=r.removedTargetIds||[];n=new ru(u,h,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=Xd(t,r.document),o=r.readTime?Un(r.readTime):ie.min(),s=wt.newNoDocument(i,o),a=r.removedTargetIds||[];n=new ru([],a,s.key,s)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=Xd(t,r.document),o=r.removedTargetIds||[];n=new ru([],o,i,null)}else{if(!("filter"in e))return ee();{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:o}=r,s=new rM(i,o),a=r.targetId;n=new VI(a,s)}}return n}function mM(t,e){let n;if(e instanceof Ha)n={update:t_(t,e.key,e.value)};else if(e instanceof sm)n={delete:Th(t,e.key)};else if(e instanceof ri)n={update:t_(t,e.key,e.data),updateMask:SM(e.fieldMask)};else{if(!(e instanceof eM))return ee();n={verify:Th(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(o,s){const a=s.transform;if(a instanceof Gu)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Ra)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof xa)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Hu)return{fieldPath:s.field.canonicalString(),increment:a.Pe};throw ee()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,o){return o.updateTime!==void 0?{updateTime:fM(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:ee()}(t,e.precondition)),n}function gM(t,e){return t&&t.length>0?(_e(e!==void 0),t.map(n=>function(i,o){let s=i.updateTime?Un(i.updateTime):Un(o);return s.isEqual(ie.min())&&(s=Un(o)),new QD(s,i.transformResults||[])}(n,e))):[]}function yM(t,e){return{documents:[BI(t,e.path)]}}function vM(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=BI(t,i);const o=function(u){if(u.length!==0)return qI(In.create(u,"and"))}(e.filters);o&&(n.structuredQuery.where=o);const s=function(u){if(u.length!==0)return u.map(h=>function(m){return{field:Xi(m.field),direction:TM(m.dir)}}(h))}(e.orderBy);s&&(n.structuredQuery.orderBy=s);const a=_h(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),{_t:n,parent:i}}function _M(t){let e=hM(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){_e(r===1);const h=n.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let o=[];n.where&&(o=function(p){const m=HI(p);return m instanceof In&&vI(m)?m.getFilters():[m]}(n.where));let s=[];n.orderBy&&(s=function(p){return p.map(m=>function(E){return new Bu(Zi(E.field),function(x){switch(x){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(E.direction))}(m))}(n.orderBy));let a=null;n.limit&&(a=function(p){let m;return m=typeof p=="object"?p.value:p,Cc(m)?null:m}(n.limit));let l=null;n.startAt&&(l=function(p){const m=!!p.before,_=p.values||[];return new Ou(_,m)}(n.startAt));let u=null;return n.endAt&&(u=function(p){const m=!p.before,_=p.values||[];return new Ou(_,m)}(n.endAt)),FD(e,i,s,o,a,"F",l,u)}function EM(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ee()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function HI(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Zi(n.unaryFilter.field);return We.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Zi(n.unaryFilter.field);return We.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=Zi(n.unaryFilter.field);return We.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=Zi(n.unaryFilter.field);return We.create(s,"!=",{nullValue:"NULL_VALUE"});default:return ee()}}(t):t.fieldFilter!==void 0?function(n){return We.create(Zi(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ee()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return In.create(n.compositeFilter.filters.map(r=>HI(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return ee()}}(n.compositeFilter.op))}(t):ee()}function TM(t){return lM[t]}function wM(t){return uM[t]}function IM(t){return cM[t]}function Xi(t){return{fieldPath:t.canonicalString()}}function Zi(t){return lt.fromServerFormat(t.fieldPath)}function qI(t){return t instanceof We?function(n){if(n.op==="=="){if(Gv(n.value))return{unaryFilter:{field:Xi(n.field),op:"IS_NAN"}};if(Bv(n.value))return{unaryFilter:{field:Xi(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Gv(n.value))return{unaryFilter:{field:Xi(n.field),op:"IS_NOT_NAN"}};if(Bv(n.value))return{unaryFilter:{field:Xi(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Xi(n.field),op:wM(n.op),value:n.value}}}(t):t instanceof In?function(n){const r=n.getFilters().map(i=>qI(i));return r.length===1?r[0]:{compositeFilter:{op:IM(n.op),filters:r}}}(t):ee()}function SM(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function $I(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mr{constructor(e,n,r,i,o=ie.min(),s=ie.min(),a=ft.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new Mr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Mr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Mr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Mr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CM{constructor(e){this.ct=e}}function AM(t){const e=_M({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?vh(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RM{constructor(){this.un=new xM}addToCollectionParentIndex(e,n){return this.un.add(n),G.resolve()}getCollectionParents(e,n){return G.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return G.resolve()}deleteFieldIndex(e,n){return G.resolve()}deleteAllFieldIndexes(e){return G.resolve()}createTargetIndexes(e,n){return G.resolve()}getDocumentsMatchingTarget(e,n){return G.resolve(null)}getIndexType(e,n){return G.resolve(0)}getFieldIndexes(e,n){return G.resolve([])}getNextCollectionGroupToUpdate(e){return G.resolve(null)}getMinOffset(e,n){return G.resolve(Yr.min())}getMinOffsetFromCollectionGroup(e,n){return G.resolve(Yr.min())}updateCollectionGroup(e,n,r){return G.resolve()}updateIndexEntries(e,n){return G.resolve()}}class xM{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new ct(Re.comparator),o=!i.has(r);return this.index[n]=i.add(r),o}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new ct(Re.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bo{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new Bo(0)}static kn(){return new Bo(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PM{constructor(){this.changes=new Yo(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,wt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?G.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NM{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kM{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&Zs(r.mutation,i,Yt.empty(),Xe.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,le()).next(()=>r))}getLocalViewOfDocuments(e,n,r=le()){const i=_i();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(o=>{let s=Us();return o.forEach((a,l)=>{s=s.insert(a,l.overlayedDocument)}),s}))}getOverlayedDocuments(e,n){const r=_i();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,le()))}populateOverlays(e,n,r){const i=[];return r.forEach(o=>{n.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,a)=>{n.set(s,a)})})}computeViews(e,n,r,i){let o=lr();const s=Xs(),a=function(){return Xs()}();return n.forEach((l,u)=>{const h=r.get(u.key);i.has(u.key)&&(h===void 0||h.mutation instanceof ri)?o=o.insert(u.key,u):h!==void 0?(s.set(u.key,h.mutation.getFieldMask()),Zs(h.mutation,u,h.mutation.getFieldMask(),Xe.now())):s.set(u.key,Yt.empty())}),this.recalculateAndSaveOverlays(e,o).next(l=>(l.forEach((u,h)=>s.set(u,h)),n.forEach((u,h)=>{var p;return a.set(u,new NM(h,(p=s.get(u))!==null&&p!==void 0?p:null))}),a))}recalculateAndSaveOverlays(e,n){const r=Xs();let i=new be((s,a)=>s-a),o=le();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(s=>{for(const a of s)a.keys().forEach(l=>{const u=n.get(l);if(u===null)return;let h=r.get(l)||Yt.empty();h=a.applyToLocalView(u,h),r.set(l,h);const p=(i.get(a.batchId)||le()).add(l);i=i.insert(a.batchId,p)})}).next(()=>{const s=[],a=i.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),u=l.key,h=l.value,p=RI();h.forEach(m=>{if(!o.has(m)){const _=MI(n.get(m),r.get(m));_!==null&&p.set(m,_),o=o.add(m)}}),s.push(this.documentOverlayCache.saveOverlays(e,u,p))}return G.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(s){return Q.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):wI(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(o=>{const s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-o.size):G.resolve(_i());let a=-1,l=o;return s.next(u=>G.forEach(u,(h,p)=>(a<p.largestBatchId&&(a=p.largestBatchId),o.get(h)?G.resolve():this.remoteDocumentCache.getEntry(e,h).next(m=>{l=l.insert(h,m)}))).next(()=>this.populateOverlays(e,u,o)).next(()=>this.computeViews(e,l,u,le())).next(h=>({batchId:a,changes:AI(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Q(n)).next(r=>{let i=Us();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const o=n.collectionGroup;let s=Us();return this.indexManager.getCollectionParents(e,o).next(a=>G.forEach(a,l=>{const u=function(p,m){return new Ga(m,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(n,l.child(o));return this.getDocumentsMatchingCollectionQuery(e,u,r,i).next(h=>{h.forEach((p,m)=>{s=s.insert(p,m)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,n,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,o,i))).next(s=>{o.forEach((l,u)=>{const h=u.getKey();s.get(h)===null&&(s=s.insert(h,wt.newInvalidDocument(h)))});let a=Us();return s.forEach((l,u)=>{const h=o.get(l);h!==void 0&&Zs(h.mutation,u,Yt.empty(),Xe.now()),Rc(n,u)&&(a=a.insert(l,u))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DM{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return G.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:Un(i.createTime)}}(n)),G.resolve()}getNamedQuery(e,n){return G.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(i){return{name:i.name,query:AM(i.bundledQuery),readTime:Un(i.readTime)}}(n)),G.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MM{constructor(){this.overlays=new be(Q.comparator),this.Ir=new Map}getOverlay(e,n){return G.resolve(this.overlays.get(n))}getOverlays(e,n){const r=_i();return G.forEach(n,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,o)=>{this.ht(e,n,o)}),G.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.Ir.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.Ir.delete(r)),G.resolve()}getOverlaysForCollection(e,n,r){const i=_i(),o=n.length+1,s=new Q(n.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){const l=a.getNext().value,u=l.getKey();if(!n.isPrefixOf(u.path))break;u.path.length===o&&l.largestBatchId>r&&i.set(l.getKey(),l)}return G.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let o=new be((u,h)=>u-h);const s=this.overlays.getIterator();for(;s.hasNext();){const u=s.getNext().value;if(u.getKey().getCollectionGroup()===n&&u.largestBatchId>r){let h=o.get(u.largestBatchId);h===null&&(h=_i(),o=o.insert(u.largestBatchId,h)),h.set(u.getKey(),u)}}const a=_i(),l=o.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((u,h)=>a.set(u,h)),!(a.size()>=i)););return G.resolve(a)}ht(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const s=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new nM(n,r));let o=this.Ir.get(n);o===void 0&&(o=le(),this.Ir.set(n,o)),this.Ir.set(n,o.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bM{constructor(){this.sessionToken=ft.EMPTY_BYTE_STRING}getSessionToken(e){return G.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,G.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cm{constructor(){this.Tr=new ct(Ze.Er),this.dr=new ct(Ze.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new Ze(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new Ze(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){const n=new Q(new Re([])),r=new Ze(n,e),i=new Ze(n,e+1),o=[];return this.dr.forEachInRange([r,i],s=>{this.Vr(s),o.push(s.key)}),o}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new Q(new Re([])),r=new Ze(n,e),i=new Ze(n,e+1);let o=le();return this.dr.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){const n=new Ze(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Ze{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return Q.comparator(e.key,n.key)||he(e.wr,n.wr)}static Ar(e,n){return he(e.wr,n.wr)||Q.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LM{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new ct(Ze.Er)}checkEmpty(e){return G.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const o=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const s=new tM(o,n,r,i);this.mutationQueue.push(s);for(const a of i)this.br=this.br.add(new Ze(a.key,o)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return G.resolve(s)}lookupMutationBatch(e,n){return G.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.vr(r),o=i<0?0:i;return G.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return G.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return G.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Ze(n,0),i=new Ze(n,Number.POSITIVE_INFINITY),o=[];return this.br.forEachInRange([r,i],s=>{const a=this.Dr(s.wr);o.push(a)}),G.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new ct(he);return n.forEach(i=>{const o=new Ze(i,0),s=new Ze(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([o,s],a=>{r=r.add(a.wr)})}),G.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let o=r;Q.isDocumentKey(o)||(o=o.child(""));const s=new Ze(new Q(o),0);let a=new ct(he);return this.br.forEachWhile(l=>{const u=l.key.path;return!!r.isPrefixOf(u)&&(u.length===i&&(a=a.add(l.wr)),!0)},s),G.resolve(this.Cr(a))}Cr(e){const n=[];return e.forEach(r=>{const i=this.Dr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){_e(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return G.forEach(n.mutations,i=>{const o=new Ze(i.key,n.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){const r=new Ze(n,0),i=this.br.firstAfterOrEqual(r);return G.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,G.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VM{constructor(e){this.Mr=e,this.docs=function(){return new be(Q.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),o=i?i.size:0,s=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return G.resolve(r?r.document.mutableCopy():wt.newInvalidDocument(n))}getEntries(e,n){let r=lr();return n.forEach(i=>{const o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():wt.newInvalidDocument(i))}),G.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let o=lr();const s=n.path,a=new Q(s.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:u,value:{document:h}}=l.getNext();if(!s.isPrefixOf(u.path))break;u.path.length>s.length+1||_D(vD(h),r)<=0||(i.has(h.key)||Rc(n,h))&&(o=o.insert(h.key,h.mutableCopy()))}return G.resolve(o)}getAllFromCollectionGroup(e,n,r,i){ee()}Or(e,n){return G.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new UM(this)}getSize(e){return G.resolve(this.size)}}class UM extends PM{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),G.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FM{constructor(e){this.persistence=e,this.Nr=new Yo(n=>nm(n),rm),this.lastRemoteSnapshotVersion=ie.min(),this.highestTargetId=0,this.Lr=0,this.Br=new cm,this.targetCount=0,this.kr=Bo.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,i)=>n(i)),G.resolve()}getLastRemoteSnapshotVersion(e){return G.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return G.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),G.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),G.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new Bo(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,G.resolve()}updateTargetData(e,n){return this.Kn(n),G.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,G.resolve()}removeTargets(e,n,r){let i=0;const o=[];return this.Nr.forEach((s,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Nr.delete(s),o.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),G.waitFor(o).next(()=>i)}getTargetCount(e){return G.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return G.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),G.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const i=this.persistence.referenceDelegate,o=[];return i&&n.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),G.waitFor(o)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),G.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return G.resolve(r)}containsKey(e,n){return G.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OM{constructor(e,n){this.qr={},this.overlays={},this.Qr=new Xp(0),this.Kr=!1,this.Kr=!0,this.$r=new bM,this.referenceDelegate=e(this),this.Ur=new FM(this),this.indexManager=new RM,this.remoteDocumentCache=function(i){return new VM(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new CM(n),this.Gr=new DM(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new MM,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new LM(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){j("MemoryPersistence","Starting transaction:",e);const i=new BM(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(o=>this.referenceDelegate.jr(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Hr(e,n){return G.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}}class BM extends TD{constructor(e){super(),this.currentSequenceNumber=e}}class dm{constructor(e){this.persistence=e,this.Jr=new cm,this.Yr=null}static Zr(e){return new dm(e)}get Xr(){if(this.Yr)return this.Yr;throw ee()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),G.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),G.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),G.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(i=>this.Xr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(o=>this.Xr.add(o.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return G.forEach(this.Xr,r=>{const i=Q.fromPath(r);return this.ei(e,i).next(o=>{o||n.removeEntry(i,ie.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return G.or([()=>G.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fm{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=i}static Wi(e,n){let r=le(),i=le();for(const o of n.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new fm(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GM{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HM{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return qN()?8:wD(Ct())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,i){const o={result:null};return this.Yi(e,n).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.Zi(e,n,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;const s=new GM;return this.Xi(e,n,s).next(a=>{if(o.result=a,this.zi)return this.es(e,n,s,a.size)})}).next(()=>o.result)}es(e,n,r,i){return r.documentReadCount<this.ji?(As()<=ue.DEBUG&&j("QueryEngine","SDK will not create cache indexes for query:",Qi(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),G.resolve()):(As()<=ue.DEBUG&&j("QueryEngine","Query:",Qi(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(As()<=ue.DEBUG&&j("QueryEngine","The SDK decides to create cache indexes for query:",Qi(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Vn(n))):G.resolve())}Yi(e,n){if(zv(n))return G.resolve(null);let r=Vn(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=vh(n,null,"F"),r=Vn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{const s=le(...o);return this.Ji.getDocuments(e,s).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const u=this.ts(n,a);return this.ns(n,u,s,l.readTime)?this.Yi(e,vh(n,null,"F")):this.rs(e,u,n,l)}))})))}Zi(e,n,r,i){return zv(n)||i.isEqual(ie.min())?G.resolve(null):this.Ji.getDocuments(e,r).next(o=>{const s=this.ts(n,o);return this.ns(n,s,r,i)?G.resolve(null):(As()<=ue.DEBUG&&j("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Qi(n)),this.rs(e,s,n,yD(i,-1)).next(a=>a))})}ts(e,n){let r=new ct(SI(e));return n.forEach((i,o)=>{Rc(e,o)&&(r=r.add(o))}),r}ns(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const o=e.limitType==="F"?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}Xi(e,n,r){return As()<=ue.DEBUG&&j("QueryEngine","Using full collection scan to execute query:",Qi(n)),this.Ji.getDocumentsMatchingQuery(e,n,Yr.min(),r)}rs(e,n,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(o=>(n.forEach(s=>{o=o.insert(s.key,s)}),o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qM{constructor(e,n,r,i){this.persistence=e,this.ss=n,this.serializer=i,this.os=new be(he),this._s=new Yo(o=>nm(o),rm),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new kM(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function $M(t,e,n,r){return new qM(t,e,n,r)}async function zI(t,e){const n=oe(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(o=>{const s=[],a=[];let l=le();for(const u of i){s.push(u.batchId);for(const h of u.mutations)l=l.add(h.key)}for(const u of o){a.push(u.batchId);for(const h of u.mutations)l=l.add(h.key)}return n.localDocuments.getDocuments(r,l).next(u=>({hs:u,removedBatchIds:s,addedBatchIds:a}))})})}function zM(t,e){const n=oe(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),o=n.cs.newChangeBuffer({trackRemovals:!0});return function(a,l,u,h){const p=u.batch,m=p.keys();let _=G.resolve();return m.forEach(E=>{_=_.next(()=>h.getEntry(l,E)).next(P=>{const x=u.docVersions.get(E);_e(x!==null),P.version.compareTo(x)<0&&(p.applyToRemoteDocument(P,u),P.isValidDocument()&&(P.setReadTime(u.commitVersion),h.addEntry(P)))})}),_.next(()=>a.mutationQueue.removeMutationBatch(l,p))}(n,r,e,o).next(()=>o.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let l=le();for(let u=0;u<a.mutationResults.length;++u)a.mutationResults[u].transformResults.length>0&&(l=l.add(a.batch.mutations[u].key));return l}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function WI(t){const e=oe(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function WM(t,e){const n=oe(t),r=e.snapshotVersion;let i=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{const s=n.cs.newChangeBuffer({trackRemovals:!0});i=n.os;const a=[];e.targetChanges.forEach((h,p)=>{const m=i.get(p);if(!m)return;a.push(n.Ur.removeMatchingKeys(o,h.removedDocuments,p).next(()=>n.Ur.addMatchingKeys(o,h.addedDocuments,p)));let _=m.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(p)!==null?_=_.withResumeToken(ft.EMPTY_BYTE_STRING,ie.min()).withLastLimboFreeSnapshotVersion(ie.min()):h.resumeToken.approximateByteSize()>0&&(_=_.withResumeToken(h.resumeToken,r)),i=i.insert(p,_),function(P,x,I){return P.resumeToken.approximateByteSize()===0||x.snapshotVersion.toMicroseconds()-P.snapshotVersion.toMicroseconds()>=3e8?!0:I.addedDocuments.size+I.modifiedDocuments.size+I.removedDocuments.size>0}(m,_,h)&&a.push(n.Ur.updateTargetData(o,_))});let l=lr(),u=le();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(o,h))}),a.push(KM(o,s,e.documentUpdates).next(h=>{l=h.Ps,u=h.Is})),!r.isEqual(ie.min())){const h=n.Ur.getLastRemoteSnapshotVersion(o).next(p=>n.Ur.setTargetsMetadata(o,o.currentSequenceNumber,r));a.push(h)}return G.waitFor(a).next(()=>s.apply(o)).next(()=>n.localDocuments.getLocalViewOfDocuments(o,l,u)).next(()=>l)}).then(o=>(n.os=i,o))}function KM(t,e,n){let r=le(),i=le();return n.forEach(o=>r=r.add(o)),e.getEntries(t,r).next(o=>{let s=lr();return n.forEach((a,l)=>{const u=o.get(a);l.isFoundDocument()!==u.isFoundDocument()&&(i=i.add(a)),l.isNoDocument()&&l.version.isEqual(ie.min())?(e.removeEntry(a,l.readTime),s=s.insert(a,l)):!u.isValidDocument()||l.version.compareTo(u.version)>0||l.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(l),s=s.insert(a,l)):j("LocalStore","Ignoring outdated watch update for ",a,". Current version:",u.version," Watch version:",l.version)}),{Ps:s,Is:i}})}function JM(t,e){const n=oe(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function YM(t,e){const n=oe(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Ur.getTargetData(r,e).next(o=>o?(i=o,G.resolve(i)):n.Ur.allocateTargetId(r).next(s=>(i=new Mr(e,s,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}async function Ih(t,e,n){const r=oe(t),i=r.os.get(e),o=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i))}catch(s){if(!Ba(s))throw s;j("LocalStore",`Failed to update sequence numbers for target ${e}: ${s}`)}r.os=r.os.remove(e),r._s.delete(i.target)}function n_(t,e,n){const r=oe(t);let i=ie.min(),o=le();return r.persistence.runTransaction("Execute query","readwrite",s=>function(l,u,h){const p=oe(l),m=p._s.get(h);return m!==void 0?G.resolve(p.os.get(m)):p.Ur.getTargetData(u,h)}(r,s,Vn(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(s,a.targetId).next(l=>{o=l})}).next(()=>r.ss.getDocumentsMatchingQuery(s,e,n?i:ie.min(),n?o:le())).next(a=>(jM(r,BD(e),a),{documents:a,Ts:o})))}function jM(t,e,n){let r=t.us.get(e)||ie.min();n.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),t.us.set(e,r)}class r_{constructor(){this.activeTargetIds=WD()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class QM{constructor(){this.so=new r_,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new r_,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XM{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i_{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){j("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){j("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ml=null;function Zd(){return Ml===null?Ml=function(){return 268435456+Math.round(2147483648*Math.random())}():Ml++,"0x"+Ml.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZM={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eb{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _t="WebChannelConnection";class tb extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${i}/databases/${o}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${o}`}get Fo(){return!1}Mo(n,r,i,o,s){const a=Zd(),l=this.xo(n,r.toUriEncodedString());j("RestConnection",`Sending RPC '${n}' ${a}:`,l,i);const u={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(u,o,s),this.No(n,l,u,i).then(h=>(j("RestConnection",`Received RPC '${n}' ${a}: `,h),h),h=>{throw Vo("RestConnection",`RPC '${n}' ${a} failed with error: `,h,"url: ",l,"request:",i),h})}Lo(n,r,i,o,s,a){return this.Mo(n,r,i,o,s)}Oo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Jo}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((o,s)=>n[s]=o),i&&i.headers.forEach((o,s)=>n[s]=o)}xo(n,r){const i=ZM[n];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,i){const o=Zd();return new Promise((s,a)=>{const l=new sI;l.setWithCredentials(!0),l.listenOnce(aI.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case eu.NO_ERROR:const h=l.getResponseJson();j(_t,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(h)),s(h);break;case eu.TIMEOUT:j(_t,`RPC '${e}' ${o} timed out`),a(new K(B.DEADLINE_EXCEEDED,"Request time out"));break;case eu.HTTP_ERROR:const p=l.getStatus();if(j(_t,`RPC '${e}' ${o} failed with status:`,p,"response text:",l.getResponseText()),p>0){let m=l.getResponseJson();Array.isArray(m)&&(m=m[0]);const _=m==null?void 0:m.error;if(_&&_.status&&_.message){const E=function(x){const I=x.toLowerCase().replace(/_/g,"-");return Object.values(B).indexOf(I)>=0?I:B.UNKNOWN}(_.status);a(new K(E,_.message))}else a(new K(B.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new K(B.UNAVAILABLE,"Connection failed."));break;default:ee()}}finally{j(_t,`RPC '${e}' ${o} completed.`)}});const u=JSON.stringify(i);j(_t,`RPC '${e}' ${o} sending request:`,i),l.send(n,"POST",u,r,15)})}Bo(e,n,r){const i=Zd(),o=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=cI(),a=uI(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(l.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Oo(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const h=o.join("");j(_t,`Creating RPC '${e}' stream ${i}: ${h}`,l);const p=s.createWebChannel(h,l);let m=!1,_=!1;const E=new eb({Io:x=>{_?j(_t,`Not sending because RPC '${e}' stream ${i} is closed:`,x):(m||(j(_t,`Opening RPC '${e}' stream ${i} transport.`),p.open(),m=!0),j(_t,`RPC '${e}' stream ${i} sending:`,x),p.send(x))},To:()=>p.close()}),P=(x,I,T)=>{x.listen(I,C=>{try{T(C)}catch(M){setTimeout(()=>{throw M},0)}})};return P(p,Vs.EventType.OPEN,()=>{_||(j(_t,`RPC '${e}' stream ${i} transport opened.`),E.yo())}),P(p,Vs.EventType.CLOSE,()=>{_||(_=!0,j(_t,`RPC '${e}' stream ${i} transport closed`),E.So())}),P(p,Vs.EventType.ERROR,x=>{_||(_=!0,Vo(_t,`RPC '${e}' stream ${i} transport errored:`,x),E.So(new K(B.UNAVAILABLE,"The operation could not be completed")))}),P(p,Vs.EventType.MESSAGE,x=>{var I;if(!_){const T=x.data[0];_e(!!T);const C=T,M=C.error||((I=C[0])===null||I===void 0?void 0:I.error);if(M){j(_t,`RPC '${e}' stream ${i} received error:`,M);const U=M.status;let L=function(A){const N=$e[A];if(N!==void 0)return LI(N)}(U),R=M.message;L===void 0&&(L=B.INTERNAL,R="Unknown error status: "+U+" with message "+M.message),_=!0,E.So(new K(L,R)),p.close()}else j(_t,`RPC '${e}' stream ${i} received:`,T),E.bo(T)}}),P(a,lI.STAT_EVENT,x=>{x.stat===fh.PROXY?j(_t,`RPC '${e}' stream ${i} detected buffering proxy`):x.stat===fh.NOPROXY&&j(_t,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{E.wo()},0),E}}function ef(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kc(t){return new dM(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KI{constructor(e,n,r=1e3,i=1.5,o=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=i,this.Qo=o,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,n-r);i>0&&j("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JI{constructor(e,n,r,i,o,s,a,l){this.ui=e,this.Ho=r,this.Jo=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new KI(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===B.RESOURCE_EXHAUSTED?(ar(n.toString()),ar("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===B.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===n&&this.P_(r,i)},r=>{e(()=>{const i=new K(B.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return j("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(j("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class nb extends JI{constructor(e,n,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,s),this.serializer=o}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=pM(this.serializer,e),r=function(o){if(!("targetChange"in o))return ie.min();const s=o.targetChange;return s.targetIds&&s.targetIds.length?ie.min():s.readTime?Un(s.readTime):ie.min()}(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=wh(this.serializer),n.addTarget=function(o,s){let a;const l=s.target;if(a=gh(l)?{documents:yM(o,l)}:{query:vM(o,l)._t},a.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){a.resumeToken=FI(o,s.resumeToken);const u=_h(o,s.expectedCount);u!==null&&(a.expectedCount=u)}else if(s.snapshotVersion.compareTo(ie.min())>0){a.readTime=qu(o,s.snapshotVersion.toTimestamp());const u=_h(o,s.expectedCount);u!==null&&(a.expectedCount=u)}return a}(this.serializer,e);const r=EM(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=wh(this.serializer),n.removeTarget=e,this.a_(n)}}class rb extends JI{constructor(e,n,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,s),this.serializer=o}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return _e(!!e.streamToken),this.lastStreamToken=e.streamToken,_e(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){_e(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=gM(e.writeResults,e.commitTime),r=Un(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=wh(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>mM(this.serializer,r))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ib extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new K(B.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.Mo(e,Eh(n,r),i,o,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===B.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new K(B.UNKNOWN,o.toString())})}Lo(e,n,r,i,o){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Lo(e,Eh(n,r),i,s,a,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===B.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new K(B.UNKNOWN,s.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class ob{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(ar(n),this.D_=!1):j("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sb{constructor(e,n,r,i,o){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=o,this.k_._o(s=>{r.enqueueAndForget(async()=>{Hi(this)&&(j("RemoteStore","Restarting streams for network reachability change."),await async function(l){const u=oe(l);u.L_.add(4),await $a(u),u.q_.set("Unknown"),u.L_.delete(4),await Dc(u)}(this))})}),this.q_=new ob(r,i)}}async function Dc(t){if(Hi(t))for(const e of t.B_)await e(!0)}async function $a(t){for(const e of t.B_)await e(!1)}function YI(t,e){const n=oe(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),gm(n)?mm(n):jo(n).r_()&&pm(n,e))}function hm(t,e){const n=oe(t),r=jo(n);n.N_.delete(e),r.r_()&&jI(n,e),n.N_.size===0&&(r.r_()?r.o_():Hi(n)&&n.q_.set("Unknown"))}function pm(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ie.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}jo(t).A_(e)}function jI(t,e){t.Q_.xe(e),jo(t).R_(e)}function mm(t){t.Q_=new aM({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),jo(t).start(),t.q_.v_()}function gm(t){return Hi(t)&&!jo(t).n_()&&t.N_.size>0}function Hi(t){return oe(t).L_.size===0}function QI(t){t.Q_=void 0}async function ab(t){t.q_.set("Online")}async function lb(t){t.N_.forEach((e,n)=>{pm(t,e)})}async function ub(t,e){QI(t),gm(t)?(t.q_.M_(e),mm(t)):t.q_.set("Unknown")}async function cb(t,e,n){if(t.q_.set("Online"),e instanceof UI&&e.state===2&&e.cause)try{await async function(i,o){const s=o.cause;for(const a of o.targetIds)i.N_.has(a)&&(await i.remoteSyncer.rejectListen(a,s),i.N_.delete(a),i.Q_.removeTarget(a))}(t,e)}catch(r){j("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await $u(t,r)}else if(e instanceof ru?t.Q_.Ke(e):e instanceof VI?t.Q_.He(e):t.Q_.We(e),!n.isEqual(ie.min()))try{const r=await WI(t.localStore);n.compareTo(r)>=0&&await function(o,s){const a=o.Q_.rt(s);return a.targetChanges.forEach((l,u)=>{if(l.resumeToken.approximateByteSize()>0){const h=o.N_.get(u);h&&o.N_.set(u,h.withResumeToken(l.resumeToken,s))}}),a.targetMismatches.forEach((l,u)=>{const h=o.N_.get(l);if(!h)return;o.N_.set(l,h.withResumeToken(ft.EMPTY_BYTE_STRING,h.snapshotVersion)),jI(o,l);const p=new Mr(h.target,l,u,h.sequenceNumber);pm(o,p)}),o.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){j("RemoteStore","Failed to raise snapshot:",r),await $u(t,r)}}async function $u(t,e,n){if(!Ba(e))throw e;t.L_.add(1),await $a(t),t.q_.set("Offline"),n||(n=()=>WI(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{j("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await Dc(t)})}function XI(t,e){return e().catch(n=>$u(t,n,e))}async function Mc(t){const e=oe(t),n=Qr(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;db(e);)try{const i=await JM(e.localStore,r);if(i===null){e.O_.length===0&&n.o_();break}r=i.batchId,fb(e,i)}catch(i){await $u(e,i)}ZI(e)&&eS(e)}function db(t){return Hi(t)&&t.O_.length<10}function fb(t,e){t.O_.push(e);const n=Qr(t);n.r_()&&n.V_&&n.m_(e.mutations)}function ZI(t){return Hi(t)&&!Qr(t).n_()&&t.O_.length>0}function eS(t){Qr(t).start()}async function hb(t){Qr(t).p_()}async function pb(t){const e=Qr(t);for(const n of t.O_)e.m_(n.mutations)}async function mb(t,e,n){const r=t.O_.shift(),i=am.from(r,e,n);await XI(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await Mc(t)}async function gb(t,e){e&&Qr(t).V_&&await async function(r,i){if(function(s){return iM(s)&&s!==B.ABORTED}(i.code)){const o=r.O_.shift();Qr(r).s_(),await XI(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),await Mc(r)}}(t,e),ZI(t)&&eS(t)}async function o_(t,e){const n=oe(t);n.asyncQueue.verifyOperationInProgress(),j("RemoteStore","RemoteStore received new credentials");const r=Hi(n);n.L_.add(3),await $a(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await Dc(n)}async function yb(t,e){const n=oe(t);e?(n.L_.delete(2),await Dc(n)):e||(n.L_.add(2),await $a(n),n.q_.set("Unknown"))}function jo(t){return t.K_||(t.K_=function(n,r,i){const o=oe(n);return o.w_(),new nb(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(t.datastore,t.asyncQueue,{Eo:ab.bind(null,t),Ro:lb.bind(null,t),mo:ub.bind(null,t),d_:cb.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),gm(t)?mm(t):t.q_.set("Unknown")):(await t.K_.stop(),QI(t))})),t.K_}function Qr(t){return t.U_||(t.U_=function(n,r,i){const o=oe(n);return o.w_(),new rb(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:hb.bind(null,t),mo:gb.bind(null,t),f_:pb.bind(null,t),g_:mb.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await Mc(t)):(await t.U_.stop(),t.O_.length>0&&(j("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ym{constructor(e,n,r,i,o){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new er,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,o){const s=Date.now()+r,a=new ym(e,n,s,i,o);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new K(B.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function vm(t,e){if(ar("AsyncQueue",`${e}: ${t}`),Ba(t))return new K(B.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Io{constructor(e){this.comparator=e?(n,r)=>e(n,r)||Q.comparator(n.key,r.key):(n,r)=>Q.comparator(n.key,r.key),this.keyedMap=Us(),this.sortedSet=new be(this.comparator)}static emptySet(e){return new Io(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Io)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Io;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s_{constructor(){this.W_=new be(Q.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):ee():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}}class Go{constructor(e,n,r,i,o,s,a,l,u){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=u}static fromInitialDocuments(e,n,r,i,o){const s=[];return n.forEach(a=>{s.push({type:0,doc:a})}),new Go(e,n,Io.emptySet(n),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Ac(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vb{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class _b{constructor(){this.queries=a_(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const i=oe(n),o=i.queries;i.queries=a_(),o.forEach((s,a)=>{for(const l of a.j_)l.onError(r)})})(this,new K(B.ABORTED,"Firestore shutting down"))}}function a_(){return new Yo(t=>II(t),Ac)}async function tS(t,e){const n=oe(t);let r=3;const i=e.query;let o=n.queries.get(i);o?!o.H_()&&e.J_()&&(r=2):(o=new vb,r=e.J_()?0:1);try{switch(r){case 0:o.z_=await n.onListen(i,!0);break;case 1:o.z_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(s){const a=vm(s,`Initialization of query '${Qi(e.query)}' failed`);return void e.onError(a)}n.queries.set(i,o),o.j_.push(e),e.Z_(n.onlineState),o.z_&&e.X_(o.z_)&&_m(n)}async function nS(t,e){const n=oe(t),r=e.query;let i=3;const o=n.queries.get(r);if(o){const s=o.j_.indexOf(e);s>=0&&(o.j_.splice(s,1),o.j_.length===0?i=e.J_()?0:1:!o.H_()&&e.J_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function Eb(t,e){const n=oe(t);let r=!1;for(const i of e){const o=i.query,s=n.queries.get(o);if(s){for(const a of s.j_)a.X_(i)&&(r=!0);s.z_=i}}r&&_m(n)}function Tb(t,e,n){const r=oe(t),i=r.queries.get(e);if(i)for(const o of i.j_)o.onError(n);r.queries.delete(e)}function _m(t){t.Y_.forEach(e=>{e.next()})}var Sh,l_;(l_=Sh||(Sh={})).ea="default",l_.Cache="cache";class rS{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new Go(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=Go.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==Sh.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iS{constructor(e){this.key=e}}class oS{constructor(e){this.key=e}}class wb{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=le(),this.mutatedKeys=le(),this.Aa=SI(e),this.Ra=new Io(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new s_,i=n?n.Ra:this.Ra;let o=n?n.mutatedKeys:this.mutatedKeys,s=i,a=!1;const l=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,u=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,p)=>{const m=i.get(h),_=Rc(this.query,p)?p:null,E=!!m&&this.mutatedKeys.has(m.key),P=!!_&&(_.hasLocalMutations||this.mutatedKeys.has(_.key)&&_.hasCommittedMutations);let x=!1;m&&_?m.data.isEqual(_.data)?E!==P&&(r.track({type:3,doc:_}),x=!0):this.ga(m,_)||(r.track({type:2,doc:_}),x=!0,(l&&this.Aa(_,l)>0||u&&this.Aa(_,u)<0)&&(a=!0)):!m&&_?(r.track({type:0,doc:_}),x=!0):m&&!_&&(r.track({type:1,doc:m}),x=!0,(l||u)&&(a=!0)),x&&(_?(s=s.add(_),o=P?o.add(h):o.delete(h)):(s=s.delete(h),o=o.delete(h)))}),this.query.limit!==null)for(;s.size>this.query.limit;){const h=this.query.limitType==="F"?s.last():s.first();s=s.delete(h.key),o=o.delete(h.key),r.track({type:1,doc:h})}return{Ra:s,fa:r,ns:a,mutatedKeys:o}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const o=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const s=e.fa.G_();s.sort((h,p)=>function(_,E){const P=x=>{switch(x){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ee()}};return P(_)-P(E)}(h.type,p.type)||this.Aa(h.doc,p.doc)),this.pa(r),i=i!=null&&i;const a=n&&!i?this.ya():[],l=this.da.size===0&&this.current&&!i?1:0,u=l!==this.Ea;return this.Ea=l,s.length!==0||u?{snapshot:new Go(this.query,e.Ra,o,s,e.mutatedKeys,l===0,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new s_,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=le(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const n=[];return e.forEach(r=>{this.da.has(r)||n.push(new oS(r))}),this.da.forEach(r=>{e.has(r)||n.push(new iS(r))}),n}ba(e){this.Ta=e.Ts,this.da=le();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return Go.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class Ib{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class Sb{constructor(e){this.key=e,this.va=!1}}class Cb{constructor(e,n,r,i,o,s){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.Ca={},this.Fa=new Yo(a=>II(a),Ac),this.Ma=new Map,this.xa=new Set,this.Oa=new be(Q.comparator),this.Na=new Map,this.La=new cm,this.Ba={},this.ka=new Map,this.qa=Bo.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function Ab(t,e,n=!0){const r=dS(t);let i;const o=r.Fa.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.Da()):i=await sS(r,e,n,!0),i}async function Rb(t,e){const n=dS(t);await sS(n,e,!0,!1)}async function sS(t,e,n,r){const i=await YM(t.localStore,Vn(e)),o=i.targetId,s=t.sharedClientState.addLocalQueryTarget(o,n);let a;return r&&(a=await xb(t,e,o,s==="current",i.resumeToken)),t.isPrimaryClient&&n&&YI(t.remoteStore,i),a}async function xb(t,e,n,r,i){t.Ka=(p,m,_)=>async function(P,x,I,T){let C=x.view.ma(I);C.ns&&(C=await n_(P.localStore,x.query,!1).then(({documents:R})=>x.view.ma(R,C)));const M=T&&T.targetChanges.get(x.targetId),U=T&&T.targetMismatches.get(x.targetId)!=null,L=x.view.applyChanges(C,P.isPrimaryClient,M,U);return c_(P,x.targetId,L.wa),L.snapshot}(t,p,m,_);const o=await n_(t.localStore,e,!0),s=new wb(e,o.Ts),a=s.ma(o.documents),l=qa.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),u=s.applyChanges(a,t.isPrimaryClient,l);c_(t,n,u.wa);const h=new Ib(e,n,s);return t.Fa.set(e,h),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),u.snapshot}async function Pb(t,e,n){const r=oe(t),i=r.Fa.get(e),o=r.Ma.get(i.targetId);if(o.length>1)return r.Ma.set(i.targetId,o.filter(s=>!Ac(s,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await Ih(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&hm(r.remoteStore,i.targetId),Ch(r,i.targetId)}).catch(Oa)):(Ch(r,i.targetId),await Ih(r.localStore,i.targetId,!0))}async function Nb(t,e){const n=oe(t),r=n.Fa.get(e),i=n.Ma.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),hm(n.remoteStore,r.targetId))}async function kb(t,e,n){const r=Fb(t);try{const i=await function(s,a){const l=oe(s),u=Xe.now(),h=a.reduce((_,E)=>_.add(E.key),le());let p,m;return l.persistence.runTransaction("Locally write mutations","readwrite",_=>{let E=lr(),P=le();return l.cs.getEntries(_,h).next(x=>{E=x,E.forEach((I,T)=>{T.isValidDocument()||(P=P.add(I))})}).next(()=>l.localDocuments.getOverlayedDocuments(_,E)).next(x=>{p=x;const I=[];for(const T of a){const C=ZD(T,p.get(T.key).overlayedDocument);C!=null&&I.push(new ri(T.key,C,mI(C.value.mapValue),_n.exists(!0)))}return l.mutationQueue.addMutationBatch(_,u,I,a)}).next(x=>{m=x;const I=x.applyToLocalDocumentSet(p,P);return l.documentOverlayCache.saveOverlays(_,x.batchId,I)})}).then(()=>({batchId:m.batchId,changes:AI(p)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,a,l){let u=s.Ba[s.currentUser.toKey()];u||(u=new be(he)),u=u.insert(a,l),s.Ba[s.currentUser.toKey()]=u}(r,i.batchId,n),await za(r,i.changes),await Mc(r.remoteStore)}catch(i){const o=vm(i,"Failed to persist write");n.reject(o)}}async function aS(t,e){const n=oe(t);try{const r=await WM(n.localStore,e);e.targetChanges.forEach((i,o)=>{const s=n.Na.get(o);s&&(_e(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?s.va=!0:i.modifiedDocuments.size>0?_e(s.va):i.removedDocuments.size>0&&(_e(s.va),s.va=!1))}),await za(n,r,e)}catch(r){await Oa(r)}}function u_(t,e,n){const r=oe(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Fa.forEach((o,s)=>{const a=s.view.Z_(e);a.snapshot&&i.push(a.snapshot)}),function(s,a){const l=oe(s);l.onlineState=a;let u=!1;l.queries.forEach((h,p)=>{for(const m of p.j_)m.Z_(a)&&(u=!0)}),u&&_m(l)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function Db(t,e,n){const r=oe(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Na.get(e),o=i&&i.key;if(o){let s=new be(Q.comparator);s=s.insert(o,wt.newNoDocument(o,ie.min()));const a=le().add(o),l=new Nc(ie.min(),new Map,new be(he),s,a);await aS(r,l),r.Oa=r.Oa.remove(o),r.Na.delete(e),Em(r)}else await Ih(r.localStore,e,!1).then(()=>Ch(r,e,n)).catch(Oa)}async function Mb(t,e){const n=oe(t),r=e.batch.batchId;try{const i=await zM(n.localStore,e);uS(n,r,null),lS(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await za(n,i)}catch(i){await Oa(i)}}async function bb(t,e,n){const r=oe(t);try{const i=await function(s,a){const l=oe(s);return l.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let h;return l.mutationQueue.lookupMutationBatch(u,a).next(p=>(_e(p!==null),h=p.keys(),l.mutationQueue.removeMutationBatch(u,p))).next(()=>l.mutationQueue.performConsistencyCheck(u)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(u,h,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,h)).next(()=>l.localDocuments.getDocuments(u,h))})}(r.localStore,e);uS(r,e,n),lS(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await za(r,i)}catch(i){await Oa(i)}}function lS(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function uS(t,e,n){const r=oe(t);let i=r.Ba[r.currentUser.toKey()];if(i){const o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function Ch(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||cS(t,r)})}function cS(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(hm(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),Em(t))}function c_(t,e,n){for(const r of n)r instanceof iS?(t.La.addReference(r.key,e),Lb(t,r)):r instanceof oS?(j("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||cS(t,r.key)):ee()}function Lb(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(j("SyncEngine","New document in limbo: "+n),t.xa.add(r),Em(t))}function Em(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new Q(Re.fromString(e)),r=t.qa.next();t.Na.set(r,new Sb(n)),t.Oa=t.Oa.insert(n,r),YI(t.remoteStore,new Mr(Vn(im(n.path)),r,"TargetPurposeLimboResolution",Xp.oe))}}async function za(t,e,n){const r=oe(t),i=[],o=[],s=[];r.Fa.isEmpty()||(r.Fa.forEach((a,l)=>{s.push(r.Ka(l,e,n).then(u=>{var h;if((u||n)&&r.isPrimaryClient){const p=u?!u.fromCache:(h=n==null?void 0:n.targetChanges.get(l.targetId))===null||h===void 0?void 0:h.current;r.sharedClientState.updateQueryState(l.targetId,p?"current":"not-current")}if(u){i.push(u);const p=fm.Wi(l.targetId,u);o.push(p)}}))}),await Promise.all(s),r.Ca.d_(i),await async function(l,u){const h=oe(l);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>G.forEach(u,m=>G.forEach(m.$i,_=>h.persistence.referenceDelegate.addReference(p,m.targetId,_)).next(()=>G.forEach(m.Ui,_=>h.persistence.referenceDelegate.removeReference(p,m.targetId,_)))))}catch(p){if(!Ba(p))throw p;j("LocalStore","Failed to update sequence numbers: "+p)}for(const p of u){const m=p.targetId;if(!p.fromCache){const _=h.os.get(m),E=_.snapshotVersion,P=_.withLastLimboFreeSnapshotVersion(E);h.os=h.os.insert(m,P)}}}(r.localStore,o))}async function Vb(t,e){const n=oe(t);if(!n.currentUser.isEqual(e)){j("SyncEngine","User change. New user:",e.toKey());const r=await zI(n.localStore,e);n.currentUser=e,function(o,s){o.ka.forEach(a=>{a.forEach(l=>{l.reject(new K(B.CANCELLED,s))})}),o.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await za(n,r.hs)}}function Ub(t,e){const n=oe(t),r=n.Na.get(e);if(r&&r.va)return le().add(r.key);{let i=le();const o=n.Ma.get(e);if(!o)return i;for(const s of o){const a=n.Fa.get(s);i=i.unionWith(a.view.Va)}return i}}function dS(t){const e=oe(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=aS.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Ub.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Db.bind(null,e),e.Ca.d_=Eb.bind(null,e.eventManager),e.Ca.$a=Tb.bind(null,e.eventManager),e}function Fb(t){const e=oe(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Mb.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=bb.bind(null,e),e}class zu{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=kc(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return $M(this.persistence,new HM,e.initialUser,this.serializer)}Ga(e){return new OM(dm.Zr,this.serializer)}Wa(e){return new QM}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}zu.provider={build:()=>new zu};class Ah{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>u_(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=Vb.bind(null,this.syncEngine),await yb(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new _b}()}createDatastore(e){const n=kc(e.databaseInfo.databaseId),r=function(o){return new tb(o)}(e.databaseInfo);return function(o,s,a,l){return new ib(o,s,a,l)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,o,s,a){return new sb(r,i,o,s,a)}(this.localStore,this.datastore,e.asyncQueue,n=>u_(this.syncEngine,n,0),function(){return i_.D()?new i_:new XM}())}createSyncEngine(e,n){return function(i,o,s,a,l,u,h){const p=new Cb(i,o,s,a,l,u);return h&&(p.Qa=!0),p}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(i){const o=oe(i);j("RemoteStore","RemoteStore shutting down."),o.L_.add(5),await $a(o),o.k_.shutdown(),o.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}Ah.provider={build:()=>new Ah};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fS{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):ar("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ob{constructor(e,n,r,i,o){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Et.UNAUTHENTICATED,this.clientId=fI.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,async s=>{j("FirestoreClient","Received user=",s.uid),await this.authCredentialListener(s),this.user=s}),this.appCheckCredentials.start(r,s=>(j("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new er;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=vm(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function tf(t,e){t.asyncQueue.verifyOperationInProgress(),j("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await zI(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function d_(t,e){t.asyncQueue.verifyOperationInProgress();const n=await Bb(t);j("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>o_(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>o_(e.remoteStore,i)),t._onlineComponents=e}async function Bb(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){j("FirestoreClient","Using user provided OfflineComponentProvider");try{await tf(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(i){return i.name==="FirebaseError"?i.code===B.FAILED_PRECONDITION||i.code===B.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;Vo("Error using user provided cache. Falling back to memory cache: "+n),await tf(t,new zu)}}else j("FirestoreClient","Using default OfflineComponentProvider"),await tf(t,new zu);return t._offlineComponents}async function hS(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(j("FirestoreClient","Using user provided OnlineComponentProvider"),await d_(t,t._uninitializedComponentsProvider._online)):(j("FirestoreClient","Using default OnlineComponentProvider"),await d_(t,new Ah))),t._onlineComponents}function Gb(t){return hS(t).then(e=>e.syncEngine)}async function pS(t){const e=await hS(t),n=e.eventManager;return n.onListen=Ab.bind(null,e.syncEngine),n.onUnlisten=Pb.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=Rb.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=Nb.bind(null,e.syncEngine),n}function Hb(t,e,n={}){const r=new er;return t.asyncQueue.enqueueAndForget(async()=>function(o,s,a,l,u){const h=new fS({next:m=>{h.Za(),s.enqueueAndForget(()=>nS(o,p));const _=m.docs.has(a);!_&&m.fromCache?u.reject(new K(B.UNAVAILABLE,"Failed to get document because the client is offline.")):_&&m.fromCache&&l&&l.source==="server"?u.reject(new K(B.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(m)},error:m=>u.reject(m)}),p=new rS(im(a.path),h,{includeMetadataChanges:!0,_a:!0});return tS(o,p)}(await pS(t),t.asyncQueue,e,n,r)),r.promise}function qb(t,e,n={}){const r=new er;return t.asyncQueue.enqueueAndForget(async()=>function(o,s,a,l,u){const h=new fS({next:m=>{h.Za(),s.enqueueAndForget(()=>nS(o,p)),m.fromCache&&l.source==="server"?u.reject(new K(B.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(m)},error:m=>u.reject(m)}),p=new rS(a,h,{includeMetadataChanges:!0,_a:!0});return tS(o,p)}(await pS(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mS(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f_=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gS(t,e,n){if(!n)throw new K(B.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function $b(t,e,n,r){if(e===!0&&r===!0)throw new K(B.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function h_(t){if(!Q.isDocumentKey(t))throw new K(B.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function p_(t){if(Q.isDocumentKey(t))throw new K(B.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function bc(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":ee()}function Gn(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new K(B.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=bc(t);throw new K(B.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m_{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new K(B.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new K(B.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}$b("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=mS((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new K(B.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new K(B.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new K(B.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Lc{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new m_({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new K(B.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new K(B.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new m_(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new lD;switch(r.type){case"firstParty":return new fD(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new K(B.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=f_.get(n);r&&(j("ComponentProvider","Removing Datastore"),f_.delete(n),r.terminate())}(this),Promise.resolve()}}function zb(t,e,n,r={}){var i;const o=(t=Gn(t,Lc))._getSettings(),s=`${e}:${n}`;if(o.host!=="firestore.googleapis.com"&&o.host!==s&&Vo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},o),{host:s,ssl:!1})),r.mockUserToken){let a,l;if(typeof r.mockUserToken=="string")a=r.mockUserToken,l=Et.MOCK_USER;else{a=Zw(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const u=r.mockUserToken.sub||r.mockUserToken.user_id;if(!u)throw new K(B.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new Et(u)}t._authCredentials=new uD(new dI(a,l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qo{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Qo(this.firestore,e,this._query)}}class Mt{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new zr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Mt(this.firestore,e,this._key)}}class zr extends Qo{constructor(e,n,r){super(e,n,im(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Mt(this.firestore,null,new Q(e))}withConverter(e){return new zr(this.firestore,e,this._path)}}function Vc(t,e,...n){if(t=Ue(t),gS("collection","path",e),t instanceof Lc){const r=Re.fromString(e,...n);return p_(r),new zr(t,null,r)}{if(!(t instanceof Mt||t instanceof zr))throw new K(B.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Re.fromString(e,...n));return p_(r),new zr(t.firestore,null,r)}}function $t(t,e,...n){if(t=Ue(t),arguments.length===1&&(e=fI.newId()),gS("doc","path",e),t instanceof Lc){const r=Re.fromString(e,...n);return h_(r),new Mt(t,null,new Q(r))}{if(!(t instanceof Mt||t instanceof zr))throw new K(B.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Re.fromString(e,...n));return h_(r),new Mt(t.firestore,t instanceof zr?t.converter:null,new Q(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g_{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new KI(this,"async_queue_retry"),this.Vu=()=>{const r=ef();r&&j("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const n=ef();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=ef();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new er;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Ba(e))throw e;j("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;const i=function(s){let a=s.message||"";return s.stack&&(a=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),a}(r);throw ar("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const i=ym.createAndSchedule(this,e,n,r,o=>this.yu(o));return this.Tu.push(i),i}fu(){this.Eu&&ee()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}class Xo extends Lc{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new g_,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new g_(e),this._firestoreClient=void 0,await e}}}function Wb(t,e,n){n||(n="(default)");const r=Fa(t,"firestore");if(r.isInitialized(n)){const i=r.getImmediate({identifier:n}),o=r.getOptions(n);if(Ta(o,e))return i;throw new K(B.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(e.cacheSizeBytes!==void 0&&e.localCache!==void 0)throw new K(B.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(e.cacheSizeBytes!==void 0&&e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new K(B.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return r.initialize({options:e,instanceIdentifier:n})}function Kb(t,e){const n=typeof t=="object"?t:jp(),r=typeof t=="string"?t:"(default)",i=Fa(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const o=jw("firestore");o&&zb(i,...o)}return i}function Tm(t){if(t._terminated)throw new K(B.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||Jb(t),t._firestoreClient}function Jb(t){var e,n,r;const i=t._freezeSettings(),o=function(a,l,u,h){return new CD(a,l,u,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,mS(h.experimentalLongPollingOptions),h.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._componentsProvider||!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new Ob(t._authCredentials,t._appCheckCredentials,t._queue,o,t._componentsProvider&&function(a){const l=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(l),_online:l}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ho{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ho(ft.fromBase64String(e))}catch(n){throw new K(B.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Ho(ft.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uc{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new K(B.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new lt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wm{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Im{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new K(B.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new K(B.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return he(this._lat,e._lat)||he(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sm{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yb=/^__.*__$/;class jb{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new ri(e,this.data,this.fieldMask,n,this.fieldTransforms):new Ha(e,this.data,n,this.fieldTransforms)}}class yS{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new ri(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function vS(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ee()}}class Cm{constructor(e,n,r,i,o,s){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.vu(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new Cm(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.Ou(e),i}Nu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Wu(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(vS(this.Cu)&&Yb.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class Qb{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||kc(e)}Qu(e,n,r,i=!1){return new Cm({Cu:e,methodName:n,qu:r,path:lt.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Am(t){const e=t._freezeSettings(),n=kc(t._databaseId);return new Qb(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Xb(t,e,n,r,i,o={}){const s=t.Qu(o.merge||o.mergeFields?2:0,e,n,i);Rm("Data must be an object, but it was:",s,r);const a=_S(r,s);let l,u;if(o.merge)l=new Yt(s.fieldMask),u=s.fieldTransforms;else if(o.mergeFields){const h=[];for(const p of o.mergeFields){const m=Rh(e,p,n);if(!s.contains(m))throw new K(B.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);TS(h,m)||h.push(m)}l=new Yt(h),u=s.fieldTransforms.filter(p=>l.covers(p.field))}else l=null,u=s.fieldTransforms;return new jb(new Ot(a),l,u)}class Fc extends wm{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Fc}}function Zb(t,e,n,r){const i=t.Qu(1,e,n);Rm("Data must be an object, but it was:",i,r);const o=[],s=Ot.empty();Gi(r,(l,u)=>{const h=xm(e,l,n);u=Ue(u);const p=i.Nu(h);if(u instanceof Fc)o.push(h);else{const m=Wa(u,p);m!=null&&(o.push(h),s.set(h,m))}});const a=new Yt(o);return new yS(s,a,i.fieldTransforms)}function e1(t,e,n,r,i,o){const s=t.Qu(1,e,n),a=[Rh(e,r,n)],l=[i];if(o.length%2!=0)throw new K(B.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<o.length;m+=2)a.push(Rh(e,o[m])),l.push(o[m+1]);const u=[],h=Ot.empty();for(let m=a.length-1;m>=0;--m)if(!TS(u,a[m])){const _=a[m];let E=l[m];E=Ue(E);const P=s.Nu(_);if(E instanceof Fc)u.push(_);else{const x=Wa(E,P);x!=null&&(u.push(_),h.set(_,x))}}const p=new Yt(u);return new yS(h,p,s.fieldTransforms)}function t1(t,e,n,r=!1){return Wa(n,t.Qu(r?4:3,e))}function Wa(t,e){if(ES(t=Ue(t)))return Rm("Unsupported field value:",e,t),_S(t,e);if(t instanceof wm)return function(r,i){if(!vS(i.Cu))throw i.Bu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${r._methodName}() is not currently supported inside arrays`);const o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,i){const o=[];let s=0;for(const a of r){let l=Wa(a,i.Lu(s));l==null&&(l={nullValue:"NULL_VALUE"}),o.push(l),s++}return{arrayValue:{values:o}}}(t,e)}return function(r,i){if((r=Ue(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return KD(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const o=Xe.fromDate(r);return{timestampValue:qu(i.serializer,o)}}if(r instanceof Xe){const o=new Xe(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:qu(i.serializer,o)}}if(r instanceof Im)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Ho)return{bytesValue:FI(i.serializer,r._byteString)};if(r instanceof Mt){const o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.Bu(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:um(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Sm)return function(s,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:s.toArray().map(l=>{if(typeof l!="number")throw a.Bu("VectorValues must only contain numeric values.");return om(a.serializer,l)})}}}}}}(r,i);throw i.Bu(`Unsupported field value: ${bc(r)}`)}(t,e)}function _S(t,e){const n={};return hI(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Gi(t,(r,i)=>{const o=Wa(i,e.Mu(r));o!=null&&(n[r]=o)}),{mapValue:{fields:n}}}function ES(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Xe||t instanceof Im||t instanceof Ho||t instanceof Mt||t instanceof wm||t instanceof Sm)}function Rm(t,e,n){if(!ES(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const r=bc(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function Rh(t,e,n){if((e=Ue(e))instanceof Uc)return e._internalPath;if(typeof e=="string")return xm(t,e);throw Wu("Field path arguments must be of type string or ",t,!1,void 0,n)}const n1=new RegExp("[~\\*/\\[\\]]");function xm(t,e,n){if(e.search(n1)>=0)throw Wu(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Uc(...e.split("."))._internalPath}catch{throw Wu(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Wu(t,e,n,r,i){const o=r&&!r.isEmpty(),s=i!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(o||s)&&(l+=" (found",o&&(l+=` in field ${r}`),s&&(l+=` in document ${i}`),l+=")"),new K(B.INVALID_ARGUMENT,a+t+l)}function TS(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wS{constructor(e,n,r,i,o){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Mt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new r1(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Pm("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class r1 extends wS{data(){return super.data()}}function Pm(t,e){return typeof e=="string"?xm(t,e):e instanceof Uc?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i1(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new K(B.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Nm{}class o1 extends Nm{}function s1(t,e,...n){let r=[];e instanceof Nm&&r.push(e),r=r.concat(n),function(o){const s=o.filter(l=>l instanceof km).length,a=o.filter(l=>l instanceof Oc).length;if(s>1||s>0&&a>0)throw new K(B.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class Oc extends o1{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Oc(e,n,r)}_apply(e){const n=this._parse(e);return IS(e._query,n),new Qo(e.firestore,e.converter,yh(e._query,n))}_parse(e){const n=Am(e.firestore);return function(o,s,a,l,u,h,p){let m;if(u.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new K(B.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){v_(p,h);const _=[];for(const E of p)_.push(y_(l,o,E));m={arrayValue:{values:_}}}else m=y_(l,o,p)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||v_(p,h),m=t1(a,s,p,h==="in"||h==="not-in");return We.create(u,h,m)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function a1(t,e,n){const r=e,i=Pm("where",t);return Oc._create(i,r,n)}class km extends Nm{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new km(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:In.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(i,o){let s=i;const a=o.getFlattenedFilters();for(const l of a)IS(s,l),s=yh(s,l)}(e._query,n),new Qo(e.firestore,e.converter,yh(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function y_(t,e,n){if(typeof(n=Ue(n))=="string"){if(n==="")throw new K(B.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!wI(e)&&n.indexOf("/")!==-1)throw new K(B.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Re.fromString(n));if(!Q.isDocumentKey(r))throw new K(B.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Ov(t,new Q(r))}if(n instanceof Mt)return Ov(t,n._key);throw new K(B.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${bc(n)}.`)}function v_(t,e){if(!Array.isArray(t)||t.length===0)throw new K(B.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function IS(t,e){const n=function(i,o){for(const s of i)for(const a of s.getFlattenedFilters())if(o.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new K(B.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new K(B.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class l1{convertValue(e,n="none"){switch(Di(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Be(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(ki(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw ee()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Gi(e,(i,o)=>{r[i]=this.convertValue(o,n)}),r}convertVectorValue(e){var n,r,i;const o=(i=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(s=>Be(s.doubleValue));return new Sm(o)}convertGeoPoint(e){return new Im(Be(e.latitude),Be(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=em(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Sa(e));default:return null}}convertTimestamp(e){const n=jr(e);return new Xe(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Re.fromString(e);_e($I(r));const i=new Ca(r.get(1),r.get(3)),o=new Q(r.popFirst(5));return i.isEqual(n)||ar(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u1(t,e,n){let r;return r=t?t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Os{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class SS extends wS{constructor(e,n,r,i,o,s){super(e,n,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new iu(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Pm("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class iu extends SS{data(e={}){return super.data(e)}}class c1{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new Os(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new iu(this._firestore,this._userDataWriter,r.key,r,new Os(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new K(B.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(a=>{const l=new iu(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Os(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:s++}})}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>o||a.type!==3).map(a=>{const l=new iu(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Os(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let u=-1,h=-1;return a.type!==0&&(u=s.indexOf(a.doc.key),s=s.delete(a.doc.key)),a.type!==1&&(s=s.add(a.doc),h=s.indexOf(a.doc.key)),{type:d1(a.type),doc:l,oldIndex:u,newIndex:h}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function d1(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ee()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dm(t){t=Gn(t,Mt);const e=Gn(t.firestore,Xo);return Hb(Tm(e),t._key).then(n=>f1(e,t,n))}class CS extends l1{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ho(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Mt(this.firestore,null,n)}}function Bc(t){t=Gn(t,Qo);const e=Gn(t.firestore,Xo),n=Tm(e),r=new CS(e);return i1(t._query),qb(n,t._query).then(i=>new c1(e,r,t,i))}function Zo(t,e,n){t=Gn(t,Mt);const r=Gn(t.firestore,Xo),i=u1(t.converter,e);return bm(r,[Xb(Am(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,_n.none())])}function AS(t,e,n,...r){t=Gn(t,Mt);const i=Gn(t.firestore,Xo),o=Am(i);let s;return s=typeof(e=Ue(e))=="string"||e instanceof Uc?e1(o,"updateDoc",t._key,e,n,r):Zb(o,"updateDoc",t._key,e),bm(i,[s.toMutation(t._key,_n.exists(!0))])}function Mm(t){return bm(Gn(t.firestore,Xo),[new sm(t._key,_n.none())])}function bm(t,e){return function(r,i){const o=new er;return r.asyncQueue.enqueueAndForget(async()=>kb(await Gb(r),i,o)),o.promise}(Tm(t),e)}function f1(t,e,n){const r=n.docs.get(e._key),i=new CS(t);return new SS(t,i,e._key,r,new Os(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(i){Jo=i})(Bi),Pi(new Jr("firestore",(r,{instanceIdentifier:i,options:o})=>{const s=r.getProvider("app").getImmediate(),a=new Xo(new cD(r.getProvider("auth-internal")),new pD(r.getProvider("app-check-internal")),function(u,h){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new K(B.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ca(u.options.projectId,h)}(s,i),s);return o=Object.assign({useFetchStreams:n},o),a._setSettings(o),a},"PUBLIC").setMultipleInstances(!0)),Ln(bv,"4.7.3",e),Ln(bv,"4.7.3","esm2017")})();function Lm(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function RS(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const h1=RS,xS=new Va("auth","Firebase",RS());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ku=new Jp("@firebase/auth");function p1(t,...e){Ku.logLevel<=ue.WARN&&Ku.warn(`Auth (${Bi}): ${t}`,...e)}function ou(t,...e){Ku.logLevel<=ue.ERROR&&Ku.error(`Auth (${Bi}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sn(t,...e){throw Vm(t,...e)}function Fn(t,...e){return Vm(t,...e)}function PS(t,e,n){const r=Object.assign(Object.assign({},h1()),{[e]:n});return new Va("auth","Firebase",r).create(e,{appName:t.name})}function tr(t){return PS(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Vm(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return xS.create(t,...e)}function Z(t,e,...n){if(!t)throw Vm(e,...n)}function Yn(t){const e="INTERNAL ASSERTION FAILED: "+t;throw ou(e),new Error(e)}function ur(t,e){t||Yn(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xh(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function m1(){return __()==="http:"||__()==="https:"}function __(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g1(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(m1()||BN()||"connection"in navigator)?navigator.onLine:!0}function y1(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ka{constructor(e,n){this.shortDelay=e,this.longDelay=n,ur(n>e,"Short delay should be less than long delay!"),this.isMobile=UN()||GN()}get(){return g1()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Um(t,e){ur(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NS{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Yn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Yn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Yn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v1={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _1=new Ka(3e4,6e4);function ii(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function oi(t,e,n,r,i={}){return kS(t,i,async()=>{let o={},s={};r&&(e==="GET"?s=r:o={body:JSON.stringify(r)});const a=Ua(Object.assign({key:t.config.apiKey},s)).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const u=Object.assign({method:e,headers:l},o);return ON()||(u.referrerPolicy="no-referrer"),NS.fetch()(DS(t,t.config.apiHost,n,a),u)})}async function kS(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},v1),e);try{const i=new T1(t),o=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const s=await o.json();if("needConfirmation"in s)throw bl(t,"account-exists-with-different-credential",s);if(o.ok&&!("errorMessage"in s))return s;{const a=o.ok?s.errorMessage:s.error.message,[l,u]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw bl(t,"credential-already-in-use",s);if(l==="EMAIL_EXISTS")throw bl(t,"email-already-in-use",s);if(l==="USER_DISABLED")throw bl(t,"user-disabled",s);const h=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw PS(t,h,u);Sn(t,h)}}catch(i){if(i instanceof Hn)throw i;Sn(t,"network-request-failed",{message:String(i)})}}async function Ja(t,e,n,r,i={}){const o=await oi(t,e,n,r,i);return"mfaPendingCredential"in o&&Sn(t,"multi-factor-auth-required",{_serverResponse:o}),o}function DS(t,e,n,r){const i=`${e}${n}?${r}`;return t.config.emulator?Um(t.config,i):`${t.config.apiScheme}://${i}`}function E1(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class T1{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Fn(this.auth,"network-request-failed")),_1.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function bl(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=Fn(t,e,r);return i.customData._tokenResponse=n,i}function E_(t){return t!==void 0&&t.enterprise!==void 0}class w1{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return E1(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function I1(t,e){return oi(t,"GET","/v2/recaptchaConfig",ii(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function S1(t,e){return oi(t,"POST","/v1/accounts:delete",e)}async function MS(t,e){return oi(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ea(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function C1(t,e=!1){const n=Ue(t),r=await n.getIdToken(e),i=Fm(r);Z(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const o=typeof i.firebase=="object"?i.firebase:void 0,s=o==null?void 0:o.sign_in_provider;return{claims:i,token:r,authTime:ea(nf(i.auth_time)),issuedAtTime:ea(nf(i.iat)),expirationTime:ea(nf(i.exp)),signInProvider:s||null,signInSecondFactor:(o==null?void 0:o.sign_in_second_factor)||null}}function nf(t){return Number(t)*1e3}function Fm(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return ou("JWT malformed, contained fewer than 3 sections"),null;try{const i=Jw(n);return i?JSON.parse(i):(ou("Failed to decode base64 JWT payload"),null)}catch(i){return ou("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function T_(t){const e=Fm(t);return Z(e,"internal-error"),Z(typeof e.exp<"u","internal-error"),Z(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Pa(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Hn&&A1(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function A1({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R1{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ph{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=ea(this.lastLoginAt),this.creationTime=ea(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ju(t){var e;const n=t.auth,r=await t.getIdToken(),i=await Pa(t,MS(n,{idToken:r}));Z(i==null?void 0:i.users.length,n,"internal-error");const o=i.users[0];t._notifyReloadListener(o);const s=!((e=o.providerUserInfo)===null||e===void 0)&&e.length?bS(o.providerUserInfo):[],a=P1(t.providerData,s),l=t.isAnonymous,u=!(t.email&&o.passwordHash)&&!(a!=null&&a.length),h=l?u:!1,p={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:a,metadata:new Ph(o.createdAt,o.lastLoginAt),isAnonymous:h};Object.assign(t,p)}async function x1(t){const e=Ue(t);await Ju(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function P1(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function bS(t){return t.map(e=>{var{providerId:n}=e,r=Lm(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function N1(t,e){const n=await kS(t,{},async()=>{const r=Ua({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:o}=t.config,s=DS(t,i,"/v1/token",`key=${o}`),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",NS.fetch()(s,{method:"POST",headers:a,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function k1(t,e){return oi(t,"POST","/v2/accounts:revokeToken",ii(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class So{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Z(e.idToken,"internal-error"),Z(typeof e.idToken<"u","internal-error"),Z(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):T_(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Z(e.length!==0,"internal-error");const n=T_(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Z(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:o}=await N1(e,n);this.updateTokensAndExpiration(r,i,Number(o))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:o}=n,s=new So;return r&&(Z(typeof r=="string","internal-error",{appName:e}),s.refreshToken=r),i&&(Z(typeof i=="string","internal-error",{appName:e}),s.accessToken=i),o&&(Z(typeof o=="number","internal-error",{appName:e}),s.expirationTime=o),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new So,this.toJSON())}_performRefresh(){return Yn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _r(t,e){Z(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class jn{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,o=Lm(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new R1(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new Ph(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const n=await Pa(this,this.stsTokenManager.getToken(this.auth,e));return Z(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return C1(this,e)}reload(){return x1(this)}_assign(e){this!==e&&(Z(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new jn(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){Z(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Ju(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(kn(this.auth.app))return Promise.reject(tr(this.auth));const e=await this.getIdToken();return await Pa(this,S1(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,o,s,a,l,u,h;const p=(r=n.displayName)!==null&&r!==void 0?r:void 0,m=(i=n.email)!==null&&i!==void 0?i:void 0,_=(o=n.phoneNumber)!==null&&o!==void 0?o:void 0,E=(s=n.photoURL)!==null&&s!==void 0?s:void 0,P=(a=n.tenantId)!==null&&a!==void 0?a:void 0,x=(l=n._redirectEventId)!==null&&l!==void 0?l:void 0,I=(u=n.createdAt)!==null&&u!==void 0?u:void 0,T=(h=n.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:C,emailVerified:M,isAnonymous:U,providerData:L,stsTokenManager:R}=n;Z(C&&R,e,"internal-error");const w=So.fromJSON(this.name,R);Z(typeof C=="string",e,"internal-error"),_r(p,e.name),_r(m,e.name),Z(typeof M=="boolean",e,"internal-error"),Z(typeof U=="boolean",e,"internal-error"),_r(_,e.name),_r(E,e.name),_r(P,e.name),_r(x,e.name),_r(I,e.name),_r(T,e.name);const A=new jn({uid:C,auth:e,email:m,emailVerified:M,displayName:p,isAnonymous:U,photoURL:E,phoneNumber:_,tenantId:P,stsTokenManager:w,createdAt:I,lastLoginAt:T});return L&&Array.isArray(L)&&(A.providerData=L.map(N=>Object.assign({},N))),x&&(A._redirectEventId=x),A}static async _fromIdTokenResponse(e,n,r=!1){const i=new So;i.updateFromServerResponse(n);const o=new jn({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await Ju(o),o}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];Z(i.localId!==void 0,"internal-error");const o=i.providerUserInfo!==void 0?bS(i.providerUserInfo):[],s=!(i.email&&i.passwordHash)&&!(o!=null&&o.length),a=new So;a.updateFromIdToken(r);const l=new jn({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:s}),u={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new Ph(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(o!=null&&o.length)};return Object.assign(l,u),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w_=new Map;function Qn(t){ur(t instanceof Function,"Expected a class definition");let e=w_.get(t);return e?(ur(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,w_.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LS{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}LS.type="NONE";const I_=LS;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function su(t,e,n){return`firebase:${t}:${e}:${n}`}class Co{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:o}=this.auth;this.fullUserKey=su(this.userKey,i.apiKey,o),this.fullPersistenceKey=su("persistence",i.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?jn._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Co(Qn(I_),e,r);const i=(await Promise.all(n.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let o=i[0]||Qn(I_);const s=su(r,e.config.apiKey,e.name);let a=null;for(const u of n)try{const h=await u._get(s);if(h){const p=jn._fromJSON(e,h);u!==o&&(a=p),o=u;break}}catch{}const l=i.filter(u=>u._shouldAllowMigration);return!o._shouldAllowMigration||!l.length?new Co(o,e,r):(o=l[0],a&&await o._set(s,a.toJSON()),await Promise.all(n.map(async u=>{if(u!==o)try{await u._remove(s)}catch{}})),new Co(o,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S_(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(OS(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(VS(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(GS(e))return"Blackberry";if(HS(e))return"Webos";if(US(e))return"Safari";if((e.includes("chrome/")||FS(e))&&!e.includes("edge/"))return"Chrome";if(BS(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function VS(t=Ct()){return/firefox\//i.test(t)}function US(t=Ct()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function FS(t=Ct()){return/crios\//i.test(t)}function OS(t=Ct()){return/iemobile/i.test(t)}function BS(t=Ct()){return/android/i.test(t)}function GS(t=Ct()){return/blackberry/i.test(t)}function HS(t=Ct()){return/webos/i.test(t)}function Om(t=Ct()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function D1(t=Ct()){var e;return Om(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function M1(){return HN()&&document.documentMode===10}function qS(t=Ct()){return Om(t)||BS(t)||HS(t)||GS(t)||/windows phone/i.test(t)||OS(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $S(t,e=[]){let n;switch(t){case"Browser":n=S_(Ct());break;case"Worker":n=`${S_(Ct())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Bi}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b1{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=o=>new Promise((s,a)=>{try{const l=e(o);s(l)}catch(l){a(l)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function L1(t,e={}){return oi(t,"GET","/v2/passwordPolicy",ii(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V1=6;class U1{constructor(e){var n,r,i,o;const s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=s.minPasswordLength)!==null&&n!==void 0?n:V1,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),s.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),s.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),s.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),s.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(o=e.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,o,s,a;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(n=l.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),l.isValid&&(l.isValid=(r=l.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(i=l.containsLowercaseLetter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(o=l.containsUppercaseLetter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(s=l.containsNumericCharacter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(a=l.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),l}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F1{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new C_(this),this.idTokenSubscription=new C_(this),this.beforeStateQueue=new b1(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=xS,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Qn(n)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await Co.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await MS(this,{idToken:e}),r=await jn._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(kn(this.app)){const s=this.app.settings.authIdToken;return s?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(s).then(a,a))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const s=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i==null?void 0:i._redirectEventId,l=await this.tryRedirectSignIn(e);(!s||s===a)&&(l!=null&&l.user)&&(i=l.user,o=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(i)}catch(s){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Z(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Ju(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=y1()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(kn(this.app))return Promise.reject(tr(this));const n=e?Ue(e):null;return n&&Z(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Z(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return kn(this.app)?Promise.reject(tr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return kn(this.app)?Promise.reject(tr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Qn(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await L1(this),n=new U1(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Va("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await k1(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Qn(e)||this._popupRedirectResolver;Z(n,this,"argument-error"),this.redirectPersistenceManager=await Co.create(this,[Qn(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const o=typeof n=="function"?n:n.next.bind(n);let s=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(Z(a,this,"internal-error"),a.then(()=>{s||o(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,r,i);return()=>{s=!0,l()}}else{const l=e.addObserver(n);return()=>{s=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Z(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=$S(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&p1(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function qi(t){return Ue(t)}class C_{constructor(e){this.auth=e,this.observer=null,this.addObserver=jN(n=>this.observer=n)}get next(){return Z(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Gc={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function O1(t){Gc=t}function zS(t){return Gc.loadJS(t)}function B1(){return Gc.recaptchaEnterpriseScript}function G1(){return Gc.gapiScript}function H1(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const q1="recaptcha-enterprise",$1="NO_RECAPTCHA";class z1{constructor(e){this.type=q1,this.auth=qi(e)}async verify(e="verify",n=!1){async function r(o){if(!n){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise(async(s,a)=>{I1(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const u=new w1(l);return o.tenantId==null?o._agentRecaptchaConfig=u:o._tenantRecaptchaConfigs[o.tenantId]=u,s(u.siteKey)}}).catch(l=>{a(l)})})}function i(o,s,a){const l=window.grecaptcha;E_(l)?l.enterprise.ready(()=>{l.enterprise.execute(o,{action:e}).then(u=>{s(u)}).catch(()=>{s($1)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((o,s)=>{r(this.auth).then(a=>{if(!n&&E_(window.grecaptcha))i(a,o,s);else{if(typeof window>"u"){s(new Error("RecaptchaVerifier is only supported in browser"));return}let l=B1();l.length!==0&&(l+=a),zS(l).then(()=>{i(a,o,s)}).catch(u=>{s(u)})}}).catch(a=>{s(a)})})}}async function A_(t,e,n,r=!1){const i=new z1(t);let o;try{o=await i.verify(n)}catch{o=await i.verify(n,!0)}const s=Object.assign({},e);return r?Object.assign(s,{captchaResp:o}):Object.assign(s,{captchaResponse:o}),Object.assign(s,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(s,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),s}async function Nh(t,e,n,r){var i;if(!((i=t._getRecaptchaConfig())===null||i===void 0)&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await A_(t,e,n,n==="getOobCode");return r(t,o)}else return r(t,e).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const s=await A_(t,e,n,n==="getOobCode");return r(t,s)}else return Promise.reject(o)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W1(t,e){const n=Fa(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),o=n.getOptions();if(Ta(o,e??{}))return i;Sn(i,"already-initialized")}return n.initialize({options:e})}function K1(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Qn);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function J1(t,e,n){const r=qi(t);Z(r._canInitEmulator,r,"emulator-config-failed"),Z(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,o=WS(e),{host:s,port:a}=Y1(e),l=a===null?"":`:${a}`;r.config.emulator={url:`${o}//${s}${l}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:s,port:a,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})}),j1()}function WS(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function Y1(t){const e=WS(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const o=i[1];return{host:o,port:R_(r.substr(o.length+1))}}else{const[o,s]=r.split(":");return{host:o,port:R_(s)}}}function R_(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function j1(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bm{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Yn("not implemented")}_getIdTokenResponse(e){return Yn("not implemented")}_linkToIdToken(e,n){return Yn("not implemented")}_getReauthenticationResolver(e){return Yn("not implemented")}}async function Q1(t,e){return oi(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function X1(t,e){return Ja(t,"POST","/v1/accounts:signInWithPassword",ii(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Z1(t,e){return Ja(t,"POST","/v1/accounts:signInWithEmailLink",ii(t,e))}async function eL(t,e){return Ja(t,"POST","/v1/accounts:signInWithEmailLink",ii(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Na extends Bm{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new Na(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new Na(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Nh(e,n,"signInWithPassword",X1);case"emailLink":return Z1(e,{email:this._email,oobCode:this._password});default:Sn(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Nh(e,r,"signUpPassword",Q1);case"emailLink":return eL(e,{idToken:n,email:this._email,oobCode:this._password});default:Sn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ao(t,e){return Ja(t,"POST","/v1/accounts:signInWithIdp",ii(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tL="http://localhost";class Mi extends Bm{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Mi(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Sn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=n,o=Lm(n,["providerId","signInMethod"]);if(!r||!i)return null;const s=new Mi(r,i);return s.idToken=o.idToken||void 0,s.accessToken=o.accessToken||void 0,s.secret=o.secret,s.nonce=o.nonce,s.pendingToken=o.pendingToken||null,s}_getIdTokenResponse(e){const n=this.buildRequest();return Ao(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Ao(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Ao(e,n)}buildRequest(){const e={requestUri:tL,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Ua(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nL(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function rL(t){const e=bs(Ls(t)).link,n=e?bs(Ls(e)).deep_link_id:null,r=bs(Ls(t)).deep_link_id;return(r?bs(Ls(r)).link:null)||r||n||e||t}class Gm{constructor(e){var n,r,i,o,s,a;const l=bs(Ls(e)),u=(n=l.apiKey)!==null&&n!==void 0?n:null,h=(r=l.oobCode)!==null&&r!==void 0?r:null,p=nL((i=l.mode)!==null&&i!==void 0?i:null);Z(u&&h&&p,"argument-error"),this.apiKey=u,this.operation=p,this.code=h,this.continueUrl=(o=l.continueUrl)!==null&&o!==void 0?o:null,this.languageCode=(s=l.languageCode)!==null&&s!==void 0?s:null,this.tenantId=(a=l.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){const n=rL(e);try{return new Gm(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class es{constructor(){this.providerId=es.PROVIDER_ID}static credential(e,n){return Na._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=Gm.parseLink(n);return Z(r,"argument-error"),Na._fromEmailAndCode(e,r.code,r.tenantId)}}es.PROVIDER_ID="password";es.EMAIL_PASSWORD_SIGN_IN_METHOD="password";es.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KS{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ya extends KS{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cr extends Ya{constructor(){super("facebook.com")}static credential(e){return Mi._fromParams({providerId:Cr.PROVIDER_ID,signInMethod:Cr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Cr.credentialFromTaggedObject(e)}static credentialFromError(e){return Cr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Cr.credential(e.oauthAccessToken)}catch{return null}}}Cr.FACEBOOK_SIGN_IN_METHOD="facebook.com";Cr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ar extends Ya{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Mi._fromParams({providerId:Ar.PROVIDER_ID,signInMethod:Ar.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Ar.credentialFromTaggedObject(e)}static credentialFromError(e){return Ar.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Ar.credential(n,r)}catch{return null}}}Ar.GOOGLE_SIGN_IN_METHOD="google.com";Ar.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rr extends Ya{constructor(){super("github.com")}static credential(e){return Mi._fromParams({providerId:Rr.PROVIDER_ID,signInMethod:Rr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Rr.credentialFromTaggedObject(e)}static credentialFromError(e){return Rr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Rr.credential(e.oauthAccessToken)}catch{return null}}}Rr.GITHUB_SIGN_IN_METHOD="github.com";Rr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xr extends Ya{constructor(){super("twitter.com")}static credential(e,n){return Mi._fromParams({providerId:xr.PROVIDER_ID,signInMethod:xr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return xr.credentialFromTaggedObject(e)}static credentialFromError(e){return xr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return xr.credential(n,r)}catch{return null}}}xr.TWITTER_SIGN_IN_METHOD="twitter.com";xr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iL(t,e){return Ja(t,"POST","/v1/accounts:signUp",ii(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bi{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const o=await jn._fromIdTokenResponse(e,r,i),s=x_(r);return new bi({user:o,providerId:s,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=x_(r);return new bi({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function x_(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yu extends Hn{constructor(e,n,r,i){var o;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,Yu.prototype),this.customData={appName:e.name,tenantId:(o=e.tenantId)!==null&&o!==void 0?o:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new Yu(e,n,r,i)}}function JS(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?Yu._fromErrorAndOperation(t,o,e,r):o})}async function oL(t,e,n=!1){const r=await Pa(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return bi._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sL(t,e,n=!1){const{auth:r}=t;if(kn(r.app))return Promise.reject(tr(r));const i="reauthenticate";try{const o=await Pa(t,JS(r,i,e,t),n);Z(o.idToken,r,"internal-error");const s=Fm(o.idToken);Z(s,r,"internal-error");const{sub:a}=s;return Z(t.uid===a,r,"user-mismatch"),bi._forOperation(t,i,o)}catch(o){throw(o==null?void 0:o.code)==="auth/user-not-found"&&Sn(r,"user-mismatch"),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function YS(t,e,n=!1){if(kn(t.app))return Promise.reject(tr(t));const r="signIn",i=await JS(t,r,e),o=await bi._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(o.user),o}async function aL(t,e){return YS(qi(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jS(t){const e=qi(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function lL(t,e,n){if(kn(t.app))return Promise.reject(tr(t));const r=qi(t),s=await Nh(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",iL).catch(l=>{throw l.code==="auth/password-does-not-meet-requirements"&&jS(t),l}),a=await bi._fromIdTokenResponse(r,"signIn",s);return await r._updateCurrentUser(a.user),a}function uL(t,e,n){return kn(t.app)?Promise.reject(tr(t)):aL(Ue(t),es.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&jS(t),r})}function cL(t,e,n,r){return Ue(t).onIdTokenChanged(e,n,r)}function dL(t,e,n){return Ue(t).beforeAuthStateChanged(e,n)}function fL(t,e,n,r){return Ue(t).onAuthStateChanged(e,n,r)}function hL(t){return Ue(t).signOut()}const ju="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QS{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(ju,"1"),this.storage.removeItem(ju),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pL=1e3,mL=10;class XS extends QS{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=qS(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((s,a,l)=>{this.notifyListeners(s,l)});return}const r=e.key;n?this.detachListener():this.stopPolling();const i=()=>{const s=this.storage.getItem(r);!n&&this.localCache[r]===s||this.notifyListeners(r,s)},o=this.storage.getItem(r);M1()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,mL):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},pL)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}XS.type="LOCAL";const gL=XS;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZS extends QS{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}ZS.type="SESSION";const eC=ZS;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yL(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hc{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new Hc(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:o}=n.data,s=this.handlersMap[i];if(!(s!=null&&s.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const a=Array.from(s).map(async u=>u(n.origin,o)),l=await yL(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Hc.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hm(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vL{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let o,s;return new Promise((a,l)=>{const u=Hm("",20);i.port1.start();const h=setTimeout(()=>{l(new Error("unsupported_event"))},r);s={messageChannel:i,onMessage(p){const m=p;if(m.data.eventId===u)switch(m.data.status){case"ack":clearTimeout(h),o=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),a(m.data.response);break;default:clearTimeout(h),clearTimeout(o),l(new Error("invalid_response"));break}}},this.handlers.add(s),i.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:u,data:n},[i.port2])}).finally(()=>{s&&this.removeMessageHandler(s)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function On(){return window}function _L(t){On().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tC(){return typeof On().WorkerGlobalScope<"u"&&typeof On().importScripts=="function"}async function EL(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function TL(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function wL(){return tC()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nC="firebaseLocalStorageDb",IL=1,Qu="firebaseLocalStorage",rC="fbase_key";class ja{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function qc(t,e){return t.transaction([Qu],e?"readwrite":"readonly").objectStore(Qu)}function SL(){const t=indexedDB.deleteDatabase(nC);return new ja(t).toPromise()}function kh(){const t=indexedDB.open(nC,IL);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Qu,{keyPath:rC})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Qu)?e(r):(r.close(),await SL(),e(await kh()))})})}async function P_(t,e,n){const r=qc(t,!0).put({[rC]:e,value:n});return new ja(r).toPromise()}async function CL(t,e){const n=qc(t,!1).get(e),r=await new ja(n).toPromise();return r===void 0?null:r.value}function N_(t,e){const n=qc(t,!0).delete(e);return new ja(n).toPromise()}const AL=800,RL=3;class iC{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await kh(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>RL)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return tC()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Hc._getInstance(wL()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await EL(),!this.activeServiceWorker)return;this.sender=new vL(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||TL()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await kh();return await P_(e,ju,"1"),await N_(e,ju),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>P_(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>CL(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>N_(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const o=qc(i,!1).getAll();return new ja(o).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:o}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(o)&&(this.notifyListeners(i,o),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),AL)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}iC.type="LOCAL";const xL=iC;new Ka(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PL(t,e){return e?Qn(e):(Z(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qm extends Bm{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ao(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Ao(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Ao(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function NL(t){return YS(t.auth,new qm(t),t.bypassAuthState)}function kL(t){const{auth:e,user:n}=t;return Z(n,e,"internal-error"),sL(n,new qm(t),t.bypassAuthState)}async function DL(t){const{auth:e,user:n}=t;return Z(n,e,"internal-error"),oL(n,new qm(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oC{constructor(e,n,r,i,o=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:o,error:s,type:a}=e;if(s){this.reject(s);return}const l={auth:this.auth,requestUri:n,sessionId:r,tenantId:o||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return NL;case"linkViaPopup":case"linkViaRedirect":return DL;case"reauthViaPopup":case"reauthViaRedirect":return kL;default:Sn(this.auth,"internal-error")}}resolve(e){ur(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ur(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ML=new Ka(2e3,1e4);class po extends oC{constructor(e,n,r,i,o){super(e,n,i,o),this.provider=r,this.authWindow=null,this.pollId=null,po.currentPopupAction&&po.currentPopupAction.cancel(),po.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Z(e,this.auth,"internal-error"),e}async onExecution(){ur(this.filter.length===1,"Popup operations only handle one event");const e=Hm();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Fn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Fn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,po.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Fn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,ML.get())};e()}}po.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bL="pendingRedirect",au=new Map;class LL extends oC{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=au.get(this.auth._key());if(!e){try{const r=await VL(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}au.set(this.auth._key(),e)}return this.bypassAuthState||au.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function VL(t,e){const n=OL(e),r=FL(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function UL(t,e){au.set(t._key(),e)}function FL(t){return Qn(t._redirectPersistence)}function OL(t){return su(bL,t.config.apiKey,t.name)}async function BL(t,e,n=!1){if(kn(t.app))return Promise.reject(tr(t));const r=qi(t),i=PL(r,e),s=await new LL(r,i,n).execute();return s&&!n&&(delete s.user._redirectEventId,await r._persistUserIfCurrent(s.user),await r._setRedirectUser(null,e)),s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GL=10*60*1e3;class HL{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!qL(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!sC(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(Fn(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=GL&&this.cachedEventUids.clear(),this.cachedEventUids.has(k_(e))}saveEventToCache(e){this.cachedEventUids.add(k_(e)),this.lastProcessedEventTime=Date.now()}}function k_(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function sC({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function qL(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return sC(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $L(t,e={}){return oi(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zL=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,WL=/^https?/;async function KL(t){if(t.config.emulator)return;const{authorizedDomains:e}=await $L(t);for(const n of e)try{if(JL(n))return}catch{}Sn(t,"unauthorized-domain")}function JL(t){const e=xh(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const s=new URL(t);return s.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&s.hostname===r}if(!WL.test(n))return!1;if(zL.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YL=new Ka(3e4,6e4);function D_(){const t=On().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function jL(t){return new Promise((e,n)=>{var r,i,o;function s(){D_(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{D_(),n(Fn(t,"network-request-failed"))},timeout:YL.get()})}if(!((i=(r=On().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((o=On().gapi)===null||o===void 0)&&o.load)s();else{const a=H1("iframefcb");return On()[a]=()=>{gapi.load?s():n(Fn(t,"network-request-failed"))},zS(`${G1()}?onload=${a}`).catch(l=>n(l))}}).catch(e=>{throw lu=null,e})}let lu=null;function QL(t){return lu=lu||jL(t),lu}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XL=new Ka(5e3,15e3),ZL="__/auth/iframe",eV="emulator/auth/iframe",tV={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},nV=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function rV(t){const e=t.config;Z(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Um(e,eV):`https://${t.config.authDomain}/${ZL}`,r={apiKey:e.apiKey,appName:t.name,v:Bi},i=nV.get(t.config.apiHost);i&&(r.eid=i);const o=t._getFrameworks();return o.length&&(r.fw=o.join(",")),`${n}?${Ua(r).slice(1)}`}async function iV(t){const e=await QL(t),n=On().gapi;return Z(n,t,"internal-error"),e.open({where:document.body,url:rV(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:tV,dontclear:!0},r=>new Promise(async(i,o)=>{await r.restyle({setHideOnLeave:!1});const s=Fn(t,"network-request-failed"),a=On().setTimeout(()=>{o(s)},XL.get());function l(){On().clearTimeout(a),i(r)}r.ping(l).then(l,()=>{o(s)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oV={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},sV=500,aV=600,lV="_blank",uV="http://localhost";class M_{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function cV(t,e,n,r=sV,i=aV){const o=Math.max((window.screen.availHeight-i)/2,0).toString(),s=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},oV),{width:r.toString(),height:i.toString(),top:o,left:s}),u=Ct().toLowerCase();n&&(a=FS(u)?lV:n),VS(u)&&(e=e||uV,l.scrollbars="yes");const h=Object.entries(l).reduce((m,[_,E])=>`${m}${_}=${E},`,"");if(D1(u)&&a!=="_self")return dV(e||"",a),new M_(null);const p=window.open(e||"",a,h);Z(p,t,"popup-blocked");try{p.focus()}catch{}return new M_(p)}function dV(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fV="__/auth/handler",hV="emulator/auth/handler",pV=encodeURIComponent("fac");async function b_(t,e,n,r,i,o){Z(t.config.authDomain,t,"auth-domain-config-required"),Z(t.config.apiKey,t,"invalid-api-key");const s={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Bi,eventId:i};if(e instanceof KS){e.setDefaultLanguage(t.languageCode),s.providerId=e.providerId||"",YN(e.getCustomParameters())||(s.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,p]of Object.entries({}))s[h]=p}if(e instanceof Ya){const h=e.getScopes().filter(p=>p!=="");h.length>0&&(s.scopes=h.join(","))}t.tenantId&&(s.tid=t.tenantId);const a=s;for(const h of Object.keys(a))a[h]===void 0&&delete a[h];const l=await t._getAppCheckToken(),u=l?`#${pV}=${encodeURIComponent(l)}`:"";return`${mV(t)}?${Ua(a).slice(1)}${u}`}function mV({config:t}){return t.emulator?Um(t,hV):`https://${t.authDomain}/${fV}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rf="webStorageSupport";class gV{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=eC,this._completeRedirectFn=BL,this._overrideRedirectResult=UL}async _openPopup(e,n,r,i){var o;ur((o=this.eventManagers[e._key()])===null||o===void 0?void 0:o.manager,"_initialize() not called before _openPopup()");const s=await b_(e,n,r,xh(),i);return cV(e,s,Hm())}async _openRedirect(e,n,r,i){await this._originValidation(e);const o=await b_(e,n,r,xh(),i);return _L(o),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:o}=this.eventManagers[n];return i?Promise.resolve(i):(ur(o,"If manager is not set, promise should be"),o)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await iV(e),r=new HL(e);return n.register("authEvent",i=>(Z(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(rf,{type:rf},i=>{var o;const s=(o=i==null?void 0:i[0])===null||o===void 0?void 0:o[rf];s!==void 0&&n(!!s),Sn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=KL(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return qS()||US()||Om()}}const yV=gV;var L_="@firebase/auth",V_="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vV{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Z(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _V(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function EV(t){Pi(new Jr("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:s,authDomain:a}=r.options;Z(s&&!s.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:s,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:$S(t)},u=new F1(r,i,o,l);return K1(u,n),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Pi(new Jr("auth-internal",e=>{const n=qi(e.getProvider("auth").getImmediate());return(r=>new vV(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ln(L_,V_,_V(t)),Ln(L_,V_,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TV=5*60,wV=Xw("authIdTokenMaxAge")||TV;let U_=null;const IV=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>wV)return;const i=n==null?void 0:n.token;U_!==i&&(U_=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function SV(t=jp()){const e=Fa(t,"auth");if(e.isInitialized())return e.getImmediate();const n=W1(t,{popupRedirectResolver:yV,persistence:[xL,gL,eC]}),r=Xw("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const o=new URL(r,location.origin);if(location.origin===o.origin){const s=IV(o.toString());dL(n,s,()=>s(n.currentUser)),cL(n,a=>s(a))}}const i=Yw("auth");return i&&J1(n,`http://${i}`),n}function CV(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}O1({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const o=Fn("internal-error");o.customData=i,n(o)},r.type="text/javascript",r.charset="UTF-8",CV().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});EV("Browser");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aC="firebasestorage.googleapis.com",lC="storageBucket",AV=2*60*1e3,RV=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oe extends Hn{constructor(e,n,r=0){super(of(e),`Firebase Storage: ${n} (${of(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Oe.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return of(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Fe;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Fe||(Fe={}));function of(t){return"storage/"+t}function $m(){const t="An unknown error occurred, please check the error payload for server response.";return new Oe(Fe.UNKNOWN,t)}function xV(t){return new Oe(Fe.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function PV(t){return new Oe(Fe.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function NV(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Oe(Fe.UNAUTHENTICATED,t)}function kV(){return new Oe(Fe.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function DV(t){return new Oe(Fe.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function MV(){return new Oe(Fe.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function bV(){return new Oe(Fe.CANCELED,"User canceled the upload/download.")}function LV(t){return new Oe(Fe.INVALID_URL,"Invalid URL '"+t+"'.")}function VV(t){return new Oe(Fe.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function UV(){return new Oe(Fe.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+lC+"' property when initializing the app?")}function FV(){return new Oe(Fe.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function OV(){return new Oe(Fe.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function BV(t){return new Oe(Fe.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function Dh(t){return new Oe(Fe.INVALID_ARGUMENT,t)}function uC(){return new Oe(Fe.APP_DELETED,"The Firebase app was deleted.")}function GV(t){return new Oe(Fe.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function ta(t,e){return new Oe(Fe.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function Rs(t){throw new Oe(Fe.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jt{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=jt.makeFromUrl(e,n)}catch{return new jt(e,"")}if(r.path==="")return r;throw VV(e)}static makeFromUrl(e,n){let r=null;const i="([A-Za-z0-9.\\-_]+)";function o(M){M.path.charAt(M.path.length-1)==="/"&&(M.path_=M.path_.slice(0,-1))}const s="(/(.*))?$",a=new RegExp("^gs://"+i+s,"i"),l={bucket:1,path:3};function u(M){M.path_=decodeURIComponent(M.path)}const h="v[A-Za-z0-9_]+",p=n.replace(/[.]/g,"\\."),m="(/([^?#]*).*)?$",_=new RegExp(`^https?://${p}/${h}/b/${i}/o${m}`,"i"),E={bucket:1,path:3},P=n===aC?"(?:storage.googleapis.com|storage.cloud.google.com)":n,x="([^?#]*)",I=new RegExp(`^https?://${P}/${i}/${x}`,"i"),C=[{regex:a,indices:l,postModify:o},{regex:_,indices:E,postModify:u},{regex:I,indices:{bucket:1,path:2},postModify:u}];for(let M=0;M<C.length;M++){const U=C[M],L=U.regex.exec(e);if(L){const R=L[U.indices.bucket];let w=L[U.indices.path];w||(w=""),r=new jt(R,w),U.postModify(r);break}}if(r==null)throw LV(e);return r}}class HV{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qV(t,e,n){let r=1,i=null,o=null,s=!1,a=0;function l(){return a===2}let u=!1;function h(...x){u||(u=!0,e.apply(null,x))}function p(x){i=setTimeout(()=>{i=null,t(_,l())},x)}function m(){o&&clearTimeout(o)}function _(x,...I){if(u){m();return}if(x){m(),h.call(null,x,...I);return}if(l()||s){m(),h.call(null,x,...I);return}r<64&&(r*=2);let C;a===1?(a=2,C=0):C=(r+Math.random())*1e3,p(C)}let E=!1;function P(x){E||(E=!0,m(),!u&&(i!==null?(x||(a=2),clearTimeout(i),p(0)):x||(a=1)))}return p(0),o=setTimeout(()=>{s=!0,P(!0)},n),P}function $V(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zV(t){return t!==void 0}function WV(t){return typeof t=="object"&&!Array.isArray(t)}function zm(t){return typeof t=="string"||t instanceof String}function F_(t){return Wm()&&t instanceof Blob}function Wm(){return typeof Blob<"u"}function O_(t,e,n,r){if(r<e)throw Dh(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw Dh(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Km(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function cC(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const i=e(r)+"="+e(t[r]);n=n+i+"&"}return n=n.slice(0,-1),n}var Ii;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(Ii||(Ii={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KV(t,e){const n=t>=500&&t<600,i=[408,429].indexOf(t)!==-1,o=e.indexOf(t)!==-1;return n||i||o}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JV{constructor(e,n,r,i,o,s,a,l,u,h,p,m=!0){this.url_=e,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=o,this.additionalRetryCodes_=s,this.callback_=a,this.errorCallback_=l,this.timeout_=u,this.progressCallback_=h,this.connectionFactory_=p,this.retry=m,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((_,E)=>{this.resolve_=_,this.reject_=E,this.start_()})}start_(){const e=(r,i)=>{if(i){r(!1,new Ll(!1,null,!0));return}const o=this.connectionFactory_();this.pendingConnection_=o;const s=a=>{const l=a.loaded,u=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,u)};this.progressCallback_!==null&&o.addUploadProgressListener(s),o.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&o.removeUploadProgressListener(s),this.pendingConnection_=null;const a=o.getErrorCode()===Ii.NO_ERROR,l=o.getStatus();if(!a||KV(l,this.additionalRetryCodes_)&&this.retry){const h=o.getErrorCode()===Ii.ABORT;r(!1,new Ll(!1,null,h));return}const u=this.successCodes_.indexOf(l)!==-1;r(!0,new Ll(u,o))})},n=(r,i)=>{const o=this.resolve_,s=this.reject_,a=i.connection;if(i.wasSuccessCode)try{const l=this.callback_(a,a.getResponse());zV(l)?o(l):o()}catch(l){s(l)}else if(a!==null){const l=$m();l.serverResponse=a.getErrorText(),this.errorCallback_?s(this.errorCallback_(a,l)):s(l)}else if(i.canceled){const l=this.appDelete_?uC():bV();s(l)}else{const l=MV();s(l)}};this.canceled_?n(!1,new Ll(!1,null,!0)):this.backoffId_=qV(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&$V(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Ll{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function YV(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function jV(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function QV(t,e){e&&(t["X-Firebase-GMPID"]=e)}function XV(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function ZV(t,e,n,r,i,o,s=!0){const a=cC(t.urlParams),l=t.url+a,u=Object.assign({},t.headers);return QV(u,e),YV(u,n),jV(u,o),XV(u,r),new JV(l,t.method,u,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eU(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function tU(...t){const e=eU();if(e!==void 0){const n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if(Wm())return new Blob(t);throw new Oe(Fe.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function nU(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rU(t){if(typeof atob>"u")throw BV("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dn={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class sf{constructor(e,n){this.data=e,this.contentType=n||null}}function iU(t,e){switch(t){case Dn.RAW:return new sf(dC(e));case Dn.BASE64:case Dn.BASE64URL:return new sf(fC(t,e));case Dn.DATA_URL:return new sf(sU(e),aU(e))}throw $m()}function dC(t){const e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const o=r,s=t.charCodeAt(++n);r=65536|(o&1023)<<10|s&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function oU(t){let e;try{e=decodeURIComponent(t)}catch{throw ta(Dn.DATA_URL,"Malformed data URL.")}return dC(e)}function fC(t,e){switch(t){case Dn.BASE64:{const i=e.indexOf("-")!==-1,o=e.indexOf("_")!==-1;if(i||o)throw ta(t,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case Dn.BASE64URL:{const i=e.indexOf("+")!==-1,o=e.indexOf("/")!==-1;if(i||o)throw ta(t,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=rU(e)}catch(i){throw i.message.includes("polyfill")?i:ta(t,"Invalid character found")}const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}class hC{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw ta(Dn.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=lU(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function sU(t){const e=new hC(t);return e.base64?fC(Dn.BASE64,e.rest):oU(e.rest)}function aU(t){return new hC(t).contentType}function lU(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pr{constructor(e,n){let r=0,i="";F_(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,n){if(F_(this.data_)){const r=this.data_,i=nU(r,e,n);return i===null?null:new Pr(i)}else{const r=new Uint8Array(this.data_.buffer,e,n-e);return new Pr(r,!0)}}static getBlob(...e){if(Wm()){const n=e.map(r=>r instanceof Pr?r.data_:r);return new Pr(tU.apply(null,n))}else{const n=e.map(s=>zm(s)?iU(Dn.RAW,s).data:s.data_);let r=0;n.forEach(s=>{r+=s.byteLength});const i=new Uint8Array(r);let o=0;return n.forEach(s=>{for(let a=0;a<s.length;a++)i[o++]=s[a]}),new Pr(i,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pC(t){let e;try{e=JSON.parse(t)}catch{return null}return WV(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uU(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function cU(t,e){const n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function mC(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dU(t,e){return e}class Pt{constructor(e,n,r,i){this.server=e,this.local=n||e,this.writable=!!r,this.xform=i||dU}}let Vl=null;function fU(t){return!zm(t)||t.length<2?t:mC(t)}function gC(){if(Vl)return Vl;const t=[];t.push(new Pt("bucket")),t.push(new Pt("generation")),t.push(new Pt("metageneration")),t.push(new Pt("name","fullPath",!0));function e(o,s){return fU(s)}const n=new Pt("name");n.xform=e,t.push(n);function r(o,s){return s!==void 0?Number(s):s}const i=new Pt("size");return i.xform=r,t.push(i),t.push(new Pt("timeCreated")),t.push(new Pt("updated")),t.push(new Pt("md5Hash",null,!0)),t.push(new Pt("cacheControl",null,!0)),t.push(new Pt("contentDisposition",null,!0)),t.push(new Pt("contentEncoding",null,!0)),t.push(new Pt("contentLanguage",null,!0)),t.push(new Pt("contentType",null,!0)),t.push(new Pt("metadata","customMetadata",!0)),Vl=t,Vl}function hU(t,e){function n(){const r=t.bucket,i=t.fullPath,o=new jt(r,i);return e._makeStorageReference(o)}Object.defineProperty(t,"ref",{get:n})}function pU(t,e,n){const r={};r.type="file";const i=n.length;for(let o=0;o<i;o++){const s=n[o];r[s.local]=s.xform(r,e[s.server])}return hU(r,t),r}function yC(t,e,n){const r=pC(e);return r===null?null:pU(t,r,n)}function mU(t,e,n,r){const i=pC(e);if(i===null||!zm(i.downloadTokens))return null;const o=i.downloadTokens;if(o.length===0)return null;const s=encodeURIComponent;return o.split(",").map(u=>{const h=t.bucket,p=t.fullPath,m="/b/"+s(h)+"/o/"+s(p),_=Km(m,n,r),E=cC({alt:"media",token:u});return _+E})[0]}function gU(t,e){const n={},r=e.length;for(let i=0;i<r;i++){const o=e[i];o.writable&&(n[o.server]=t[o.local])}return JSON.stringify(n)}class vC{constructor(e,n,r,i){this.url=e,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _C(t){if(!t)throw $m()}function yU(t,e){function n(r,i){const o=yC(t,i,e);return _C(o!==null),o}return n}function vU(t,e){function n(r,i){const o=yC(t,i,e);return _C(o!==null),mU(o,i,t.host,t._protocol)}return n}function EC(t){function e(n,r){let i;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?i=kV():i=NV():n.getStatus()===402?i=PV(t.bucket):n.getStatus()===403?i=DV(t.path):i=r,i.status=n.getStatus(),i.serverResponse=r.serverResponse,i}return e}function _U(t){const e=EC(t);function n(r,i){let o=e(r,i);return r.getStatus()===404&&(o=xV(t.path)),o.serverResponse=i.serverResponse,o}return n}function EU(t,e,n){const r=e.fullServerUrl(),i=Km(r,t.host,t._protocol),o="GET",s=t.maxOperationRetryTime,a=new vC(i,o,vU(t,n),s);return a.errorHandler=_U(e),a}function TU(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function wU(t,e,n){const r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=TU(null,e)),r}function IU(t,e,n,r,i){const o=e.bucketOnlyServerUrl(),s={"X-Goog-Upload-Protocol":"multipart"};function a(){let C="";for(let M=0;M<2;M++)C=C+Math.random().toString().slice(2);return C}const l=a();s["Content-Type"]="multipart/related; boundary="+l;const u=wU(e,r,i),h=gU(u,n),p="--"+l+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+h+`\r
--`+l+`\r
Content-Type: `+u.contentType+`\r
\r
`,m=`\r
--`+l+"--",_=Pr.getBlob(p,r,m);if(_===null)throw FV();const E={name:u.fullPath},P=Km(o,t.host,t._protocol),x="POST",I=t.maxUploadRetryTime,T=new vC(P,x,yU(t,n),I);return T.urlParams=E,T.headers=s,T.body=_.uploadData(),T.errorHandler=EC(e),T}class SU{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Ii.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Ii.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Ii.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,i){if(this.sent_)throw Rs("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,e,!0),i!==void 0)for(const o in i)i.hasOwnProperty(o)&&this.xhr_.setRequestHeader(o,i[o].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Rs("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Rs("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Rs("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Rs("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class CU extends SU{initXhr(){this.xhr_.responseType="text"}}function TC(){return new CU}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Li{constructor(e,n){this._service=e,n instanceof jt?this._location=n:this._location=jt.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new Li(e,n)}get root(){const e=new jt(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return mC(this._location.path)}get storage(){return this._service}get parent(){const e=uU(this._location.path);if(e===null)return null;const n=new jt(this._location.bucket,e);return new Li(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw GV(e)}}function AU(t,e,n){t._throwIfRoot("uploadBytes");const r=IU(t.storage,t._location,gC(),new Pr(e,!0),n);return t.storage.makeRequestWithTokens(r,TC).then(i=>({metadata:i,ref:t}))}function RU(t){t._throwIfRoot("getDownloadURL");const e=EU(t.storage,t._location,gC());return t.storage.makeRequestWithTokens(e,TC).then(n=>{if(n===null)throw OV();return n})}function xU(t,e){const n=cU(t._location.path,e),r=new jt(t._location.bucket,n);return new Li(t.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PU(t){return/^[A-Za-z]+:\/\//.test(t)}function NU(t,e){return new Li(t,e)}function wC(t,e){if(t instanceof Jm){const n=t;if(n._bucket==null)throw UV();const r=new Li(n,n._bucket);return e!=null?wC(r,e):r}else return e!==void 0?xU(t,e):t}function kU(t,e){if(e&&PU(e)){if(t instanceof Jm)return NU(t,e);throw Dh("To use ref(service, url), the first argument must be a Storage instance.")}else return wC(t,e)}function B_(t,e){const n=e==null?void 0:e[lC];return n==null?null:jt.makeFromBucketSpec(n,t)}function DU(t,e,n,r={}){t.host=`${e}:${n}`,t._protocol="http";const{mockUserToken:i}=r;i&&(t._overrideAuthToken=typeof i=="string"?i:Zw(i,t.app.options.projectId))}class Jm{constructor(e,n,r,i,o){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=o,this._bucket=null,this._host=aC,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=AV,this._maxUploadRetryTime=RV,this._requests=new Set,i!=null?this._bucket=jt.makeFromBucketSpec(i,this._host):this._bucket=B_(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=jt.makeFromBucketSpec(this._url,e):this._bucket=B_(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){O_("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){O_("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Li(this,e)}_makeRequest(e,n,r,i,o=!0){if(this._deleted)return new HV(uC());{const s=ZV(e,this._appId,r,i,n,this._firebaseVersion,o);return this._requests.add(s),s.getPromise().then(()=>this._requests.delete(s),()=>this._requests.delete(s)),s}}async makeRequestWithTokens(e,n){const[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,i).getPromise()}}const G_="@firebase/storage",H_="0.13.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IC="storage";function MU(t,e,n){return t=Ue(t),AU(t,e,n)}function bU(t){return t=Ue(t),RU(t)}function LU(t,e){return t=Ue(t),kU(t,e)}function VU(t=jp(),e){t=Ue(t);const r=Fa(t,IC).getImmediate({identifier:e}),i=jw("storage");return i&&UU(r,...i),r}function UU(t,e,n,r={}){DU(t,e,n,r)}function FU(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),i=t.getProvider("app-check-internal");return new Jm(n,r,i,e,Bi)}function OU(){Pi(new Jr(IC,FU,"PUBLIC").setMultipleInstances(!0)),Ln(G_,H_,""),Ln(G_,H_,"esm2017")}OU();var ye=(t=>(t.ADMIN="ADMIN",t.MANAGER="MANAGER",t.EMPLOYEE="EMPLOYEE",t.GUEST="GUEST",t))(ye||{}),Xn=(t=>(t.PENDING="PENDING",t.ACTIVE="ACTIVE",t.REJECTED="REJECTED",t))(Xn||{}),ne=(t=>(t.DRAFT="DRAFT",t.SUBMITTED="SUBMITTED",t.NEEDS_REVISION="NEEDS_REVISION",t.APPROVED="APPROVED",t.REJECTED="REJECTED",t.PUBLISHED="PUBLISHED",t.ARCHIVED="ARCHIVED",t))(ne||{});const BU=typeof window<"u"&&window.__firebase_config?JSON.parse(window.__firebase_config):{apiKey:"AIzaSyAMOU-IK6UfKk75UR0P_Rs80z0uEsssQ9o",authDomain:"epromdeploy.firebaseapp.com",projectId:"epromdeploy",storageBucket:"epromdeploy.firebasestorage.app",messagingSenderId:"179394609832",appId:"1:179394609832:web:cf8d21ea2eef70990cb89d",measurementId:"G-X5GVRLDBQQ"},Xu=nI(BU);let Ke;try{Ke=Wb(Xu,{experimentalForceLongPolling:!0})}catch{Ke=Kb(Xu)}const $c=SV(Xu),GU=VU(Xu),HU="https://script.google.com/macros/s/AKfycbywVx70i2DXMf90cuMkE84Jn3rNlIr6dQJwXdoVx7l9kzzSXU-9uxn1MnrbWnJRRu6b/exec",nt={USERS:"users",IDEAS:"ideas",SETTINGS:"settings",TEMPLATES:"templates"},Mh="global_settings",qU=t=>fL($c,async e=>{if(e){const n=await Dm($t(Ke,nt.USERS,e.uid));n.exists()?t(n.data()):t(null)}else t(null)}),$U=async(t,e)=>{const n=await uL($c,t,e),r=await Dm($t(Ke,nt.USERS,n.user.uid));if(!r.exists())throw new Error("User profile not found.");const i=r.data();if(i.status===Xn.PENDING)throw new Error("Account pending admin approval");if(i.status===Xn.REJECTED)throw new Error("Account rejected");return i},zU=async t=>{const e=s1(Vc(Ke,nt.USERS),a1("username","==",t.username));if(!(await Bc(e)).empty)throw new Error("Username taken");const r=await lL($c,t.email,t.password||"password"),i=t.email==="admin@eprom.com"?ye.ADMIN:ye.EMPLOYEE,o=t.email==="admin@eprom.com"?Xn.ACTIVE:Xn.PENDING,s={...t,id:r.user.uid,role:i,status:o,password:""};return await Zo($t(Ke,nt.USERS,s.id),s),s},WU=async()=>{await hL($c)},KU=async()=>(await Bc(Vc(Ke,nt.USERS))).docs.map(e=>e.data()),q_=async(t,e,n)=>{const r=$t(Ke,nt.USERS,t),i={status:e};n&&(i.role=n),await AS(r,i)},JU=async(t,e)=>{await AS($t(Ke,nt.USERS,t),{role:e})},YU=async t=>{await Mm($t(Ke,nt.USERS,t))},qo=async()=>(await Bc(Vc(Ke,nt.IDEAS))).docs.map(e=>e.data()),bh=async t=>{await Zo($t(Ke,nt.IDEAS,t.id),t)},jU=async t=>{await Mm($t(Ke,nt.IDEAS,t))},QU=async()=>{const t=await Dm($t(Ke,nt.SETTINGS,Mh));if(t.exists())return t.data();const e={appName:"EPROM Innovation Hub",logoUrl:"",departments:["Operations","Safety","Engineering","IT","HR"],categories:["Cost Reduction","Safety Improvement","Process Optimization","Innovation","Sustainability"]};return await Zo($t(Ke,nt.SETTINGS,Mh),e),e},af=async t=>{await Zo($t(Ke,nt.SETTINGS,Mh),t)},Ym=async()=>{const e=(await Bc(Vc(Ke,nt.TEMPLATES))).docs.map(n=>n.data());if(e.length===0){const n={id:"default-1",name:"Standard Operational Improvement",description:"Standard form for submitting operational efficiency and cost reduction ideas.",isActive:!0,ratingConfig:[{id:"impact",name:"Impact on Business Goals",description:"Reduces cost, increases revenue, improves safety.",weight:30},{id:"feasibility",name:"Feasibility",description:"Ease of implementation (resources, time).",weight:20},{id:"roi",name:"Cost vs. Benefit",description:"Estimated cost compared to expected benefits.",weight:20},{id:"innovation",name:"Innovation Level",description:"New approach vs incremental improvement.",weight:15},{id:"risk",name:"Risk Level",description:"Operational, financial, or safety risks (High Score = Low Risk).",weight:15}],fields:[{id:"benefits",label:"Benefits / Value Proposition",type:"textarea",required:!0},{id:"cost",label:"Estimated Cost",type:"text",required:!1},{id:"feasibility",label:"Implementation Feasibility",type:"select",options:["Easy","Moderate","Complex"],required:!0},{id:"priority",label:"Priority Level",type:"select",options:["Low","Medium","High"],required:!1},{id:"timeline",label:"Expected Timeline",type:"select",options:["Short-term","Long-term"],required:!1},{id:"collab",label:"Collaboration Needed?",type:"checkbox",required:!1},{id:"tags",label:"Tags/Keywords",type:"text",required:!1}]};return await Zo($t(Ke,nt.TEMPLATES,n.id),n),[n]}return e},XU=async t=>{await Zo($t(Ke,nt.TEMPLATES,t.id),t)},ZU=async t=>{await Mm($t(Ke,nt.TEMPLATES,t))},SC=async t=>{if(!t.type.startsWith("image/"))throw new Error("Only image files are allowed for this field.");if(window.location.hostname.includes("github.io")||window.location.hostname.includes("web.app")){console.log("Environment detected (GitHub/Hosted): Defaulting to Drive uploader to avoid CORS issues.");try{const e=await Lh(t);return e.includes("export=download")?e.replace("export=download","export=view"):e}catch(e){throw new Error(`Drive Upload failed: ${e.message}`)}}try{const e=LU(GU,`images/${Date.now()}_${t.name}`),n=await MU(e,t);return await bU(n.ref)}catch(e){console.warn("Firebase Storage Upload failed. Attempting fallback to Drive.",e);try{const n=await Lh(t);return n.includes("export=download")?n.replace("export=download","export=view"):n}catch(n){throw new Error(`Upload failed: ${e.message||"Firebase Error"} | Fallback failed: ${n.message}`)}}},eF=t=>new Promise((e,n)=>{const r=new FileReader;r.readAsDataURL(t),r.onload=()=>e(r.result),r.onerror=i=>n(i)}),Lh=async t=>{if(t.size>5*1024*1024)throw new Error("File size exceeds 5MB limit. Please upload a smaller file.");try{const n=(await eF(t)).split(",")[1],r=t.name||"uploaded_file",i=t.type||"application/octet-stream",o={filename:r,name:r,mimeType:i,type:i,data:n,base64:n,file:n};console.log("Uploading file to Drive...",{fileName:r,mimeType:i});const s=await fetch(HU,{method:"POST",headers:{"Content-Type":"text/plain;charset=utf-8"},body:JSON.stringify(o)});if(!s.ok)throw new Error(`Server returned ${s.status} ${s.statusText}`);const a=await s.text();let l;try{l=JSON.parse(a)}catch{throw console.error("Invalid JSON response:",a),new Error("Invalid response format from server.")}if(l.error||l.status==="error")throw new Error(l.error||l.message||"Unknown server error");const u=l.url||l.fileUrl||l.link||l.downloadUrl;if(!u)throw new Error("No URL returned from upload script.");return u}catch(e){throw console.error("Drive Upload failed",e),new Error(e.message||"Upload failed")}};var tF={};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let nF,rF;function iF(){return{geminiUrl:nF,vertexUrl:rF}}function oF(t,e,n,r){var i,o;if(!(t!=null&&t.baseUrl)){const s=iF();return e?(i=s.vertexUrl)!==null&&i!==void 0?i:n:(o=s.geminiUrl)!==null&&o!==void 0?o:r}return t.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class hr{}function W(t,e){const n=/\{([^}]+)\}/g;return t.replace(n,(r,i)=>{if(Object.prototype.hasOwnProperty.call(e,i)){const o=e[i];return o!=null?String(o):""}else throw new Error(`Key '${i}' not found in valueMap.`)})}function f(t,e,n){for(let o=0;o<e.length-1;o++){const s=e[o];if(s.endsWith("[]")){const a=s.slice(0,-2);if(!(a in t))if(Array.isArray(n))t[a]=Array.from({length:n.length},()=>({}));else throw new Error(`Value must be a list given an array path ${s}`);if(Array.isArray(t[a])){const l=t[a];if(Array.isArray(n))for(let u=0;u<l.length;u++){const h=l[u];f(h,e.slice(o+1),n[u])}else for(const u of l)f(u,e.slice(o+1),n)}return}else if(s.endsWith("[0]")){const a=s.slice(0,-3);a in t||(t[a]=[{}]);const l=t[a];f(l[0],e.slice(o+1),n);return}(!t[s]||typeof t[s]!="object")&&(t[s]={}),t=t[s]}const r=e[e.length-1],i=t[r];if(i!==void 0){if(!n||typeof n=="object"&&Object.keys(n).length===0||n===i)return;if(typeof i=="object"&&typeof n=="object"&&i!==null&&n!==null)Object.assign(i,n);else throw new Error(`Cannot set value for an existing key. Key: ${r}`)}else r==="_self"&&typeof n=="object"&&n!==null&&!Array.isArray(n)?Object.assign(t,n):t[r]=n}function c(t,e,n=void 0){try{if(e.length===1&&e[0]==="_self")return t;for(let r=0;r<e.length;r++){if(typeof t!="object"||t===null)return n;const i=e[r];if(i.endsWith("[]")){const o=i.slice(0,-2);if(o in t){const s=t[o];return Array.isArray(s)?s.map(a=>c(a,e.slice(r+1),n)):n}else return n}else t=t[i]}return t}catch(r){if(r instanceof TypeError)return n;throw r}}function sF(t,e){for(const[n,r]of Object.entries(e)){const i=n.split("."),o=r.split("."),s=new Set;let a=-1;for(let l=0;l<i.length;l++)if(i[l]==="*"){a=l;break}if(a!==-1&&o.length>a)for(let l=a;l<o.length;l++){const u=o[l];u!=="*"&&!u.endsWith("[]")&&!u.endsWith("[0]")&&s.add(u)}Vh(t,i,o,0,s)}}function Vh(t,e,n,r,i){if(r>=e.length||typeof t!="object"||t===null)return;const o=e[r];if(o.endsWith("[]")){const s=o.slice(0,-2),a=t;if(s in a&&Array.isArray(a[s]))for(const l of a[s])Vh(l,e,n,r+1,i)}else if(o==="*"){if(typeof t=="object"&&t!==null&&!Array.isArray(t)){const s=t,a=Object.keys(s).filter(u=>!u.startsWith("_")&&!i.has(u)),l={};for(const u of a)l[u]=s[u];for(const[u,h]of Object.entries(l)){const p=[];for(const m of n.slice(r))m==="*"?p.push(u):p.push(m);f(s,p,h)}for(const u of a)delete s[u]}}else{const s=t;o in s&&Vh(s[o],e,n,r+1,i)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function jm(t){if(typeof t!="string")throw new Error("fromImageBytes must be a string");return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function aF(t){const e={},n=c(t,["operationName"]);n!=null&&f(e,["operationName"],n);const r=c(t,["resourceName"]);return r!=null&&f(e,["_url","resourceName"],r),e}function lF(t){const e={},n=c(t,["name"]);n!=null&&f(e,["name"],n);const r=c(t,["metadata"]);r!=null&&f(e,["metadata"],r);const i=c(t,["done"]);i!=null&&f(e,["done"],i);const o=c(t,["error"]);o!=null&&f(e,["error"],o);const s=c(t,["response","generateVideoResponse"]);return s!=null&&f(e,["response"],cF(s)),e}function uF(t){const e={},n=c(t,["name"]);n!=null&&f(e,["name"],n);const r=c(t,["metadata"]);r!=null&&f(e,["metadata"],r);const i=c(t,["done"]);i!=null&&f(e,["done"],i);const o=c(t,["error"]);o!=null&&f(e,["error"],o);const s=c(t,["response"]);return s!=null&&f(e,["response"],dF(s)),e}function cF(t){const e={},n=c(t,["generatedSamples"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(s=>fF(s))),f(e,["generatedVideos"],o)}const r=c(t,["raiMediaFilteredCount"]);r!=null&&f(e,["raiMediaFilteredCount"],r);const i=c(t,["raiMediaFilteredReasons"]);return i!=null&&f(e,["raiMediaFilteredReasons"],i),e}function dF(t){const e={},n=c(t,["videos"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(s=>hF(s))),f(e,["generatedVideos"],o)}const r=c(t,["raiMediaFilteredCount"]);r!=null&&f(e,["raiMediaFilteredCount"],r);const i=c(t,["raiMediaFilteredReasons"]);return i!=null&&f(e,["raiMediaFilteredReasons"],i),e}function fF(t){const e={},n=c(t,["video"]);return n!=null&&f(e,["video"],_F(n)),e}function hF(t){const e={},n=c(t,["_self"]);return n!=null&&f(e,["video"],EF(n)),e}function pF(t){const e={},n=c(t,["operationName"]);return n!=null&&f(e,["_url","operationName"],n),e}function mF(t){const e={},n=c(t,["operationName"]);return n!=null&&f(e,["_url","operationName"],n),e}function gF(t){const e={},n=c(t,["name"]);n!=null&&f(e,["name"],n);const r=c(t,["metadata"]);r!=null&&f(e,["metadata"],r);const i=c(t,["done"]);i!=null&&f(e,["done"],i);const o=c(t,["error"]);o!=null&&f(e,["error"],o);const s=c(t,["response"]);return s!=null&&f(e,["response"],yF(s)),e}function yF(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const r=c(t,["parent"]);r!=null&&f(e,["parent"],r);const i=c(t,["documentName"]);return i!=null&&f(e,["documentName"],i),e}function CC(t){const e={},n=c(t,["name"]);n!=null&&f(e,["name"],n);const r=c(t,["metadata"]);r!=null&&f(e,["metadata"],r);const i=c(t,["done"]);i!=null&&f(e,["done"],i);const o=c(t,["error"]);o!=null&&f(e,["error"],o);const s=c(t,["response"]);return s!=null&&f(e,["response"],vF(s)),e}function vF(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const r=c(t,["parent"]);r!=null&&f(e,["parent"],r);const i=c(t,["documentName"]);return i!=null&&f(e,["documentName"],i),e}function _F(t){const e={},n=c(t,["uri"]);n!=null&&f(e,["uri"],n);const r=c(t,["encodedVideo"]);r!=null&&f(e,["videoBytes"],jm(r));const i=c(t,["encoding"]);return i!=null&&f(e,["mimeType"],i),e}function EF(t){const e={},n=c(t,["gcsUri"]);n!=null&&f(e,["uri"],n);const r=c(t,["bytesBase64Encoded"]);r!=null&&f(e,["videoBytes"],jm(r));const i=c(t,["mimeType"]);return i!=null&&f(e,["mimeType"],i),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var $_;(function(t){t.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",t.OUTCOME_OK="OUTCOME_OK",t.OUTCOME_FAILED="OUTCOME_FAILED",t.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})($_||($_={}));var z_;(function(t){t.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",t.PYTHON="PYTHON"})(z_||(z_={}));var W_;(function(t){t.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",t.SILENT="SILENT",t.WHEN_IDLE="WHEN_IDLE",t.INTERRUPT="INTERRUPT"})(W_||(W_={}));var gn;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.STRING="STRING",t.NUMBER="NUMBER",t.INTEGER="INTEGER",t.BOOLEAN="BOOLEAN",t.ARRAY="ARRAY",t.OBJECT="OBJECT",t.NULL="NULL"})(gn||(gn={}));var K_;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(K_||(K_={}));var J_;(function(t){t.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",t.SIMPLE_SEARCH="SIMPLE_SEARCH",t.ELASTIC_SEARCH="ELASTIC_SEARCH"})(J_||(J_={}));var Y_;(function(t){t.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",t.NO_AUTH="NO_AUTH",t.API_KEY_AUTH="API_KEY_AUTH",t.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",t.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",t.OAUTH="OAUTH",t.OIDC_AUTH="OIDC_AUTH"})(Y_||(Y_={}));var j_;(function(t){t.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",t.HTTP_IN_QUERY="HTTP_IN_QUERY",t.HTTP_IN_HEADER="HTTP_IN_HEADER",t.HTTP_IN_PATH="HTTP_IN_PATH",t.HTTP_IN_BODY="HTTP_IN_BODY",t.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(j_||(j_={}));var Q_;(function(t){t.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",t.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",t.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",t.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(Q_||(Q_={}));var X_;(function(t){t.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH",t.MINIMAL="MINIMAL"})(X_||(X_={}));var Z_;(function(t){t.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",t.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",t.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",t.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",t.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",t.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",t.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",t.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",t.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(Z_||(Z_={}));var e0;(function(t){t.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",t.SEVERITY="SEVERITY",t.PROBABILITY="PROBABILITY"})(e0||(e0={}));var t0;(function(t){t.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE",t.OFF="OFF"})(t0||(t0={}));var n0;(function(t){t.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.LANGUAGE="LANGUAGE",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.SPII="SPII",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.IMAGE_SAFETY="IMAGE_SAFETY",t.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",t.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",t.NO_IMAGE="NO_IMAGE",t.IMAGE_RECITATION="IMAGE_RECITATION",t.IMAGE_OTHER="IMAGE_OTHER"})(n0||(n0={}));var r0;(function(t){t.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",t.NEGLIGIBLE="NEGLIGIBLE",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH"})(r0||(r0={}));var i0;(function(t){t.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",t.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",t.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",t.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",t.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(i0||(i0={}));var o0;(function(t){t.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",t.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",t.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",t.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",t.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(o0||(o0={}));var s0;(function(t){t.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",t.SAFETY="SAFETY",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.IMAGE_SAFETY="IMAGE_SAFETY",t.MODEL_ARMOR="MODEL_ARMOR",t.JAILBREAK="JAILBREAK"})(s0||(s0={}));var a0;(function(t){t.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",t.ON_DEMAND="ON_DEMAND",t.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(a0||(a0={}));var Zu;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.AUDIO="AUDIO"})(Zu||(Zu={}));var l0;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(l0||(l0={}));var u0;(function(t){t.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",t.TUNING_MODE_FULL="TUNING_MODE_FULL",t.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(u0||(u0={}));var c0;(function(t){t.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",t.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",t.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",t.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",t.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",t.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",t.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(c0||(c0={}));var Uh;(function(t){t.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",t.JOB_STATE_QUEUED="JOB_STATE_QUEUED",t.JOB_STATE_PENDING="JOB_STATE_PENDING",t.JOB_STATE_RUNNING="JOB_STATE_RUNNING",t.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",t.JOB_STATE_FAILED="JOB_STATE_FAILED",t.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",t.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",t.JOB_STATE_PAUSED="JOB_STATE_PAUSED",t.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",t.JOB_STATE_UPDATING="JOB_STATE_UPDATING",t.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(Uh||(Uh={}));var d0;(function(t){t.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",t.TUNING_TASK_I2V="TUNING_TASK_I2V",t.TUNING_TASK_T2V="TUNING_TASK_T2V",t.TUNING_TASK_R2V="TUNING_TASK_R2V"})(d0||(d0={}));var f0;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH",t.MEDIA_RESOLUTION_ULTRA_HIGH="MEDIA_RESOLUTION_ULTRA_HIGH"})(f0||(f0={}));var h0;(function(t){t.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",t.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",t.BALANCED="BALANCED",t.PRIORITIZE_COST="PRIORITIZE_COST"})(h0||(h0={}));var p0;(function(t){t.UNSPECIFIED="UNSPECIFIED",t.BLOCKING="BLOCKING",t.NON_BLOCKING="NON_BLOCKING"})(p0||(p0={}));var m0;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(m0||(m0={}));var g0;(function(t){t.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",t.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(g0||(g0={}));var y0;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.AUTO="AUTO",t.ANY="ANY",t.NONE="NONE",t.VALIDATED="VALIDATED"})(y0||(y0={}));var v0;(function(t){t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE"})(v0||(v0={}));var _0;(function(t){t.DONT_ALLOW="DONT_ALLOW",t.ALLOW_ADULT="ALLOW_ADULT",t.ALLOW_ALL="ALLOW_ALL"})(_0||(_0={}));var E0;(function(t){t.auto="auto",t.en="en",t.ja="ja",t.ko="ko",t.hi="hi",t.zh="zh",t.pt="pt",t.es="es"})(E0||(E0={}));var T0;(function(t){t.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",t.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",t.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",t.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",t.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(T0||(T0={}));var w0;(function(t){t.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",t.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",t.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",t.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(w0||(w0={}));var I0;(function(t){t.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",t.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",t.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",t.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(I0||(I0={}));var S0;(function(t){t.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",t.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",t.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",t.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",t.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",t.EDIT_MODE_STYLE="EDIT_MODE_STYLE",t.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",t.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(S0||(S0={}));var C0;(function(t){t.FOREGROUND="FOREGROUND",t.BACKGROUND="BACKGROUND",t.PROMPT="PROMPT",t.SEMANTIC="SEMANTIC",t.INTERACTIVE="INTERACTIVE"})(C0||(C0={}));var A0;(function(t){t.ASSET="ASSET",t.STYLE="STYLE"})(A0||(A0={}));var R0;(function(t){t.INSERT="INSERT",t.REMOVE="REMOVE",t.REMOVE_STATIC="REMOVE_STATIC",t.OUTPAINT="OUTPAINT"})(R0||(R0={}));var x0;(function(t){t.OPTIMIZED="OPTIMIZED",t.LOSSLESS="LOSSLESS"})(x0||(x0={}));var P0;(function(t){t.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",t.PREFERENCE_TUNING="PREFERENCE_TUNING"})(P0||(P0={}));var N0;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.STATE_PENDING="STATE_PENDING",t.STATE_ACTIVE="STATE_ACTIVE",t.STATE_FAILED="STATE_FAILED"})(N0||(N0={}));var k0;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.PROCESSING="PROCESSING",t.ACTIVE="ACTIVE",t.FAILED="FAILED"})(k0||(k0={}));var D0;(function(t){t.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",t.UPLOADED="UPLOADED",t.GENERATED="GENERATED"})(D0||(D0={}));var M0;(function(t){t.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.RESPONSE_REJECTED="RESPONSE_REJECTED",t.NEED_MORE_INPUT="NEED_MORE_INPUT"})(M0||(M0={}));var b0;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.VIDEO="VIDEO",t.AUDIO="AUDIO",t.DOCUMENT="DOCUMENT"})(b0||(b0={}));var L0;(function(t){t.VAD_SIGNAL_TYPE_UNSPECIFIED="VAD_SIGNAL_TYPE_UNSPECIFIED",t.VAD_SIGNAL_TYPE_SOS="VAD_SIGNAL_TYPE_SOS",t.VAD_SIGNAL_TYPE_EOS="VAD_SIGNAL_TYPE_EOS"})(L0||(L0={}));var V0;(function(t){t.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",t.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",t.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(V0||(V0={}));var U0;(function(t){t.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",t.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",t.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(U0||(U0={}));var F0;(function(t){t.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",t.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",t.NO_INTERRUPTION="NO_INTERRUPTION"})(F0||(F0={}));var O0;(function(t){t.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",t.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",t.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(O0||(O0={}));var B0;(function(t){t.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",t.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",t.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",t.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",t.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",t.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",t.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",t.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",t.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",t.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",t.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",t.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",t.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(B0||(B0={}));var G0;(function(t){t.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",t.QUALITY="QUALITY",t.DIVERSITY="DIVERSITY",t.VOCALIZATION="VOCALIZATION"})(G0||(G0={}));var mo;(function(t){t.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",t.PLAY="PLAY",t.PAUSE="PAUSE",t.STOP="STOP",t.RESET_CONTEXT="RESET_CONTEXT"})(mo||(mo={}));class Fh{constructor(e){const n={};for(const r of e.headers.entries())n[r[0]]=r[1];this.headers=n,this.responseInternal=e}json(){return this.responseInternal.json()}}class xs{get text(){var e,n,r,i,o,s,a,l;if(((i=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let u="",h=!1;const p=[];for(const m of(l=(a=(s=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||s===void 0?void 0:s.content)===null||a===void 0?void 0:a.parts)!==null&&l!==void 0?l:[]){for(const[_,E]of Object.entries(m))_!=="text"&&_!=="thought"&&_!=="thoughtSignature"&&(E!==null||E!==void 0)&&p.push(_);if(typeof m.text=="string"){if(typeof m.thought=="boolean"&&m.thought)continue;h=!0,u+=m.text}}return p.length>0&&console.warn(`there are non-text parts ${p} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),h?u:void 0}get data(){var e,n,r,i,o,s,a,l;if(((i=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let u="";const h=[];for(const p of(l=(a=(s=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||s===void 0?void 0:s.content)===null||a===void 0?void 0:a.parts)!==null&&l!==void 0?l:[]){for(const[m,_]of Object.entries(p))m!=="inlineData"&&(_!==null||_!==void 0)&&h.push(m);p.inlineData&&typeof p.inlineData.data=="string"&&(u+=atob(p.inlineData.data))}return h.length>0&&console.warn(`there are non-data parts ${h} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),u.length>0?btoa(u):void 0}get functionCalls(){var e,n,r,i,o,s,a,l;if(((i=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const u=(l=(a=(s=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||s===void 0?void 0:s.content)===null||a===void 0?void 0:a.parts)===null||l===void 0?void 0:l.filter(h=>h.functionCall).map(h=>h.functionCall).filter(h=>h!==void 0);if((u==null?void 0:u.length)!==0)return u}get executableCode(){var e,n,r,i,o,s,a,l,u;if(((i=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const h=(l=(a=(s=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||s===void 0?void 0:s.content)===null||a===void 0?void 0:a.parts)===null||l===void 0?void 0:l.filter(p=>p.executableCode).map(p=>p.executableCode).filter(p=>p!==void 0);if((h==null?void 0:h.length)!==0)return(u=h==null?void 0:h[0])===null||u===void 0?void 0:u.code}get codeExecutionResult(){var e,n,r,i,o,s,a,l,u;if(((i=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const h=(l=(a=(s=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||s===void 0?void 0:s.content)===null||a===void 0?void 0:a.parts)===null||l===void 0?void 0:l.filter(p=>p.codeExecutionResult).map(p=>p.codeExecutionResult).filter(p=>p!==void 0);if((h==null?void 0:h.length)!==0)return(u=h==null?void 0:h[0])===null||u===void 0?void 0:u.output}}class H0{}class q0{}class TF{}class wF{}class IF{}class SF{}class $0{}class z0{}class W0{}class CF{}class ec{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const r=new ec;let i;const o=e;return n?i=uF(o):i=lF(o),Object.assign(r,i),r}}class K0{}class J0{}class Y0{}class j0{}class AF{}class RF{}class xF{}class Qm{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const r=new Qm,o=gF(e);return Object.assign(r,o),r}}class PF{}class NF{}class kF{}class Q0{}class DF{get text(){var e,n,r;let i="",o=!1;const s=[];for(const a of(r=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&r!==void 0?r:[]){for(const[l,u]of Object.entries(a))l!=="text"&&l!=="thought"&&u!==null&&s.push(l);if(typeof a.text=="string"){if(typeof a.thought=="boolean"&&a.thought)continue;o=!0,i+=a.text}}return s.length>0&&console.warn(`there are non-text parts ${s} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),o?i:void 0}get data(){var e,n,r;let i="";const o=[];for(const s of(r=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&r!==void 0?r:[]){for(const[a,l]of Object.entries(s))a!=="inlineData"&&l!==null&&o.push(a);s.inlineData&&typeof s.inlineData.data=="string"&&(i+=atob(s.inlineData.data))}return o.length>0&&console.warn(`there are non-data parts ${o} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),i.length>0?btoa(i):void 0}}class MF{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class Xm{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const r=new Xm,o=CC(e);return Object.assign(r,o),r}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function pe(t,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(e.includes("..")||e.includes("?")||e.includes("&"))throw new Error("invalid model parameter");if(t.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const n=e.split("/",2);return`publishers/${n[0]}/models/${n[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function AC(t,e){const n=pe(t,e);return n?n.startsWith("publishers/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}`:n.startsWith("models/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/publishers/google/${n}`:n:""}function RC(t){return Array.isArray(t)?t.map(e=>tc(e)):[tc(t)]}function tc(t){if(typeof t=="object"&&t!==null)return t;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof t}`)}function xC(t){const e=tc(t);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function PC(t){const e=tc(t);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function X0(t){if(t==null)throw new Error("PartUnion is required");if(typeof t=="object")return t;if(typeof t=="string")return{text:t};throw new Error(`Unsupported part type: ${typeof t}`)}function NC(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("PartListUnion is required");return Array.isArray(t)?t.map(e=>X0(e)):[X0(t)]}function Oh(t){return t!=null&&typeof t=="object"&&"parts"in t&&Array.isArray(t.parts)}function Z0(t){return t!=null&&typeof t=="object"&&"functionCall"in t}function eE(t){return t!=null&&typeof t=="object"&&"functionResponse"in t}function It(t){if(t==null)throw new Error("ContentUnion is required");return Oh(t)?t:{role:"user",parts:NC(t)}}function Zm(t,e){if(!e)return[];if(t.isVertexAI()&&Array.isArray(e))return e.flatMap(n=>{const r=It(n);return r.parts&&r.parts.length>0&&r.parts[0].text!==void 0?[r.parts[0].text]:[]});if(t.isVertexAI()){const n=It(e);return n.parts&&n.parts.length>0&&n.parts[0].text!==void 0?[n.parts[0].text]:[]}return Array.isArray(e)?e.map(n=>It(n)):[It(e)]}function an(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("contents are required");if(!Array.isArray(t)){if(Z0(t)||eE(t))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[It(t)]}const e=[],n=[],r=Oh(t[0]);for(const i of t){const o=Oh(i);if(o!=r)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(o)e.push(i);else{if(Z0(i)||eE(i))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");n.push(i)}}return r||e.push({role:"user",parts:NC(n)}),e}function bF(t,e){t.includes("null")&&(e.nullable=!0);const n=t.filter(r=>r!=="null");if(n.length===1)e.type=Object.values(gn).includes(n[0].toUpperCase())?n[0].toUpperCase():gn.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const r of n)e.anyOf.push({type:Object.values(gn).includes(r.toUpperCase())?r.toUpperCase():gn.TYPE_UNSPECIFIED})}}function Ro(t){const e={},n=["items"],r=["anyOf"],i=["properties"];if(t.type&&t.anyOf)throw new Error("type and anyOf cannot be both populated.");const o=t.anyOf;o!=null&&o.length==2&&(o[0].type==="null"?(e.nullable=!0,t=o[1]):o[1].type==="null"&&(e.nullable=!0,t=o[0])),t.type instanceof Array&&bF(t.type,e);for(const[s,a]of Object.entries(t))if(a!=null)if(s=="type"){if(a==="null")throw new Error("type: null can not be the only possible type for the field.");if(a instanceof Array)continue;e.type=Object.values(gn).includes(a.toUpperCase())?a.toUpperCase():gn.TYPE_UNSPECIFIED}else if(n.includes(s))e[s]=Ro(a);else if(r.includes(s)){const l=[];for(const u of a){if(u.type=="null"){e.nullable=!0;continue}l.push(Ro(u))}e[s]=l}else if(i.includes(s)){const l={};for(const[u,h]of Object.entries(a))l[u]=Ro(h);e[s]=l}else{if(s==="additionalProperties")continue;e[s]=a}return e}function eg(t){return Ro(t)}function tg(t){if(typeof t=="object")return t;if(typeof t=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:t}}};throw new Error(`Unsupported speechConfig type: ${typeof t}`)}function ng(t){if("multiSpeakerVoiceConfig"in t)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return t}function ts(t){if(t.functionDeclarations)for(const e of t.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=Ro(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=Ro(e.response));return t}function ns(t){if(t==null)throw new Error("tools is required");if(!Array.isArray(t))throw new Error("tools is required and must be an array of Tools");const e=[];for(const n of t)e.push(n);return e}function LF(t,e,n,r=1){const i=!e.startsWith(`${n}/`)&&e.split("/").length===r;return t.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${t.getProject()}/${e}`:e.startsWith(`${n}/`)?`projects/${t.getProject()}/locations/${t.getLocation()}/${e}`:i?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}/${e}`:e:i?`${n}/${e}`:e}function pr(t,e){if(typeof e!="string")throw new Error("name must be a string");return LF(t,e,"cachedContents")}function kC(t){switch(t){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return t}}function si(t){return jm(t)}function VF(t){return t!=null&&typeof t=="object"&&"name"in t}function UF(t){return t!=null&&typeof t=="object"&&"video"in t}function FF(t){return t!=null&&typeof t=="object"&&"uri"in t}function DC(t){var e;let n;if(VF(t)&&(n=t.name),!(FF(t)&&(n=t.uri,n===void 0))&&!(UF(t)&&(n=(e=t.video)===null||e===void 0?void 0:e.uri,n===void 0))){if(typeof t=="string"&&(n=t),n===void 0)throw new Error("Could not extract file name from the provided input.");if(n.startsWith("https://")){const i=n.split("files/")[1].match(/[a-z0-9]+/);if(i===null)throw new Error(`Could not extract file name from URI ${n}`);n=i[0]}else n.startsWith("files/")&&(n=n.split("files/")[1]);return n}}function MC(t,e){let n;return t.isVertexAI()?n=e?"publishers/google/models":"models":n=e?"models":"tunedModels",n}function bC(t){for(const e of["models","tunedModels","publisherModels"])if(OF(t,e))return t[e];return[]}function OF(t,e){return t!==null&&typeof t=="object"&&e in t}function BF(t,e={}){const n=t,r={name:n.name,description:n.description,parametersJsonSchema:n.inputSchema};return n.outputSchema&&(r.responseJsonSchema=n.outputSchema),e.behavior&&(r.behavior=e.behavior),{functionDeclarations:[r]}}function GF(t,e={}){const n=[],r=new Set;for(const i of t){const o=i.name;if(r.has(o))throw new Error(`Duplicate function name ${o} found in MCP tools. Please ensure function names are unique.`);r.add(o);const s=BF(i,e);s.functionDeclarations&&n.push(...s.functionDeclarations)}return{functionDeclarations:n}}function LC(t,e){let n;if(typeof e=="string")if(t.isVertexAI())if(e.startsWith("gs://"))n={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))n={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))n={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(t.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");n={inlinedRequests:e}}else n=e;const r=[n.gcsUri,n.bigqueryUri].filter(Boolean).length,i=[n.inlinedRequests,n.fileName].filter(Boolean).length;if(t.isVertexAI()){if(i>0||r!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(r>0||i!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return n}function HF(t){if(typeof t!="string")return t;const e=t;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function VC(t){if(typeof t!="object"||t===null)return{};const e=t,n=e.inlinedResponses;if(typeof n!="object"||n===null)return t;const i=n.inlinedResponses;if(!Array.isArray(i)||i.length===0)return t;let o=!1;for(const s of i){if(typeof s!="object"||s===null)continue;const l=s.response;if(typeof l!="object"||l===null)continue;if(l.embedding!==void 0){o=!0;break}}return o&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),t}function rs(t,e){const n=e;if(!t.isVertexAI()){if(/batches\/[^/]+$/.test(n))return n.split("/").pop();throw new Error(`Invalid batch job name: ${n}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(n))return n.split("/").pop();if(/^\d+$/.test(n))return n;throw new Error(`Invalid batch job name: ${n}.`)}function UC(t){const e=t;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function qF(t){const e={},n=c(t,["responsesFile"]);n!=null&&f(e,["fileName"],n);const r=c(t,["inlinedResponses","inlinedResponses"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(s=>I2(s))),f(e,["inlinedResponses"],o)}const i=c(t,["inlinedEmbedContentResponses","inlinedResponses"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>s)),f(e,["inlinedEmbedContentResponses"],o)}return e}function $F(t){const e={},n=c(t,["predictionsFormat"]);n!=null&&f(e,["format"],n);const r=c(t,["gcsDestination","outputUriPrefix"]);r!=null&&f(e,["gcsUri"],r);const i=c(t,["bigqueryDestination","outputUri"]);return i!=null&&f(e,["bigqueryUri"],i),e}function zF(t){const e={},n=c(t,["format"]);n!=null&&f(e,["predictionsFormat"],n);const r=c(t,["gcsUri"]);r!=null&&f(e,["gcsDestination","outputUriPrefix"],r);const i=c(t,["bigqueryUri"]);if(i!=null&&f(e,["bigqueryDestination","outputUri"],i),c(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(c(t,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(c(t,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function uu(t){const e={},n=c(t,["name"]);n!=null&&f(e,["name"],n);const r=c(t,["metadata","displayName"]);r!=null&&f(e,["displayName"],r);const i=c(t,["metadata","state"]);i!=null&&f(e,["state"],UC(i));const o=c(t,["metadata","createTime"]);o!=null&&f(e,["createTime"],o);const s=c(t,["metadata","endTime"]);s!=null&&f(e,["endTime"],s);const a=c(t,["metadata","updateTime"]);a!=null&&f(e,["updateTime"],a);const l=c(t,["metadata","model"]);l!=null&&f(e,["model"],l);const u=c(t,["metadata","output"]);return u!=null&&f(e,["dest"],qF(VC(u))),e}function Bh(t){const e={},n=c(t,["name"]);n!=null&&f(e,["name"],n);const r=c(t,["displayName"]);r!=null&&f(e,["displayName"],r);const i=c(t,["state"]);i!=null&&f(e,["state"],UC(i));const o=c(t,["error"]);o!=null&&f(e,["error"],o);const s=c(t,["createTime"]);s!=null&&f(e,["createTime"],s);const a=c(t,["startTime"]);a!=null&&f(e,["startTime"],a);const l=c(t,["endTime"]);l!=null&&f(e,["endTime"],l);const u=c(t,["updateTime"]);u!=null&&f(e,["updateTime"],u);const h=c(t,["model"]);h!=null&&f(e,["model"],h);const p=c(t,["inputConfig"]);p!=null&&f(e,["src"],WF(p));const m=c(t,["outputConfig"]);m!=null&&f(e,["dest"],$F(VC(m)));const _=c(t,["completionStats"]);return _!=null&&f(e,["completionStats"],_),e}function WF(t){const e={},n=c(t,["instancesFormat"]);n!=null&&f(e,["format"],n);const r=c(t,["gcsSource","uris"]);r!=null&&f(e,["gcsUri"],r);const i=c(t,["bigquerySource","inputUri"]);return i!=null&&f(e,["bigqueryUri"],i),e}function KF(t,e){const n={};if(c(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(c(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(c(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const r=c(e,["fileName"]);r!=null&&f(n,["fileName"],r);const i=c(e,["inlinedRequests"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>w2(t,s))),f(n,["requests","requests"],o)}return n}function JF(t){const e={},n=c(t,["format"]);n!=null&&f(e,["instancesFormat"],n);const r=c(t,["gcsUri"]);r!=null&&f(e,["gcsSource","uris"],r);const i=c(t,["bigqueryUri"]);if(i!=null&&f(e,["bigquerySource","inputUri"],i),c(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(c(t,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function YF(t){const e={},n=c(t,["data"]);if(n!=null&&f(e,["data"],n),c(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=c(t,["mimeType"]);return r!=null&&f(e,["mimeType"],r),e}function jF(t,e){const n={},r=c(e,["name"]);return r!=null&&f(n,["_url","name"],rs(t,r)),n}function QF(t,e){const n={},r=c(e,["name"]);return r!=null&&f(n,["_url","name"],rs(t,r)),n}function XF(t){const e={},n=c(t,["content"]);n!=null&&f(e,["content"],n);const r=c(t,["citationMetadata"]);r!=null&&f(e,["citationMetadata"],ZF(r));const i=c(t,["tokenCount"]);i!=null&&f(e,["tokenCount"],i);const o=c(t,["finishReason"]);o!=null&&f(e,["finishReason"],o);const s=c(t,["avgLogprobs"]);s!=null&&f(e,["avgLogprobs"],s);const a=c(t,["groundingMetadata"]);a!=null&&f(e,["groundingMetadata"],a);const l=c(t,["index"]);l!=null&&f(e,["index"],l);const u=c(t,["logprobsResult"]);u!=null&&f(e,["logprobsResult"],u);const h=c(t,["safetyRatings"]);if(h!=null){let m=h;Array.isArray(m)&&(m=m.map(_=>_)),f(e,["safetyRatings"],m)}const p=c(t,["urlContextMetadata"]);return p!=null&&f(e,["urlContextMetadata"],p),e}function ZF(t){const e={},n=c(t,["citationSources"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>i)),f(e,["citations"],r)}return e}function FC(t){const e={},n=c(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>N2(o))),f(e,["parts"],i)}const r=c(t,["role"]);return r!=null&&f(e,["role"],r),e}function e2(t,e){const n={},r=c(t,["displayName"]);if(e!==void 0&&r!=null&&f(e,["batch","displayName"],r),c(t,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return n}function t2(t,e){const n={},r=c(t,["displayName"]);e!==void 0&&r!=null&&f(e,["displayName"],r);const i=c(t,["dest"]);return e!==void 0&&i!=null&&f(e,["outputConfig"],zF(HF(i))),n}function tE(t,e){const n={},r=c(e,["model"]);r!=null&&f(n,["_url","model"],pe(t,r));const i=c(e,["src"]);i!=null&&f(n,["batch","inputConfig"],KF(t,LC(t,i)));const o=c(e,["config"]);return o!=null&&e2(o,n),n}function n2(t,e){const n={},r=c(e,["model"]);r!=null&&f(n,["model"],pe(t,r));const i=c(e,["src"]);i!=null&&f(n,["inputConfig"],JF(LC(t,i)));const o=c(e,["config"]);return o!=null&&t2(o,n),n}function r2(t,e){const n={},r=c(t,["displayName"]);return e!==void 0&&r!=null&&f(e,["batch","displayName"],r),n}function i2(t,e){const n={},r=c(e,["model"]);r!=null&&f(n,["_url","model"],pe(t,r));const i=c(e,["src"]);i!=null&&f(n,["batch","inputConfig"],d2(t,i));const o=c(e,["config"]);return o!=null&&r2(o,n),n}function o2(t,e){const n={},r=c(e,["name"]);return r!=null&&f(n,["_url","name"],rs(t,r)),n}function s2(t,e){const n={},r=c(e,["name"]);return r!=null&&f(n,["_url","name"],rs(t,r)),n}function a2(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const r=c(t,["name"]);r!=null&&f(e,["name"],r);const i=c(t,["done"]);i!=null&&f(e,["done"],i);const o=c(t,["error"]);return o!=null&&f(e,["error"],o),e}function l2(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const r=c(t,["name"]);r!=null&&f(e,["name"],r);const i=c(t,["done"]);i!=null&&f(e,["done"],i);const o=c(t,["error"]);return o!=null&&f(e,["error"],o),e}function u2(t,e){const n={},r=c(e,["contents"]);if(r!=null){let o=Zm(t,r);Array.isArray(o)&&(o=o.map(s=>s)),f(n,["requests[]","request","content"],o)}const i=c(e,["config"]);return i!=null&&(f(n,["_self"],c2(i,n)),sF(n,{"requests[].*":"requests[].request.*"})),n}function c2(t,e){const n={},r=c(t,["taskType"]);e!==void 0&&r!=null&&f(e,["requests[]","taskType"],r);const i=c(t,["title"]);e!==void 0&&i!=null&&f(e,["requests[]","title"],i);const o=c(t,["outputDimensionality"]);if(e!==void 0&&o!=null&&f(e,["requests[]","outputDimensionality"],o),c(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(c(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function d2(t,e){const n={},r=c(e,["fileName"]);r!=null&&f(n,["file_name"],r);const i=c(e,["inlinedRequests"]);return i!=null&&f(n,["requests"],u2(t,i)),n}function f2(t){const e={};if(c(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=c(t,["fileUri"]);n!=null&&f(e,["fileUri"],n);const r=c(t,["mimeType"]);return r!=null&&f(e,["mimeType"],r),e}function h2(t){const e={},n=c(t,["id"]);n!=null&&f(e,["id"],n);const r=c(t,["args"]);r!=null&&f(e,["args"],r);const i=c(t,["name"]);if(i!=null&&f(e,["name"],i),c(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(c(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function p2(t){const e={},n=c(t,["mode"]);n!=null&&f(e,["mode"],n);const r=c(t,["allowedFunctionNames"]);if(r!=null&&f(e,["allowedFunctionNames"],r),c(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function m2(t,e,n){const r={},i=c(e,["systemInstruction"]);n!==void 0&&i!=null&&f(n,["systemInstruction"],FC(It(i)));const o=c(e,["temperature"]);o!=null&&f(r,["temperature"],o);const s=c(e,["topP"]);s!=null&&f(r,["topP"],s);const a=c(e,["topK"]);a!=null&&f(r,["topK"],a);const l=c(e,["candidateCount"]);l!=null&&f(r,["candidateCount"],l);const u=c(e,["maxOutputTokens"]);u!=null&&f(r,["maxOutputTokens"],u);const h=c(e,["stopSequences"]);h!=null&&f(r,["stopSequences"],h);const p=c(e,["responseLogprobs"]);p!=null&&f(r,["responseLogprobs"],p);const m=c(e,["logprobs"]);m!=null&&f(r,["logprobs"],m);const _=c(e,["presencePenalty"]);_!=null&&f(r,["presencePenalty"],_);const E=c(e,["frequencyPenalty"]);E!=null&&f(r,["frequencyPenalty"],E);const P=c(e,["seed"]);P!=null&&f(r,["seed"],P);const x=c(e,["responseMimeType"]);x!=null&&f(r,["responseMimeType"],x);const I=c(e,["responseSchema"]);I!=null&&f(r,["responseSchema"],eg(I));const T=c(e,["responseJsonSchema"]);if(T!=null&&f(r,["responseJsonSchema"],T),c(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(c(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const C=c(e,["safetySettings"]);if(n!==void 0&&C!=null){let k=C;Array.isArray(k)&&(k=k.map(ge=>k2(ge))),f(n,["safetySettings"],k)}const M=c(e,["tools"]);if(n!==void 0&&M!=null){let k=ns(M);Array.isArray(k)&&(k=k.map(ge=>M2(ts(ge)))),f(n,["tools"],k)}const U=c(e,["toolConfig"]);if(n!==void 0&&U!=null&&f(n,["toolConfig"],D2(U)),c(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const L=c(e,["cachedContent"]);n!==void 0&&L!=null&&f(n,["cachedContent"],pr(t,L));const R=c(e,["responseModalities"]);R!=null&&f(r,["responseModalities"],R);const w=c(e,["mediaResolution"]);w!=null&&f(r,["mediaResolution"],w);const A=c(e,["speechConfig"]);if(A!=null&&f(r,["speechConfig"],tg(A)),c(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const N=c(e,["thinkingConfig"]);N!=null&&f(r,["thinkingConfig"],N);const D=c(e,["imageConfig"]);D!=null&&f(r,["imageConfig"],T2(D));const b=c(e,["enableEnhancedCivicAnswers"]);return b!=null&&f(r,["enableEnhancedCivicAnswers"],b),r}function g2(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const r=c(t,["candidates"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(u=>XF(u))),f(e,["candidates"],l)}const i=c(t,["modelVersion"]);i!=null&&f(e,["modelVersion"],i);const o=c(t,["promptFeedback"]);o!=null&&f(e,["promptFeedback"],o);const s=c(t,["responseId"]);s!=null&&f(e,["responseId"],s);const a=c(t,["usageMetadata"]);return a!=null&&f(e,["usageMetadata"],a),e}function y2(t,e){const n={},r=c(e,["name"]);return r!=null&&f(n,["_url","name"],rs(t,r)),n}function v2(t,e){const n={},r=c(e,["name"]);return r!=null&&f(n,["_url","name"],rs(t,r)),n}function _2(t){const e={};if(c(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=c(t,["enableWidget"]);return n!=null&&f(e,["enableWidget"],n),e}function E2(t){const e={};if(c(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(c(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=c(t,["timeRangeFilter"]);return n!=null&&f(e,["timeRangeFilter"],n),e}function T2(t){const e={},n=c(t,["aspectRatio"]);n!=null&&f(e,["aspectRatio"],n);const r=c(t,["imageSize"]);if(r!=null&&f(e,["imageSize"],r),c(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(c(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function w2(t,e){const n={},r=c(e,["model"]);r!=null&&f(n,["request","model"],pe(t,r));const i=c(e,["contents"]);if(i!=null){let a=an(i);Array.isArray(a)&&(a=a.map(l=>FC(l))),f(n,["request","contents"],a)}const o=c(e,["metadata"]);o!=null&&f(n,["metadata"],o);const s=c(e,["config"]);return s!=null&&f(n,["request","generationConfig"],m2(t,s,c(n,["request"],{}))),n}function I2(t){const e={},n=c(t,["response"]);n!=null&&f(e,["response"],g2(n));const r=c(t,["error"]);return r!=null&&f(e,["error"],r),e}function S2(t,e){const n={},r=c(t,["pageSize"]);e!==void 0&&r!=null&&f(e,["_query","pageSize"],r);const i=c(t,["pageToken"]);if(e!==void 0&&i!=null&&f(e,["_query","pageToken"],i),c(t,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return n}function C2(t,e){const n={},r=c(t,["pageSize"]);e!==void 0&&r!=null&&f(e,["_query","pageSize"],r);const i=c(t,["pageToken"]);e!==void 0&&i!=null&&f(e,["_query","pageToken"],i);const o=c(t,["filter"]);return e!==void 0&&o!=null&&f(e,["_query","filter"],o),n}function A2(t){const e={},n=c(t,["config"]);return n!=null&&S2(n,e),e}function R2(t){const e={},n=c(t,["config"]);return n!=null&&C2(n,e),e}function x2(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const r=c(t,["nextPageToken"]);r!=null&&f(e,["nextPageToken"],r);const i=c(t,["operations"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>uu(s))),f(e,["batchJobs"],o)}return e}function P2(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const r=c(t,["nextPageToken"]);r!=null&&f(e,["nextPageToken"],r);const i=c(t,["batchPredictionJobs"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>Bh(s))),f(e,["batchJobs"],o)}return e}function N2(t){const e={},n=c(t,["mediaResolution"]);n!=null&&f(e,["mediaResolution"],n);const r=c(t,["codeExecutionResult"]);r!=null&&f(e,["codeExecutionResult"],r);const i=c(t,["executableCode"]);i!=null&&f(e,["executableCode"],i);const o=c(t,["fileData"]);o!=null&&f(e,["fileData"],f2(o));const s=c(t,["functionCall"]);s!=null&&f(e,["functionCall"],h2(s));const a=c(t,["functionResponse"]);a!=null&&f(e,["functionResponse"],a);const l=c(t,["inlineData"]);l!=null&&f(e,["inlineData"],YF(l));const u=c(t,["text"]);u!=null&&f(e,["text"],u);const h=c(t,["thought"]);h!=null&&f(e,["thought"],h);const p=c(t,["thoughtSignature"]);p!=null&&f(e,["thoughtSignature"],p);const m=c(t,["videoMetadata"]);return m!=null&&f(e,["videoMetadata"],m),e}function k2(t){const e={},n=c(t,["category"]);if(n!=null&&f(e,["category"],n),c(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const r=c(t,["threshold"]);return r!=null&&f(e,["threshold"],r),e}function D2(t){const e={},n=c(t,["functionCallingConfig"]);n!=null&&f(e,["functionCallingConfig"],p2(n));const r=c(t,["retrievalConfig"]);return r!=null&&f(e,["retrievalConfig"],r),e}function M2(t){const e={},n=c(t,["functionDeclarations"]);if(n!=null){let h=n;Array.isArray(h)&&(h=h.map(p=>p)),f(e,["functionDeclarations"],h)}if(c(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=c(t,["googleSearchRetrieval"]);r!=null&&f(e,["googleSearchRetrieval"],r);const i=c(t,["computerUse"]);i!=null&&f(e,["computerUse"],i);const o=c(t,["fileSearch"]);o!=null&&f(e,["fileSearch"],o);const s=c(t,["codeExecution"]);if(s!=null&&f(e,["codeExecution"],s),c(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=c(t,["googleMaps"]);a!=null&&f(e,["googleMaps"],_2(a));const l=c(t,["googleSearch"]);l!=null&&f(e,["googleSearch"],E2(l));const u=c(t,["urlContext"]);return u!=null&&f(e,["urlContext"],u),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var cr;(function(t){t.PAGED_ITEM_BATCH_JOBS="batchJobs",t.PAGED_ITEM_MODELS="models",t.PAGED_ITEM_TUNING_JOBS="tuningJobs",t.PAGED_ITEM_FILES="files",t.PAGED_ITEM_CACHED_CONTENTS="cachedContents",t.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",t.PAGED_ITEM_DOCUMENTS="documents"})(cr||(cr={}));class $i{constructor(e,n,r,i){this.pageInternal=[],this.paramsInternal={},this.requestInternal=n,this.init(e,r,i)}init(e,n,r){var i,o;this.nameInternal=e,this.pageInternal=n[this.nameInternal]||[],this.sdkHttpResponseInternal=n==null?void 0:n.sdkHttpResponse,this.idxInternal=0;let s={config:{}};!r||Object.keys(r).length===0?s={config:{}}:typeof r=="object"?s=Object.assign({},r):s=r,s.config&&(s.config.pageToken=n.nextPageToken),this.paramsInternal=s,this.pageInternalSize=(o=(i=s.config)===null||i===void 0?void 0:i.pageSize)!==null&&o!==void 0?o:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class b2 extends hr{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new $i(cr.PAGED_ITEM_BATCH_JOBS,r=>this.listInternal(r),await this.listInternal(n),n),this.create=async n=>(this.apiClient.isVertexAI()&&(n.config=this.formatDestination(n.src,n.config)),this.createInternal(n)),this.createEmbeddings=async n=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(n)}}createInlinedGenerateContentRequest(e){const n=tE(this.apiClient,e),r=n._url,i=W("{model}:batchGenerateContent",r),a=n.batch.inputConfig.requests,l=a.requests,u=[];for(const h of l){const p=Object.assign({},h);if(p.systemInstruction){const m=p.systemInstruction;delete p.systemInstruction;const _=p.request;_.systemInstruction=m,p.request=_}u.push(p)}return a.requests=u,delete n.config,delete n._url,delete n._query,{path:i,body:n}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,n){const r=n?Object.assign({},n):{},i=Date.now().toString();if(r.displayName||(r.displayName=`genaiBatchJob_${i}`),r.dest===void 0){const o=this.getGcsUri(e),s=this.getBigqueryUri(e);if(o)o.endsWith(".jsonl")?r.dest=`${o.slice(0,-6)}/dest`:r.dest=`${o}_dest_${i}`;else if(s)r.dest=`${s}_dest_${i}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return r}async createInternal(e){var n,r,i,o;let s,a="",l={};if(this.apiClient.isVertexAI()){const u=n2(this.apiClient,e);return a=W("batchPredictionJobs",u._url),l=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),s.then(h=>Bh(h))}else{const u=tE(this.apiClient,e);return a=W("{model}:batchGenerateContent",u._url),l=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),s.then(h=>uu(h))}}async createEmbeddingsInternal(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=i2(this.apiClient,e);return o=W("{model}:asyncBatchEmbedContent",a._url),s=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i.then(l=>uu(l))}}async get(e){var n,r,i,o;let s,a="",l={};if(this.apiClient.isVertexAI()){const u=v2(this.apiClient,e);return a=W("batchPredictionJobs/{name}",u._url),l=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),s.then(h=>Bh(h))}else{const u=y2(this.apiClient,e);return a=W("batches/{name}",u._url),l=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),s.then(h=>uu(h))}}async cancel(e){var n,r,i,o;let s="",a={};if(this.apiClient.isVertexAI()){const l=QF(this.apiClient,e);s=W("batchPredictionJobs/{name}:cancel",l._url),a=l._query,delete l._url,delete l._query,await this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal})}else{const l=jF(this.apiClient,e);s=W("batches/{name}:cancel",l._url),a=l._query,delete l._url,delete l._query,await this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal})}}async listInternal(e){var n,r,i,o;let s,a="",l={};if(this.apiClient.isVertexAI()){const u=R2(e);return a=W("batchPredictionJobs",u._url),l=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),s.then(h=>{const p=P2(h),m=new Q0;return Object.assign(m,p),m})}else{const u=A2(e);return a=W("batches",u._url),l=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),s.then(h=>{const p=x2(h),m=new Q0;return Object.assign(m,p),m})}}async delete(e){var n,r,i,o;let s,a="",l={};if(this.apiClient.isVertexAI()){const u=s2(this.apiClient,e);return a=W("batchPredictionJobs/{name}",u._url),l=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),s.then(h=>l2(h))}else{const u=o2(this.apiClient,e);return a=W("batches/{name}",u._url),l=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),s.then(h=>a2(h))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function L2(t){const e={},n=c(t,["data"]);if(n!=null&&f(e,["data"],n),c(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=c(t,["mimeType"]);return r!=null&&f(e,["mimeType"],r),e}function nE(t){const e={},n=c(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>iO(o))),f(e,["parts"],i)}const r=c(t,["role"]);return r!=null&&f(e,["role"],r),e}function V2(t,e){const n={},r=c(t,["ttl"]);e!==void 0&&r!=null&&f(e,["ttl"],r);const i=c(t,["expireTime"]);e!==void 0&&i!=null&&f(e,["expireTime"],i);const o=c(t,["displayName"]);e!==void 0&&o!=null&&f(e,["displayName"],o);const s=c(t,["contents"]);if(e!==void 0&&s!=null){let h=an(s);Array.isArray(h)&&(h=h.map(p=>nE(p))),f(e,["contents"],h)}const a=c(t,["systemInstruction"]);e!==void 0&&a!=null&&f(e,["systemInstruction"],nE(It(a)));const l=c(t,["tools"]);if(e!==void 0&&l!=null){let h=l;Array.isArray(h)&&(h=h.map(p=>sO(p))),f(e,["tools"],h)}const u=c(t,["toolConfig"]);if(e!==void 0&&u!=null&&f(e,["toolConfig"],oO(u)),c(t,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return n}function U2(t,e){const n={},r=c(t,["ttl"]);e!==void 0&&r!=null&&f(e,["ttl"],r);const i=c(t,["expireTime"]);e!==void 0&&i!=null&&f(e,["expireTime"],i);const o=c(t,["displayName"]);e!==void 0&&o!=null&&f(e,["displayName"],o);const s=c(t,["contents"]);if(e!==void 0&&s!=null){let p=an(s);Array.isArray(p)&&(p=p.map(m=>m)),f(e,["contents"],p)}const a=c(t,["systemInstruction"]);e!==void 0&&a!=null&&f(e,["systemInstruction"],It(a));const l=c(t,["tools"]);if(e!==void 0&&l!=null){let p=l;Array.isArray(p)&&(p=p.map(m=>aO(m))),f(e,["tools"],p)}const u=c(t,["toolConfig"]);e!==void 0&&u!=null&&f(e,["toolConfig"],u);const h=c(t,["kmsKeyName"]);return e!==void 0&&h!=null&&f(e,["encryption_spec","kmsKeyName"],h),n}function F2(t,e){const n={},r=c(e,["model"]);r!=null&&f(n,["model"],AC(t,r));const i=c(e,["config"]);return i!=null&&V2(i,n),n}function O2(t,e){const n={},r=c(e,["model"]);r!=null&&f(n,["model"],AC(t,r));const i=c(e,["config"]);return i!=null&&U2(i,n),n}function B2(t,e){const n={},r=c(e,["name"]);return r!=null&&f(n,["_url","name"],pr(t,r)),n}function G2(t,e){const n={},r=c(e,["name"]);return r!=null&&f(n,["_url","name"],pr(t,r)),n}function H2(t){const e={},n=c(t,["sdkHttpResponse"]);return n!=null&&f(e,["sdkHttpResponse"],n),e}function q2(t){const e={},n=c(t,["sdkHttpResponse"]);return n!=null&&f(e,["sdkHttpResponse"],n),e}function $2(t){const e={};if(c(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=c(t,["fileUri"]);n!=null&&f(e,["fileUri"],n);const r=c(t,["mimeType"]);return r!=null&&f(e,["mimeType"],r),e}function z2(t){const e={},n=c(t,["id"]);n!=null&&f(e,["id"],n);const r=c(t,["args"]);r!=null&&f(e,["args"],r);const i=c(t,["name"]);if(i!=null&&f(e,["name"],i),c(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(c(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function W2(t){const e={},n=c(t,["mode"]);n!=null&&f(e,["mode"],n);const r=c(t,["allowedFunctionNames"]);if(r!=null&&f(e,["allowedFunctionNames"],r),c(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function K2(t){const e={};if(c(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=c(t,["description"]);n!=null&&f(e,["description"],n);const r=c(t,["name"]);r!=null&&f(e,["name"],r);const i=c(t,["parameters"]);i!=null&&f(e,["parameters"],i);const o=c(t,["parametersJsonSchema"]);o!=null&&f(e,["parametersJsonSchema"],o);const s=c(t,["response"]);s!=null&&f(e,["response"],s);const a=c(t,["responseJsonSchema"]);return a!=null&&f(e,["responseJsonSchema"],a),e}function J2(t,e){const n={},r=c(e,["name"]);return r!=null&&f(n,["_url","name"],pr(t,r)),n}function Y2(t,e){const n={},r=c(e,["name"]);return r!=null&&f(n,["_url","name"],pr(t,r)),n}function j2(t){const e={};if(c(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=c(t,["enableWidget"]);return n!=null&&f(e,["enableWidget"],n),e}function Q2(t){const e={};if(c(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(c(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=c(t,["timeRangeFilter"]);return n!=null&&f(e,["timeRangeFilter"],n),e}function X2(t,e){const n={},r=c(t,["pageSize"]);e!==void 0&&r!=null&&f(e,["_query","pageSize"],r);const i=c(t,["pageToken"]);return e!==void 0&&i!=null&&f(e,["_query","pageToken"],i),n}function Z2(t,e){const n={},r=c(t,["pageSize"]);e!==void 0&&r!=null&&f(e,["_query","pageSize"],r);const i=c(t,["pageToken"]);return e!==void 0&&i!=null&&f(e,["_query","pageToken"],i),n}function eO(t){const e={},n=c(t,["config"]);return n!=null&&X2(n,e),e}function tO(t){const e={},n=c(t,["config"]);return n!=null&&Z2(n,e),e}function nO(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const r=c(t,["nextPageToken"]);r!=null&&f(e,["nextPageToken"],r);const i=c(t,["cachedContents"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>s)),f(e,["cachedContents"],o)}return e}function rO(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const r=c(t,["nextPageToken"]);r!=null&&f(e,["nextPageToken"],r);const i=c(t,["cachedContents"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>s)),f(e,["cachedContents"],o)}return e}function iO(t){const e={},n=c(t,["mediaResolution"]);n!=null&&f(e,["mediaResolution"],n);const r=c(t,["codeExecutionResult"]);r!=null&&f(e,["codeExecutionResult"],r);const i=c(t,["executableCode"]);i!=null&&f(e,["executableCode"],i);const o=c(t,["fileData"]);o!=null&&f(e,["fileData"],$2(o));const s=c(t,["functionCall"]);s!=null&&f(e,["functionCall"],z2(s));const a=c(t,["functionResponse"]);a!=null&&f(e,["functionResponse"],a);const l=c(t,["inlineData"]);l!=null&&f(e,["inlineData"],L2(l));const u=c(t,["text"]);u!=null&&f(e,["text"],u);const h=c(t,["thought"]);h!=null&&f(e,["thought"],h);const p=c(t,["thoughtSignature"]);p!=null&&f(e,["thoughtSignature"],p);const m=c(t,["videoMetadata"]);return m!=null&&f(e,["videoMetadata"],m),e}function oO(t){const e={},n=c(t,["functionCallingConfig"]);n!=null&&f(e,["functionCallingConfig"],W2(n));const r=c(t,["retrievalConfig"]);return r!=null&&f(e,["retrievalConfig"],r),e}function sO(t){const e={},n=c(t,["functionDeclarations"]);if(n!=null){let h=n;Array.isArray(h)&&(h=h.map(p=>p)),f(e,["functionDeclarations"],h)}if(c(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=c(t,["googleSearchRetrieval"]);r!=null&&f(e,["googleSearchRetrieval"],r);const i=c(t,["computerUse"]);i!=null&&f(e,["computerUse"],i);const o=c(t,["fileSearch"]);o!=null&&f(e,["fileSearch"],o);const s=c(t,["codeExecution"]);if(s!=null&&f(e,["codeExecution"],s),c(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=c(t,["googleMaps"]);a!=null&&f(e,["googleMaps"],j2(a));const l=c(t,["googleSearch"]);l!=null&&f(e,["googleSearch"],Q2(l));const u=c(t,["urlContext"]);return u!=null&&f(e,["urlContext"],u),e}function aO(t){const e={},n=c(t,["functionDeclarations"]);if(n!=null){let p=n;Array.isArray(p)&&(p=p.map(m=>K2(m))),f(e,["functionDeclarations"],p)}const r=c(t,["retrieval"]);r!=null&&f(e,["retrieval"],r);const i=c(t,["googleSearchRetrieval"]);i!=null&&f(e,["googleSearchRetrieval"],i);const o=c(t,["computerUse"]);if(o!=null&&f(e,["computerUse"],o),c(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const s=c(t,["codeExecution"]);s!=null&&f(e,["codeExecution"],s);const a=c(t,["enterpriseWebSearch"]);a!=null&&f(e,["enterpriseWebSearch"],a);const l=c(t,["googleMaps"]);l!=null&&f(e,["googleMaps"],l);const u=c(t,["googleSearch"]);u!=null&&f(e,["googleSearch"],u);const h=c(t,["urlContext"]);return h!=null&&f(e,["urlContext"],h),e}function lO(t,e){const n={},r=c(t,["ttl"]);e!==void 0&&r!=null&&f(e,["ttl"],r);const i=c(t,["expireTime"]);return e!==void 0&&i!=null&&f(e,["expireTime"],i),n}function uO(t,e){const n={},r=c(t,["ttl"]);e!==void 0&&r!=null&&f(e,["ttl"],r);const i=c(t,["expireTime"]);return e!==void 0&&i!=null&&f(e,["expireTime"],i),n}function cO(t,e){const n={},r=c(e,["name"]);r!=null&&f(n,["_url","name"],pr(t,r));const i=c(e,["config"]);return i!=null&&lO(i,n),n}function dO(t,e){const n={},r=c(e,["name"]);r!=null&&f(n,["_url","name"],pr(t,r));const i=c(e,["config"]);return i!=null&&uO(i,n),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class fO extends hr{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new $i(cr.PAGED_ITEM_CACHED_CONTENTS,r=>this.listInternal(r),await this.listInternal(n),n)}async create(e){var n,r,i,o;let s,a="",l={};if(this.apiClient.isVertexAI()){const u=O2(this.apiClient,e);return a=W("cachedContents",u._url),l=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),s.then(h=>h)}else{const u=F2(this.apiClient,e);return a=W("cachedContents",u._url),l=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),s.then(h=>h)}}async get(e){var n,r,i,o;let s,a="",l={};if(this.apiClient.isVertexAI()){const u=Y2(this.apiClient,e);return a=W("{name}",u._url),l=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),s.then(h=>h)}else{const u=J2(this.apiClient,e);return a=W("{name}",u._url),l=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),s.then(h=>h)}}async delete(e){var n,r,i,o;let s,a="",l={};if(this.apiClient.isVertexAI()){const u=G2(this.apiClient,e);return a=W("{name}",u._url),l=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),s.then(h=>{const p=q2(h),m=new Y0;return Object.assign(m,p),m})}else{const u=B2(this.apiClient,e);return a=W("{name}",u._url),l=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),s.then(h=>{const p=H2(h),m=new Y0;return Object.assign(m,p),m})}}async update(e){var n,r,i,o;let s,a="",l={};if(this.apiClient.isVertexAI()){const u=dO(this.apiClient,e);return a=W("{name}",u._url),l=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),s.then(h=>h)}else{const u=cO(this.apiClient,e);return a=W("{name}",u._url),l=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"PATCH",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),s.then(h=>h)}}async listInternal(e){var n,r,i,o;let s,a="",l={};if(this.apiClient.isVertexAI()){const u=tO(e);return a=W("cachedContents",u._url),l=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),s.then(h=>{const p=rO(h),m=new j0;return Object.assign(m,p),m})}else{const u=eO(e);return a=W("cachedContents",u._url),l=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),s.then(h=>{const p=nO(h),m=new j0;return Object.assign(m,p),m})}}}function nc(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function rE(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function re(t){return this instanceof re?(this.v=t,this):new re(t)}function En(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),i,o=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",s),i[Symbol.asyncIterator]=function(){return this},i;function s(_){return function(E){return Promise.resolve(E).then(_,p)}}function a(_,E){r[_]&&(i[_]=function(P){return new Promise(function(x,I){o.push([_,P,x,I])>1||l(_,P)})},E&&(i[_]=E(i[_])))}function l(_,E){try{u(r[_](E))}catch(P){m(o[0][3],P)}}function u(_){_.value instanceof re?Promise.resolve(_.value.v).then(h,p):m(o[0][2],_)}function h(_){l("next",_)}function p(_){l("throw",_)}function m(_,E){_(E),o.shift(),o.length&&l(o[0][0],o[0][1])}}function Tn(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof rE=="function"?rE(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(o){n[o]=t[o]&&function(s){return new Promise(function(a,l){s=t[o](s),i(a,l,s.done,s.value)})}}function i(o,s,a,l){Promise.resolve(l).then(function(u){o({value:u,done:a})},s)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function hO(t){var e;if(t.candidates==null||t.candidates.length===0)return!1;const n=(e=t.candidates[0])===null||e===void 0?void 0:e.content;return n===void 0?!1:OC(n)}function OC(t){if(t.parts===void 0||t.parts.length===0)return!1;for(const e of t.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function pO(t){if(t.length!==0){for(const e of t)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function iE(t){if(t===void 0||t.length===0)return[];const e=[],n=t.length;let r=0;for(;r<n;)if(t[r].role==="user")e.push(t[r]),r++;else{const i=[];let o=!0;for(;r<n&&t[r].role==="model";)i.push(t[r]),o&&!OC(t[r])&&(o=!1),r++;o?e.push(...i):e.pop()}return e}class mO{constructor(e,n){this.modelsModule=e,this.apiClient=n}create(e){return new gO(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class gO{constructor(e,n,r,i={},o=[]){this.apiClient=e,this.modelsModule=n,this.model=r,this.config=i,this.history=o,this.sendPromise=Promise.resolve(),pO(o)}async sendMessage(e){var n;await this.sendPromise;const r=It(e.message),i=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(r),config:(n=e.config)!==null&&n!==void 0?n:this.config});return this.sendPromise=(async()=>{var o,s,a;const l=await i,u=(s=(o=l.candidates)===null||o===void 0?void 0:o[0])===null||s===void 0?void 0:s.content,h=l.automaticFunctionCallingHistory,p=this.getHistory(!0).length;let m=[];h!=null&&(m=(a=h.slice(p))!==null&&a!==void 0?a:[]);const _=u?[u]:[];this.recordHistory(r,_,m)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),i}async sendMessageStream(e){var n;await this.sendPromise;const r=It(e.message),i=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(r),config:(n=e.config)!==null&&n!==void 0?n:this.config});this.sendPromise=i.then(()=>{}).catch(()=>{});const o=await i;return this.processStreamResponse(o,r)}getHistory(e=!1){const n=e?iE(this.history):this.history;return structuredClone(n)}processStreamResponse(e,n){return En(this,arguments,function*(){var i,o,s,a,l,u;const h=[];try{for(var p=!0,m=Tn(e),_;_=yield re(m.next()),i=_.done,!i;p=!0){a=_.value,p=!1;const E=a;if(hO(E)){const P=(u=(l=E.candidates)===null||l===void 0?void 0:l[0])===null||u===void 0?void 0:u.content;P!==void 0&&h.push(P)}yield yield re(E)}}catch(E){o={error:E}}finally{try{!p&&!i&&(s=m.return)&&(yield re(s.call(m)))}finally{if(o)throw o.error}}this.recordHistory(n,h)})}recordHistory(e,n,r){let i=[];n.length>0&&n.every(o=>o.role!==void 0)?i=n:i.push({role:"model",parts:[]}),r&&r.length>0?this.history.push(...iE(r)):this.history.push(e),this.history.push(...i)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class zc extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,zc.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function yO(t){const e={},n=c(t,["file"]);return n!=null&&f(e,["file"],n),e}function vO(t){const e={},n=c(t,["sdkHttpResponse"]);return n!=null&&f(e,["sdkHttpResponse"],n),e}function _O(t){const e={},n=c(t,["name"]);return n!=null&&f(e,["_url","file"],DC(n)),e}function EO(t){const e={},n=c(t,["sdkHttpResponse"]);return n!=null&&f(e,["sdkHttpResponse"],n),e}function TO(t){const e={},n=c(t,["name"]);return n!=null&&f(e,["_url","file"],DC(n)),e}function wO(t,e){const n={},r=c(t,["pageSize"]);e!==void 0&&r!=null&&f(e,["_query","pageSize"],r);const i=c(t,["pageToken"]);return e!==void 0&&i!=null&&f(e,["_query","pageToken"],i),n}function IO(t){const e={},n=c(t,["config"]);return n!=null&&wO(n,e),e}function SO(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const r=c(t,["nextPageToken"]);r!=null&&f(e,["nextPageToken"],r);const i=c(t,["files"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>s)),f(e,["files"],o)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class CO extends hr{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new $i(cr.PAGED_ITEM_FILES,r=>this.listInternal(r),await this.listInternal(n),n)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(n=>n)}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=IO(e);return o=W("files",a._url),s=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json().then(u=>{const h=u;return h.sdkHttpResponse={headers:l.headers},h})),i.then(l=>{const u=SO(l),h=new PF;return Object.assign(h,u),h})}}async createInternal(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=yO(e);return o=W("upload/v1beta/files",a._url),s=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i.then(l=>{const u=vO(l),h=new NF;return Object.assign(h,u),h})}}async get(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=TO(e);return o=W("files/{file}",a._url),s=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i.then(l=>l)}}async delete(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=_O(e);return o=W("files/{file}",a._url),s=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json().then(u=>{const h=u;return h.sdkHttpResponse={headers:l.headers},h})),i.then(l=>{const u=EO(l),h=new kF;return Object.assign(h,u),h})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function cu(t){const e={},n=c(t,["data"]);if(n!=null&&f(e,["data"],n),c(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=c(t,["mimeType"]);return r!=null&&f(e,["mimeType"],r),e}function AO(t){const e={},n=c(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>HO(o))),f(e,["parts"],i)}const r=c(t,["role"]);return r!=null&&f(e,["role"],r),e}function RO(t){const e={};if(c(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=c(t,["fileUri"]);n!=null&&f(e,["fileUri"],n);const r=c(t,["mimeType"]);return r!=null&&f(e,["mimeType"],r),e}function xO(t){const e={},n=c(t,["id"]);n!=null&&f(e,["id"],n);const r=c(t,["args"]);r!=null&&f(e,["args"],r);const i=c(t,["name"]);if(i!=null&&f(e,["name"],i),c(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(c(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function PO(t){const e={};if(c(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=c(t,["description"]);n!=null&&f(e,["description"],n);const r=c(t,["name"]);r!=null&&f(e,["name"],r);const i=c(t,["parameters"]);i!=null&&f(e,["parameters"],i);const o=c(t,["parametersJsonSchema"]);o!=null&&f(e,["parametersJsonSchema"],o);const s=c(t,["response"]);s!=null&&f(e,["response"],s);const a=c(t,["responseJsonSchema"]);return a!=null&&f(e,["responseJsonSchema"],a),e}function NO(t){const e={},n=c(t,["modelSelectionConfig"]);n!=null&&f(e,["modelConfig"],n);const r=c(t,["responseJsonSchema"]);r!=null&&f(e,["responseJsonSchema"],r);const i=c(t,["audioTimestamp"]);i!=null&&f(e,["audioTimestamp"],i);const o=c(t,["candidateCount"]);o!=null&&f(e,["candidateCount"],o);const s=c(t,["enableAffectiveDialog"]);s!=null&&f(e,["enableAffectiveDialog"],s);const a=c(t,["frequencyPenalty"]);a!=null&&f(e,["frequencyPenalty"],a);const l=c(t,["logprobs"]);l!=null&&f(e,["logprobs"],l);const u=c(t,["maxOutputTokens"]);u!=null&&f(e,["maxOutputTokens"],u);const h=c(t,["mediaResolution"]);h!=null&&f(e,["mediaResolution"],h);const p=c(t,["presencePenalty"]);p!=null&&f(e,["presencePenalty"],p);const m=c(t,["responseLogprobs"]);m!=null&&f(e,["responseLogprobs"],m);const _=c(t,["responseMimeType"]);_!=null&&f(e,["responseMimeType"],_);const E=c(t,["responseModalities"]);E!=null&&f(e,["responseModalities"],E);const P=c(t,["responseSchema"]);P!=null&&f(e,["responseSchema"],P);const x=c(t,["routingConfig"]);x!=null&&f(e,["routingConfig"],x);const I=c(t,["seed"]);I!=null&&f(e,["seed"],I);const T=c(t,["speechConfig"]);T!=null&&f(e,["speechConfig"],T);const C=c(t,["stopSequences"]);C!=null&&f(e,["stopSequences"],C);const M=c(t,["temperature"]);M!=null&&f(e,["temperature"],M);const U=c(t,["thinkingConfig"]);U!=null&&f(e,["thinkingConfig"],U);const L=c(t,["topK"]);L!=null&&f(e,["topK"],L);const R=c(t,["topP"]);if(R!=null&&f(e,["topP"],R),c(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function kO(t){const e={};if(c(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=c(t,["enableWidget"]);return n!=null&&f(e,["enableWidget"],n),e}function DO(t){const e={};if(c(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(c(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=c(t,["timeRangeFilter"]);return n!=null&&f(e,["timeRangeFilter"],n),e}function MO(t,e){const n={},r=c(t,["generationConfig"]);e!==void 0&&r!=null&&f(e,["setup","generationConfig"],r);const i=c(t,["responseModalities"]);e!==void 0&&i!=null&&f(e,["setup","generationConfig","responseModalities"],i);const o=c(t,["temperature"]);e!==void 0&&o!=null&&f(e,["setup","generationConfig","temperature"],o);const s=c(t,["topP"]);e!==void 0&&s!=null&&f(e,["setup","generationConfig","topP"],s);const a=c(t,["topK"]);e!==void 0&&a!=null&&f(e,["setup","generationConfig","topK"],a);const l=c(t,["maxOutputTokens"]);e!==void 0&&l!=null&&f(e,["setup","generationConfig","maxOutputTokens"],l);const u=c(t,["mediaResolution"]);e!==void 0&&u!=null&&f(e,["setup","generationConfig","mediaResolution"],u);const h=c(t,["seed"]);e!==void 0&&h!=null&&f(e,["setup","generationConfig","seed"],h);const p=c(t,["speechConfig"]);e!==void 0&&p!=null&&f(e,["setup","generationConfig","speechConfig"],ng(p));const m=c(t,["thinkingConfig"]);e!==void 0&&m!=null&&f(e,["setup","generationConfig","thinkingConfig"],m);const _=c(t,["enableAffectiveDialog"]);e!==void 0&&_!=null&&f(e,["setup","generationConfig","enableAffectiveDialog"],_);const E=c(t,["systemInstruction"]);e!==void 0&&E!=null&&f(e,["setup","systemInstruction"],AO(It(E)));const P=c(t,["tools"]);if(e!==void 0&&P!=null){let L=ns(P);Array.isArray(L)&&(L=L.map(R=>$O(ts(R)))),f(e,["setup","tools"],L)}const x=c(t,["sessionResumption"]);e!==void 0&&x!=null&&f(e,["setup","sessionResumption"],qO(x));const I=c(t,["inputAudioTranscription"]);e!==void 0&&I!=null&&f(e,["setup","inputAudioTranscription"],I);const T=c(t,["outputAudioTranscription"]);e!==void 0&&T!=null&&f(e,["setup","outputAudioTranscription"],T);const C=c(t,["realtimeInputConfig"]);e!==void 0&&C!=null&&f(e,["setup","realtimeInputConfig"],C);const M=c(t,["contextWindowCompression"]);e!==void 0&&M!=null&&f(e,["setup","contextWindowCompression"],M);const U=c(t,["proactivity"]);if(e!==void 0&&U!=null&&f(e,["setup","proactivity"],U),c(t,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return n}function bO(t,e){const n={},r=c(t,["generationConfig"]);e!==void 0&&r!=null&&f(e,["setup","generationConfig"],NO(r));const i=c(t,["responseModalities"]);e!==void 0&&i!=null&&f(e,["setup","generationConfig","responseModalities"],i);const o=c(t,["temperature"]);e!==void 0&&o!=null&&f(e,["setup","generationConfig","temperature"],o);const s=c(t,["topP"]);e!==void 0&&s!=null&&f(e,["setup","generationConfig","topP"],s);const a=c(t,["topK"]);e!==void 0&&a!=null&&f(e,["setup","generationConfig","topK"],a);const l=c(t,["maxOutputTokens"]);e!==void 0&&l!=null&&f(e,["setup","generationConfig","maxOutputTokens"],l);const u=c(t,["mediaResolution"]);e!==void 0&&u!=null&&f(e,["setup","generationConfig","mediaResolution"],u);const h=c(t,["seed"]);e!==void 0&&h!=null&&f(e,["setup","generationConfig","seed"],h);const p=c(t,["speechConfig"]);e!==void 0&&p!=null&&f(e,["setup","generationConfig","speechConfig"],ng(p));const m=c(t,["thinkingConfig"]);e!==void 0&&m!=null&&f(e,["setup","generationConfig","thinkingConfig"],m);const _=c(t,["enableAffectiveDialog"]);e!==void 0&&_!=null&&f(e,["setup","generationConfig","enableAffectiveDialog"],_);const E=c(t,["systemInstruction"]);e!==void 0&&E!=null&&f(e,["setup","systemInstruction"],It(E));const P=c(t,["tools"]);if(e!==void 0&&P!=null){let R=ns(P);Array.isArray(R)&&(R=R.map(w=>zO(ts(w)))),f(e,["setup","tools"],R)}const x=c(t,["sessionResumption"]);e!==void 0&&x!=null&&f(e,["setup","sessionResumption"],x);const I=c(t,["inputAudioTranscription"]);e!==void 0&&I!=null&&f(e,["setup","inputAudioTranscription"],I);const T=c(t,["outputAudioTranscription"]);e!==void 0&&T!=null&&f(e,["setup","outputAudioTranscription"],T);const C=c(t,["realtimeInputConfig"]);e!==void 0&&C!=null&&f(e,["setup","realtimeInputConfig"],C);const M=c(t,["contextWindowCompression"]);e!==void 0&&M!=null&&f(e,["setup","contextWindowCompression"],M);const U=c(t,["proactivity"]);e!==void 0&&U!=null&&f(e,["setup","proactivity"],U);const L=c(t,["explicitVadSignal"]);return e!==void 0&&L!=null&&f(e,["setup","explicitVadSignal"],L),n}function LO(t,e){const n={},r=c(e,["model"]);r!=null&&f(n,["setup","model"],pe(t,r));const i=c(e,["config"]);return i!=null&&f(n,["config"],MO(i,n)),n}function VO(t,e){const n={},r=c(e,["model"]);r!=null&&f(n,["setup","model"],pe(t,r));const i=c(e,["config"]);return i!=null&&f(n,["config"],bO(i,n)),n}function UO(t){const e={},n=c(t,["musicGenerationConfig"]);return n!=null&&f(e,["musicGenerationConfig"],n),e}function FO(t){const e={},n=c(t,["weightedPrompts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>i)),f(e,["weightedPrompts"],r)}return e}function OO(t){const e={},n=c(t,["media"]);if(n!=null){let u=RC(n);Array.isArray(u)&&(u=u.map(h=>cu(h))),f(e,["mediaChunks"],u)}const r=c(t,["audio"]);r!=null&&f(e,["audio"],cu(PC(r)));const i=c(t,["audioStreamEnd"]);i!=null&&f(e,["audioStreamEnd"],i);const o=c(t,["video"]);o!=null&&f(e,["video"],cu(xC(o)));const s=c(t,["text"]);s!=null&&f(e,["text"],s);const a=c(t,["activityStart"]);a!=null&&f(e,["activityStart"],a);const l=c(t,["activityEnd"]);return l!=null&&f(e,["activityEnd"],l),e}function BO(t){const e={},n=c(t,["media"]);if(n!=null){let u=RC(n);Array.isArray(u)&&(u=u.map(h=>h)),f(e,["mediaChunks"],u)}const r=c(t,["audio"]);r!=null&&f(e,["audio"],PC(r));const i=c(t,["audioStreamEnd"]);i!=null&&f(e,["audioStreamEnd"],i);const o=c(t,["video"]);o!=null&&f(e,["video"],xC(o));const s=c(t,["text"]);s!=null&&f(e,["text"],s);const a=c(t,["activityStart"]);a!=null&&f(e,["activityStart"],a);const l=c(t,["activityEnd"]);return l!=null&&f(e,["activityEnd"],l),e}function GO(t){const e={},n=c(t,["setupComplete"]);n!=null&&f(e,["setupComplete"],n);const r=c(t,["serverContent"]);r!=null&&f(e,["serverContent"],r);const i=c(t,["toolCall"]);i!=null&&f(e,["toolCall"],i);const o=c(t,["toolCallCancellation"]);o!=null&&f(e,["toolCallCancellation"],o);const s=c(t,["usageMetadata"]);s!=null&&f(e,["usageMetadata"],WO(s));const a=c(t,["goAway"]);a!=null&&f(e,["goAway"],a);const l=c(t,["sessionResumptionUpdate"]);l!=null&&f(e,["sessionResumptionUpdate"],l);const u=c(t,["voiceActivityDetectionSignal"]);return u!=null&&f(e,["voiceActivityDetectionSignal"],u),e}function HO(t){const e={},n=c(t,["mediaResolution"]);n!=null&&f(e,["mediaResolution"],n);const r=c(t,["codeExecutionResult"]);r!=null&&f(e,["codeExecutionResult"],r);const i=c(t,["executableCode"]);i!=null&&f(e,["executableCode"],i);const o=c(t,["fileData"]);o!=null&&f(e,["fileData"],RO(o));const s=c(t,["functionCall"]);s!=null&&f(e,["functionCall"],xO(s));const a=c(t,["functionResponse"]);a!=null&&f(e,["functionResponse"],a);const l=c(t,["inlineData"]);l!=null&&f(e,["inlineData"],cu(l));const u=c(t,["text"]);u!=null&&f(e,["text"],u);const h=c(t,["thought"]);h!=null&&f(e,["thought"],h);const p=c(t,["thoughtSignature"]);p!=null&&f(e,["thoughtSignature"],p);const m=c(t,["videoMetadata"]);return m!=null&&f(e,["videoMetadata"],m),e}function qO(t){const e={},n=c(t,["handle"]);if(n!=null&&f(e,["handle"],n),c(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function $O(t){const e={},n=c(t,["functionDeclarations"]);if(n!=null){let h=n;Array.isArray(h)&&(h=h.map(p=>p)),f(e,["functionDeclarations"],h)}if(c(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=c(t,["googleSearchRetrieval"]);r!=null&&f(e,["googleSearchRetrieval"],r);const i=c(t,["computerUse"]);i!=null&&f(e,["computerUse"],i);const o=c(t,["fileSearch"]);o!=null&&f(e,["fileSearch"],o);const s=c(t,["codeExecution"]);if(s!=null&&f(e,["codeExecution"],s),c(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=c(t,["googleMaps"]);a!=null&&f(e,["googleMaps"],kO(a));const l=c(t,["googleSearch"]);l!=null&&f(e,["googleSearch"],DO(l));const u=c(t,["urlContext"]);return u!=null&&f(e,["urlContext"],u),e}function zO(t){const e={},n=c(t,["functionDeclarations"]);if(n!=null){let p=n;Array.isArray(p)&&(p=p.map(m=>PO(m))),f(e,["functionDeclarations"],p)}const r=c(t,["retrieval"]);r!=null&&f(e,["retrieval"],r);const i=c(t,["googleSearchRetrieval"]);i!=null&&f(e,["googleSearchRetrieval"],i);const o=c(t,["computerUse"]);if(o!=null&&f(e,["computerUse"],o),c(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const s=c(t,["codeExecution"]);s!=null&&f(e,["codeExecution"],s);const a=c(t,["enterpriseWebSearch"]);a!=null&&f(e,["enterpriseWebSearch"],a);const l=c(t,["googleMaps"]);l!=null&&f(e,["googleMaps"],l);const u=c(t,["googleSearch"]);u!=null&&f(e,["googleSearch"],u);const h=c(t,["urlContext"]);return h!=null&&f(e,["urlContext"],h),e}function WO(t){const e={},n=c(t,["promptTokenCount"]);n!=null&&f(e,["promptTokenCount"],n);const r=c(t,["cachedContentTokenCount"]);r!=null&&f(e,["cachedContentTokenCount"],r);const i=c(t,["candidatesTokenCount"]);i!=null&&f(e,["responseTokenCount"],i);const o=c(t,["toolUsePromptTokenCount"]);o!=null&&f(e,["toolUsePromptTokenCount"],o);const s=c(t,["thoughtsTokenCount"]);s!=null&&f(e,["thoughtsTokenCount"],s);const a=c(t,["totalTokenCount"]);a!=null&&f(e,["totalTokenCount"],a);const l=c(t,["promptTokensDetails"]);if(l!=null){let _=l;Array.isArray(_)&&(_=_.map(E=>E)),f(e,["promptTokensDetails"],_)}const u=c(t,["cacheTokensDetails"]);if(u!=null){let _=u;Array.isArray(_)&&(_=_.map(E=>E)),f(e,["cacheTokensDetails"],_)}const h=c(t,["candidatesTokensDetails"]);if(h!=null){let _=h;Array.isArray(_)&&(_=_.map(E=>E)),f(e,["responseTokensDetails"],_)}const p=c(t,["toolUsePromptTokensDetails"]);if(p!=null){let _=p;Array.isArray(_)&&(_=_.map(E=>E)),f(e,["toolUsePromptTokensDetails"],_)}const m=c(t,["trafficType"]);return m!=null&&f(e,["trafficType"],m),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function KO(t){const e={},n=c(t,["data"]);if(n!=null&&f(e,["data"],n),c(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=c(t,["mimeType"]);return r!=null&&f(e,["mimeType"],r),e}function JO(t){const e={},n=c(t,["content"]);n!=null&&f(e,["content"],n);const r=c(t,["citationMetadata"]);r!=null&&f(e,["citationMetadata"],YO(r));const i=c(t,["tokenCount"]);i!=null&&f(e,["tokenCount"],i);const o=c(t,["finishReason"]);o!=null&&f(e,["finishReason"],o);const s=c(t,["avgLogprobs"]);s!=null&&f(e,["avgLogprobs"],s);const a=c(t,["groundingMetadata"]);a!=null&&f(e,["groundingMetadata"],a);const l=c(t,["index"]);l!=null&&f(e,["index"],l);const u=c(t,["logprobsResult"]);u!=null&&f(e,["logprobsResult"],u);const h=c(t,["safetyRatings"]);if(h!=null){let m=h;Array.isArray(m)&&(m=m.map(_=>_)),f(e,["safetyRatings"],m)}const p=c(t,["urlContextMetadata"]);return p!=null&&f(e,["urlContextMetadata"],p),e}function YO(t){const e={},n=c(t,["citationSources"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>i)),f(e,["citations"],r)}return e}function jO(t,e){const n={},r=c(e,["model"]);r!=null&&f(n,["_url","model"],pe(t,r));const i=c(e,["contents"]);if(i!=null){let o=an(i);Array.isArray(o)&&(o=o.map(s=>s)),f(n,["contents"],o)}return n}function QO(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const r=c(t,["tokensInfo"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(o=>o)),f(e,["tokensInfo"],i)}return e}function XO(t){const e={},n=c(t,["values"]);n!=null&&f(e,["values"],n);const r=c(t,["statistics"]);return r!=null&&f(e,["statistics"],ZO(r)),e}function ZO(t){const e={},n=c(t,["truncated"]);n!=null&&f(e,["truncated"],n);const r=c(t,["token_count"]);return r!=null&&f(e,["tokenCount"],r),e}function Wc(t){const e={},n=c(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>lB(o))),f(e,["parts"],i)}const r=c(t,["role"]);return r!=null&&f(e,["role"],r),e}function e4(t){const e={},n=c(t,["controlType"]);n!=null&&f(e,["controlType"],n);const r=c(t,["enableControlImageComputation"]);return r!=null&&f(e,["computeControl"],r),e}function t4(t){const e={};if(c(t,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(c(t,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(c(t,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function n4(t,e){const n={},r=c(t,["systemInstruction"]);e!==void 0&&r!=null&&f(e,["systemInstruction"],It(r));const i=c(t,["tools"]);if(e!==void 0&&i!=null){let s=i;Array.isArray(s)&&(s=s.map(a=>qC(a))),f(e,["tools"],s)}const o=c(t,["generationConfig"]);return e!==void 0&&o!=null&&f(e,["generationConfig"],K4(o)),n}function r4(t,e){const n={},r=c(e,["model"]);r!=null&&f(n,["_url","model"],pe(t,r));const i=c(e,["contents"]);if(i!=null){let s=an(i);Array.isArray(s)&&(s=s.map(a=>Wc(a))),f(n,["contents"],s)}const o=c(e,["config"]);return o!=null&&t4(o),n}function i4(t,e){const n={},r=c(e,["model"]);r!=null&&f(n,["_url","model"],pe(t,r));const i=c(e,["contents"]);if(i!=null){let s=an(i);Array.isArray(s)&&(s=s.map(a=>a)),f(n,["contents"],s)}const o=c(e,["config"]);return o!=null&&n4(o,n),n}function o4(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const r=c(t,["totalTokens"]);r!=null&&f(e,["totalTokens"],r);const i=c(t,["cachedContentTokenCount"]);return i!=null&&f(e,["cachedContentTokenCount"],i),e}function s4(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const r=c(t,["totalTokens"]);return r!=null&&f(e,["totalTokens"],r),e}function a4(t,e){const n={},r=c(e,["model"]);return r!=null&&f(n,["_url","name"],pe(t,r)),n}function l4(t,e){const n={},r=c(e,["model"]);return r!=null&&f(n,["_url","name"],pe(t,r)),n}function u4(t){const e={},n=c(t,["sdkHttpResponse"]);return n!=null&&f(e,["sdkHttpResponse"],n),e}function c4(t){const e={},n=c(t,["sdkHttpResponse"]);return n!=null&&f(e,["sdkHttpResponse"],n),e}function d4(t,e){const n={},r=c(t,["outputGcsUri"]);e!==void 0&&r!=null&&f(e,["parameters","storageUri"],r);const i=c(t,["negativePrompt"]);e!==void 0&&i!=null&&f(e,["parameters","negativePrompt"],i);const o=c(t,["numberOfImages"]);e!==void 0&&o!=null&&f(e,["parameters","sampleCount"],o);const s=c(t,["aspectRatio"]);e!==void 0&&s!=null&&f(e,["parameters","aspectRatio"],s);const a=c(t,["guidanceScale"]);e!==void 0&&a!=null&&f(e,["parameters","guidanceScale"],a);const l=c(t,["seed"]);e!==void 0&&l!=null&&f(e,["parameters","seed"],l);const u=c(t,["safetyFilterLevel"]);e!==void 0&&u!=null&&f(e,["parameters","safetySetting"],u);const h=c(t,["personGeneration"]);e!==void 0&&h!=null&&f(e,["parameters","personGeneration"],h);const p=c(t,["includeSafetyAttributes"]);e!==void 0&&p!=null&&f(e,["parameters","includeSafetyAttributes"],p);const m=c(t,["includeRaiReason"]);e!==void 0&&m!=null&&f(e,["parameters","includeRaiReason"],m);const _=c(t,["language"]);e!==void 0&&_!=null&&f(e,["parameters","language"],_);const E=c(t,["outputMimeType"]);e!==void 0&&E!=null&&f(e,["parameters","outputOptions","mimeType"],E);const P=c(t,["outputCompressionQuality"]);e!==void 0&&P!=null&&f(e,["parameters","outputOptions","compressionQuality"],P);const x=c(t,["addWatermark"]);e!==void 0&&x!=null&&f(e,["parameters","addWatermark"],x);const I=c(t,["labels"]);e!==void 0&&I!=null&&f(e,["labels"],I);const T=c(t,["editMode"]);e!==void 0&&T!=null&&f(e,["parameters","editMode"],T);const C=c(t,["baseSteps"]);return e!==void 0&&C!=null&&f(e,["parameters","editConfig","baseSteps"],C),n}function f4(t,e){const n={},r=c(e,["model"]);r!=null&&f(n,["_url","model"],pe(t,r));const i=c(e,["prompt"]);i!=null&&f(n,["instances[0]","prompt"],i);const o=c(e,["referenceImages"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(l=>pB(l))),f(n,["instances[0]","referenceImages"],a)}const s=c(e,["config"]);return s!=null&&d4(s,n),n}function h4(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const r=c(t,["predictions"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(o=>Kc(o))),f(e,["generatedImages"],i)}return e}function p4(t,e){const n={},r=c(t,["taskType"]);e!==void 0&&r!=null&&f(e,["requests[]","taskType"],r);const i=c(t,["title"]);e!==void 0&&i!=null&&f(e,["requests[]","title"],i);const o=c(t,["outputDimensionality"]);if(e!==void 0&&o!=null&&f(e,["requests[]","outputDimensionality"],o),c(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(c(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function m4(t,e){const n={},r=c(t,["taskType"]);e!==void 0&&r!=null&&f(e,["instances[]","task_type"],r);const i=c(t,["title"]);e!==void 0&&i!=null&&f(e,["instances[]","title"],i);const o=c(t,["outputDimensionality"]);e!==void 0&&o!=null&&f(e,["parameters","outputDimensionality"],o);const s=c(t,["mimeType"]);e!==void 0&&s!=null&&f(e,["instances[]","mimeType"],s);const a=c(t,["autoTruncate"]);return e!==void 0&&a!=null&&f(e,["parameters","autoTruncate"],a),n}function g4(t,e){const n={},r=c(e,["model"]);r!=null&&f(n,["_url","model"],pe(t,r));const i=c(e,["contents"]);if(i!=null){let a=Zm(t,i);Array.isArray(a)&&(a=a.map(l=>l)),f(n,["requests[]","content"],a)}const o=c(e,["config"]);o!=null&&p4(o,n);const s=c(e,["model"]);return s!==void 0&&f(n,["requests[]","model"],pe(t,s)),n}function y4(t,e){const n={},r=c(e,["model"]);r!=null&&f(n,["_url","model"],pe(t,r));const i=c(e,["contents"]);if(i!=null){let s=Zm(t,i);Array.isArray(s)&&(s=s.map(a=>a)),f(n,["instances[]","content"],s)}const o=c(e,["config"]);return o!=null&&m4(o,n),n}function v4(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const r=c(t,["embeddings"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(s=>s)),f(e,["embeddings"],o)}const i=c(t,["metadata"]);return i!=null&&f(e,["metadata"],i),e}function _4(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const r=c(t,["predictions[]","embeddings"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(s=>XO(s))),f(e,["embeddings"],o)}const i=c(t,["metadata"]);return i!=null&&f(e,["metadata"],i),e}function E4(t){const e={},n=c(t,["endpoint"]);n!=null&&f(e,["name"],n);const r=c(t,["deployedModelId"]);return r!=null&&f(e,["deployedModelId"],r),e}function T4(t){const e={};if(c(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=c(t,["fileUri"]);n!=null&&f(e,["fileUri"],n);const r=c(t,["mimeType"]);return r!=null&&f(e,["mimeType"],r),e}function w4(t){const e={},n=c(t,["id"]);n!=null&&f(e,["id"],n);const r=c(t,["args"]);r!=null&&f(e,["args"],r);const i=c(t,["name"]);if(i!=null&&f(e,["name"],i),c(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(c(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function I4(t){const e={},n=c(t,["mode"]);n!=null&&f(e,["mode"],n);const r=c(t,["allowedFunctionNames"]);if(r!=null&&f(e,["allowedFunctionNames"],r),c(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function S4(t){const e={};if(c(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=c(t,["description"]);n!=null&&f(e,["description"],n);const r=c(t,["name"]);r!=null&&f(e,["name"],r);const i=c(t,["parameters"]);i!=null&&f(e,["parameters"],i);const o=c(t,["parametersJsonSchema"]);o!=null&&f(e,["parametersJsonSchema"],o);const s=c(t,["response"]);s!=null&&f(e,["response"],s);const a=c(t,["responseJsonSchema"]);return a!=null&&f(e,["responseJsonSchema"],a),e}function C4(t,e,n){const r={},i=c(e,["systemInstruction"]);n!==void 0&&i!=null&&f(n,["systemInstruction"],Wc(It(i)));const o=c(e,["temperature"]);o!=null&&f(r,["temperature"],o);const s=c(e,["topP"]);s!=null&&f(r,["topP"],s);const a=c(e,["topK"]);a!=null&&f(r,["topK"],a);const l=c(e,["candidateCount"]);l!=null&&f(r,["candidateCount"],l);const u=c(e,["maxOutputTokens"]);u!=null&&f(r,["maxOutputTokens"],u);const h=c(e,["stopSequences"]);h!=null&&f(r,["stopSequences"],h);const p=c(e,["responseLogprobs"]);p!=null&&f(r,["responseLogprobs"],p);const m=c(e,["logprobs"]);m!=null&&f(r,["logprobs"],m);const _=c(e,["presencePenalty"]);_!=null&&f(r,["presencePenalty"],_);const E=c(e,["frequencyPenalty"]);E!=null&&f(r,["frequencyPenalty"],E);const P=c(e,["seed"]);P!=null&&f(r,["seed"],P);const x=c(e,["responseMimeType"]);x!=null&&f(r,["responseMimeType"],x);const I=c(e,["responseSchema"]);I!=null&&f(r,["responseSchema"],eg(I));const T=c(e,["responseJsonSchema"]);if(T!=null&&f(r,["responseJsonSchema"],T),c(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(c(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const C=c(e,["safetySettings"]);if(n!==void 0&&C!=null){let k=C;Array.isArray(k)&&(k=k.map(ge=>mB(ge))),f(n,["safetySettings"],k)}const M=c(e,["tools"]);if(n!==void 0&&M!=null){let k=ns(M);Array.isArray(k)&&(k=k.map(ge=>wB(ts(ge)))),f(n,["tools"],k)}const U=c(e,["toolConfig"]);if(n!==void 0&&U!=null&&f(n,["toolConfig"],TB(U)),c(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const L=c(e,["cachedContent"]);n!==void 0&&L!=null&&f(n,["cachedContent"],pr(t,L));const R=c(e,["responseModalities"]);R!=null&&f(r,["responseModalities"],R);const w=c(e,["mediaResolution"]);w!=null&&f(r,["mediaResolution"],w);const A=c(e,["speechConfig"]);if(A!=null&&f(r,["speechConfig"],tg(A)),c(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const N=c(e,["thinkingConfig"]);N!=null&&f(r,["thinkingConfig"],N);const D=c(e,["imageConfig"]);D!=null&&f(r,["imageConfig"],X4(D));const b=c(e,["enableEnhancedCivicAnswers"]);return b!=null&&f(r,["enableEnhancedCivicAnswers"],b),r}function A4(t,e,n){const r={},i=c(e,["systemInstruction"]);n!==void 0&&i!=null&&f(n,["systemInstruction"],It(i));const o=c(e,["temperature"]);o!=null&&f(r,["temperature"],o);const s=c(e,["topP"]);s!=null&&f(r,["topP"],s);const a=c(e,["topK"]);a!=null&&f(r,["topK"],a);const l=c(e,["candidateCount"]);l!=null&&f(r,["candidateCount"],l);const u=c(e,["maxOutputTokens"]);u!=null&&f(r,["maxOutputTokens"],u);const h=c(e,["stopSequences"]);h!=null&&f(r,["stopSequences"],h);const p=c(e,["responseLogprobs"]);p!=null&&f(r,["responseLogprobs"],p);const m=c(e,["logprobs"]);m!=null&&f(r,["logprobs"],m);const _=c(e,["presencePenalty"]);_!=null&&f(r,["presencePenalty"],_);const E=c(e,["frequencyPenalty"]);E!=null&&f(r,["frequencyPenalty"],E);const P=c(e,["seed"]);P!=null&&f(r,["seed"],P);const x=c(e,["responseMimeType"]);x!=null&&f(r,["responseMimeType"],x);const I=c(e,["responseSchema"]);I!=null&&f(r,["responseSchema"],eg(I));const T=c(e,["responseJsonSchema"]);T!=null&&f(r,["responseJsonSchema"],T);const C=c(e,["routingConfig"]);C!=null&&f(r,["routingConfig"],C);const M=c(e,["modelSelectionConfig"]);M!=null&&f(r,["modelConfig"],M);const U=c(e,["safetySettings"]);if(n!==void 0&&U!=null){let Je=U;Array.isArray(Je)&&(Je=Je.map(it=>it)),f(n,["safetySettings"],Je)}const L=c(e,["tools"]);if(n!==void 0&&L!=null){let Je=ns(L);Array.isArray(Je)&&(Je=Je.map(it=>qC(ts(it)))),f(n,["tools"],Je)}const R=c(e,["toolConfig"]);n!==void 0&&R!=null&&f(n,["toolConfig"],R);const w=c(e,["labels"]);n!==void 0&&w!=null&&f(n,["labels"],w);const A=c(e,["cachedContent"]);n!==void 0&&A!=null&&f(n,["cachedContent"],pr(t,A));const N=c(e,["responseModalities"]);N!=null&&f(r,["responseModalities"],N);const D=c(e,["mediaResolution"]);D!=null&&f(r,["mediaResolution"],D);const b=c(e,["speechConfig"]);b!=null&&f(r,["speechConfig"],tg(b));const k=c(e,["audioTimestamp"]);k!=null&&f(r,["audioTimestamp"],k);const ge=c(e,["thinkingConfig"]);ge!=null&&f(r,["thinkingConfig"],ge);const ht=c(e,["imageConfig"]);if(ht!=null&&f(r,["imageConfig"],Z4(ht)),c(e,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return r}function oE(t,e){const n={},r=c(e,["model"]);r!=null&&f(n,["_url","model"],pe(t,r));const i=c(e,["contents"]);if(i!=null){let s=an(i);Array.isArray(s)&&(s=s.map(a=>Wc(a))),f(n,["contents"],s)}const o=c(e,["config"]);return o!=null&&f(n,["generationConfig"],C4(t,o,n)),n}function sE(t,e){const n={},r=c(e,["model"]);r!=null&&f(n,["_url","model"],pe(t,r));const i=c(e,["contents"]);if(i!=null){let s=an(i);Array.isArray(s)&&(s=s.map(a=>a)),f(n,["contents"],s)}const o=c(e,["config"]);return o!=null&&f(n,["generationConfig"],A4(t,o,n)),n}function aE(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const r=c(t,["candidates"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(u=>JO(u))),f(e,["candidates"],l)}const i=c(t,["modelVersion"]);i!=null&&f(e,["modelVersion"],i);const o=c(t,["promptFeedback"]);o!=null&&f(e,["promptFeedback"],o);const s=c(t,["responseId"]);s!=null&&f(e,["responseId"],s);const a=c(t,["usageMetadata"]);return a!=null&&f(e,["usageMetadata"],a),e}function lE(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const r=c(t,["candidates"]);if(r!=null){let u=r;Array.isArray(u)&&(u=u.map(h=>h)),f(e,["candidates"],u)}const i=c(t,["createTime"]);i!=null&&f(e,["createTime"],i);const o=c(t,["modelVersion"]);o!=null&&f(e,["modelVersion"],o);const s=c(t,["promptFeedback"]);s!=null&&f(e,["promptFeedback"],s);const a=c(t,["responseId"]);a!=null&&f(e,["responseId"],a);const l=c(t,["usageMetadata"]);return l!=null&&f(e,["usageMetadata"],l),e}function R4(t,e){const n={};if(c(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(c(t,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const r=c(t,["numberOfImages"]);e!==void 0&&r!=null&&f(e,["parameters","sampleCount"],r);const i=c(t,["aspectRatio"]);e!==void 0&&i!=null&&f(e,["parameters","aspectRatio"],i);const o=c(t,["guidanceScale"]);if(e!==void 0&&o!=null&&f(e,["parameters","guidanceScale"],o),c(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const s=c(t,["safetyFilterLevel"]);e!==void 0&&s!=null&&f(e,["parameters","safetySetting"],s);const a=c(t,["personGeneration"]);e!==void 0&&a!=null&&f(e,["parameters","personGeneration"],a);const l=c(t,["includeSafetyAttributes"]);e!==void 0&&l!=null&&f(e,["parameters","includeSafetyAttributes"],l);const u=c(t,["includeRaiReason"]);e!==void 0&&u!=null&&f(e,["parameters","includeRaiReason"],u);const h=c(t,["language"]);e!==void 0&&h!=null&&f(e,["parameters","language"],h);const p=c(t,["outputMimeType"]);e!==void 0&&p!=null&&f(e,["parameters","outputOptions","mimeType"],p);const m=c(t,["outputCompressionQuality"]);if(e!==void 0&&m!=null&&f(e,["parameters","outputOptions","compressionQuality"],m),c(t,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(c(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const _=c(t,["imageSize"]);if(e!==void 0&&_!=null&&f(e,["parameters","sampleImageSize"],_),c(t,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return n}function x4(t,e){const n={},r=c(t,["outputGcsUri"]);e!==void 0&&r!=null&&f(e,["parameters","storageUri"],r);const i=c(t,["negativePrompt"]);e!==void 0&&i!=null&&f(e,["parameters","negativePrompt"],i);const o=c(t,["numberOfImages"]);e!==void 0&&o!=null&&f(e,["parameters","sampleCount"],o);const s=c(t,["aspectRatio"]);e!==void 0&&s!=null&&f(e,["parameters","aspectRatio"],s);const a=c(t,["guidanceScale"]);e!==void 0&&a!=null&&f(e,["parameters","guidanceScale"],a);const l=c(t,["seed"]);e!==void 0&&l!=null&&f(e,["parameters","seed"],l);const u=c(t,["safetyFilterLevel"]);e!==void 0&&u!=null&&f(e,["parameters","safetySetting"],u);const h=c(t,["personGeneration"]);e!==void 0&&h!=null&&f(e,["parameters","personGeneration"],h);const p=c(t,["includeSafetyAttributes"]);e!==void 0&&p!=null&&f(e,["parameters","includeSafetyAttributes"],p);const m=c(t,["includeRaiReason"]);e!==void 0&&m!=null&&f(e,["parameters","includeRaiReason"],m);const _=c(t,["language"]);e!==void 0&&_!=null&&f(e,["parameters","language"],_);const E=c(t,["outputMimeType"]);e!==void 0&&E!=null&&f(e,["parameters","outputOptions","mimeType"],E);const P=c(t,["outputCompressionQuality"]);e!==void 0&&P!=null&&f(e,["parameters","outputOptions","compressionQuality"],P);const x=c(t,["addWatermark"]);e!==void 0&&x!=null&&f(e,["parameters","addWatermark"],x);const I=c(t,["labels"]);e!==void 0&&I!=null&&f(e,["labels"],I);const T=c(t,["imageSize"]);e!==void 0&&T!=null&&f(e,["parameters","sampleImageSize"],T);const C=c(t,["enhancePrompt"]);return e!==void 0&&C!=null&&f(e,["parameters","enhancePrompt"],C),n}function P4(t,e){const n={},r=c(e,["model"]);r!=null&&f(n,["_url","model"],pe(t,r));const i=c(e,["prompt"]);i!=null&&f(n,["instances[0]","prompt"],i);const o=c(e,["config"]);return o!=null&&R4(o,n),n}function N4(t,e){const n={},r=c(e,["model"]);r!=null&&f(n,["_url","model"],pe(t,r));const i=c(e,["prompt"]);i!=null&&f(n,["instances[0]","prompt"],i);const o=c(e,["config"]);return o!=null&&x4(o,n),n}function k4(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const r=c(t,["predictions"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(s=>q4(s))),f(e,["generatedImages"],o)}const i=c(t,["positivePromptSafetyAttributes"]);return i!=null&&f(e,["positivePromptSafetyAttributes"],GC(i)),e}function D4(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const r=c(t,["predictions"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(s=>Kc(s))),f(e,["generatedImages"],o)}const i=c(t,["positivePromptSafetyAttributes"]);return i!=null&&f(e,["positivePromptSafetyAttributes"],HC(i)),e}function M4(t,e){const n={},r=c(t,["numberOfVideos"]);if(e!==void 0&&r!=null&&f(e,["parameters","sampleCount"],r),c(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(c(t,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const i=c(t,["durationSeconds"]);if(e!==void 0&&i!=null&&f(e,["parameters","durationSeconds"],i),c(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const o=c(t,["aspectRatio"]);e!==void 0&&o!=null&&f(e,["parameters","aspectRatio"],o);const s=c(t,["resolution"]);e!==void 0&&s!=null&&f(e,["parameters","resolution"],s);const a=c(t,["personGeneration"]);if(e!==void 0&&a!=null&&f(e,["parameters","personGeneration"],a),c(t,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const l=c(t,["negativePrompt"]);e!==void 0&&l!=null&&f(e,["parameters","negativePrompt"],l);const u=c(t,["enhancePrompt"]);if(e!==void 0&&u!=null&&f(e,["parameters","enhancePrompt"],u),c(t,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const h=c(t,["lastFrame"]);e!==void 0&&h!=null&&f(e,["instances[0]","lastFrame"],Jc(h));const p=c(t,["referenceImages"]);if(e!==void 0&&p!=null){let m=p;Array.isArray(m)&&(m=m.map(_=>LB(_))),f(e,["instances[0]","referenceImages"],m)}if(c(t,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(c(t,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return n}function b4(t,e){const n={},r=c(t,["numberOfVideos"]);e!==void 0&&r!=null&&f(e,["parameters","sampleCount"],r);const i=c(t,["outputGcsUri"]);e!==void 0&&i!=null&&f(e,["parameters","storageUri"],i);const o=c(t,["fps"]);e!==void 0&&o!=null&&f(e,["parameters","fps"],o);const s=c(t,["durationSeconds"]);e!==void 0&&s!=null&&f(e,["parameters","durationSeconds"],s);const a=c(t,["seed"]);e!==void 0&&a!=null&&f(e,["parameters","seed"],a);const l=c(t,["aspectRatio"]);e!==void 0&&l!=null&&f(e,["parameters","aspectRatio"],l);const u=c(t,["resolution"]);e!==void 0&&u!=null&&f(e,["parameters","resolution"],u);const h=c(t,["personGeneration"]);e!==void 0&&h!=null&&f(e,["parameters","personGeneration"],h);const p=c(t,["pubsubTopic"]);e!==void 0&&p!=null&&f(e,["parameters","pubsubTopic"],p);const m=c(t,["negativePrompt"]);e!==void 0&&m!=null&&f(e,["parameters","negativePrompt"],m);const _=c(t,["enhancePrompt"]);e!==void 0&&_!=null&&f(e,["parameters","enhancePrompt"],_);const E=c(t,["generateAudio"]);e!==void 0&&E!=null&&f(e,["parameters","generateAudio"],E);const P=c(t,["lastFrame"]);e!==void 0&&P!=null&&f(e,["instances[0]","lastFrame"],An(P));const x=c(t,["referenceImages"]);if(e!==void 0&&x!=null){let C=x;Array.isArray(C)&&(C=C.map(M=>VB(M))),f(e,["instances[0]","referenceImages"],C)}const I=c(t,["mask"]);e!==void 0&&I!=null&&f(e,["instances[0]","mask"],bB(I));const T=c(t,["compressionQuality"]);return e!==void 0&&T!=null&&f(e,["parameters","compressionQuality"],T),n}function L4(t){const e={},n=c(t,["name"]);n!=null&&f(e,["name"],n);const r=c(t,["metadata"]);r!=null&&f(e,["metadata"],r);const i=c(t,["done"]);i!=null&&f(e,["done"],i);const o=c(t,["error"]);o!=null&&f(e,["error"],o);const s=c(t,["response","generateVideoResponse"]);return s!=null&&f(e,["response"],O4(s)),e}function V4(t){const e={},n=c(t,["name"]);n!=null&&f(e,["name"],n);const r=c(t,["metadata"]);r!=null&&f(e,["metadata"],r);const i=c(t,["done"]);i!=null&&f(e,["done"],i);const o=c(t,["error"]);o!=null&&f(e,["error"],o);const s=c(t,["response"]);return s!=null&&f(e,["response"],B4(s)),e}function U4(t,e){const n={},r=c(e,["model"]);r!=null&&f(n,["_url","model"],pe(t,r));const i=c(e,["prompt"]);i!=null&&f(n,["instances[0]","prompt"],i);const o=c(e,["image"]);o!=null&&f(n,["instances[0]","image"],Jc(o));const s=c(e,["video"]);s!=null&&f(n,["instances[0]","video"],$C(s));const a=c(e,["source"]);a!=null&&G4(a,n);const l=c(e,["config"]);return l!=null&&M4(l,n),n}function F4(t,e){const n={},r=c(e,["model"]);r!=null&&f(n,["_url","model"],pe(t,r));const i=c(e,["prompt"]);i!=null&&f(n,["instances[0]","prompt"],i);const o=c(e,["image"]);o!=null&&f(n,["instances[0]","image"],An(o));const s=c(e,["video"]);s!=null&&f(n,["instances[0]","video"],zC(s));const a=c(e,["source"]);a!=null&&H4(a,n);const l=c(e,["config"]);return l!=null&&b4(l,n),n}function O4(t){const e={},n=c(t,["generatedSamples"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(s=>z4(s))),f(e,["generatedVideos"],o)}const r=c(t,["raiMediaFilteredCount"]);r!=null&&f(e,["raiMediaFilteredCount"],r);const i=c(t,["raiMediaFilteredReasons"]);return i!=null&&f(e,["raiMediaFilteredReasons"],i),e}function B4(t){const e={},n=c(t,["videos"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(s=>W4(s))),f(e,["generatedVideos"],o)}const r=c(t,["raiMediaFilteredCount"]);r!=null&&f(e,["raiMediaFilteredCount"],r);const i=c(t,["raiMediaFilteredReasons"]);return i!=null&&f(e,["raiMediaFilteredReasons"],i),e}function G4(t,e){const n={},r=c(t,["prompt"]);e!==void 0&&r!=null&&f(e,["instances[0]","prompt"],r);const i=c(t,["image"]);e!==void 0&&i!=null&&f(e,["instances[0]","image"],Jc(i));const o=c(t,["video"]);return e!==void 0&&o!=null&&f(e,["instances[0]","video"],$C(o)),n}function H4(t,e){const n={},r=c(t,["prompt"]);e!==void 0&&r!=null&&f(e,["instances[0]","prompt"],r);const i=c(t,["image"]);e!==void 0&&i!=null&&f(e,["instances[0]","image"],An(i));const o=c(t,["video"]);return e!==void 0&&o!=null&&f(e,["instances[0]","video"],zC(o)),n}function q4(t){const e={},n=c(t,["_self"]);n!=null&&f(e,["image"],eB(n));const r=c(t,["raiFilteredReason"]);r!=null&&f(e,["raiFilteredReason"],r);const i=c(t,["_self"]);return i!=null&&f(e,["safetyAttributes"],GC(i)),e}function Kc(t){const e={},n=c(t,["_self"]);n!=null&&f(e,["image"],BC(n));const r=c(t,["raiFilteredReason"]);r!=null&&f(e,["raiFilteredReason"],r);const i=c(t,["_self"]);i!=null&&f(e,["safetyAttributes"],HC(i));const o=c(t,["prompt"]);return o!=null&&f(e,["enhancedPrompt"],o),e}function $4(t){const e={},n=c(t,["_self"]);n!=null&&f(e,["mask"],BC(n));const r=c(t,["labels"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(o=>o)),f(e,["labels"],i)}return e}function z4(t){const e={},n=c(t,["video"]);return n!=null&&f(e,["video"],DB(n)),e}function W4(t){const e={},n=c(t,["_self"]);return n!=null&&f(e,["video"],MB(n)),e}function K4(t){const e={},n=c(t,["modelSelectionConfig"]);n!=null&&f(e,["modelConfig"],n);const r=c(t,["responseJsonSchema"]);r!=null&&f(e,["responseJsonSchema"],r);const i=c(t,["audioTimestamp"]);i!=null&&f(e,["audioTimestamp"],i);const o=c(t,["candidateCount"]);o!=null&&f(e,["candidateCount"],o);const s=c(t,["enableAffectiveDialog"]);s!=null&&f(e,["enableAffectiveDialog"],s);const a=c(t,["frequencyPenalty"]);a!=null&&f(e,["frequencyPenalty"],a);const l=c(t,["logprobs"]);l!=null&&f(e,["logprobs"],l);const u=c(t,["maxOutputTokens"]);u!=null&&f(e,["maxOutputTokens"],u);const h=c(t,["mediaResolution"]);h!=null&&f(e,["mediaResolution"],h);const p=c(t,["presencePenalty"]);p!=null&&f(e,["presencePenalty"],p);const m=c(t,["responseLogprobs"]);m!=null&&f(e,["responseLogprobs"],m);const _=c(t,["responseMimeType"]);_!=null&&f(e,["responseMimeType"],_);const E=c(t,["responseModalities"]);E!=null&&f(e,["responseModalities"],E);const P=c(t,["responseSchema"]);P!=null&&f(e,["responseSchema"],P);const x=c(t,["routingConfig"]);x!=null&&f(e,["routingConfig"],x);const I=c(t,["seed"]);I!=null&&f(e,["seed"],I);const T=c(t,["speechConfig"]);T!=null&&f(e,["speechConfig"],T);const C=c(t,["stopSequences"]);C!=null&&f(e,["stopSequences"],C);const M=c(t,["temperature"]);M!=null&&f(e,["temperature"],M);const U=c(t,["thinkingConfig"]);U!=null&&f(e,["thinkingConfig"],U);const L=c(t,["topK"]);L!=null&&f(e,["topK"],L);const R=c(t,["topP"]);if(R!=null&&f(e,["topP"],R),c(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function J4(t,e){const n={},r=c(e,["model"]);return r!=null&&f(n,["_url","name"],pe(t,r)),n}function Y4(t,e){const n={},r=c(e,["model"]);return r!=null&&f(n,["_url","name"],pe(t,r)),n}function j4(t){const e={};if(c(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=c(t,["enableWidget"]);return n!=null&&f(e,["enableWidget"],n),e}function Q4(t){const e={};if(c(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(c(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=c(t,["timeRangeFilter"]);return n!=null&&f(e,["timeRangeFilter"],n),e}function X4(t){const e={},n=c(t,["aspectRatio"]);n!=null&&f(e,["aspectRatio"],n);const r=c(t,["imageSize"]);if(r!=null&&f(e,["imageSize"],r),c(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(c(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function Z4(t){const e={},n=c(t,["aspectRatio"]);n!=null&&f(e,["aspectRatio"],n);const r=c(t,["imageSize"]);r!=null&&f(e,["imageSize"],r);const i=c(t,["outputMimeType"]);i!=null&&f(e,["imageOutputOptions","mimeType"],i);const o=c(t,["outputCompressionQuality"]);return o!=null&&f(e,["imageOutputOptions","compressionQuality"],o),e}function eB(t){const e={},n=c(t,["bytesBase64Encoded"]);n!=null&&f(e,["imageBytes"],si(n));const r=c(t,["mimeType"]);return r!=null&&f(e,["mimeType"],r),e}function BC(t){const e={},n=c(t,["gcsUri"]);n!=null&&f(e,["gcsUri"],n);const r=c(t,["bytesBase64Encoded"]);r!=null&&f(e,["imageBytes"],si(r));const i=c(t,["mimeType"]);return i!=null&&f(e,["mimeType"],i),e}function Jc(t){const e={};if(c(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const n=c(t,["imageBytes"]);n!=null&&f(e,["bytesBase64Encoded"],si(n));const r=c(t,["mimeType"]);return r!=null&&f(e,["mimeType"],r),e}function An(t){const e={},n=c(t,["gcsUri"]);n!=null&&f(e,["gcsUri"],n);const r=c(t,["imageBytes"]);r!=null&&f(e,["bytesBase64Encoded"],si(r));const i=c(t,["mimeType"]);return i!=null&&f(e,["mimeType"],i),e}function tB(t,e,n){const r={},i=c(e,["pageSize"]);n!==void 0&&i!=null&&f(n,["_query","pageSize"],i);const o=c(e,["pageToken"]);n!==void 0&&o!=null&&f(n,["_query","pageToken"],o);const s=c(e,["filter"]);n!==void 0&&s!=null&&f(n,["_query","filter"],s);const a=c(e,["queryBase"]);return n!==void 0&&a!=null&&f(n,["_url","models_url"],MC(t,a)),r}function nB(t,e,n){const r={},i=c(e,["pageSize"]);n!==void 0&&i!=null&&f(n,["_query","pageSize"],i);const o=c(e,["pageToken"]);n!==void 0&&o!=null&&f(n,["_query","pageToken"],o);const s=c(e,["filter"]);n!==void 0&&s!=null&&f(n,["_query","filter"],s);const a=c(e,["queryBase"]);return n!==void 0&&a!=null&&f(n,["_url","models_url"],MC(t,a)),r}function rB(t,e){const n={},r=c(e,["config"]);return r!=null&&tB(t,r,n),n}function iB(t,e){const n={},r=c(e,["config"]);return r!=null&&nB(t,r,n),n}function oB(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const r=c(t,["nextPageToken"]);r!=null&&f(e,["nextPageToken"],r);const i=c(t,["_self"]);if(i!=null){let o=bC(i);Array.isArray(o)&&(o=o.map(s=>Gh(s))),f(e,["models"],o)}return e}function sB(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const r=c(t,["nextPageToken"]);r!=null&&f(e,["nextPageToken"],r);const i=c(t,["_self"]);if(i!=null){let o=bC(i);Array.isArray(o)&&(o=o.map(s=>Hh(s))),f(e,["models"],o)}return e}function aB(t){const e={},n=c(t,["maskMode"]);n!=null&&f(e,["maskMode"],n);const r=c(t,["segmentationClasses"]);r!=null&&f(e,["maskClasses"],r);const i=c(t,["maskDilation"]);return i!=null&&f(e,["dilation"],i),e}function Gh(t){const e={},n=c(t,["name"]);n!=null&&f(e,["name"],n);const r=c(t,["displayName"]);r!=null&&f(e,["displayName"],r);const i=c(t,["description"]);i!=null&&f(e,["description"],i);const o=c(t,["version"]);o!=null&&f(e,["version"],o);const s=c(t,["_self"]);s!=null&&f(e,["tunedModelInfo"],IB(s));const a=c(t,["inputTokenLimit"]);a!=null&&f(e,["inputTokenLimit"],a);const l=c(t,["outputTokenLimit"]);l!=null&&f(e,["outputTokenLimit"],l);const u=c(t,["supportedGenerationMethods"]);u!=null&&f(e,["supportedActions"],u);const h=c(t,["temperature"]);h!=null&&f(e,["temperature"],h);const p=c(t,["maxTemperature"]);p!=null&&f(e,["maxTemperature"],p);const m=c(t,["topP"]);m!=null&&f(e,["topP"],m);const _=c(t,["topK"]);_!=null&&f(e,["topK"],_);const E=c(t,["thinking"]);return E!=null&&f(e,["thinking"],E),e}function Hh(t){const e={},n=c(t,["name"]);n!=null&&f(e,["name"],n);const r=c(t,["displayName"]);r!=null&&f(e,["displayName"],r);const i=c(t,["description"]);i!=null&&f(e,["description"],i);const o=c(t,["versionId"]);o!=null&&f(e,["version"],o);const s=c(t,["deployedModels"]);if(s!=null){let p=s;Array.isArray(p)&&(p=p.map(m=>E4(m))),f(e,["endpoints"],p)}const a=c(t,["labels"]);a!=null&&f(e,["labels"],a);const l=c(t,["_self"]);l!=null&&f(e,["tunedModelInfo"],SB(l));const u=c(t,["defaultCheckpointId"]);u!=null&&f(e,["defaultCheckpointId"],u);const h=c(t,["checkpoints"]);if(h!=null){let p=h;Array.isArray(p)&&(p=p.map(m=>m)),f(e,["checkpoints"],p)}return e}function lB(t){const e={},n=c(t,["mediaResolution"]);n!=null&&f(e,["mediaResolution"],n);const r=c(t,["codeExecutionResult"]);r!=null&&f(e,["codeExecutionResult"],r);const i=c(t,["executableCode"]);i!=null&&f(e,["executableCode"],i);const o=c(t,["fileData"]);o!=null&&f(e,["fileData"],T4(o));const s=c(t,["functionCall"]);s!=null&&f(e,["functionCall"],w4(s));const a=c(t,["functionResponse"]);a!=null&&f(e,["functionResponse"],a);const l=c(t,["inlineData"]);l!=null&&f(e,["inlineData"],KO(l));const u=c(t,["text"]);u!=null&&f(e,["text"],u);const h=c(t,["thought"]);h!=null&&f(e,["thought"],h);const p=c(t,["thoughtSignature"]);p!=null&&f(e,["thoughtSignature"],p);const m=c(t,["videoMetadata"]);return m!=null&&f(e,["videoMetadata"],m),e}function uB(t){const e={},n=c(t,["productImage"]);return n!=null&&f(e,["image"],An(n)),e}function cB(t,e){const n={},r=c(t,["numberOfImages"]);e!==void 0&&r!=null&&f(e,["parameters","sampleCount"],r);const i=c(t,["baseSteps"]);e!==void 0&&i!=null&&f(e,["parameters","baseSteps"],i);const o=c(t,["outputGcsUri"]);e!==void 0&&o!=null&&f(e,["parameters","storageUri"],o);const s=c(t,["seed"]);e!==void 0&&s!=null&&f(e,["parameters","seed"],s);const a=c(t,["safetyFilterLevel"]);e!==void 0&&a!=null&&f(e,["parameters","safetySetting"],a);const l=c(t,["personGeneration"]);e!==void 0&&l!=null&&f(e,["parameters","personGeneration"],l);const u=c(t,["addWatermark"]);e!==void 0&&u!=null&&f(e,["parameters","addWatermark"],u);const h=c(t,["outputMimeType"]);e!==void 0&&h!=null&&f(e,["parameters","outputOptions","mimeType"],h);const p=c(t,["outputCompressionQuality"]);e!==void 0&&p!=null&&f(e,["parameters","outputOptions","compressionQuality"],p);const m=c(t,["enhancePrompt"]);e!==void 0&&m!=null&&f(e,["parameters","enhancePrompt"],m);const _=c(t,["labels"]);return e!==void 0&&_!=null&&f(e,["labels"],_),n}function dB(t,e){const n={},r=c(e,["model"]);r!=null&&f(n,["_url","model"],pe(t,r));const i=c(e,["source"]);i!=null&&hB(i,n);const o=c(e,["config"]);return o!=null&&cB(o,n),n}function fB(t){const e={},n=c(t,["predictions"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>Kc(i))),f(e,["generatedImages"],r)}return e}function hB(t,e){const n={},r=c(t,["prompt"]);e!==void 0&&r!=null&&f(e,["instances[0]","prompt"],r);const i=c(t,["personImage"]);e!==void 0&&i!=null&&f(e,["instances[0]","personImage","image"],An(i));const o=c(t,["productImages"]);if(e!==void 0&&o!=null){let s=o;Array.isArray(s)&&(s=s.map(a=>uB(a))),f(e,["instances[0]","productImages"],s)}return n}function pB(t){const e={},n=c(t,["referenceImage"]);n!=null&&f(e,["referenceImage"],An(n));const r=c(t,["referenceId"]);r!=null&&f(e,["referenceId"],r);const i=c(t,["referenceType"]);i!=null&&f(e,["referenceType"],i);const o=c(t,["maskImageConfig"]);o!=null&&f(e,["maskImageConfig"],aB(o));const s=c(t,["controlImageConfig"]);s!=null&&f(e,["controlImageConfig"],e4(s));const a=c(t,["styleImageConfig"]);a!=null&&f(e,["styleImageConfig"],a);const l=c(t,["subjectImageConfig"]);return l!=null&&f(e,["subjectImageConfig"],l),e}function GC(t){const e={},n=c(t,["safetyAttributes","categories"]);n!=null&&f(e,["categories"],n);const r=c(t,["safetyAttributes","scores"]);r!=null&&f(e,["scores"],r);const i=c(t,["contentType"]);return i!=null&&f(e,["contentType"],i),e}function HC(t){const e={},n=c(t,["safetyAttributes","categories"]);n!=null&&f(e,["categories"],n);const r=c(t,["safetyAttributes","scores"]);r!=null&&f(e,["scores"],r);const i=c(t,["contentType"]);return i!=null&&f(e,["contentType"],i),e}function mB(t){const e={},n=c(t,["category"]);if(n!=null&&f(e,["category"],n),c(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const r=c(t,["threshold"]);return r!=null&&f(e,["threshold"],r),e}function gB(t){const e={},n=c(t,["image"]);return n!=null&&f(e,["image"],An(n)),e}function yB(t,e){const n={},r=c(t,["mode"]);e!==void 0&&r!=null&&f(e,["parameters","mode"],r);const i=c(t,["maxPredictions"]);e!==void 0&&i!=null&&f(e,["parameters","maxPredictions"],i);const o=c(t,["confidenceThreshold"]);e!==void 0&&o!=null&&f(e,["parameters","confidenceThreshold"],o);const s=c(t,["maskDilation"]);e!==void 0&&s!=null&&f(e,["parameters","maskDilation"],s);const a=c(t,["binaryColorThreshold"]);e!==void 0&&a!=null&&f(e,["parameters","binaryColorThreshold"],a);const l=c(t,["labels"]);return e!==void 0&&l!=null&&f(e,["labels"],l),n}function vB(t,e){const n={},r=c(e,["model"]);r!=null&&f(n,["_url","model"],pe(t,r));const i=c(e,["source"]);i!=null&&EB(i,n);const o=c(e,["config"]);return o!=null&&yB(o,n),n}function _B(t){const e={},n=c(t,["predictions"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>$4(i))),f(e,["generatedMasks"],r)}return e}function EB(t,e){const n={},r=c(t,["prompt"]);e!==void 0&&r!=null&&f(e,["instances[0]","prompt"],r);const i=c(t,["image"]);e!==void 0&&i!=null&&f(e,["instances[0]","image"],An(i));const o=c(t,["scribbleImage"]);return e!==void 0&&o!=null&&f(e,["instances[0]","scribble"],gB(o)),n}function TB(t){const e={},n=c(t,["functionCallingConfig"]);n!=null&&f(e,["functionCallingConfig"],I4(n));const r=c(t,["retrievalConfig"]);return r!=null&&f(e,["retrievalConfig"],r),e}function wB(t){const e={},n=c(t,["functionDeclarations"]);if(n!=null){let h=n;Array.isArray(h)&&(h=h.map(p=>p)),f(e,["functionDeclarations"],h)}if(c(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=c(t,["googleSearchRetrieval"]);r!=null&&f(e,["googleSearchRetrieval"],r);const i=c(t,["computerUse"]);i!=null&&f(e,["computerUse"],i);const o=c(t,["fileSearch"]);o!=null&&f(e,["fileSearch"],o);const s=c(t,["codeExecution"]);if(s!=null&&f(e,["codeExecution"],s),c(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=c(t,["googleMaps"]);a!=null&&f(e,["googleMaps"],j4(a));const l=c(t,["googleSearch"]);l!=null&&f(e,["googleSearch"],Q4(l));const u=c(t,["urlContext"]);return u!=null&&f(e,["urlContext"],u),e}function qC(t){const e={},n=c(t,["functionDeclarations"]);if(n!=null){let p=n;Array.isArray(p)&&(p=p.map(m=>S4(m))),f(e,["functionDeclarations"],p)}const r=c(t,["retrieval"]);r!=null&&f(e,["retrieval"],r);const i=c(t,["googleSearchRetrieval"]);i!=null&&f(e,["googleSearchRetrieval"],i);const o=c(t,["computerUse"]);if(o!=null&&f(e,["computerUse"],o),c(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const s=c(t,["codeExecution"]);s!=null&&f(e,["codeExecution"],s);const a=c(t,["enterpriseWebSearch"]);a!=null&&f(e,["enterpriseWebSearch"],a);const l=c(t,["googleMaps"]);l!=null&&f(e,["googleMaps"],l);const u=c(t,["googleSearch"]);u!=null&&f(e,["googleSearch"],u);const h=c(t,["urlContext"]);return h!=null&&f(e,["urlContext"],h),e}function IB(t){const e={},n=c(t,["baseModel"]);n!=null&&f(e,["baseModel"],n);const r=c(t,["createTime"]);r!=null&&f(e,["createTime"],r);const i=c(t,["updateTime"]);return i!=null&&f(e,["updateTime"],i),e}function SB(t){const e={},n=c(t,["labels","google-vertex-llm-tuning-base-model-id"]);n!=null&&f(e,["baseModel"],n);const r=c(t,["createTime"]);r!=null&&f(e,["createTime"],r);const i=c(t,["updateTime"]);return i!=null&&f(e,["updateTime"],i),e}function CB(t,e){const n={},r=c(t,["displayName"]);e!==void 0&&r!=null&&f(e,["displayName"],r);const i=c(t,["description"]);e!==void 0&&i!=null&&f(e,["description"],i);const o=c(t,["defaultCheckpointId"]);return e!==void 0&&o!=null&&f(e,["defaultCheckpointId"],o),n}function AB(t,e){const n={},r=c(t,["displayName"]);e!==void 0&&r!=null&&f(e,["displayName"],r);const i=c(t,["description"]);e!==void 0&&i!=null&&f(e,["description"],i);const o=c(t,["defaultCheckpointId"]);return e!==void 0&&o!=null&&f(e,["defaultCheckpointId"],o),n}function RB(t,e){const n={},r=c(e,["model"]);r!=null&&f(n,["_url","name"],pe(t,r));const i=c(e,["config"]);return i!=null&&CB(i,n),n}function xB(t,e){const n={},r=c(e,["model"]);r!=null&&f(n,["_url","model"],pe(t,r));const i=c(e,["config"]);return i!=null&&AB(i,n),n}function PB(t,e){const n={},r=c(t,["outputGcsUri"]);e!==void 0&&r!=null&&f(e,["parameters","storageUri"],r);const i=c(t,["safetyFilterLevel"]);e!==void 0&&i!=null&&f(e,["parameters","safetySetting"],i);const o=c(t,["personGeneration"]);e!==void 0&&o!=null&&f(e,["parameters","personGeneration"],o);const s=c(t,["includeRaiReason"]);e!==void 0&&s!=null&&f(e,["parameters","includeRaiReason"],s);const a=c(t,["outputMimeType"]);e!==void 0&&a!=null&&f(e,["parameters","outputOptions","mimeType"],a);const l=c(t,["outputCompressionQuality"]);e!==void 0&&l!=null&&f(e,["parameters","outputOptions","compressionQuality"],l);const u=c(t,["enhanceInputImage"]);e!==void 0&&u!=null&&f(e,["parameters","upscaleConfig","enhanceInputImage"],u);const h=c(t,["imagePreservationFactor"]);e!==void 0&&h!=null&&f(e,["parameters","upscaleConfig","imagePreservationFactor"],h);const p=c(t,["labels"]);e!==void 0&&p!=null&&f(e,["labels"],p);const m=c(t,["numberOfImages"]);e!==void 0&&m!=null&&f(e,["parameters","sampleCount"],m);const _=c(t,["mode"]);return e!==void 0&&_!=null&&f(e,["parameters","mode"],_),n}function NB(t,e){const n={},r=c(e,["model"]);r!=null&&f(n,["_url","model"],pe(t,r));const i=c(e,["image"]);i!=null&&f(n,["instances[0]","image"],An(i));const o=c(e,["upscaleFactor"]);o!=null&&f(n,["parameters","upscaleConfig","upscaleFactor"],o);const s=c(e,["config"]);return s!=null&&PB(s,n),n}function kB(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const r=c(t,["predictions"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(o=>Kc(o))),f(e,["generatedImages"],i)}return e}function DB(t){const e={},n=c(t,["uri"]);n!=null&&f(e,["uri"],n);const r=c(t,["encodedVideo"]);r!=null&&f(e,["videoBytes"],si(r));const i=c(t,["encoding"]);return i!=null&&f(e,["mimeType"],i),e}function MB(t){const e={},n=c(t,["gcsUri"]);n!=null&&f(e,["uri"],n);const r=c(t,["bytesBase64Encoded"]);r!=null&&f(e,["videoBytes"],si(r));const i=c(t,["mimeType"]);return i!=null&&f(e,["mimeType"],i),e}function bB(t){const e={},n=c(t,["image"]);n!=null&&f(e,["_self"],An(n));const r=c(t,["maskMode"]);return r!=null&&f(e,["maskMode"],r),e}function LB(t){const e={},n=c(t,["image"]);n!=null&&f(e,["image"],Jc(n));const r=c(t,["referenceType"]);return r!=null&&f(e,["referenceType"],r),e}function VB(t){const e={},n=c(t,["image"]);n!=null&&f(e,["image"],An(n));const r=c(t,["referenceType"]);return r!=null&&f(e,["referenceType"],r),e}function $C(t){const e={},n=c(t,["uri"]);n!=null&&f(e,["uri"],n);const r=c(t,["videoBytes"]);r!=null&&f(e,["encodedVideo"],si(r));const i=c(t,["mimeType"]);return i!=null&&f(e,["encoding"],i),e}function zC(t){const e={},n=c(t,["uri"]);n!=null&&f(e,["gcsUri"],n);const r=c(t,["videoBytes"]);r!=null&&f(e,["bytesBase64Encoded"],si(r));const i=c(t,["mimeType"]);return i!=null&&f(e,["mimeType"],i),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function UB(t,e){const n={},r=c(t,["displayName"]);return e!==void 0&&r!=null&&f(e,["displayName"],r),n}function FB(t){const e={},n=c(t,["config"]);return n!=null&&UB(n,e),e}function OB(t,e){const n={},r=c(t,["force"]);return e!==void 0&&r!=null&&f(e,["_query","force"],r),n}function BB(t){const e={},n=c(t,["name"]);n!=null&&f(e,["_url","name"],n);const r=c(t,["config"]);return r!=null&&OB(r,e),e}function GB(t){const e={},n=c(t,["name"]);return n!=null&&f(e,["_url","name"],n),e}function HB(t,e){const n={},r=c(t,["customMetadata"]);if(e!==void 0&&r!=null){let o=r;Array.isArray(o)&&(o=o.map(s=>s)),f(e,["customMetadata"],o)}const i=c(t,["chunkingConfig"]);return e!==void 0&&i!=null&&f(e,["chunkingConfig"],i),n}function qB(t){const e={},n=c(t,["name"]);n!=null&&f(e,["name"],n);const r=c(t,["metadata"]);r!=null&&f(e,["metadata"],r);const i=c(t,["done"]);i!=null&&f(e,["done"],i);const o=c(t,["error"]);o!=null&&f(e,["error"],o);const s=c(t,["response"]);return s!=null&&f(e,["response"],zB(s)),e}function $B(t){const e={},n=c(t,["fileSearchStoreName"]);n!=null&&f(e,["_url","file_search_store_name"],n);const r=c(t,["fileName"]);r!=null&&f(e,["fileName"],r);const i=c(t,["config"]);return i!=null&&HB(i,e),e}function zB(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const r=c(t,["parent"]);r!=null&&f(e,["parent"],r);const i=c(t,["documentName"]);return i!=null&&f(e,["documentName"],i),e}function WB(t,e){const n={},r=c(t,["pageSize"]);e!==void 0&&r!=null&&f(e,["_query","pageSize"],r);const i=c(t,["pageToken"]);return e!==void 0&&i!=null&&f(e,["_query","pageToken"],i),n}function KB(t){const e={},n=c(t,["config"]);return n!=null&&WB(n,e),e}function JB(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const r=c(t,["nextPageToken"]);r!=null&&f(e,["nextPageToken"],r);const i=c(t,["fileSearchStores"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>s)),f(e,["fileSearchStores"],o)}return e}function WC(t,e){const n={},r=c(t,["mimeType"]);e!==void 0&&r!=null&&f(e,["mimeType"],r);const i=c(t,["displayName"]);e!==void 0&&i!=null&&f(e,["displayName"],i);const o=c(t,["customMetadata"]);if(e!==void 0&&o!=null){let a=o;Array.isArray(a)&&(a=a.map(l=>l)),f(e,["customMetadata"],a)}const s=c(t,["chunkingConfig"]);return e!==void 0&&s!=null&&f(e,["chunkingConfig"],s),n}function YB(t){const e={},n=c(t,["fileSearchStoreName"]);n!=null&&f(e,["_url","file_search_store_name"],n);const r=c(t,["config"]);return r!=null&&WC(r,e),e}function jB(t){const e={},n=c(t,["sdkHttpResponse"]);return n!=null&&f(e,["sdkHttpResponse"],n),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const QB="Content-Type",XB="X-Server-Timeout",ZB="User-Agent",qh="x-goog-api-client",eG="1.34.0",tG=`google-genai-sdk/${eG}`,nG="v1beta1",rG="v1beta";class iG{constructor(e){var n,r;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const i={};this.clientOptions.vertexai?(i.apiVersion=(n=this.clientOptions.apiVersion)!==null&&n!==void 0?n:nG,i.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(i.apiVersion=(r=this.clientOptions.apiVersion)!==null&&r!==void 0?r:rG,i.baseUrl="https://generativelanguage.googleapis.com/"),i.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=i,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(i,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}async getAuthHeaders(){const e=new Headers;return await this.clientOptions.auth.addAuthHeaders(e),e}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const r=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&r.push(e.apiVersion),r.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),n=new URL(e);return n.protocol=n.protocol=="http:"?"ws":"wss",n.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,n,r){const i=[this.getRequestUrlInternal(n)];return r&&i.push(this.getBaseResourcePath()),e!==""&&i.push(e),new URL(`${i.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const r=this.shouldPrependVertexProjectPath(e),i=this.constructUrl(e.path,n,r);if(e.queryParams)for(const[s,a]of Object.entries(e.queryParams))i.searchParams.append(s,String(a));let o={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else o.body=e.body;return o=await this.includeExtraHttpOptionsToRequestInit(o,n,i.toString(),e.abortSignal),this.unaryApiCall(i,o,e.httpMethod)}patchHttpOptions(e,n){const r=JSON.parse(JSON.stringify(e));for(const[i,o]of Object.entries(n))typeof o=="object"?r[i]=Object.assign(Object.assign({},r[i]),o):o!==void 0&&(r[i]=o);return r}async requestStream(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const r=this.shouldPrependVertexProjectPath(e),i=this.constructUrl(e.path,n,r);(!i.searchParams.has("alt")||i.searchParams.get("alt")!=="sse")&&i.searchParams.set("alt","sse");let o={};return o.body=e.body,o=await this.includeExtraHttpOptionsToRequestInit(o,n,i.toString(),e.abortSignal),this.streamApiCall(i,o,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,n,r,i){if(n&&n.timeout||i){const o=new AbortController,s=o.signal;if(n.timeout&&(n==null?void 0:n.timeout)>0){const a=setTimeout(()=>o.abort(),n.timeout);a&&typeof a.unref=="function"&&a.unref()}i&&i.addEventListener("abort",()=>{o.abort()}),e.signal=s}return n&&n.extraBody!==null&&oG(e,n.extraBody),e.headers=await this.getHeadersInternal(n,r),e}async unaryApiCall(e,n,r){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:r})).then(async i=>(await uE(i),new Fh(i))).catch(i=>{throw i instanceof Error?i:new Error(JSON.stringify(i))})}async streamApiCall(e,n,r){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:r})).then(async i=>(await uE(i),this.processStreamResponse(i))).catch(i=>{throw i instanceof Error?i:new Error(JSON.stringify(i))})}processStreamResponse(e){return En(this,arguments,function*(){var r;const i=(r=e==null?void 0:e.body)===null||r===void 0?void 0:r.getReader(),o=new TextDecoder("utf-8");if(!i)throw new Error("Response body is empty");try{let s="";const a="data:",l=[`

`,"\r\r",`\r
\r
`];for(;;){const{done:u,value:h}=yield re(i.read());if(u){if(s.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const p=o.decode(h,{stream:!0});try{const E=JSON.parse(p);if("error"in E){const P=JSON.parse(JSON.stringify(E.error)),x=P.status,I=P.code,T=`got status: ${x}. ${JSON.stringify(E)}`;if(I>=400&&I<600)throw new zc({message:T,status:I})}}catch(E){if(E.name==="ApiError")throw E}s+=p;let m=-1,_=0;for(;;){m=-1,_=0;for(const x of l){const I=s.indexOf(x);I!==-1&&(m===-1||I<m)&&(m=I,_=x.length)}if(m===-1)break;const E=s.substring(0,m);s=s.substring(m+_);const P=E.trim();if(P.startsWith(a)){const x=P.substring(a.length).trim();try{const I=new Response(x,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield re(new Fh(I))}catch(I){throw new Error(`exception parsing stream chunk ${x}. ${I}`)}}}}}finally{i.releaseLock()}})}async apiCall(e,n){return fetch(e,n).catch(r=>{throw new Error(`exception ${r} sending request`)})}getDefaultHeaders(){const e={},n=tG+" "+this.clientOptions.userAgentExtra;return e[ZB]=n,e[qh]=n,e[QB]="application/json",e}async getHeadersInternal(e,n){const r=new Headers;if(e&&e.headers){for(const[i,o]of Object.entries(e.headers))r.append(i,o);e.timeout&&e.timeout>0&&r.append(XB,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(r,n),r}getFileName(e){var n;let r="";return typeof e=="string"&&(r=e.replace(/[/\\]+$/,""),r=(n=r.split(/[/\\]/).pop())!==null&&n!==void 0?n:""),r}async uploadFile(e,n){var r;const i={};n!=null&&(i.mimeType=n.mimeType,i.name=n.name,i.displayName=n.displayName),i.name&&!i.name.startsWith("files/")&&(i.name=`files/${i.name}`);const o=this.clientOptions.uploader,s=await o.stat(e);i.sizeBytes=String(s.size);const a=(r=n==null?void 0:n.mimeType)!==null&&r!==void 0?r:s.type;if(a===void 0||a==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");i.mimeType=a;const l={file:i},u=this.getFileName(e),h=W("upload/v1beta/files",l._url),p=await this.fetchUploadUrl(h,i.sizeBytes,i.mimeType,u,l,n==null?void 0:n.httpOptions);return o.upload(e,p,this)}async uploadFileToFileSearchStore(e,n,r){var i;const o=this.clientOptions.uploader,s=await o.stat(n),a=String(s.size),l=(i=r==null?void 0:r.mimeType)!==null&&i!==void 0?i:s.type;if(l===void 0||l==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const u=`upload/v1beta/${e}:uploadToFileSearchStore`,h=this.getFileName(n),p={};r!=null&&WC(r,p);const m=await this.fetchUploadUrl(u,a,l,h,p,r==null?void 0:r.httpOptions);return o.uploadToFileSearchStore(n,m,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,n,r,i,o,s){var a;let l={};s?l=s:l={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${n}`,"X-Goog-Upload-Header-Content-Type":`${r}`},i?{"X-Goog-Upload-File-Name":i}:{})};const u=await this.request({path:e,body:JSON.stringify(o),httpMethod:"POST",httpOptions:l});if(!u||!(u!=null&&u.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const h=(a=u==null?void 0:u.headers)===null||a===void 0?void 0:a["x-goog-upload-url"];if(h===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return h}}async function uE(t){var e;if(t===void 0)throw new Error("response is undefined");if(!t.ok){const n=t.status;let r;!((e=t.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?r=await t.json():r={error:{message:await t.text(),code:t.status,status:t.statusText}};const i=JSON.stringify(r);throw n>=400&&n<600?new zc({message:i,status:n}):new Error(i)}}function oG(t,e){if(!e||Object.keys(e).length===0)return;if(t.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let n={};if(typeof t.body=="string"&&t.body.length>0)try{const o=JSON.parse(t.body);if(typeof o=="object"&&o!==null&&!Array.isArray(o))n=o;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function r(o,s){const a=Object.assign({},o);for(const l in s)if(Object.prototype.hasOwnProperty.call(s,l)){const u=s[l],h=a[l];u&&typeof u=="object"&&!Array.isArray(u)&&h&&typeof h=="object"&&!Array.isArray(h)?a[l]=r(h,u):(h&&u&&typeof h!=typeof u&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${l}". Original type: ${typeof h}, New type: ${typeof u}. Overwriting.`),a[l]=u)}return a}const i=r(n,e);t.body=JSON.stringify(i)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const sG="mcp_used/unknown";let aG=!1;function KC(t){for(const e of t)if(lG(e)||typeof e=="object"&&"inputSchema"in e)return!0;return aG}function JC(t){var e;const n=(e=t[qh])!==null&&e!==void 0?e:"";t[qh]=(n+` ${sG}`).trimStart()}function lG(t){return t!==null&&typeof t=="object"&&t instanceof rg}function uG(t){return En(this,arguments,function*(n,r=100){let i,o=0;for(;o<r;){const s=yield re(n.listTools({cursor:i}));for(const a of s.tools)yield yield re(a),o++;if(!s.nextCursor)break;i=s.nextCursor}})}class rg{constructor(e=[],n){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=n}static create(e,n){return new rg(e,n)}async initialize(){var e,n,r,i;if(this.mcpTools.length>0)return;const o={},s=[];for(const h of this.mcpClients)try{for(var a=!0,l=(n=void 0,Tn(uG(h))),u;u=await l.next(),e=u.done,!e;a=!0){i=u.value,a=!1;const p=i;s.push(p);const m=p.name;if(o[m])throw new Error(`Duplicate function name ${m} found in MCP tools. Please ensure function names are unique.`);o[m]=h}}catch(p){n={error:p}}finally{try{!a&&!e&&(r=l.return)&&await r.call(l)}finally{if(n)throw n.error}}this.mcpTools=s,this.functionNameToMcpClient=o}async tool(){return await this.initialize(),GF(this.mcpTools,this.config)}async callTool(e){await this.initialize();const n=[];for(const r of e)if(r.name in this.functionNameToMcpClient){const i=this.functionNameToMcpClient[r.name];let o;this.config.timeout&&(o={timeout:this.config.timeout});const s=await i.callTool({name:r.name,arguments:r.args},void 0,o);n.push({functionResponse:{name:r.name,response:s.isError?{error:s}:s}})}return n}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function cG(t,e,n){const r=new MF;let i;n.data instanceof Blob?i=JSON.parse(await n.data.text()):i=JSON.parse(n.data),Object.assign(r,i),e(r)}class dG{constructor(e,n,r){this.apiClient=e,this.auth=n,this.webSocketFactory=r}async connect(e){var n,r;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const i=this.apiClient.getWebsocketBaseUrl(),o=this.apiClient.getApiVersion(),s=pG(this.apiClient.getDefaultHeaders()),a=this.apiClient.getApiKey(),l=`${i}/ws/google.ai.generativelanguage.${o}.GenerativeService.BidiGenerateMusic?key=${a}`;let u=()=>{};const h=new Promise(C=>{u=C}),p=e.callbacks,m=function(){u({})},_=this.apiClient,E={onopen:m,onmessage:C=>{cG(_,p.onmessage,C)},onerror:(n=p==null?void 0:p.onerror)!==null&&n!==void 0?n:function(C){},onclose:(r=p==null?void 0:p.onclose)!==null&&r!==void 0?r:function(C){}},P=this.webSocketFactory.create(l,hG(s),E);P.connect(),await h;const T={setup:{model:pe(this.apiClient,e.model)}};return P.send(JSON.stringify(T)),new fG(P,this.apiClient)}}class fG{constructor(e,n){this.conn=e,this.apiClient=n}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const n=FO(e);this.conn.send(JSON.stringify({clientContent:n}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const n=UO(e);this.conn.send(JSON.stringify(n))}sendPlaybackControl(e){const n={playbackControl:e};this.conn.send(JSON.stringify(n))}play(){this.sendPlaybackControl(mo.PLAY)}pause(){this.sendPlaybackControl(mo.PAUSE)}stop(){this.sendPlaybackControl(mo.STOP)}resetContext(){this.sendPlaybackControl(mo.RESET_CONTEXT)}close(){this.conn.close()}}function hG(t){const e={};return t.forEach((n,r)=>{e[r]=n}),e}function pG(t){const e=new Headers;for(const[n,r]of Object.entries(t))e.append(n,r);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const mG="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function gG(t,e,n){const r=new DF;let i;n.data instanceof Blob?i=await n.data.text():n.data instanceof ArrayBuffer?i=new TextDecoder().decode(n.data):i=n.data;const o=JSON.parse(i);if(t.isVertexAI()){const s=GO(o);Object.assign(r,s)}else Object.assign(r,o);e(r)}class yG{constructor(e,n,r){this.apiClient=e,this.auth=n,this.webSocketFactory=r,this.music=new dG(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var n,r,i,o,s,a;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const l=this.apiClient.getWebsocketBaseUrl(),u=this.apiClient.getApiVersion();let h;const p=this.apiClient.getHeaders();e.config&&e.config.tools&&KC(e.config.tools)&&JC(p);const m=TG(p);if(this.apiClient.isVertexAI())h=`${l}/ws/google.cloud.aiplatform.${u}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(m,h);else{const A=this.apiClient.getApiKey();let N="BidiGenerateContent",D="key";A!=null&&A.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),u!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),N="BidiGenerateContentConstrained",D="access_token"),h=`${l}/ws/google.ai.generativelanguage.${u}.GenerativeService.${N}?${D}=${A}`}let _=()=>{};const E=new Promise(A=>{_=A}),P=e.callbacks,x=function(){var A;(A=P==null?void 0:P.onopen)===null||A===void 0||A.call(P),_({})},I=this.apiClient,T={onopen:x,onmessage:A=>{gG(I,P.onmessage,A)},onerror:(n=P==null?void 0:P.onerror)!==null&&n!==void 0?n:function(A){},onclose:(r=P==null?void 0:P.onclose)!==null&&r!==void 0?r:function(A){}},C=this.webSocketFactory.create(h,EG(m),T);C.connect(),await E;let M=pe(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&M.startsWith("publishers/")){const A=this.apiClient.getProject(),N=this.apiClient.getLocation();M=`projects/${A}/locations/${N}/`+M}let U={};this.apiClient.isVertexAI()&&((i=e.config)===null||i===void 0?void 0:i.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[Zu.AUDIO]}:e.config.responseModalities=[Zu.AUDIO]),!((o=e.config)===null||o===void 0)&&o.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const L=(a=(s=e.config)===null||s===void 0?void 0:s.tools)!==null&&a!==void 0?a:[],R=[];for(const A of L)if(this.isCallableTool(A)){const N=A;R.push(await N.tool())}else R.push(A);R.length>0&&(e.config.tools=R);const w={model:M,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?U=VO(this.apiClient,w):U=LO(this.apiClient,w),delete U.config,C.send(JSON.stringify(U)),new _G(C,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const vG={turnComplete:!0};class _G{constructor(e,n){this.conn=e,this.apiClient=n}tLiveClientContent(e,n){if(n.turns!==null&&n.turns!==void 0){let r=[];try{r=an(n.turns),e.isVertexAI()||(r=r.map(i=>Wc(i)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof n.turns}'`)}return{clientContent:{turns:r,turnComplete:n.turnComplete}}}return{clientContent:{turnComplete:n.turnComplete}}}tLiveClienttToolResponse(e,n){let r=[];if(n.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(n.functionResponses)?r=n.functionResponses:r=[n.functionResponses],r.length===0)throw new Error("functionResponses is required.");for(const o of r){if(typeof o!="object"||o===null||!("name"in o)||!("response"in o))throw new Error(`Could not parse function response, type '${typeof o}'.`);if(!e.isVertexAI()&&!("id"in o))throw new Error(mG)}return{toolResponse:{functionResponses:r}}}sendClientContent(e){e=Object.assign(Object.assign({},vG),e);const n=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(n))}sendRealtimeInput(e){let n={};this.apiClient.isVertexAI()?n={realtimeInput:BO(e)}:n={realtimeInput:OO(e)},this.conn.send(JSON.stringify(n))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const n=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(n))}close(){this.conn.close()}}function EG(t){const e={};return t.forEach((n,r)=>{e[r]=n}),e}function TG(t){const e=new Headers;for(const[n,r]of Object.entries(t))e.append(n,r);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const cE=10;function dE(t){var e,n,r;if(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let i=!1;for(const s of(n=t==null?void 0:t.tools)!==null&&n!==void 0?n:[])if(xo(s)){i=!0;break}if(!i)return!0;const o=(r=t==null?void 0:t.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls;return o&&(o<0||!Number.isInteger(o))||o==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",o),!0):!1}function xo(t){return"callTool"in t&&typeof t.callTool=="function"}function wG(t){var e,n,r;return(r=(n=(e=t.config)===null||e===void 0?void 0:e.tools)===null||n===void 0?void 0:n.some(i=>xo(i)))!==null&&r!==void 0?r:!1}function fE(t){var e;const n=[];return!((e=t==null?void 0:t.config)===null||e===void 0)&&e.tools&&t.config.tools.forEach((r,i)=>{if(xo(r))return;const o=r;o.functionDeclarations&&o.functionDeclarations.length>0&&n.push(i)}),n}function hE(t){var e;return!(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class IG extends hr{constructor(e){super(),this.apiClient=e,this.generateContent=async n=>{var r,i,o,s,a;const l=await this.processParamsMaybeAddMcpUsage(n);if(this.maybeMoveToResponseJsonSchem(n),!wG(n)||dE(n.config))return await this.generateContentInternal(l);const u=fE(n);if(u.length>0){const P=u.map(x=>`tools[${x}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${P}.`)}let h,p;const m=an(l.contents),_=(o=(i=(r=l.config)===null||r===void 0?void 0:r.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls)!==null&&o!==void 0?o:cE;let E=0;for(;E<_&&(h=await this.generateContentInternal(l),!(!h.functionCalls||h.functionCalls.length===0));){const P=h.candidates[0].content,x=[];for(const I of(a=(s=n.config)===null||s===void 0?void 0:s.tools)!==null&&a!==void 0?a:[])if(xo(I)){const C=await I.callTool(h.functionCalls);x.push(...C)}E++,p={role:"user",parts:x},l.contents=an(l.contents),l.contents.push(P),l.contents.push(p),hE(l.config)&&(m.push(P),m.push(p))}return hE(l.config)&&(h.automaticFunctionCallingHistory=m),h},this.generateContentStream=async n=>{var r,i,o,s,a;if(this.maybeMoveToResponseJsonSchem(n),dE(n.config)){const p=await this.processParamsMaybeAddMcpUsage(n);return await this.generateContentStreamInternal(p)}const l=fE(n);if(l.length>0){const p=l.map(m=>`tools[${m}]`).join(", ");throw new Error(`Incompatible tools found at ${p}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}const u=(o=(i=(r=n==null?void 0:n.config)===null||r===void 0?void 0:r.toolConfig)===null||i===void 0?void 0:i.functionCallingConfig)===null||o===void 0?void 0:o.streamFunctionCallArguments,h=(a=(s=n==null?void 0:n.config)===null||s===void 0?void 0:s.automaticFunctionCalling)===null||a===void 0?void 0:a.disable;if(u&&!h)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(n)},this.generateImages=async n=>await this.generateImagesInternal(n).then(r=>{var i;let o;const s=[];if(r!=null&&r.generatedImages)for(const l of r.generatedImages)l&&(l!=null&&l.safetyAttributes)&&((i=l==null?void 0:l.safetyAttributes)===null||i===void 0?void 0:i.contentType)==="Positive Prompt"?o=l==null?void 0:l.safetyAttributes:s.push(l);let a;return o?a={generatedImages:s,positivePromptSafetyAttributes:o,sdkHttpResponse:r.sdkHttpResponse}:a={generatedImages:s,sdkHttpResponse:r.sdkHttpResponse},a}),this.list=async n=>{var r;const s={config:Object.assign(Object.assign({},{queryBase:!0}),n==null?void 0:n.config)};if(this.apiClient.isVertexAI()&&!s.config.queryBase){if(!((r=s.config)===null||r===void 0)&&r.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");s.config.filter="labels.tune-type:*"}return new $i(cr.PAGED_ITEM_MODELS,a=>this.listInternal(a),await this.listInternal(s),s)},this.editImage=async n=>{const r={model:n.model,prompt:n.prompt,referenceImages:[],config:n.config};return n.referenceImages&&n.referenceImages&&(r.referenceImages=n.referenceImages.map(i=>i.toReferenceImageAPI())),await this.editImageInternal(r)},this.upscaleImage=async n=>{let r={numberOfImages:1,mode:"upscale"};n.config&&(r=Object.assign(Object.assign({},r),n.config));const i={model:n.model,image:n.image,upscaleFactor:n.upscaleFactor,config:r};return await this.upscaleImageInternal(i)},this.generateVideos=async n=>{var r,i,o,s,a,l;if((n.prompt||n.image||n.video)&&n.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((r=n.video)===null||r===void 0)&&r.uri&&(!((i=n.video)===null||i===void 0)&&i.videoBytes)?n.video={uri:n.video.uri,mimeType:n.video.mimeType}:!((s=(o=n.source)===null||o===void 0?void 0:o.video)===null||s===void 0)&&s.uri&&(!((l=(a=n.source)===null||a===void 0?void 0:a.video)===null||l===void 0)&&l.videoBytes)&&(n.source.video={uri:n.source.video.uri,mimeType:n.source.video.mimeType})),await this.generateVideosInternal(n)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var n,r,i;const o=(n=e.config)===null||n===void 0?void 0:n.tools;if(!o)return e;const s=await Promise.all(o.map(async l=>xo(l)?await l.tool():l)),a={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:s})};if(a.config.tools=s,e.config&&e.config.tools&&KC(e.config.tools)){const l=(i=(r=e.config.httpOptions)===null||r===void 0?void 0:r.headers)!==null&&i!==void 0?i:{};let u=Object.assign({},l);Object.keys(u).length===0&&(u=this.apiClient.getDefaultHeaders()),JC(u),a.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:u})}return a}async initAfcToolsMap(e){var n,r,i;const o=new Map;for(const s of(r=(n=e.config)===null||n===void 0?void 0:n.tools)!==null&&r!==void 0?r:[])if(xo(s)){const a=s,l=await a.tool();for(const u of(i=l.functionDeclarations)!==null&&i!==void 0?i:[]){if(!u.name)throw new Error("Function declaration name is required.");if(o.has(u.name))throw new Error(`Duplicate tool declaration name: ${u.name}`);o.set(u.name,a)}}return o}async processAfcStream(e){var n,r,i;const o=(i=(r=(n=e.config)===null||n===void 0?void 0:n.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls)!==null&&i!==void 0?i:cE;let s=!1,a=0;const l=await this.initAfcToolsMap(e);return function(u,h,p){return En(this,arguments,function*(){for(var m,_,E,P,x,I;a<o;){s&&(a++,s=!1);const U=yield re(u.processParamsMaybeAddMcpUsage(p)),L=yield re(u.generateContentStreamInternal(U)),R=[],w=[];try{for(var T=!0,C=(_=void 0,Tn(L)),M;M=yield re(C.next()),m=M.done,!m;T=!0){P=M.value,T=!1;const A=P;if(yield yield re(A),A.candidates&&(!((x=A.candidates[0])===null||x===void 0)&&x.content)){w.push(A.candidates[0].content);for(const N of(I=A.candidates[0].content.parts)!==null&&I!==void 0?I:[])if(a<o&&N.functionCall){if(!N.functionCall.name)throw new Error("Function call name was not returned by the model.");if(h.has(N.functionCall.name)){const D=yield re(h.get(N.functionCall.name).callTool([N.functionCall]));R.push(...D)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${h.keys()}, mising tool: ${N.functionCall.name}`)}}}}catch(A){_={error:A}}finally{try{!T&&!m&&(E=C.return)&&(yield re(E.call(C)))}finally{if(_)throw _.error}}if(R.length>0){s=!0;const A=new xs;A.candidates=[{content:{role:"user",parts:R}}],yield yield re(A);const N=[];N.push(...w),N.push({role:"user",parts:R});const D=an(p.contents).concat(N);p.contents=D}else break}})}(this,l,e)}async generateContentInternal(e){var n,r,i,o;let s,a="",l={};if(this.apiClient.isVertexAI()){const u=sE(this.apiClient,e);return a=W("{model}:generateContent",u._url),l=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),s.then(h=>{const p=lE(h),m=new xs;return Object.assign(m,p),m})}else{const u=oE(this.apiClient,e);return a=W("{model}:generateContent",u._url),l=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),s.then(h=>{const p=aE(h),m=new xs;return Object.assign(m,p),m})}}async generateContentStreamInternal(e){var n,r,i,o;let s,a="",l={};if(this.apiClient.isVertexAI()){const u=sE(this.apiClient,e);return a=W("{model}:streamGenerateContent?alt=sse",u._url),l=u._query,delete u._url,delete u._query,s=this.apiClient.requestStream({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}),s.then(function(p){return En(this,arguments,function*(){var m,_,E,P;try{for(var x=!0,I=Tn(p),T;T=yield re(I.next()),m=T.done,!m;x=!0){P=T.value,x=!1;const C=P,M=lE(yield re(C.json()));M.sdkHttpResponse={headers:C.headers};const U=new xs;Object.assign(U,M),yield yield re(U)}}catch(C){_={error:C}}finally{try{!x&&!m&&(E=I.return)&&(yield re(E.call(I)))}finally{if(_)throw _.error}}})})}else{const u=oE(this.apiClient,e);return a=W("{model}:streamGenerateContent?alt=sse",u._url),l=u._query,delete u._url,delete u._query,s=this.apiClient.requestStream({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}),s.then(function(p){return En(this,arguments,function*(){var m,_,E,P;try{for(var x=!0,I=Tn(p),T;T=yield re(I.next()),m=T.done,!m;x=!0){P=T.value,x=!1;const C=P,M=aE(yield re(C.json()));M.sdkHttpResponse={headers:C.headers};const U=new xs;Object.assign(U,M),yield yield re(U)}}catch(C){_={error:C}}finally{try{!x&&!m&&(E=I.return)&&(yield re(E.call(I)))}finally{if(_)throw _.error}}})})}}async embedContent(e){var n,r,i,o;let s,a="",l={};if(this.apiClient.isVertexAI()){const u=y4(this.apiClient,e);return a=W("{model}:predict",u._url),l=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),s.then(h=>{const p=_4(h),m=new H0;return Object.assign(m,p),m})}else{const u=g4(this.apiClient,e);return a=W("{model}:batchEmbedContents",u._url),l=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),s.then(h=>{const p=v4(h),m=new H0;return Object.assign(m,p),m})}}async generateImagesInternal(e){var n,r,i,o;let s,a="",l={};if(this.apiClient.isVertexAI()){const u=N4(this.apiClient,e);return a=W("{model}:predict",u._url),l=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),s.then(h=>{const p=D4(h),m=new q0;return Object.assign(m,p),m})}else{const u=P4(this.apiClient,e);return a=W("{model}:predict",u._url),l=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),s.then(h=>{const p=k4(h),m=new q0;return Object.assign(m,p),m})}}async editImageInternal(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI()){const a=f4(this.apiClient,e);return o=W("{model}:predict",a._url),s=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json().then(u=>{const h=u;return h.sdkHttpResponse={headers:l.headers},h})),i.then(l=>{const u=h4(l),h=new TF;return Object.assign(h,u),h})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI()){const a=NB(this.apiClient,e);return o=W("{model}:predict",a._url),s=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json().then(u=>{const h=u;return h.sdkHttpResponse={headers:l.headers},h})),i.then(l=>{const u=kB(l),h=new wF;return Object.assign(h,u),h})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI()){const a=dB(this.apiClient,e);return o=W("{model}:predict",a._url),s=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i.then(l=>{const u=fB(l),h=new IF;return Object.assign(h,u),h})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI()){const a=vB(this.apiClient,e);return o=W("{model}:predict",a._url),s=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i.then(l=>{const u=_B(l),h=new SF;return Object.assign(h,u),h})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var n,r,i,o;let s,a="",l={};if(this.apiClient.isVertexAI()){const u=Y4(this.apiClient,e);return a=W("{name}",u._url),l=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),s.then(h=>Hh(h))}else{const u=J4(this.apiClient,e);return a=W("{name}",u._url),l=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),s.then(h=>Gh(h))}}async listInternal(e){var n,r,i,o;let s,a="",l={};if(this.apiClient.isVertexAI()){const u=iB(this.apiClient,e);return a=W("{models_url}",u._url),l=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),s.then(h=>{const p=sB(h),m=new $0;return Object.assign(m,p),m})}else{const u=rB(this.apiClient,e);return a=W("{models_url}",u._url),l=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),s.then(h=>{const p=oB(h),m=new $0;return Object.assign(m,p),m})}}async update(e){var n,r,i,o;let s,a="",l={};if(this.apiClient.isVertexAI()){const u=xB(this.apiClient,e);return a=W("{model}",u._url),l=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),s.then(h=>Hh(h))}else{const u=RB(this.apiClient,e);return a=W("{name}",u._url),l=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"PATCH",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),s.then(h=>Gh(h))}}async delete(e){var n,r,i,o;let s,a="",l={};if(this.apiClient.isVertexAI()){const u=l4(this.apiClient,e);return a=W("{name}",u._url),l=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),s.then(h=>{const p=c4(h),m=new z0;return Object.assign(m,p),m})}else{const u=a4(this.apiClient,e);return a=W("{name}",u._url),l=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),s.then(h=>{const p=u4(h),m=new z0;return Object.assign(m,p),m})}}async countTokens(e){var n,r,i,o;let s,a="",l={};if(this.apiClient.isVertexAI()){const u=i4(this.apiClient,e);return a=W("{model}:countTokens",u._url),l=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),s.then(h=>{const p=s4(h),m=new W0;return Object.assign(m,p),m})}else{const u=r4(this.apiClient,e);return a=W("{model}:countTokens",u._url),l=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),s.then(h=>{const p=o4(h),m=new W0;return Object.assign(m,p),m})}}async computeTokens(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI()){const a=jO(this.apiClient,e);return o=W("{model}:computeTokens",a._url),s=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json().then(u=>{const h=u;return h.sdkHttpResponse={headers:l.headers},h})),i.then(l=>{const u=QO(l),h=new CF;return Object.assign(h,u),h})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var n,r,i,o;let s,a="",l={};if(this.apiClient.isVertexAI()){const u=F4(this.apiClient,e);return a=W("{model}:predictLongRunning",u._url),l=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),s.then(h=>{const p=V4(h),m=new ec;return Object.assign(m,p),m})}else{const u=U4(this.apiClient,e);return a=W("{model}:predictLongRunning",u._url),l=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),s.then(h=>{const p=L4(h),m=new ec;return Object.assign(m,p),m})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class SG extends hr{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const n=e.operation,r=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const i=n.name.split("/operations/")[0];let o;r&&"httpOptions"in r&&(o=r.httpOptions);const s=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:i,config:{httpOptions:o}});return n._fromAPIResponse({apiResponse:s,_isVertexAI:!0})}else{const i=await this.getVideosOperationInternal({operationName:n.name,config:r});return n._fromAPIResponse({apiResponse:i,_isVertexAI:!1})}}async get(e){const n=e.operation,r=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const i=n.name.split("/operations/")[0];let o;r&&"httpOptions"in r&&(o=r.httpOptions);const s=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:i,config:{httpOptions:o}});return n._fromAPIResponse({apiResponse:s,_isVertexAI:!0})}else{const i=await this.getVideosOperationInternal({operationName:n.name,config:r});return n._fromAPIResponse({apiResponse:i,_isVertexAI:!1})}}async getVideosOperationInternal(e){var n,r,i,o;let s,a="",l={};if(this.apiClient.isVertexAI()){const u=mF(e);return a=W("{operationName}",u._url),l=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),s}else{const u=pF(e);return a=W("{operationName}",u._url),l=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),s}}async fetchPredictVideosOperationInternal(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI()){const a=aF(e);return o=W("{resourceName}:fetchPredictOperation",a._url),s=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function CG(t){const e={},n=c(t,["data"]);if(n!=null&&f(e,["data"],n),c(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=c(t,["mimeType"]);return r!=null&&f(e,["mimeType"],r),e}function AG(t){const e={},n=c(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>LG(o))),f(e,["parts"],i)}const r=c(t,["role"]);return r!=null&&f(e,["role"],r),e}function RG(t,e,n){const r={},i=c(e,["expireTime"]);n!==void 0&&i!=null&&f(n,["expireTime"],i);const o=c(e,["newSessionExpireTime"]);n!==void 0&&o!=null&&f(n,["newSessionExpireTime"],o);const s=c(e,["uses"]);n!==void 0&&s!=null&&f(n,["uses"],s);const a=c(e,["liveConnectConstraints"]);n!==void 0&&a!=null&&f(n,["bidiGenerateContentSetup"],bG(t,a));const l=c(e,["lockAdditionalFields"]);return n!==void 0&&l!=null&&f(n,["fieldMask"],l),r}function xG(t,e){const n={},r=c(e,["config"]);return r!=null&&f(n,["config"],RG(t,r,n)),n}function PG(t){const e={};if(c(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=c(t,["fileUri"]);n!=null&&f(e,["fileUri"],n);const r=c(t,["mimeType"]);return r!=null&&f(e,["mimeType"],r),e}function NG(t){const e={},n=c(t,["id"]);n!=null&&f(e,["id"],n);const r=c(t,["args"]);r!=null&&f(e,["args"],r);const i=c(t,["name"]);if(i!=null&&f(e,["name"],i),c(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(c(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function kG(t){const e={};if(c(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=c(t,["enableWidget"]);return n!=null&&f(e,["enableWidget"],n),e}function DG(t){const e={};if(c(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(c(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=c(t,["timeRangeFilter"]);return n!=null&&f(e,["timeRangeFilter"],n),e}function MG(t,e){const n={},r=c(t,["generationConfig"]);e!==void 0&&r!=null&&f(e,["setup","generationConfig"],r);const i=c(t,["responseModalities"]);e!==void 0&&i!=null&&f(e,["setup","generationConfig","responseModalities"],i);const o=c(t,["temperature"]);e!==void 0&&o!=null&&f(e,["setup","generationConfig","temperature"],o);const s=c(t,["topP"]);e!==void 0&&s!=null&&f(e,["setup","generationConfig","topP"],s);const a=c(t,["topK"]);e!==void 0&&a!=null&&f(e,["setup","generationConfig","topK"],a);const l=c(t,["maxOutputTokens"]);e!==void 0&&l!=null&&f(e,["setup","generationConfig","maxOutputTokens"],l);const u=c(t,["mediaResolution"]);e!==void 0&&u!=null&&f(e,["setup","generationConfig","mediaResolution"],u);const h=c(t,["seed"]);e!==void 0&&h!=null&&f(e,["setup","generationConfig","seed"],h);const p=c(t,["speechConfig"]);e!==void 0&&p!=null&&f(e,["setup","generationConfig","speechConfig"],ng(p));const m=c(t,["thinkingConfig"]);e!==void 0&&m!=null&&f(e,["setup","generationConfig","thinkingConfig"],m);const _=c(t,["enableAffectiveDialog"]);e!==void 0&&_!=null&&f(e,["setup","generationConfig","enableAffectiveDialog"],_);const E=c(t,["systemInstruction"]);e!==void 0&&E!=null&&f(e,["setup","systemInstruction"],AG(It(E)));const P=c(t,["tools"]);if(e!==void 0&&P!=null){let L=ns(P);Array.isArray(L)&&(L=L.map(R=>UG(ts(R)))),f(e,["setup","tools"],L)}const x=c(t,["sessionResumption"]);e!==void 0&&x!=null&&f(e,["setup","sessionResumption"],VG(x));const I=c(t,["inputAudioTranscription"]);e!==void 0&&I!=null&&f(e,["setup","inputAudioTranscription"],I);const T=c(t,["outputAudioTranscription"]);e!==void 0&&T!=null&&f(e,["setup","outputAudioTranscription"],T);const C=c(t,["realtimeInputConfig"]);e!==void 0&&C!=null&&f(e,["setup","realtimeInputConfig"],C);const M=c(t,["contextWindowCompression"]);e!==void 0&&M!=null&&f(e,["setup","contextWindowCompression"],M);const U=c(t,["proactivity"]);if(e!==void 0&&U!=null&&f(e,["setup","proactivity"],U),c(t,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return n}function bG(t,e){const n={},r=c(e,["model"]);r!=null&&f(n,["setup","model"],pe(t,r));const i=c(e,["config"]);return i!=null&&f(n,["config"],MG(i,n)),n}function LG(t){const e={},n=c(t,["mediaResolution"]);n!=null&&f(e,["mediaResolution"],n);const r=c(t,["codeExecutionResult"]);r!=null&&f(e,["codeExecutionResult"],r);const i=c(t,["executableCode"]);i!=null&&f(e,["executableCode"],i);const o=c(t,["fileData"]);o!=null&&f(e,["fileData"],PG(o));const s=c(t,["functionCall"]);s!=null&&f(e,["functionCall"],NG(s));const a=c(t,["functionResponse"]);a!=null&&f(e,["functionResponse"],a);const l=c(t,["inlineData"]);l!=null&&f(e,["inlineData"],CG(l));const u=c(t,["text"]);u!=null&&f(e,["text"],u);const h=c(t,["thought"]);h!=null&&f(e,["thought"],h);const p=c(t,["thoughtSignature"]);p!=null&&f(e,["thoughtSignature"],p);const m=c(t,["videoMetadata"]);return m!=null&&f(e,["videoMetadata"],m),e}function VG(t){const e={},n=c(t,["handle"]);if(n!=null&&f(e,["handle"],n),c(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function UG(t){const e={},n=c(t,["functionDeclarations"]);if(n!=null){let h=n;Array.isArray(h)&&(h=h.map(p=>p)),f(e,["functionDeclarations"],h)}if(c(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=c(t,["googleSearchRetrieval"]);r!=null&&f(e,["googleSearchRetrieval"],r);const i=c(t,["computerUse"]);i!=null&&f(e,["computerUse"],i);const o=c(t,["fileSearch"]);o!=null&&f(e,["fileSearch"],o);const s=c(t,["codeExecution"]);if(s!=null&&f(e,["codeExecution"],s),c(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=c(t,["googleMaps"]);a!=null&&f(e,["googleMaps"],kG(a));const l=c(t,["googleSearch"]);l!=null&&f(e,["googleSearch"],DG(l));const u=c(t,["urlContext"]);return u!=null&&f(e,["urlContext"],u),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function FG(t){const e=[];for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)){const r=t[n];if(typeof r=="object"&&r!=null&&Object.keys(r).length>0){const i=Object.keys(r).map(o=>`${n}.${o}`);e.push(...i)}else e.push(n)}return e.join(",")}function OG(t,e){let n=null;const r=t.bidiGenerateContentSetup;if(typeof r=="object"&&r!==null&&"setup"in r){const o=r.setup;typeof o=="object"&&o!==null?(t.bidiGenerateContentSetup=o,n=o):delete t.bidiGenerateContentSetup}else r!==void 0&&delete t.bidiGenerateContentSetup;const i=t.fieldMask;if(n){const o=FG(n);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)o?t.fieldMask=o:delete t.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&i!==null&&Array.isArray(i)&&i.length>0){const s=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let a=[];i.length>0&&(a=i.map(u=>s.includes(u)?`generationConfig.${u}`:u));const l=[];o&&l.push(o),a.length>0&&l.push(...a),l.length>0?t.fieldMask=l.join(","):delete t.fieldMask}else delete t.fieldMask}else i!==null&&Array.isArray(i)&&i.length>0?t.fieldMask=i.join(","):delete t.fieldMask;return t}class BG extends hr{constructor(e){super(),this.apiClient=e}async create(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const a=xG(this.apiClient,e);o=W("auth_tokens",a._url),s=a._query,delete a.config,delete a._url,delete a._query;const l=OG(a,e.config);return i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),i.then(u=>u)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function GG(t,e){const n={},r=c(t,["force"]);return e!==void 0&&r!=null&&f(e,["_query","force"],r),n}function HG(t){const e={},n=c(t,["name"]);n!=null&&f(e,["_url","name"],n);const r=c(t,["config"]);return r!=null&&GG(r,e),e}function qG(t){const e={},n=c(t,["name"]);return n!=null&&f(e,["_url","name"],n),e}function $G(t,e){const n={},r=c(t,["pageSize"]);e!==void 0&&r!=null&&f(e,["_query","pageSize"],r);const i=c(t,["pageToken"]);return e!==void 0&&i!=null&&f(e,["_query","pageToken"],i),n}function zG(t){const e={},n=c(t,["parent"]);n!=null&&f(e,["_url","parent"],n);const r=c(t,["config"]);return r!=null&&$G(r,e),e}function WG(t){const e={},n=c(t,["sdkHttpResponse"]);n!=null&&f(e,["sdkHttpResponse"],n);const r=c(t,["nextPageToken"]);r!=null&&f(e,["nextPageToken"],r);const i=c(t,["documents"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>s)),f(e,["documents"],o)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class KG extends hr{constructor(e){super(),this.apiClient=e,this.list=async n=>new $i(cr.PAGED_ITEM_DOCUMENTS,r=>this.listInternal({parent:n.parent,config:r.config}),await this.listInternal(n),n)}async get(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=qG(e);return o=W("{name}",a._url),s=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i.then(l=>l)}}async delete(e){var n,r;let i="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const s=HG(e);i=W("{name}",s._url),o=s._query,delete s._url,delete s._query,await this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(s),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal})}}async listInternal(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=zG(e);return o=W("{parent}/documents",a._url),s=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i.then(l=>{const u=WG(l),h=new AF;return Object.assign(h,u),h})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class JG extends hr{constructor(e,n=new KG(e)){super(),this.apiClient=e,this.documents=n,this.list=async(r={})=>new $i(cr.PAGED_ITEM_FILE_SEARCH_STORES,i=>this.listInternal(i),await this.listInternal(r),r)}async uploadToFileSearchStore(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(e.fileSearchStoreName,e.file,e.config)}async create(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=FB(e);return o=W("fileSearchStores",a._url),s=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i.then(l=>l)}}async get(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=GB(e);return o=W("{name}",a._url),s=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i.then(l=>l)}}async delete(e){var n,r;let i="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const s=BB(e);i=W("{name}",s._url),o=s._query,delete s._url,delete s._query,await this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(s),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal})}}async listInternal(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=KB(e);return o=W("fileSearchStores",a._url),s=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i.then(l=>{const u=JB(l),h=new RF;return Object.assign(h,u),h})}}async uploadToFileSearchStoreInternal(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=YB(e);return o=W("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",a._url),s=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i.then(l=>{const u=jB(l),h=new xF;return Object.assign(h,u),h})}}async importFile(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=$B(e);return o=W("{file_search_store_name}:importFile",a._url),s=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i.then(l=>{const u=qB(l),h=new Qm;return Object.assign(h,u),h})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let YC=function(){const{crypto:t}=globalThis;if(t!=null&&t.randomUUID)return YC=t.randomUUID.bind(t),t.randomUUID();const e=new Uint8Array(1),n=t?()=>t.getRandomValues(e)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,r=>(+r^n()&15>>+r/4).toString(16))};const YG=()=>YC();/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function $h(t){return typeof t=="object"&&t!==null&&("name"in t&&t.name==="AbortError"||"message"in t&&String(t.message).includes("FetchRequestCanceledException"))}const zh=t=>{if(t instanceof Error)return t;if(typeof t=="object"&&t!==null){try{if(Object.prototype.toString.call(t)==="[object Error]"){const e=new Error(t.message,t.cause?{cause:t.cause}:{});return t.stack&&(e.stack=t.stack),t.cause&&!e.cause&&(e.cause=t.cause),t.name&&(e.name=t.name),e}}catch{}try{return new Error(JSON.stringify(t))}catch{}}return new Error(t)};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class cn extends Error{}class bt extends cn{constructor(e,n,r,i){super(`${bt.makeMessage(e,n,r)}`),this.status=e,this.headers=i,this.error=n}static makeMessage(e,n,r){const i=n!=null&&n.message?typeof n.message=="string"?n.message:JSON.stringify(n.message):n?JSON.stringify(n):r;return e&&i?`${e} ${i}`:e?`${e} status code (no body)`:i||"(no status code or body)"}static generate(e,n,r,i){if(!e||!i)return new Yc({message:r,cause:zh(n)});const o=n;return e===400?new QC(e,o,r,i):e===401?new XC(e,o,r,i):e===403?new ZC(e,o,r,i):e===404?new eA(e,o,r,i):e===409?new tA(e,o,r,i):e===422?new nA(e,o,r,i):e===429?new rA(e,o,r,i):e>=500?new iA(e,o,r,i):new bt(e,o,r,i)}}class Wh extends bt{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}}class Yc extends bt{constructor({message:e,cause:n}){super(void 0,void 0,e||"Connection error.",void 0),n&&(this.cause=n)}}class jC extends Yc{constructor({message:e}={}){super({message:e??"Request timed out."})}}class QC extends bt{}class XC extends bt{}class ZC extends bt{}class eA extends bt{}class tA extends bt{}class nA extends bt{}class rA extends bt{}class iA extends bt{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const jG=/^[a-z][a-z0-9+.-]*:/i,QG=t=>jG.test(t);let Kh=t=>(Kh=Array.isArray,Kh(t));const XG=Kh;let ZG=XG;const pE=ZG;function e6(t){if(!t)return!0;for(const e in t)return!1;return!0}function t6(t,e){return Object.prototype.hasOwnProperty.call(t,e)}const n6=(t,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new cn(`${t} must be an integer`);if(e<0)throw new cn(`${t} must be a positive integer`);return e},r6=t=>{try{return JSON.parse(t)}catch{return}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const i6=t=>new Promise(e=>setTimeout(e,t));/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const eo="0.0.1";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function o6(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const s6=()=>{var t,e,n,r,i;const o=o6();if(o==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":eo,"X-Stainless-OS":gE(Deno.build.os),"X-Stainless-Arch":mE(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:(e=(t=Deno.version)===null||t===void 0?void 0:t.deno)!==null&&e!==void 0?e:"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":eo,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(o==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":eo,"X-Stainless-OS":gE((n=globalThis.process.platform)!==null&&n!==void 0?n:"unknown"),"X-Stainless-Arch":mE((r=globalThis.process.arch)!==null&&r!==void 0?r:"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":(i=globalThis.process.version)!==null&&i!==void 0?i:"unknown"};const s=a6();return s?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":eo,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${s.browser}`,"X-Stainless-Runtime-Version":s.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":eo,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function a6(){if(typeof navigator>"u"||!navigator)return null;const t=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:n}of t){const r=n.exec(navigator.userAgent);if(r){const i=r[1]||0,o=r[2]||0,s=r[3]||0;return{browser:e,version:`${i}.${o}.${s}`}}}return null}const mE=t=>t==="x32"?"x32":t==="x86_64"||t==="x64"?"x64":t==="arm"?"arm":t==="aarch64"||t==="arm64"?"arm64":t?`other:${t}`:"unknown",gE=t=>(t=t.toLowerCase(),t.includes("ios")?"iOS":t==="android"?"Android":t==="darwin"?"MacOS":t==="win32"?"Windows":t==="freebsd"?"FreeBSD":t==="openbsd"?"OpenBSD":t==="linux"?"Linux":t?`Other:${t}`:"Unknown");let Ul;const l6=()=>Ul??(Ul=s6());/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function u6(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new GeminiNextGenAPIClient({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function oA(...t){const e=globalThis.ReadableStream;if(typeof e>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new e(...t)}function c6(t){let e=Symbol.asyncIterator in t?t[Symbol.asyncIterator]():t[Symbol.iterator]();return oA({start(){},async pull(n){const{done:r,value:i}=await e.next();r?n.close():n.enqueue(i)},async cancel(){var n;await((n=e.return)===null||n===void 0?void 0:n.call(e))}})}function sA(t){if(t[Symbol.asyncIterator])return t;const e=t.getReader();return{async next(){try{const n=await e.read();return n!=null&&n.done&&e.releaseLock(),n}catch(n){throw e.releaseLock(),n}},async return(){const n=e.cancel();return e.releaseLock(),await n,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function d6(t){var e,n;if(t===null||typeof t!="object")return;if(t[Symbol.asyncIterator]){await((n=(e=t[Symbol.asyncIterator]()).return)===null||n===void 0?void 0:n.call(e));return}const r=t.getReader(),i=r.cancel();r.releaseLock(),await i}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const f6=({headers:t,body:e})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(e)});/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const aA=()=>{var t;if(typeof File>"u"){const{process:e}=globalThis,n=typeof((t=e==null?void 0:e.versions)===null||t===void 0?void 0:t.node)=="string"&&parseInt(e.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(n?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function lf(t,e,n){return aA(),new File(t,e??"unknown_file",n)}function h6(t){return(typeof t=="object"&&t!==null&&("name"in t&&t.name&&String(t.name)||"url"in t&&t.url&&String(t.url)||"filename"in t&&t.filename&&String(t.filename)||"path"in t&&t.path&&String(t.path))||"").split(/[\\/]/).pop()||void 0}const p6=t=>t!=null&&typeof t=="object"&&typeof t[Symbol.asyncIterator]=="function";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const lA=t=>t!=null&&typeof t=="object"&&typeof t.size=="number"&&typeof t.type=="string"&&typeof t.text=="function"&&typeof t.slice=="function"&&typeof t.arrayBuffer=="function",m6=t=>t!=null&&typeof t=="object"&&typeof t.name=="string"&&typeof t.lastModified=="number"&&lA(t),g6=t=>t!=null&&typeof t=="object"&&typeof t.url=="string"&&typeof t.blob=="function";async function y6(t,e,n){if(aA(),t=await t,m6(t))return t instanceof File?t:lf([await t.arrayBuffer()],t.name);if(g6(t)){const i=await t.blob();return e||(e=new URL(t.url).pathname.split(/[\\/]/).pop()),lf(await Jh(i),e,n)}const r=await Jh(t);if(e||(e=h6(t)),!(n!=null&&n.type)){const i=r.find(o=>typeof o=="object"&&"type"in o&&o.type);typeof i=="string"&&(n=Object.assign(Object.assign({},n),{type:i}))}return lf(r,e,n)}async function Jh(t){var e,n,r,i,o;let s=[];if(typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer)s.push(t);else if(lA(t))s.push(t instanceof Blob?t:await t.arrayBuffer());else if(p6(t))try{for(var a=!0,l=Tn(t),u;u=await l.next(),e=u.done,!e;a=!0){i=u.value,a=!1;const h=i;s.push(...await Jh(h))}}catch(h){n={error:h}}finally{try{!a&&!e&&(r=l.return)&&await r.call(l)}finally{if(n)throw n.error}}else{const h=(o=t==null?void 0:t.constructor)===null||o===void 0?void 0:o.name;throw new Error(`Unexpected data type: ${typeof t}${h?`; constructor: ${h}`:""}${v6(t)}`)}return s}function v6(t){return typeof t!="object"||t===null?"":`; props: [${Object.getOwnPropertyNames(t).map(n=>`"${n}"`).join(", ")}]`}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class uA{constructor(e){this._client=e}}uA._key=[];/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function cA(t){return t.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const yE=Object.freeze(Object.create(null)),_6=(t=cA)=>function(n,...r){if(n.length===1)return n[0];let i=!1;const o=[],s=n.reduce((h,p,m)=>{var _,E,P;/[?#]/.test(p)&&(i=!0);const x=r[m];let I=(i?encodeURIComponent:t)(""+x);return m!==r.length&&(x==null||typeof x=="object"&&x.toString===((P=Object.getPrototypeOf((E=Object.getPrototypeOf((_=x.hasOwnProperty)!==null&&_!==void 0?_:yE))!==null&&E!==void 0?E:yE))===null||P===void 0?void 0:P.toString))&&(I=x+"",o.push({start:h.length+p.length,length:I.length,error:`Value of type ${Object.prototype.toString.call(x).slice(8,-1)} is not a valid path parameter`})),h+p+(m===r.length?"":I)},""),a=s.split(/[?#]/,1)[0],l=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let u;for(;(u=l.exec(a))!==null;)o.push({start:u.index,length:u[0].length,error:`Value "${u[0]}" can't be safely passed as a path parameter`});if(o.sort((h,p)=>h.start-p.start),o.length>0){let h=0;const p=o.reduce((m,_)=>{const E=" ".repeat(_.start-h),P="^".repeat(_.length);return h=_.start+_.length,m+E+P},"");throw new cn(`Path parameters result in path with invalid segments:
${o.map(m=>m.error).join(`
`)}
${s}
${p}`)}return s},Fl=_6(cA);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class dA extends uA{create(e,n){var r;const{api_version:i=this._client.apiVersion}=e,o=nc(e,["api_version"]);if("model"in o&&"agent_config"in o)throw new cn("Invalid request: specified `model` and `agent_config`. If specifying `model`, use `generation_config`.");if("agent"in o&&"generation_config"in o)throw new cn("Invalid request: specified `agent` and `generation_config`. If specifying `agent`, use `agent_config`.");return this._client.post(Fl`/${i}/interactions`,Object.assign(Object.assign({body:o},n),{stream:(r=e.stream)!==null&&r!==void 0?r:!1}))}delete(e,n={},r){const{api_version:i=this._client.apiVersion}=n??{};return this._client.delete(Fl`/${i}/interactions/${e}`,r)}cancel(e,n={},r){const{api_version:i=this._client.apiVersion}=n??{};return this._client.post(Fl`/${i}/interactions/${e}/cancel`,r)}get(e,n={},r){var i;const o=n??{},{api_version:s=this._client.apiVersion}=o,a=nc(o,["api_version"]);return this._client.get(Fl`/${s}/interactions/${e}`,Object.assign(Object.assign({query:a},r),{stream:(i=n==null?void 0:n.stream)!==null&&i!==void 0?i:!1}))}}dA._key=Object.freeze(["interactions"]);class fA extends dA{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function E6(t){let e=0;for(const i of t)e+=i.length;const n=new Uint8Array(e);let r=0;for(const i of t)n.set(i,r),r+=i.length;return n}let Ol;function ig(t){let e;return(Ol??(e=new globalThis.TextEncoder,Ol=e.encode.bind(e)))(t)}let Bl;function vE(t){let e;return(Bl??(e=new globalThis.TextDecoder,Bl=e.decode.bind(e)))(t)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class jc{constructor(){this.buffer=new Uint8Array,this.carriageReturnIndex=null}decode(e){if(e==null)return[];const n=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?ig(e):e;this.buffer=E6([this.buffer,n]);const r=[];let i;for(;(i=T6(this.buffer,this.carriageReturnIndex))!=null;){if(i.carriage&&this.carriageReturnIndex==null){this.carriageReturnIndex=i.index;continue}if(this.carriageReturnIndex!=null&&(i.index!==this.carriageReturnIndex+1||i.carriage)){r.push(vE(this.buffer.subarray(0,this.carriageReturnIndex-1))),this.buffer=this.buffer.subarray(this.carriageReturnIndex),this.carriageReturnIndex=null;continue}const o=this.carriageReturnIndex!==null?i.preceding-1:i.preceding,s=vE(this.buffer.subarray(0,o));r.push(s),this.buffer=this.buffer.subarray(i.index),this.carriageReturnIndex=null}return r}flush(){return this.buffer.length?this.decode(`
`):[]}}jc.NEWLINE_CHARS=new Set([`
`,"\r"]);jc.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function T6(t,e){for(let i=e??0;i<t.length;i++){if(t[i]===10)return{preceding:i,index:i+1,carriage:!1};if(t[i]===13)return{preceding:i,index:i+1,carriage:!0}}return null}function w6(t){for(let r=0;r<t.length-1;r++){if(t[r]===10&&t[r+1]===10||t[r]===13&&t[r+1]===13)return r+2;if(t[r]===13&&t[r+1]===10&&r+3<t.length&&t[r+2]===13&&t[r+3]===10)return r+4}return-1}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const rc={off:0,error:200,warn:300,info:400,debug:500},_E=(t,e,n)=>{if(t){if(t6(rc,t))return t;Nt(n).warn(`${e} was set to ${JSON.stringify(t)}, expected one of ${JSON.stringify(Object.keys(rc))}`)}};function Bs(){}function Gl(t,e,n){return!e||rc[t]>rc[n]?Bs:e[t].bind(e)}const I6={error:Bs,warn:Bs,info:Bs,debug:Bs};let EE=new WeakMap;function Nt(t){var e;const n=t.logger,r=(e=t.logLevel)!==null&&e!==void 0?e:"off";if(!n)return I6;const i=EE.get(n);if(i&&i[0]===r)return i[1];const o={error:Gl("error",n,r),warn:Gl("warn",n,r),info:Gl("info",n,r),debug:Gl("debug",n,r)};return EE.set(n,[r,o]),o}const mi=t=>(t.options&&(t.options=Object.assign({},t.options),delete t.options.headers),t.headers&&(t.headers=Object.fromEntries((t.headers instanceof Headers?[...t.headers]:Object.entries(t.headers)).map(([e,n])=>[e,e.toLowerCase()==="x-goog-api-key"||e.toLowerCase()==="authorization"||e.toLowerCase()==="cookie"||e.toLowerCase()==="set-cookie"?"***":n]))),"retryOfRequestLogID"in t&&(t.retryOfRequestLogID&&(t.retryOf=t.retryOfRequestLogID),delete t.retryOfRequestLogID),t);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class go{constructor(e,n,r){this.iterator=e,this.controller=n,this.client=r}static fromSSEResponse(e,n,r){let i=!1;const o=r?Nt(r):console;function s(){return En(this,arguments,function*(){var l,u,h,p;if(i)throw new cn("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");i=!0;let m=!1;try{try{for(var _=!0,E=Tn(S6(e,n)),P;P=yield re(E.next()),l=P.done,!l;_=!0){p=P.value,_=!1;const x=p;if(!m)if(x.data.startsWith("[DONE]")){m=!0;continue}else try{yield yield re(JSON.parse(x.data))}catch(I){throw o.error("Could not parse message into JSON:",x.data),o.error("From chunk:",x.raw),I}}}catch(x){u={error:x}}finally{try{!_&&!l&&(h=E.return)&&(yield re(h.call(E)))}finally{if(u)throw u.error}}m=!0}catch(x){if($h(x))return yield re(void 0);throw x}finally{m||n.abort()}})}return new go(s,n,r)}static fromReadableStream(e,n,r){let i=!1;function o(){return En(this,arguments,function*(){var l,u,h,p;const m=new jc,_=sA(e);try{for(var E=!0,P=Tn(_),x;x=yield re(P.next()),l=x.done,!l;E=!0){p=x.value,E=!1;const I=p;for(const T of m.decode(I))yield yield re(T)}}catch(I){u={error:I}}finally{try{!E&&!l&&(h=P.return)&&(yield re(h.call(P)))}finally{if(u)throw u.error}}for(const I of m.flush())yield yield re(I)})}function s(){return En(this,arguments,function*(){var l,u,h,p;if(i)throw new cn("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");i=!0;let m=!1;try{try{for(var _=!0,E=Tn(o()),P;P=yield re(E.next()),l=P.done,!l;_=!0){p=P.value,_=!1;const x=p;m||x&&(yield yield re(JSON.parse(x)))}}catch(x){u={error:x}}finally{try{!_&&!l&&(h=E.return)&&(yield re(h.call(E)))}finally{if(u)throw u.error}}m=!0}catch(x){if($h(x))return yield re(void 0);throw x}finally{m||n.abort()}})}return new go(s,n,r)}[Symbol.asyncIterator](){return this.iterator()}tee(){const e=[],n=[],r=this.iterator(),i=o=>({next:()=>{if(o.length===0){const s=r.next();e.push(s),n.push(s)}return o.shift()}});return[new go(()=>i(e),this.controller,this.client),new go(()=>i(n),this.controller,this.client)]}toReadableStream(){const e=this;let n;return oA({async start(){n=e[Symbol.asyncIterator]()},async pull(r){try{const{value:i,done:o}=await n.next();if(o)return r.close();const s=ig(JSON.stringify(i)+`
`);r.enqueue(s)}catch(i){r.error(i)}},async cancel(){var r;await((r=n.return)===null||r===void 0?void 0:r.call(n))}})}}function S6(t,e){return En(this,arguments,function*(){var r,i,o,s;if(!t.body)throw e.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new cn("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new cn("Attempted to iterate over a response with no body");const a=new A6,l=new jc,u=sA(t.body);try{for(var h=!0,p=Tn(C6(u)),m;m=yield re(p.next()),r=m.done,!r;h=!0){s=m.value,h=!1;const _=s;for(const E of l.decode(_)){const P=a.decode(E);P&&(yield yield re(P))}}}catch(_){i={error:_}}finally{try{!h&&!r&&(o=p.return)&&(yield re(o.call(p)))}finally{if(i)throw i.error}}for(const _ of l.flush()){const E=a.decode(_);E&&(yield yield re(E))}})}function C6(t){return En(this,arguments,function*(){var n,r,i,o;let s=new Uint8Array;try{for(var a=!0,l=Tn(t),u;u=yield re(l.next()),n=u.done,!n;a=!0){o=u.value,a=!1;const h=o;if(h==null)continue;const p=h instanceof ArrayBuffer?new Uint8Array(h):typeof h=="string"?ig(h):h;let m=new Uint8Array(s.length+p.length);m.set(s),m.set(p,s.length),s=m;let _;for(;(_=w6(s))!==-1;)yield yield re(s.slice(0,_)),s=s.slice(_)}}catch(h){r={error:h}}finally{try{!a&&!n&&(i=l.return)&&(yield re(i.call(l)))}finally{if(r)throw r.error}}s.length>0&&(yield yield re(s))})}class A6{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const o={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],o}if(this.chunks.push(e),e.startsWith(":"))return null;let[n,r,i]=R6(e,":");return i.startsWith(" ")&&(i=i.substring(1)),n==="event"?this.event=i:n==="data"&&this.data.push(i),null}}function R6(t,e){const n=t.indexOf(e);return n!==-1?[t.substring(0,n),e,t.substring(n+e.length)]:[t,"",""]}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function x6(t,e){const{response:n,requestLogID:r,retryOfRequestLogID:i,startTime:o}=e,s=await(async()=>{var a;if(e.options.stream)return Nt(t).debug("response",n.status,n.url,n.headers,n.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(n,e.controller,t):go.fromSSEResponse(n,e.controller,t);if(n.status===204)return null;if(e.options.__binaryResponse)return n;const l=n.headers.get("content-type"),u=(a=l==null?void 0:l.split(";")[0])===null||a===void 0?void 0:a.trim();return(u==null?void 0:u.includes("application/json"))||(u==null?void 0:u.endsWith("+json"))?await n.json():await n.text()})();return Nt(t).debug(`[${r}] response parsed`,mi({retryOfRequestLogID:i,url:n.url,status:n.status,body:s,durationMs:Date.now()-o})),s}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class og extends Promise{constructor(e,n,r=x6){super(i=>{i(null)}),this.responsePromise=n,this.parseResponse=r,this.client=e}_thenUnwrap(e){return new og(this.client,this.responsePromise,async(n,r)=>e(await this.parseResponse(n,r),r))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,n]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:n}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(e=>this.parseResponse(this.client,e))),this.parsedPromise}then(e,n){return this.parse().then(e,n)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const hA=Symbol("brand.privateNullableHeaders");function*P6(t){if(!t)return;if(hA in t){const{values:r,nulls:i}=t;yield*r.entries();for(const o of i)yield[o,null];return}let e=!1,n;t instanceof Headers?n=t.entries():pE(t)?n=t:(e=!0,n=Object.entries(t??{}));for(let r of n){const i=r[0];if(typeof i!="string")throw new TypeError("expected header name to be a string");const o=pE(r[1])?r[1]:[r[1]];let s=!1;for(const a of o)a!==void 0&&(e&&!s&&(s=!0,yield[i,null]),yield[i,a])}}const Ps=t=>{const e=new Headers,n=new Set;for(const r of t){const i=new Set;for(const[o,s]of P6(r)){const a=o.toLowerCase();i.has(a)||(e.delete(o),i.add(a)),s===null?(e.delete(o),n.add(a)):(e.append(o,s),n.delete(a))}}return{[hA]:!0,values:e,nulls:n}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const uf=t=>{var e,n,r,i,o,s;if(typeof globalThis.process<"u")return(r=(n=(e=tF)===null||e===void 0?void 0:e[t])===null||n===void 0?void 0:n.trim())!==null&&r!==void 0?r:void 0;if(typeof globalThis.Deno<"u")return(s=(o=(i=globalThis.Deno.env)===null||i===void 0?void 0:i.get)===null||o===void 0?void 0:o.call(i,t))===null||s===void 0?void 0:s.trim()};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var pA;class Qc{constructor(e){var n,r,i,o,s,a,l,{baseURL:u=uf("GEMINI_NEXT_GEN_API_BASE_URL"),apiKey:h=(n=uf("GEMINI_API_KEY"))!==null&&n!==void 0?n:null,apiVersion:p="v1beta"}=e,m=nc(e,["baseURL","apiKey","apiVersion"]);const _=Object.assign(Object.assign({apiKey:h,apiVersion:p},m),{baseURL:u||"https://generativelanguage.googleapis.com"});this.baseURL=_.baseURL,this.timeout=(r=_.timeout)!==null&&r!==void 0?r:Qc.DEFAULT_TIMEOUT,this.logger=(i=_.logger)!==null&&i!==void 0?i:console;const E="warn";this.logLevel=E,this.logLevel=(s=(o=_E(_.logLevel,"ClientOptions.logLevel",this))!==null&&o!==void 0?o:_E(uf("GEMINI_NEXT_GEN_API_LOG"),"process.env['GEMINI_NEXT_GEN_API_LOG']",this))!==null&&s!==void 0?s:E,this.fetchOptions=_.fetchOptions,this.maxRetries=(a=_.maxRetries)!==null&&a!==void 0?a:2,this.fetch=(l=_.fetch)!==null&&l!==void 0?l:u6(),this.encoder=f6,this._options=_,this.apiKey=h,this.apiVersion=p,this.clientAdapter=_.clientAdapter}withOptions(e){return new this.constructor(Object.assign(Object.assign(Object.assign({},this._options),{baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,apiVersion:this.apiVersion}),e))}baseURLOverridden(){return this.baseURL!=="https://generativelanguage.googleapis.com"}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:e,nulls:n}){if(!(e.has("authorization")||e.has("x-goog-api-key"))&&!(this.apiKey&&e.get("x-goog-api-key"))&&!n.has("x-goog-api-key"))throw new Error('Could not resolve authentication method. Expected the apiKey to be set. Or for the "x-goog-api-key" headers to be explicitly omitted')}async authHeaders(e){const n=Ps([e.headers]);if(!(n.values.has("authorization")||n.values.has("x-goog-api-key"))){if(this.apiKey)return Ps([{"x-goog-api-key":this.apiKey}]);if(this.clientAdapter.isVertexAI())return Ps([await this.clientAdapter.getAuthHeaders()])}}stringifyQuery(e){return Object.entries(e).filter(([n,r])=>typeof r<"u").map(([n,r])=>{if(typeof r=="string"||typeof r=="number"||typeof r=="boolean")return`${encodeURIComponent(n)}=${encodeURIComponent(r)}`;if(r===null)return`${encodeURIComponent(n)}=`;throw new cn(`Cannot stringify type ${typeof r}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}getUserAgent(){return`${this.constructor.name}/JS ${eo}`}defaultIdempotencyKey(){return`stainless-node-retry-${YG()}`}makeStatusError(e,n,r,i){return bt.generate(e,n,r,i)}buildURL(e,n,r){const i=!this.baseURLOverridden()&&r||this.baseURL,o=QG(e)?new URL(e):new URL(i+(i.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),s=this.defaultQuery();return e6(s)||(n=Object.assign(Object.assign({},s),n)),typeof n=="object"&&n&&!Array.isArray(n)&&(o.search=this.stringifyQuery(n)),o.toString()}async prepareOptions(e){if(this.clientAdapter&&this.clientAdapter.isVertexAI()&&!e.path.startsWith(`/${this.apiVersion}/projects/`)){const n=e.path.slice(this.apiVersion.length+1);e.path=`/${this.apiVersion}/projects/${this.clientAdapter.getProject()}/locations/${this.clientAdapter.getLocation()}${n}`}}async prepareRequest(e,{url:n,options:r}){}get(e,n){return this.methodRequest("get",e,n)}post(e,n){return this.methodRequest("post",e,n)}patch(e,n){return this.methodRequest("patch",e,n)}put(e,n){return this.methodRequest("put",e,n)}delete(e,n){return this.methodRequest("delete",e,n)}methodRequest(e,n,r){return this.request(Promise.resolve(r).then(i=>Object.assign({method:e,path:n},i)))}request(e,n=null){return new og(this,this.makeRequest(e,n,void 0))}async makeRequest(e,n,r){var i,o,s;const a=await e,l=(i=a.maxRetries)!==null&&i!==void 0?i:this.maxRetries;n==null&&(n=l),await this.prepareOptions(a);const{req:u,url:h,timeout:p}=await this.buildRequest(a,{retryCount:l-n});await this.prepareRequest(u,{url:h,options:a});const m="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),_=r===void 0?"":`, retryOf: ${r}`,E=Date.now();if(Nt(this).debug(`[${m}] sending request`,mi({retryOfRequestLogID:r,method:a.method,url:h,options:a,headers:u.headers})),!((o=a.signal)===null||o===void 0)&&o.aborted)throw new Wh;const P=new AbortController,x=await this.fetchWithTimeout(h,u,p,P).catch(zh),I=Date.now();if(x instanceof globalThis.Error){const C=`retrying, ${n} attempts remaining`;if(!((s=a.signal)===null||s===void 0)&&s.aborted)throw new Wh;const M=$h(x)||/timed? ?out/i.test(String(x)+("cause"in x?String(x.cause):""));if(n)return Nt(this).info(`[${m}] connection ${M?"timed out":"failed"} - ${C}`),Nt(this).debug(`[${m}] connection ${M?"timed out":"failed"} (${C})`,mi({retryOfRequestLogID:r,url:h,durationMs:I-E,message:x.message})),this.retryRequest(a,n,r??m);throw Nt(this).info(`[${m}] connection ${M?"timed out":"failed"} - error; no more retries left`),Nt(this).debug(`[${m}] connection ${M?"timed out":"failed"} (error; no more retries left)`,mi({retryOfRequestLogID:r,url:h,durationMs:I-E,message:x.message})),M?new jC:new Yc({cause:x})}const T=`[${m}${_}] ${u.method} ${h} ${x.ok?"succeeded":"failed"} with status ${x.status} in ${I-E}ms`;if(!x.ok){const C=await this.shouldRetry(x);if(n&&C){const A=`retrying, ${n} attempts remaining`;return await d6(x.body),Nt(this).info(`${T} - ${A}`),Nt(this).debug(`[${m}] response error (${A})`,mi({retryOfRequestLogID:r,url:x.url,status:x.status,headers:x.headers,durationMs:I-E})),this.retryRequest(a,n,r??m,x.headers)}const M=C?"error; no more retries left":"error; not retryable";Nt(this).info(`${T} - ${M}`);const U=await x.text().catch(A=>zh(A).message),L=r6(U),R=L?void 0:U;throw Nt(this).debug(`[${m}] response error (${M})`,mi({retryOfRequestLogID:r,url:x.url,status:x.status,headers:x.headers,message:R,durationMs:Date.now()-E})),this.makeStatusError(x.status,L,R,x.headers)}return Nt(this).info(T),Nt(this).debug(`[${m}] response start`,mi({retryOfRequestLogID:r,url:x.url,status:x.status,headers:x.headers,durationMs:I-E})),{response:x,options:a,controller:P,requestLogID:m,retryOfRequestLogID:r,startTime:E}}async fetchWithTimeout(e,n,r,i){const o=n||{},{signal:s,method:a}=o,l=nc(o,["signal","method"]);s&&s.addEventListener("abort",()=>i.abort());const u=setTimeout(()=>i.abort(),r),h=globalThis.ReadableStream&&l.body instanceof globalThis.ReadableStream||typeof l.body=="object"&&l.body!==null&&Symbol.asyncIterator in l.body,p=Object.assign(Object.assign(Object.assign({signal:i.signal},h?{duplex:"half"}:{}),{method:"GET"}),l);a&&(p.method=a.toUpperCase());try{return await this.fetch.call(void 0,e,p)}finally{clearTimeout(u)}}async shouldRetry(e){const n=e.headers.get("x-should-retry");return n==="true"?!0:n==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,n,r,i){var o;let s;const a=i==null?void 0:i.get("retry-after-ms");if(a){const u=parseFloat(a);Number.isNaN(u)||(s=u)}const l=i==null?void 0:i.get("retry-after");if(l&&!s){const u=parseFloat(l);Number.isNaN(u)?s=Date.parse(l)-Date.now():s=u*1e3}if(!(s&&0<=s&&s<60*1e3)){const u=(o=e.maxRetries)!==null&&o!==void 0?o:this.maxRetries;s=this.calculateDefaultRetryTimeoutMillis(n,u)}return await i6(s),this.makeRequest(e,n-1,r)}calculateDefaultRetryTimeoutMillis(e,n){const o=n-e,s=Math.min(.5*Math.pow(2,o),8),a=1-Math.random()*.25;return s*a*1e3}async buildRequest(e,{retryCount:n=0}={}){var r,i,o;const s=Object.assign({},e),{method:a,path:l,query:u,defaultBaseURL:h}=s,p=this.buildURL(l,u,h);"timeout"in s&&n6("timeout",s.timeout),s.timeout=(r=s.timeout)!==null&&r!==void 0?r:this.timeout;const{bodyHeaders:m,body:_}=this.buildBody({options:s}),E=await this.buildHeaders({options:e,method:a,bodyHeaders:m,retryCount:n});return{req:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({method:a,headers:E},s.signal&&{signal:s.signal}),globalThis.ReadableStream&&_ instanceof globalThis.ReadableStream&&{duplex:"half"}),_&&{body:_}),(i=this.fetchOptions)!==null&&i!==void 0?i:{}),(o=s.fetchOptions)!==null&&o!==void 0?o:{}),url:p,timeout:s.timeout}}async buildHeaders({options:e,method:n,bodyHeaders:r,retryCount:i}){let o={};this.idempotencyHeader&&n!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),o[this.idempotencyHeader]=e.idempotencyKey);const s=await this.authHeaders(e);let a=Ps([o,Object.assign(Object.assign({Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(i)},e.timeout?{"X-Stainless-Timeout":String(Math.trunc(e.timeout/1e3))}:{}),l6()),this._options.defaultHeaders,r,e.headers,s]);return this.validateHeaders(a),a.values}buildBody({options:{body:e,headers:n}}){if(!e)return{bodyHeaders:void 0,body:void 0};const r=Ps([n]);return ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof DataView||typeof e=="string"&&r.values.has("content-type")||globalThis.Blob&&e instanceof globalThis.Blob||e instanceof FormData||e instanceof URLSearchParams||globalThis.ReadableStream&&e instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:e}:typeof e=="object"&&(Symbol.asyncIterator in e||Symbol.iterator in e&&"next"in e&&typeof e.next=="function")?{bodyHeaders:void 0,body:c6(e)}:this.encoder({body:e,headers:r})}}Qc.DEFAULT_TIMEOUT=6e4;class rt extends Qc{constructor(){super(...arguments),this.interactions=new fA(this)}}pA=rt;rt.GeminiNextGenAPIClient=pA;rt.GeminiNextGenAPIClientError=cn;rt.APIError=bt;rt.APIConnectionError=Yc;rt.APIConnectionTimeoutError=jC;rt.APIUserAbortError=Wh;rt.NotFoundError=eA;rt.ConflictError=tA;rt.RateLimitError=rA;rt.BadRequestError=QC;rt.AuthenticationError=XC;rt.InternalServerError=iA;rt.PermissionDeniedError=ZC;rt.UnprocessableEntityError=nA;rt.toFile=y6;rt.Interactions=fA;/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function N6(t,e){const n={},r=c(t,["name"]);return r!=null&&f(n,["_url","name"],r),n}function k6(t,e){const n={},r=c(t,["name"]);return r!=null&&f(n,["_url","name"],r),n}function D6(t,e){const n={},r=c(t,["sdkHttpResponse"]);return r!=null&&f(n,["sdkHttpResponse"],r),n}function M6(t,e){const n={},r=c(t,["sdkHttpResponse"]);return r!=null&&f(n,["sdkHttpResponse"],r),n}function b6(t,e,n){const r={};if(c(t,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const i=c(t,["tunedModelDisplayName"]);if(e!==void 0&&i!=null&&f(e,["displayName"],i),c(t,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const o=c(t,["epochCount"]);e!==void 0&&o!=null&&f(e,["tuningTask","hyperparameters","epochCount"],o);const s=c(t,["learningRateMultiplier"]);if(s!=null&&f(r,["tuningTask","hyperparameters","learningRateMultiplier"],s),c(t,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(c(t,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(c(t,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const a=c(t,["batchSize"]);e!==void 0&&a!=null&&f(e,["tuningTask","hyperparameters","batchSize"],a);const l=c(t,["learningRate"]);if(e!==void 0&&l!=null&&f(e,["tuningTask","hyperparameters","learningRate"],l),c(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(c(t,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");return r}function L6(t,e,n){const r={};let i=c(n,["config","method"]);if(i===void 0&&(i="SUPERVISED_FINE_TUNING"),i==="SUPERVISED_FINE_TUNING"){const _=c(t,["validationDataset"]);e!==void 0&&_!=null&&f(e,["supervisedTuningSpec"],TE(_))}else if(i==="PREFERENCE_TUNING"){const _=c(t,["validationDataset"]);e!==void 0&&_!=null&&f(e,["preferenceOptimizationSpec"],TE(_))}const o=c(t,["tunedModelDisplayName"]);e!==void 0&&o!=null&&f(e,["tunedModelDisplayName"],o);const s=c(t,["description"]);e!==void 0&&s!=null&&f(e,["description"],s);let a=c(n,["config","method"]);if(a===void 0&&(a="SUPERVISED_FINE_TUNING"),a==="SUPERVISED_FINE_TUNING"){const _=c(t,["epochCount"]);e!==void 0&&_!=null&&f(e,["supervisedTuningSpec","hyperParameters","epochCount"],_)}else if(a==="PREFERENCE_TUNING"){const _=c(t,["epochCount"]);e!==void 0&&_!=null&&f(e,["preferenceOptimizationSpec","hyperParameters","epochCount"],_)}let l=c(n,["config","method"]);if(l===void 0&&(l="SUPERVISED_FINE_TUNING"),l==="SUPERVISED_FINE_TUNING"){const _=c(t,["learningRateMultiplier"]);e!==void 0&&_!=null&&f(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],_)}else if(l==="PREFERENCE_TUNING"){const _=c(t,["learningRateMultiplier"]);e!==void 0&&_!=null&&f(e,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],_)}let u=c(n,["config","method"]);if(u===void 0&&(u="SUPERVISED_FINE_TUNING"),u==="SUPERVISED_FINE_TUNING"){const _=c(t,["exportLastCheckpointOnly"]);e!==void 0&&_!=null&&f(e,["supervisedTuningSpec","exportLastCheckpointOnly"],_)}else if(u==="PREFERENCE_TUNING"){const _=c(t,["exportLastCheckpointOnly"]);e!==void 0&&_!=null&&f(e,["preferenceOptimizationSpec","exportLastCheckpointOnly"],_)}let h=c(n,["config","method"]);if(h===void 0&&(h="SUPERVISED_FINE_TUNING"),h==="SUPERVISED_FINE_TUNING"){const _=c(t,["adapterSize"]);e!==void 0&&_!=null&&f(e,["supervisedTuningSpec","hyperParameters","adapterSize"],_)}else if(h==="PREFERENCE_TUNING"){const _=c(t,["adapterSize"]);e!==void 0&&_!=null&&f(e,["preferenceOptimizationSpec","hyperParameters","adapterSize"],_)}if(c(t,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(c(t,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const p=c(t,["labels"]);e!==void 0&&p!=null&&f(e,["labels"],p);const m=c(t,["beta"]);return e!==void 0&&m!=null&&f(e,["preferenceOptimizationSpec","hyperParameters","beta"],m),r}function V6(t,e){const n={},r=c(t,["baseModel"]);r!=null&&f(n,["baseModel"],r);const i=c(t,["preTunedModel"]);i!=null&&f(n,["preTunedModel"],i);const o=c(t,["trainingDataset"]);o!=null&&K6(o);const s=c(t,["config"]);return s!=null&&b6(s,n),n}function U6(t,e){const n={},r=c(t,["baseModel"]);r!=null&&f(n,["baseModel"],r);const i=c(t,["preTunedModel"]);i!=null&&f(n,["preTunedModel"],i);const o=c(t,["trainingDataset"]);o!=null&&J6(o,n,e);const s=c(t,["config"]);return s!=null&&L6(s,n,e),n}function F6(t,e){const n={},r=c(t,["name"]);return r!=null&&f(n,["_url","name"],r),n}function O6(t,e){const n={},r=c(t,["name"]);return r!=null&&f(n,["_url","name"],r),n}function B6(t,e,n){const r={},i=c(t,["pageSize"]);e!==void 0&&i!=null&&f(e,["_query","pageSize"],i);const o=c(t,["pageToken"]);e!==void 0&&o!=null&&f(e,["_query","pageToken"],o);const s=c(t,["filter"]);return e!==void 0&&s!=null&&f(e,["_query","filter"],s),r}function G6(t,e,n){const r={},i=c(t,["pageSize"]);e!==void 0&&i!=null&&f(e,["_query","pageSize"],i);const o=c(t,["pageToken"]);e!==void 0&&o!=null&&f(e,["_query","pageToken"],o);const s=c(t,["filter"]);return e!==void 0&&s!=null&&f(e,["_query","filter"],s),r}function H6(t,e){const n={},r=c(t,["config"]);return r!=null&&B6(r,n),n}function q6(t,e){const n={},r=c(t,["config"]);return r!=null&&G6(r,n),n}function $6(t,e){const n={},r=c(t,["sdkHttpResponse"]);r!=null&&f(n,["sdkHttpResponse"],r);const i=c(t,["nextPageToken"]);i!=null&&f(n,["nextPageToken"],i);const o=c(t,["tunedModels"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(a=>mA(a))),f(n,["tuningJobs"],s)}return n}function z6(t,e){const n={},r=c(t,["sdkHttpResponse"]);r!=null&&f(n,["sdkHttpResponse"],r);const i=c(t,["nextPageToken"]);i!=null&&f(n,["nextPageToken"],i);const o=c(t,["tuningJobs"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(a=>Yh(a))),f(n,["tuningJobs"],s)}return n}function W6(t,e){const n={},r=c(t,["name"]);r!=null&&f(n,["model"],r);const i=c(t,["name"]);return i!=null&&f(n,["endpoint"],i),n}function K6(t,e){const n={};if(c(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(c(t,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const r=c(t,["examples"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(o=>o)),f(n,["examples","examples"],i)}return n}function J6(t,e,n){const r={};let i=c(n,["config","method"]);if(i===void 0&&(i="SUPERVISED_FINE_TUNING"),i==="SUPERVISED_FINE_TUNING"){const s=c(t,["gcsUri"]);e!==void 0&&s!=null&&f(e,["supervisedTuningSpec","trainingDatasetUri"],s)}else if(i==="PREFERENCE_TUNING"){const s=c(t,["gcsUri"]);e!==void 0&&s!=null&&f(e,["preferenceOptimizationSpec","trainingDatasetUri"],s)}let o=c(n,["config","method"]);if(o===void 0&&(o="SUPERVISED_FINE_TUNING"),o==="SUPERVISED_FINE_TUNING"){const s=c(t,["vertexDatasetResource"]);e!==void 0&&s!=null&&f(e,["supervisedTuningSpec","trainingDatasetUri"],s)}else if(o==="PREFERENCE_TUNING"){const s=c(t,["vertexDatasetResource"]);e!==void 0&&s!=null&&f(e,["preferenceOptimizationSpec","trainingDatasetUri"],s)}if(c(t,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return r}function mA(t,e){const n={},r=c(t,["sdkHttpResponse"]);r!=null&&f(n,["sdkHttpResponse"],r);const i=c(t,["name"]);i!=null&&f(n,["name"],i);const o=c(t,["state"]);o!=null&&f(n,["state"],kC(o));const s=c(t,["createTime"]);s!=null&&f(n,["createTime"],s);const a=c(t,["tuningTask","startTime"]);a!=null&&f(n,["startTime"],a);const l=c(t,["tuningTask","completeTime"]);l!=null&&f(n,["endTime"],l);const u=c(t,["updateTime"]);u!=null&&f(n,["updateTime"],u);const h=c(t,["description"]);h!=null&&f(n,["description"],h);const p=c(t,["baseModel"]);p!=null&&f(n,["baseModel"],p);const m=c(t,["_self"]);return m!=null&&f(n,["tunedModel"],W6(m)),n}function Yh(t,e){const n={},r=c(t,["sdkHttpResponse"]);r!=null&&f(n,["sdkHttpResponse"],r);const i=c(t,["name"]);i!=null&&f(n,["name"],i);const o=c(t,["state"]);o!=null&&f(n,["state"],kC(o));const s=c(t,["createTime"]);s!=null&&f(n,["createTime"],s);const a=c(t,["startTime"]);a!=null&&f(n,["startTime"],a);const l=c(t,["endTime"]);l!=null&&f(n,["endTime"],l);const u=c(t,["updateTime"]);u!=null&&f(n,["updateTime"],u);const h=c(t,["error"]);h!=null&&f(n,["error"],h);const p=c(t,["description"]);p!=null&&f(n,["description"],p);const m=c(t,["baseModel"]);m!=null&&f(n,["baseModel"],m);const _=c(t,["tunedModel"]);_!=null&&f(n,["tunedModel"],_);const E=c(t,["preTunedModel"]);E!=null&&f(n,["preTunedModel"],E);const P=c(t,["supervisedTuningSpec"]);P!=null&&f(n,["supervisedTuningSpec"],P);const x=c(t,["preferenceOptimizationSpec"]);x!=null&&f(n,["preferenceOptimizationSpec"],x);const I=c(t,["tuningDataStats"]);I!=null&&f(n,["tuningDataStats"],I);const T=c(t,["encryptionSpec"]);T!=null&&f(n,["encryptionSpec"],T);const C=c(t,["partnerModelTuningSpec"]);C!=null&&f(n,["partnerModelTuningSpec"],C);const M=c(t,["customBaseModel"]);M!=null&&f(n,["customBaseModel"],M);const U=c(t,["experiment"]);U!=null&&f(n,["experiment"],U);const L=c(t,["labels"]);L!=null&&f(n,["labels"],L);const R=c(t,["outputUri"]);R!=null&&f(n,["outputUri"],R);const w=c(t,["pipelineJob"]);w!=null&&f(n,["pipelineJob"],w);const A=c(t,["serviceAccount"]);A!=null&&f(n,["serviceAccount"],A);const N=c(t,["tunedModelDisplayName"]);N!=null&&f(n,["tunedModelDisplayName"],N);const D=c(t,["veoTuningSpec"]);return D!=null&&f(n,["veoTuningSpec"],D),n}function Y6(t,e){const n={},r=c(t,["sdkHttpResponse"]);r!=null&&f(n,["sdkHttpResponse"],r);const i=c(t,["name"]);i!=null&&f(n,["name"],i);const o=c(t,["metadata"]);o!=null&&f(n,["metadata"],o);const s=c(t,["done"]);s!=null&&f(n,["done"],s);const a=c(t,["error"]);return a!=null&&f(n,["error"],a),n}function TE(t,e){const n={},r=c(t,["gcsUri"]);r!=null&&f(n,["validationDatasetUri"],r);const i=c(t,["vertexDatasetResource"]);return i!=null&&f(n,["validationDatasetUri"],i),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class j6 extends hr{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new $i(cr.PAGED_ITEM_TUNING_JOBS,r=>this.listInternal(r),await this.listInternal(n),n),this.get=async n=>await this.getInternal(n),this.tune=async n=>{var r;if(this.apiClient.isVertexAI())if(n.baseModel.startsWith("projects/")){const i={tunedModelName:n.baseModel};!((r=n.config)===null||r===void 0)&&r.preTunedModelCheckpointId&&(i.checkpointId=n.config.preTunedModelCheckpointId);const o=Object.assign(Object.assign({},n),{preTunedModel:i});return o.baseModel=void 0,await this.tuneInternal(o)}else{const i=Object.assign({},n);return await this.tuneInternal(i)}else{const i=Object.assign({},n),o=await this.tuneMldevInternal(i);let s="";return o.metadata!==void 0&&o.metadata.tunedModel!==void 0?s=o.metadata.tunedModel:o.name!==void 0&&o.name.includes("/operations/")&&(s=o.name.split("/operations/")[0]),{name:s,state:Uh.JOB_STATE_QUEUED}}}}async getInternal(e){var n,r,i,o;let s,a="",l={};if(this.apiClient.isVertexAI()){const u=O6(e);return a=W("{name}",u._url),l=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),s.then(h=>Yh(h))}else{const u=F6(e);return a=W("{name}",u._url),l=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),s.then(h=>mA(h))}}async listInternal(e){var n,r,i,o;let s,a="",l={};if(this.apiClient.isVertexAI()){const u=q6(e);return a=W("tuningJobs",u._url),l=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),s.then(h=>{const p=z6(h),m=new K0;return Object.assign(m,p),m})}else{const u=H6(e);return a=W("tunedModels",u._url),l=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),s.then(h=>{const p=$6(h),m=new K0;return Object.assign(m,p),m})}}async cancel(e){var n,r,i,o;let s,a="",l={};if(this.apiClient.isVertexAI()){const u=k6(e);return a=W("{name}:cancel",u._url),l=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),s.then(h=>{const p=M6(h),m=new J0;return Object.assign(m,p),m})}else{const u=N6(e);return a=W("{name}:cancel",u._url),l=u._query,delete u._url,delete u._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:h.headers},m})),s.then(h=>{const p=D6(h),m=new J0;return Object.assign(m,p),m})}}async tuneInternal(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI()){const a=U6(e,e);return o=W("tuningJobs",a._url),s=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json().then(u=>{const h=u;return h.sdkHttpResponse={headers:l.headers},h})),i.then(l=>Yh(l))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=V6(e);return o=W("tunedModels",a._url),s=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json().then(u=>{const h=u;return h.sdkHttpResponse={headers:l.headers},h})),i.then(l=>Y6(l))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Q6{async download(e,n){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const X6=1024*1024*8,Z6=3,eH=1e3,tH=2,ic="x-goog-upload-status";async function nH(t,e,n){var r;const i=await gA(t,e,n),o=await(i==null?void 0:i.json());if(((r=i==null?void 0:i.headers)===null||r===void 0?void 0:r[ic])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return o.file}async function rH(t,e,n){var r;const i=await gA(t,e,n),o=await(i==null?void 0:i.json());if(((r=i==null?void 0:i.headers)===null||r===void 0?void 0:r[ic])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const s=CC(o),a=new Xm;return Object.assign(a,s),a}async function gA(t,e,n){var r,i;let o=0,s=0,a=new Fh(new Response),l="upload";for(o=t.size;s<o;){const u=Math.min(X6,o-s),h=t.slice(s,s+u);s+u>=o&&(l+=", finalize");let p=0,m=eH;for(;p<Z6&&(a=await n.request({path:"",body:h,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":l,"X-Goog-Upload-Offset":String(s),"Content-Length":String(u)}}}),!(!((r=a==null?void 0:a.headers)===null||r===void 0)&&r[ic]));)p++,await oH(m),m=m*tH;if(s+=u,((i=a==null?void 0:a.headers)===null||i===void 0?void 0:i[ic])!=="active")break;if(o<=s)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return a}async function iH(t){return{size:t.size,type:t.type}}function oH(t){return new Promise(e=>setTimeout(e,t))}class sH{async upload(e,n,r){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await nH(e,n,r)}async uploadToFileSearchStore(e,n,r){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await rH(e,n,r)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await iH(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class aH{create(e,n,r){return new lH(e,n,r)}}class lH{constructor(e,n,r){this.url=e,this.headers=n,this.callbacks=r}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const wE="x-goog-api-key";class uH{constructor(e){this.apiKey=e}async addAuthHeaders(e,n){if(e.get(wE)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(wE,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const cH="gl-node/";class dH{get interactions(){if(this._interactions!==void 0)return this._interactions;console.warn("GoogleGenAI.interactions: Interactions usage is experimental and may change in future versions.");const e=this.httpOptions;e!=null&&e.extraBody&&console.warn("GoogleGenAI.interactions: Client level httpOptions.extraBody is not supported by the interactions client and will be ignored.");const n=new rt({baseURL:this.apiClient.getBaseUrl(),apiKey:this.apiKey,apiVersion:this.apiClient.getApiVersion(),clientAdapter:this.apiClient,defaultHeaders:this.apiClient.getDefaultHeaders(),timeout:e==null?void 0:e.timeout});return this._interactions=n.interactions,this._interactions}constructor(e){var n;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(n=e.vertexai)!==null&&n!==void 0?n:!1,this.apiKey=e.apiKey;const r=oF(e.httpOptions,e.vertexai,void 0,void 0);r&&(e.httpOptions?e.httpOptions.baseUrl=r:e.httpOptions={baseUrl:r}),this.apiVersion=e.apiVersion,this.httpOptions=e.httpOptions;const i=new uH(this.apiKey);this.apiClient=new iG({auth:i,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:this.httpOptions,userAgentExtra:cH+"web",uploader:new sH,downloader:new Q6}),this.models=new IG(this.apiClient),this.live=new yG(this.apiClient,i,new aH),this.batches=new b2(this.apiClient),this.chats=new mO(this.models,this.apiClient),this.caches=new fO(this.apiClient),this.files=new CO(this.apiClient),this.operations=new SG(this.apiClient),this.authTokens=new BG(this.apiClient),this.tunings=new j6(this.apiClient),this.fileSearchStores=new JG(this.apiClient)}}const Xc=new dH({apiKey:"AIzaSyAxV1d2uVD629tjT8mT9fX7h6rKVctg0I0"}),fH=async(t,e,n)=>{var a,l;let r="gemini-3-pro-preview",i={},o;n==="thinking"?(r="gemini-3-pro-preview",i={thinkingConfig:{thinkingBudget:32768}}):n==="search"?(r="gemini-3-flash-preview",o=[{googleSearch:{}}]):r="gemini-3-pro-preview";const s=[...t,{role:"user",parts:[{text:e}]}];try{const u=await Xc.models.generateContent({model:r,contents:s,config:{...i,tools:o}});return{text:u.text,groundingMetadata:(l=(a=u.candidates)==null?void 0:a[0])==null?void 0:l.groundingMetadata}}catch(u){return console.error("AI Error:",u),{text:"I encountered an error processing your request. Please try again."}}},hH=async(t,e)=>{try{return(await Xc.models.generateContent({model:"gemini-3-flash-preview",contents:{parts:[{inlineData:{data:t,mimeType:e}},{text:"Transcribe the audio exactly as spoken."}]}})).text||""}catch(n){return console.error("Transcription Error:",n),"Failed to transcribe audio."}},pH=async(t,e,n)=>{try{const r={},i=["comment"];n.forEach(s=>{r[s.id]={type:gn.INTEGER,description:`Score (1-5) for ${s.name}`},i.push(s.id)});const o=await Xc.models.generateContent({model:"gemini-3-pro-preview",contents:`You are a strict technical innovation manager evaluating a proposal.
      
      Proposal Title: "${t}"
      Proposal Description: "${e}"
      
      Evaluate this proposal based on the following dimensions (1 = Poor, 5 = Excellent):
      ${n.map(s=>`- ${s.name} (ID: ${s.id}): ${s.description}`).join(`
`)}
      
      Provide an integer score (1-5) for each dimension ID and a constructive summary comment justifying the scores.`,config:{responseMimeType:"application/json",responseSchema:{type:gn.OBJECT,properties:{comment:{type:gn.STRING,description:"A professional justification of the scores."},...r},required:i}}});if(o.text){const s=JSON.parse(o.text),a=s.comment,l={};return n.forEach(u=>{s[u.id]&&(l[u.id]=s[u.id])}),{scores:l,comment:a}}return null}catch(r){return console.error("Evaluation Error:",r),null}},mH=async t=>{try{return(await Xc.models.generateContent({model:"gemini-3-flash-preview",contents:`Rewrite the following innovation description to be more professional, persuasive, and concise for a corporate environment. Keep the technical details accurate but improve the flow and impact:

${t}`})).text||t}catch(e){return console.error("Enhancement Error:",e),t}},Xr=({children:t,color:e="blue",className:n=""})=>{const r={blue:"bg-blue-100 text-blue-800 border border-blue-200",green:"bg-emerald-100 text-emerald-800 border border-emerald-200",yellow:"bg-yellow-100 text-yellow-800 border border-yellow-200",red:"bg-red-100 text-red-800 border border-red-200",gray:"bg-slate-100 text-slate-700 border border-slate-200",amber:"bg-amber-100 text-amber-800 border border-amber-200"};return y.jsx("span",{className:`px-2.5 py-0.5 rounded-sm text-[10px] uppercase tracking-wider font-bold ${r[e]||r.gray} ${n}`,children:t})},we=({children:t,variant:e="primary",onClick:n,type:r="button",className:i="",disabled:o=!1})=>{const s="px-5 py-2.5 rounded font-semibold transition-all duration-200 focus:outline-none disabled:opacity-50 disabled:cursor-not-allowed text-sm tracking-wide uppercase shadow-sm",a={primary:"bg-eprom-blue text-white hover:bg-blue-700 border border-blue-700 hover:shadow-md",secondary:"bg-white text-slate-700 border border-slate-300 hover:bg-slate-50 hover:border-slate-400 hover:text-slate-900",danger:"bg-white text-red-600 border border-red-200 hover:bg-red-50 hover:border-red-300",ghost:"bg-transparent text-slate-500 hover:text-eprom-blue hover:bg-slate-100 shadow-none"};return y.jsx("button",{type:r,onClick:n,disabled:o,className:`${s} ${a[e]} ${i}`,children:t})},Kt=({label:t,...e})=>y.jsxs("div",{className:"mb-5",children:[t&&y.jsx("label",{className:"block text-xs font-bold text-slate-500 mb-1.5 uppercase tracking-wide",children:t}),y.jsx("input",{...e,className:"w-full px-4 py-2.5 bg-white border border-slate-300 rounded text-slate-900 placeholder-slate-400 focus:outline-none focus:border-eprom-blue focus:ring-1 focus:ring-eprom-blue transition-all input-base"})]}),yA=({label:t,...e})=>y.jsxs("div",{className:"mb-5",children:[t&&y.jsx("label",{className:"block text-xs font-bold text-slate-500 mb-1.5 uppercase tracking-wide",children:t}),y.jsx("textarea",{...e,className:"w-full px-4 py-2.5 bg-white border border-slate-300 rounded text-slate-900 placeholder-slate-400 focus:outline-none focus:border-eprom-blue focus:ring-1 focus:ring-eprom-blue transition-all input-base"})]}),oc=({label:t,options:e,...n})=>y.jsxs("div",{className:"mb-5",children:[t&&y.jsx("label",{className:"block text-xs font-bold text-slate-500 mb-1.5 uppercase tracking-wide",children:t}),y.jsxs("select",{...n,className:"w-full px-4 py-2.5 bg-white border border-slate-300 rounded text-slate-900 focus:outline-none focus:border-eprom-blue focus:ring-1 focus:ring-eprom-blue transition-all appearance-none input-base",children:[y.jsx("option",{value:"",className:"text-slate-500",children:"Select an option"}),e.map(r=>y.jsx("option",{value:r,children:r},r))]})]}),je=({children:t,className:e="",onClick:n})=>y.jsx("div",{onClick:n,className:`bg-white rounded-lg border border-slate-200 shadow-[0_2px_8px_rgba(0,0,0,0.04)] hover:shadow-[0_8px_16px_rgba(0,0,0,0.06)] transition-shadow duration-300 ${e}`,children:t}),vA=F.createContext(null),ai=()=>{const t=F.useContext(vA);if(!t)throw new Error("useAppContext must be used within AppProvider");return t},gH=()=>{const[t,e]=F.useState(!1),n=F.useRef(null),r=F.useRef([]);return{isRecording:t,startRecording:async()=>{try{const s=await navigator.mediaDevices.getUserMedia({audio:!0});n.current=new MediaRecorder(s),r.current=[],n.current.ondataavailable=a=>{r.current.push(a.data)},n.current.start(),e(!0)}catch(s){console.error("Error accessing microphone:",s),alert("Could not access microphone. Please ensure permissions are granted.")}},stopRecording:()=>new Promise(s=>{if(!n.current){s(null);return}n.current.onstop=async()=>{const a=new Blob(r.current,{type:"audio/webm"}),l=new FileReader;l.readAsDataURL(a),l.onloadend=()=>{var p;const h=l.result.split(",")[1];(p=n.current)==null||p.stream.getTracks().forEach(m=>m.stop()),s({base64:h,mimeType:"audio/webm"})}},n.current.stop(),e(!1)})}},yH=()=>{const{user:t,logout:e,settings:n}=ai(),r=Cn(),[i,o]=F.useState(""),s=l=>{l.key==="Enter"&&(r(`/search?q=${encodeURIComponent(i)}`),o(""))},a=n==null?void 0:n.logoUrl;return y.jsx("nav",{className:"fixed top-0 w-full z-50 glass-panel border-b border-white/20",children:y.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:y.jsxs("div",{className:"flex justify-between h-16",children:[y.jsxs("div",{className:"flex items-center cursor-pointer group",onClick:()=>r("/"),children:[a?y.jsx("img",{src:a,alt:"EPROM",className:"h-10 w-auto object-contain mr-4 transition-transform duration-300 group-hover:scale-105"}):y.jsx("div",{className:"h-9 w-9 bg-slate-900 rounded-lg flex items-center justify-center font-bold text-white mr-3 shadow-lg shadow-slate-900/20 group-hover:scale-105 transition-transform",children:"E"}),y.jsx("span",{className:"font-bold text-lg tracking-tight text-slate-900 group-hover:text-eprom-accent transition-colors",children:!a&&y.jsxs("span",{children:["EPROM ",y.jsx("span",{className:"text-slate-400 font-light",children:"HUB"})]})})]}),y.jsx("div",{className:"flex-1 max-w-md px-8 flex items-center",children:y.jsxs("div",{className:"relative w-full group",children:[y.jsx("input",{type:"text",placeholder:"Search innovation registry...",className:"w-full bg-slate-100/50 border border-slate-200 rounded-full py-2 px-5 text-sm text-slate-800 focus:ring-2 focus:ring-slate-900 focus:bg-white transition-all placeholder-slate-400",value:i,onChange:l=>o(l.target.value),onKeyDown:s}),y.jsx("div",{className:"absolute right-4 top-2.5 text-slate-400 group-focus-within:text-slate-900 transition-colors",children:y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})})]})}),y.jsx("div",{className:"flex items-center space-x-6",children:t?y.jsxs(y.Fragment,{children:[t.role!==ye.ADMIN&&y.jsxs(y.Fragment,{children:[y.jsx(Sr,{to:"/dashboard",className:"text-slate-500 hover:text-slate-900 transition-colors text-xs font-bold uppercase tracking-widest",children:"Dashboard"}),y.jsx(Sr,{to:"/collaboration",className:"text-slate-500 hover:text-slate-900 transition-colors text-xs font-bold uppercase tracking-widest",children:"Collab"})]}),t.role===ye.EMPLOYEE&&y.jsx(Sr,{to:"/submit",className:"bg-slate-900 hover:bg-slate-800 text-white px-5 py-2 rounded text-xs font-bold uppercase tracking-wide transition-all shadow-lg hover:shadow-xl transform hover:-translate-y-0.5",children:"Submit Idea"}),t.role===ye.ADMIN&&y.jsxs(Sr,{to:"/admin",className:"text-slate-900 hover:text-red-600 transition-colors text-xs font-bold uppercase tracking-widest flex items-center gap-1",children:[y.jsx("span",{className:"w-2 h-2 rounded-full bg-red-500 animate-pulse"}),"Control Room"]}),y.jsx("div",{className:"h-6 w-[1px] bg-slate-200 mx-2"}),y.jsxs("div",{className:"flex items-center gap-4",children:[y.jsxs("div",{className:"text-right hidden md:block leading-tight",children:[y.jsx("div",{className:"text-sm font-bold text-slate-900",children:t.username}),y.jsx("div",{className:"text-[10px] text-slate-500 uppercase tracking-wider font-bold",children:t.role})]}),y.jsx(we,{variant:"ghost",onClick:e,className:"text-xs uppercase font-bold text-slate-400 hover:text-red-500",children:"Logout"})]})]}):y.jsx(Sr,{to:"/auth",className:"text-slate-900 hover:text-eprom-accent font-bold transition-colors uppercase text-sm tracking-wide",children:"Login"})})]})})})},vH=()=>{const[t,e]=F.useState(!1),[n,r]=F.useState([]),[i,o]=F.useState(""),[s,a]=F.useState(!1),[l,u]=F.useState("standard"),h=F.useRef(null),p=()=>{var _;(_=h.current)==null||_.scrollIntoView({behavior:"smooth"})};F.useEffect(p,[n]);const m=async()=>{var I;if(!i.trim())return;const _=i;o(""),r(T=>[...T,{role:"user",text:_}]),a(!0);const E=n.map(T=>({role:T.role,parts:[{text:T.text}]})),P=await fH(E,_,l);let x=P.text||"I'm having trouble thinking right now.";if((I=P.groundingMetadata)!=null&&I.groundingChunks){const T=P.groundingMetadata.groundingChunks.map(C=>{var M;return(M=C.web)!=null&&M.uri?`[${C.web.title||"Source"}](${C.web.uri})`:null}).filter(Boolean).join(", ");T&&(x+=`

Sources: ${T}`)}r(T=>[...T,{role:"model",text:x}]),a(!1)};return t?y.jsxs("div",{className:"fixed bottom-6 right-6 w-[380px] h-[600px] bg-white rounded-2xl shadow-2xl border border-slate-200 flex flex-col z-50 overflow-hidden font-sans fade-in",children:[y.jsxs("div",{className:"bg-slate-900 p-4 flex justify-between items-center text-white",children:[y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx("div",{className:"w-2 h-2 rounded-full bg-eprom-accent animate-pulse"}),y.jsx("span",{className:"font-bold tracking-wide text-sm",children:"AI Assistant"})]}),y.jsx("button",{onClick:()=>e(!1),className:"text-slate-400 hover:text-white transition-colors",children:y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:y.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})]}),y.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4 bg-slate-50/50",children:[n.length===0&&y.jsxs("div",{className:"text-center text-slate-400 text-xs mt-10",children:[y.jsx("p",{className:"mb-2",children:"Hello! I'm Gemini."}),y.jsx("p",{children:"I can help you analyze ideas, refine descriptions, or search the web."})]}),n.map((_,E)=>y.jsx("div",{className:`flex ${_.role==="user"?"justify-end":"justify-start"}`,children:y.jsx("div",{className:`max-w-[85%] rounded-lg p-3 text-sm whitespace-pre-wrap ${_.role==="user"?"bg-slate-900 text-white shadow-md":"bg-white border border-slate-200 text-slate-800 shadow-sm"}`,children:_.text})},E)),s&&y.jsx("div",{className:"flex justify-start",children:y.jsxs("div",{className:"bg-white border border-slate-200 p-3 rounded-lg flex gap-1 shadow-sm",children:[y.jsx("span",{className:"w-1.5 h-1.5 bg-slate-400 rounded-full animate-bounce"}),y.jsx("span",{className:"w-1.5 h-1.5 bg-slate-400 rounded-full animate-bounce delay-100"}),y.jsx("span",{className:"w-1.5 h-1.5 bg-slate-400 rounded-full animate-bounce delay-200"})]})}),y.jsx("div",{ref:h})]}),y.jsxs("div",{className:"p-3 bg-white border-t border-slate-200",children:[y.jsxs("div",{className:"flex gap-2 mb-2 overflow-x-auto pb-1 no-scrollbar",children:[y.jsx("button",{onClick:()=>u("standard"),className:`px-3 py-1 rounded-full text-[10px] font-bold uppercase tracking-wider border transition-colors ${l==="standard"?"bg-slate-800 text-white border-slate-800":"bg-white text-slate-500 border-slate-200 hover:border-slate-300"}`,children:"Chat"}),y.jsxs("button",{onClick:()=>u("thinking"),className:`px-3 py-1 rounded-full text-[10px] font-bold uppercase tracking-wider border flex items-center gap-1 transition-colors ${l==="thinking"?"bg-indigo-600 text-white border-indigo-600":"bg-white text-slate-500 border-slate-200 hover:border-slate-300"}`,children:[y.jsx("span",{children:"Reasoning"}),y.jsx("span",{className:"text-[8px] opacity-70",children:"(Pro)"})]}),y.jsxs("button",{onClick:()=>u("search"),className:`px-3 py-1 rounded-full text-[10px] font-bold uppercase tracking-wider border flex items-center gap-1 transition-colors ${l==="search"?"bg-emerald-600 text-white border-emerald-600":"bg-white text-slate-500 border-slate-200 hover:border-slate-300"}`,children:[y.jsx("span",{children:"Web"}),y.jsx("span",{className:"text-[8px] opacity-70",children:"(Flash)"})]})]}),y.jsxs("div",{className:"flex gap-2",children:[y.jsx("input",{type:"text",value:i,onChange:_=>o(_.target.value),onKeyDown:_=>_.key==="Enter"&&m(),placeholder:l==="search"?"Search Google...":"Ask Gemini...",className:"flex-1 bg-slate-100 border-none rounded-md px-3 py-2 text-sm focus:ring-2 focus:ring-slate-900 focus:bg-white transition-all placeholder-slate-400"}),y.jsx("button",{onClick:m,disabled:s||!i.trim(),className:"p-2 bg-slate-900 text-white rounded-md disabled:opacity-50 hover:bg-slate-800 transition-colors shadow-sm",children:y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 19l9 2-9-18-9 18 9-2zm0 0v-8"})})})]})]})]}):y.jsx("button",{onClick:()=>e(!0),className:"fixed bottom-6 right-6 w-14 h-14 bg-slate-900 text-white rounded-full shadow-2xl flex items-center justify-center hover:scale-110 transition-transform z-50 group border border-slate-700",children:y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 group-hover:animate-pulse text-eprom-accent",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19.428 15.428a2 2 0 00-1.022-.547l-2.387-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h8l-1 1v5.172a2 2 0 00.586 1.414l5 5c1.26 1.26.367 3.414-1.415 3.414H4.828c-1.782 0-2.674-2.154-1.414-3.414l5-5A2 2 0 009 10.172V5L8 4z"})})})},_H=({children:t})=>{const[e,n]=F.useState(null),[r,i]=F.useState(null),[o,s]=F.useState(!0);F.useEffect(()=>{const h=qU(p=>{n(p),s(!1)});return u(),()=>h()},[]);const a=async(h,p)=>{const m=await $U(h,p);return n(m),m.role},l=async()=>{await WU(),n(null)},u=async()=>{const h=await QU();i(h)};return o?y.jsx("div",{className:"min-h-screen flex items-center justify-center bg-slate-50 text-slate-400 uppercase font-bold text-sm tracking-widest animate-pulse",children:"Initializing System..."}):y.jsxs(vA.Provider,{value:{user:e,settings:r,login:a,logout:l,refreshSettings:u,authLoading:o},children:[t,y.jsx(vH,{})]})},EH=()=>{const{id:t}=eN(),{user:e}=ai(),n=Cn(),[r,i]=F.useState(null),[o,s]=F.useState(null),[a,l]=F.useState(!0),[u,h]=F.useState({}),[p,m]=F.useState(""),[_,E]=F.useState(!1);if(F.useEffect(()=>{(async()=>{if(!t)return;l(!0);const w=(await qo()).find(A=>A.id===t);if(w){i(w);const N=(await Ym()).find(D=>D.id===w.templateId);if(s(N||null),N!=null&&N.ratingConfig){const D={};N.ratingConfig.forEach(b=>D[b.id]=3),h(D)}}l(!1)})()},[t]),a)return y.jsx("div",{className:"text-center py-20 text-slate-400",children:"Loading Protocol Data..."});if(!r)return y.jsx("div",{className:"text-center py-20 text-slate-400",children:"Idea not found."});const P=(r==null?void 0:r.status)===ne.PUBLISHED;if(r&&!e&&!P)return y.jsx(zw,{to:"/auth"});const x=async()=>{if(!r||!(o!=null&&o.ratingConfig))return;E(!0);const L=await pH(r.title,r.description,o.ratingConfig);L?(h(L.scores),m(L.comment)):alert("AI Evaluation failed. Please try again."),E(!1)},I=()=>{if(!(o!=null&&o.ratingConfig))return 0;let L=0,R=0;return o.ratingConfig.forEach(w=>{const A=u[w.id]||0;L+=A*w.weight,R+=w.weight}),R>0?L/R:0},T=async L=>{if(!r)return;const R={...r,status:L};await bh(R),i(R),alert(`Status updated to: ${L}`)},C=async L=>{if(!r||!e||!o)return;const R=I(),w=R/5*100;let A="F";w>=90?A="A":w>=80?A="B":w>=70?A="C":w>=60&&(A="D");const N={managerId:e.id,managerName:e.username,details:Object.entries(u).map(([ge,ht])=>({dimensionId:ge,score:ht})),totalScore:Number(R.toFixed(1)),percentage:Math.round(w),grade:A,comment:p,createdAt:new Date().toISOString()};let D=r.status;L==="APPROVE"&&(D=ne.APPROVED),L==="REVISE"&&(D=ne.NEEDS_REVISION),L==="REJECT"&&(D=ne.REJECTED);const b=[...r.ratings||[],N],k={...r,status:D,ratings:b,managerFeedback:p};await bh(k),i(k),alert(`Protocol ${L}D`),n("/dashboard")},M=(e==null?void 0:e.role)===ye.MANAGER||(e==null?void 0:e.role)===ye.ADMIN,U=r.status===ne.SUBMITTED;return y.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-24 fade-in",children:[y.jsxs("div",{className:"flex justify-between items-start mb-8",children:[y.jsxs("div",{children:[y.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[y.jsx(Xr,{color:r.status===ne.PUBLISHED?"green":r.status===ne.APPROVED?"blue":r.status===ne.REJECTED?"red":r.status===ne.NEEDS_REVISION?"amber":"gray",children:r.status}),y.jsx("span",{className:"text-xs text-slate-500 font-bold uppercase tracking-wider",children:r.category})]}),y.jsx("h1",{className:"text-4xl font-bold text-slate-900 leading-tight mb-2",children:r.title}),y.jsxs("div",{className:"flex items-center gap-4 text-sm text-slate-500 font-medium",children:[y.jsxs("span",{className:"flex items-center gap-1",children:[y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),r.authorName]}),y.jsx("span",{children:""}),y.jsx("span",{children:r.department}),y.jsx("span",{children:""}),y.jsx("span",{children:new Date(r.createdAt).toLocaleDateString()})]})]}),e?e.role!==ye.ADMIN?y.jsx(we,{variant:"ghost",onClick:()=>n(-1),className:"uppercase text-xs font-bold",children:"Back to Dashboard"}):y.jsx(we,{variant:"ghost",onClick:()=>n("/admin"),className:"uppercase text-xs font-bold",children:"Return to Control Room"}):y.jsx(Sr,{to:"/auth",children:y.jsx(we,{variant:"primary",className:"text-xs uppercase",children:"Login"})})]}),y.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[y.jsxs("div",{className:"lg:col-span-2 space-y-8",children:[r.coverImage&&y.jsx("div",{className:"rounded-xl overflow-hidden shadow-lg border border-slate-200",children:y.jsx("img",{src:r.coverImage,className:"w-full h-80 object-cover",alt:"Cover"})}),y.jsxs(je,{className:"p-8 border-none shadow-md",children:[y.jsx("h3",{className:"text-sm font-bold text-slate-400 uppercase tracking-widest mb-6 border-b border-slate-100 pb-2",children:"Technical Detail"}),y.jsx("p",{className:"whitespace-pre-wrap text-slate-700 leading-relaxed text-lg",children:r.description})]}),y.jsxs(je,{className:"p-8 border-none shadow-md",children:[y.jsx("h3",{className:"text-sm font-bold text-slate-400 uppercase tracking-widest mb-6 border-b border-slate-100 pb-2",children:"Operational Data"}),y.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-y-6 gap-x-12",children:Object.entries(r.dynamicData).map(([L,R])=>y.jsxs("div",{children:[y.jsx("span",{className:"block text-xs font-bold uppercase text-slate-500 mb-1",children:L}),y.jsx("span",{className:"font-medium text-slate-900",children:R.toString()})]},L))})]}),r.attachments&&r.attachments.length>0&&y.jsxs(je,{className:"p-8 border-none shadow-md",children:[y.jsx("h3",{className:"text-sm font-bold text-slate-400 uppercase tracking-widest mb-6 border-b border-slate-100 pb-2",children:"Attachments"}),y.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:r.attachments.map((L,R)=>y.jsxs("a",{href:L,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-4 p-4 bg-slate-50 border border-slate-200 rounded-lg hover:border-blue-400 hover:shadow-md transition-all group cursor-pointer decoration-none",children:[y.jsx("div",{className:"w-10 h-10 bg-white rounded-full flex items-center justify-center text-blue-600 shadow-sm border border-slate-100",children:y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.172 7l-6.586 6.586a2 2 0 102.828 2.828l6.414-6.586a4 4 0 00-5.656-5.656l-6.415 6.585a6 6 0 108.486 8.486L20.5 13"})})}),y.jsxs("div",{className:"flex-1 min-w-0 text-left",children:[y.jsxs("p",{className:"text-sm font-bold text-slate-900 truncate group-hover:text-blue-600",children:["Attachment ",R+1]}),y.jsx("p",{className:"text-[10px] text-slate-500 font-medium uppercase tracking-wide",children:"View Document"})]}),y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 text-slate-300 group-hover:text-blue-500 transform group-hover:translate-x-1 transition-all",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"})})]},R))})]})]}),y.jsx("div",{className:"space-y-6",children:M&&U&&(o!=null&&o.ratingConfig)?y.jsxs(je,{className:"p-6 border-l-4 border-l-indigo-600 shadow-xl bg-white sticky top-24",children:[y.jsxs("div",{className:"flex justify-between items-center mb-6",children:[y.jsx("h3",{className:"text-lg font-bold text-slate-900 uppercase tracking-tight",children:"Evaluation Console"}),y.jsx("button",{onClick:x,disabled:_,className:"text-[10px] font-bold uppercase bg-indigo-50 text-indigo-600 px-3 py-1.5 rounded hover:bg-indigo-100 transition-colors flex items-center gap-2",children:_?y.jsx("span",{className:"animate-spin",children:""}):y.jsx("span",{children:" AI Auto-Grade"})})]}),y.jsx("div",{className:"space-y-5 mb-8",children:o.ratingConfig.map(L=>y.jsxs("div",{children:[y.jsxs("div",{className:"flex justify-between text-xs mb-1.5",children:[y.jsx("span",{className:"font-bold text-slate-700",children:L.name}),y.jsxs("span",{className:"font-mono text-slate-500",children:[u[L.id]||"-","/5"]})]}),y.jsx("input",{type:"range",min:"1",max:"5",value:u[L.id]||3,onChange:R=>h({...u,[L.id]:Number(R.target.value)}),className:"w-full h-2 bg-slate-200 rounded-lg appearance-none cursor-pointer accent-indigo-600"}),y.jsx("p",{className:"text-[10px] text-slate-400 mt-1",children:L.description})]},L.id))}),y.jsxs("div",{className:"mb-6",children:[y.jsx("label",{className:"block text-xs font-bold text-slate-700 mb-2 uppercase",children:"Verdict / Feedback"}),y.jsx("textarea",{value:p,onChange:L=>m(L.target.value),className:"w-full p-3 bg-slate-50 border border-slate-200 rounded text-sm focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500 h-32",placeholder:"Provide constructive feedback..."})]}),y.jsxs("div",{className:"grid grid-cols-1 gap-3",children:[y.jsx(we,{onClick:()=>C("APPROVE"),className:"w-full bg-emerald-600 hover:bg-emerald-700 border-emerald-600 text-white",children:"Approve (Internal)"}),y.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[y.jsx(we,{onClick:()=>C("REVISE"),variant:"secondary",className:"text-xs",children:"Request Revision"}),y.jsx(we,{onClick:()=>C("REJECT"),variant:"danger",className:"text-xs",children:"Reject"})]})]})]}):y.jsxs(je,{className:"p-6 border-none shadow-md bg-slate-50 sticky top-24",children:[y.jsx("h3",{className:"text-xs font-bold text-slate-400 uppercase tracking-widest mb-4",children:"Protocol Status"}),y.jsxs("div",{className:"mb-6",children:[y.jsx("div",{className:`text-xl font-bold mb-1 ${r.status===ne.PUBLISHED?"text-green-600":r.status===ne.APPROVED?"text-blue-600":r.status===ne.REJECTED?"text-red-600":r.status===ne.NEEDS_REVISION?"text-amber-600":"text-slate-600"}`,children:r.status.replace("_"," ")}),y.jsxs("div",{className:"text-xs text-slate-500",children:["Last updated ",new Date(r.updatedAt).toLocaleDateString()]})]}),M&&(r.status===ne.APPROVED||r.status===ne.PUBLISHED)&&y.jsxs("div",{className:"p-4 bg-white border border-slate-200 rounded mb-6",children:[y.jsx("h4",{className:"text-xs font-bold text-slate-900 uppercase tracking-wide mb-3",children:"Publishing Controls"}),r.status===ne.APPROVED&&y.jsxs("div",{className:"space-y-2",children:[y.jsx("p",{className:"text-xs text-slate-500 mb-2",children:"Protocol is approved internally. Publish to make it live?"}),y.jsx(we,{onClick:()=>T(ne.PUBLISHED),className:"w-full bg-slate-900 text-white",children:"Publish Live"}),y.jsx(we,{onClick:()=>T(ne.NEEDS_REVISION),variant:"secondary",className:"w-full text-xs",children:"Return for Revision"})]}),r.status===ne.PUBLISHED&&y.jsxs("div",{className:"space-y-2",children:[y.jsx("p",{className:"text-xs text-slate-500 mb-2",children:"Protocol is live. Unpublish?"}),y.jsx(we,{onClick:()=>T(ne.APPROVED),variant:"secondary",className:"w-full",children:"Unpublish"})]})]}),r.ratings&&r.ratings.length>0&&y.jsxs("div",{className:"space-y-4 mb-6",children:[y.jsx("h4",{className:"text-xs font-bold text-slate-400 uppercase tracking-widest",children:"Evaluation History"}),r.ratings.slice().reverse().map((L,R)=>y.jsxs("div",{className:"p-4 bg-white rounded border border-slate-200 shadow-sm",children:[y.jsxs("div",{className:"flex justify-between items-start mb-3",children:[y.jsxs("div",{children:[y.jsx("div",{className:"text-xs text-slate-400 font-bold uppercase mb-0.5",children:new Date(L.createdAt).toLocaleDateString()}),y.jsx("div",{className:"font-bold text-slate-900 text-sm",children:L.managerName})]}),y.jsxs("div",{className:"text-right",children:[y.jsx("span",{className:`text-xl font-black ${L.grade>="D"?"text-red-600":"text-slate-900"}`,children:L.grade}),y.jsxs("span",{className:"block text-[10px] font-bold text-slate-500",children:[L.percentage,"%"]})]})]}),y.jsxs("p",{className:"text-sm text-slate-600 italic border-l-2 border-indigo-100 pl-3",children:['"',L.comment,'"']})]},R))]}),(e==null?void 0:e.id)===r.authorId&&(r.status===ne.NEEDS_REVISION||r.status===ne.REJECTED)&&y.jsx(we,{onClick:()=>n("/submit",{state:{idea:r}}),className:"w-full mt-4",children:"Edit & Resubmit"})]})})]})]})},TH=()=>{const{user:t}=ai(),e=Cn(),[n,r]=F.useState([]),[i,o]=F.useState([]),[s,a]=F.useState([]),[l,u]=F.useState(!0);F.useEffect(()=>{(async()=>{if(t){u(!0);const _=await qo();t.role===ye.EMPLOYEE?r(_.filter(E=>E.authorId===t.id)):(o(_.filter(E=>E.status===ne.SUBMITTED)),a(_.filter(E=>E.status!==ne.SUBMITTED&&E.status!==ne.DRAFT))),u(!1)}})()},[t]);const h=async m=>{if(window.confirm("Are you sure you want to delete this protocol?")){await jU(m);const _=await qo();(t==null?void 0:t.role)===ye.EMPLOYEE?r(_.filter(E=>E.authorId===t.id)):(o(_.filter(E=>E.status===ne.SUBMITTED)),a(_.filter(E=>E.status!==ne.SUBMITTED&&E.status!==ne.DRAFT)))}},p=({ideas:m,emptyMsg:_})=>m.length===0?y.jsx("div",{className:"py-12 text-center bg-white border border-slate-200 rounded-xl text-slate-400 text-sm font-bold uppercase tracking-wide",children:_}):y.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:m.map(E=>y.jsxs(je,{className:"flex flex-col h-full relative group hover:border-blue-400 transition-colors cursor-pointer",onClick:()=>e(`/view/${E.id}`),children:[y.jsxs("div",{className:"p-6 flex-1",children:[y.jsxs("div",{className:"flex justify-between items-start mb-4",children:[y.jsx(Xr,{color:E.status===ne.PUBLISHED?"green":E.status===ne.APPROVED?"blue":E.status===ne.REJECTED?"red":E.status===ne.SUBMITTED?"blue":"amber",children:E.status}),y.jsx("span",{className:"text-[10px] font-bold text-slate-400 uppercase",children:new Date(E.createdAt).toLocaleDateString()})]}),y.jsx("h3",{className:"font-bold text-lg text-slate-900 mb-2 leading-tight",children:E.title}),y.jsx("p",{className:"text-sm text-slate-500 line-clamp-3 mb-4",children:E.description}),y.jsxs("div",{className:"flex items-center gap-2 text-xs text-slate-400 font-bold uppercase",children:[y.jsx("span",{children:E.authorName}),y.jsx("span",{children:""}),y.jsx("span",{children:E.department})]})]}),((t==null?void 0:t.id)===E.authorId||(t==null?void 0:t.role)===ye.ADMIN)&&y.jsxs("div",{className:"px-6 py-3 bg-slate-50 border-t border-slate-100 flex justify-end items-center gap-3 rounded-b-lg",onClick:P=>P.stopPropagation(),children:[y.jsx("button",{onClick:()=>e("/submit",{state:{idea:E}}),className:"text-slate-400 hover:text-blue-600 p-1",children:y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})})}),y.jsx("button",{onClick:()=>h(E.id),className:"text-slate-400 hover:text-red-600 p-1",children:y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]},E.id))});return l?y.jsx("div",{className:"max-w-7xl mx-auto px-4 py-24 text-center text-slate-400",children:"Syncing with HQ..."}):y.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-24 fade-in",children:[y.jsxs("div",{className:"flex justify-between items-end mb-10 border-b border-slate-200 pb-6",children:[y.jsxs("div",{children:[y.jsx("h1",{className:"text-3xl font-bold text-slate-900 uppercase tracking-tight",children:"Mission Control"}),y.jsxs("p",{className:"text-slate-500 font-medium text-sm mt-1",children:["Welcome back, ",y.jsx("span",{className:"text-slate-900 font-bold",children:t==null?void 0:t.username}),"."]})]}),(t==null?void 0:t.role)===ye.EMPLOYEE&&y.jsx(Sr,{to:"/submit",children:y.jsx(we,{className:"shadow-lg hover:shadow-xl hover:-translate-y-0.5 transition-all",children:"+ Initialize Protocol"})})]}),(t==null?void 0:t.role)===ye.EMPLOYEE?y.jsxs(y.Fragment,{children:[y.jsx("h2",{className:"text-sm font-bold text-slate-400 uppercase tracking-widest mb-6",children:"My Protocols"}),y.jsx(p,{ideas:n,emptyMsg:"No active protocols found. Initialize one to get started."})]}):y.jsxs("div",{className:"space-y-16",children:[y.jsxs("section",{children:[y.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[y.jsx("div",{className:"w-2 h-2 rounded-full bg-indigo-500 animate-pulse"}),y.jsx("h2",{className:"text-sm font-bold text-indigo-900 uppercase tracking-widest",children:"Pending Review Queue"}),y.jsxs(Xr,{color:"blue",children:[i.length," Pending"]})]}),y.jsx(p,{ideas:i,emptyMsg:"Review queue clear. Good job!"})]}),y.jsxs("section",{children:[y.jsx("h2",{className:"text-sm font-bold text-slate-400 uppercase tracking-widest mb-6 border-b border-slate-200 pb-2",children:"Innovation Registry"}),y.jsx(p,{ideas:s,emptyMsg:"Registry is empty."})]})]})]})},wH=()=>{const[t,e]=F.useState([]),n=Cn(),[r,i]=F.useState(!0);return F.useEffect(()=>{(async()=>{const s=await qo();e(s.filter(a=>(a.status===ne.PUBLISHED||a.status===ne.APPROVED)&&(a.dynamicData.collab===!0||a.collaborationNeeded===!0))),i(!1)})()},[]),r?y.jsx("div",{className:"text-center py-24 text-slate-400",children:"Loading Collab Opportunities..."}):y.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-24",children:[y.jsx("h1",{className:"text-3xl font-bold mb-2 text-slate-900 uppercase tracking-tight",children:"Collaboration Hub"}),y.jsx("p",{className:"text-slate-500 mb-10 font-medium",children:"Join forces on these active initiatives."}),y.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:t.map(o=>y.jsxs(je,{className:"p-6",children:[y.jsx(Xr,{color:"blue",className:"mb-3",children:o.category}),y.jsx("h3",{className:"font-bold text-lg mb-2 text-slate-900",children:o.title}),y.jsx("p",{className:"text-sm text-slate-500 mb-6 line-clamp-3",children:o.description}),y.jsxs("div",{className:"flex justify-between items-center mt-auto pt-4 border-t border-slate-100",children:[y.jsx("span",{className:"text-xs font-bold text-slate-400",children:o.authorName}),y.jsx(we,{variant:"secondary",className:"text-xs py-1.5 px-4 font-bold border-slate-300",onClick:()=>n("/submit",{state:{parentIdea:o}}),children:"Collaborate"})]})]},o.id))}),t.length===0&&y.jsx("div",{className:"text-center py-20 text-slate-400 bg-white border border-slate-200 rounded-lg",children:"No active collaboration requests."})]})},IH=()=>{const[t]=xN(),e=t.get("q")||"",[n,r]=F.useState([]),{user:i}=ai(),o=Cn(),[s,a]=F.useState(!1);return F.useEffect(()=>{(async()=>{if(!e){r([]);return}a(!0);const u=e.toLowerCase(),p=(await qo()).filter(m=>{var I;const _=(i==null?void 0:i.id)===m.authorId,E=m.status===ne.PUBLISHED,P=m.status===ne.APPROVED&&(m.dynamicData.collab||m.collaborationNeeded);return _||E||P||(i==null?void 0:i.role)===ye.ADMIN||(i==null?void 0:i.role)===ye.MANAGER||(i==null?void 0:i.role)===ye.GUEST?m.title.toLowerCase().includes(u)||m.description.toLowerCase().includes(u)||m.category.toLowerCase().includes(u)||m.authorName.toLowerCase().includes(u)||((I=m.tags)==null?void 0:I.some(T=>T.toLowerCase().includes(u))):!1});r(p),a(!1)})()},[e,i]),y.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-24 min-h-screen fade-in",children:[y.jsxs("div",{className:"mb-8 border-b border-slate-200 pb-4",children:[y.jsx("h1",{className:"text-3xl font-bold text-slate-900 uppercase tracking-tight",children:"Search Results"}),y.jsxs("p",{className:"text-slate-500 text-sm mt-1 font-medium",children:["Found ",n.length,' records for "',e,'"']})]}),s?y.jsx("div",{className:"text-slate-400",children:"Searching..."}):n.length===0?y.jsx("div",{className:"text-center py-20 bg-white rounded-xl border border-slate-200 shadow-sm",children:y.jsx("p",{className:"text-slate-400 uppercase tracking-widest text-sm",children:"No matches found in the registry."})}):y.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:n.map(l=>y.jsxs(je,{className:`flex flex-col justify-between hover:border-slate-300 transition-colors cursor-pointer group relative overflow-hidden rounded-xl ${l.coverImage?"bg-slate-900 border-none":"p-6"}`,onClick:()=>o("/dashboard"),children:[l.coverImage&&y.jsxs(y.Fragment,{children:[y.jsx("div",{className:"absolute inset-0 z-0 bg-slate-950",children:y.jsx("img",{src:l.coverImage,alt:"Cover",className:"w-full h-full object-cover transition-transform duration-700 group-hover:scale-110 opacity-50"})}),y.jsx("div",{className:"absolute inset-0 z-0 bg-gradient-to-t from-black via-black/80 to-transparent"})]}),y.jsxs("div",{className:`relative z-10 ${l.coverImage?"p-6":""}`,children:[y.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[y.jsx(Xr,{color:"blue",children:l.category}),y.jsx(Xr,{color:"gray",children:l.status})]}),y.jsx("h3",{className:`text-xl font-bold ${l.coverImage?"text-white drop-shadow-lg":"text-slate-800"}`,children:l.title}),y.jsx("p",{className:`text-sm line-clamp-2 mt-2 font-medium ${l.coverImage?"text-slate-300 drop-shadow-md":"text-slate-500"}`,children:l.description})]}),y.jsxs("div",{className:`mt-4 relative z-10 flex justify-between items-end ${l.coverImage?"px-6 pb-6":""}`,children:[y.jsx("div",{className:`text-xs uppercase font-bold tracking-wide ${l.coverImage,"text-slate-400"}`,children:l.authorName}),y.jsx("div",{className:`text-[10px] font-bold ${l.coverImage?"text-slate-500":"text-slate-400"}`,children:new Date(l.createdAt).toLocaleDateString()})]})]},l.id))})]})},SH=()=>{const[t,e]=F.useState([]),{user:n}=ai(),r=Cn();return F.useEffect(()=>{(async()=>{const s=(await qo()).filter(a=>a.status===ne.PUBLISHED).map(a=>{const l=a.ratings.length>0?a.ratings.reduce((u,h)=>u+h.percentage,0)/a.ratings.length:0;return{...a,avgScore:l}}).sort((a,l)=>l.avgScore-a.avgScore).slice(0,10);e(s)})()},[]),y.jsxs("div",{className:"min-h-screen bg-eprom-bg text-slate-800 pt-16",children:[y.jsxs("div",{className:"relative py-32 px-4 overflow-hidden border-b border-slate-200 bg-white",children:[y.jsx("div",{className:"absolute inset-0 bg-luxury-gradient z-0"}),y.jsxs("div",{className:"relative z-10 max-w-7xl mx-auto text-center",children:[y.jsx(Xr,{color:"gray",className:"mb-8 inline-block bg-white/80 border-slate-200 shadow-sm text-slate-600 backdrop-blur-sm",children:"Enterprise Innovation System"}),y.jsxs("h1",{className:"text-5xl md:text-8xl font-black mb-8 tracking-tighter text-slate-900 leading-[0.9]",children:["EPROM ",y.jsx("span",{className:"text-slate-400 font-light",children:"Idea bank."})]}),y.jsx("p",{className:"text-2xl text-slate-900 max-w-2xl mx-auto mb-4 leading-relaxed font-bold tracking-tight",children:"Innovating Energy. Empowering Ideas."}),y.jsx("p",{className:"text-lg text-slate-500 max-w-3xl mx-auto mb-12 leading-relaxed font-medium",children:"EPROM Idea Bank is the innovation hub for the oil and gas sector."}),!n&&y.jsx(Sr,{to:"/auth",children:y.jsx(we,{variant:"primary",className:"text-lg px-10 py-4 rounded-full bg-slate-900 hover:bg-slate-800 border-none shadow-2xl hover:shadow-xl hover:scale-105 transition-all text-white",children:"Initialize Session"})})]})]}),y.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-20 relative z-10",children:[y.jsx("div",{className:"flex items-center mb-12 border-l-4 border-slate-900 pl-6",children:y.jsx("h2",{className:"text-3xl font-bold text-slate-900 tracking-tight uppercase",children:"Top 10 Innovations"})}),t.length===0?y.jsx("div",{className:"text-center py-20 bg-white border border-slate-200 rounded-xl shadow-sm",children:y.jsx("div",{className:"text-slate-400 text-lg",children:"System Idle. Awaiting Innovation Inputs."})}):y.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:t.map((i,o)=>y.jsxs(je,{className:"group relative h-[420px] overflow-hidden rounded-2xl border-none shadow-xl bg-slate-900 hover:shadow-2xl transition-all duration-500 cursor-pointer",onClick:()=>r(`/view/${i.id}`),children:[i.coverImage&&y.jsx("div",{className:"absolute inset-0 z-0 bg-slate-950",children:y.jsx("img",{src:i.coverImage,alt:"Cover",className:"w-full h-full object-cover transition-transform duration-700 group-hover:scale-110 opacity-60"})}),y.jsx("div",{className:"absolute inset-0 z-0 bg-gradient-to-t from-black via-black/90 to-transparent"}),y.jsx("div",{className:"absolute top-5 left-5 w-10 h-10 rounded-full bg-white/10 backdrop-blur-md text-white flex items-center justify-center font-bold shadow-lg border border-white/20 z-20 text-lg",children:o+1}),y.jsxs("div",{className:"absolute inset-0 z-10 p-8 flex flex-col justify-end transform transition-transform duration-300",children:[y.jsxs("div",{className:"flex justify-between items-start mb-3 transform translate-y-2 group-hover:translate-y-0 transition-transform",children:[y.jsx(Xr,{color:"blue",className:"bg-blue-500/20 text-blue-100 border-blue-500/30 backdrop-blur-md",children:i.category}),y.jsx("span",{className:"text-[10px] uppercase tracking-widest text-slate-300 font-bold",children:new Date(i.createdAt).toLocaleDateString()})]}),y.jsx("h3",{className:"text-3xl font-bold text-white mb-3 leading-none drop-shadow-xl tracking-tight",children:i.title}),y.jsx("p",{className:"text-slate-200 text-sm line-clamp-2 mb-6 font-medium drop-shadow-md opacity-90",children:i.description})]})]},i.id))})]})]})},CH=()=>{const{login:t,user:e}=ai(),n=Cn(),[r,i]=F.useState(!0),[o,s]=F.useState({username:"",password:"",email:"",department:"Engineering"}),[a,l]=F.useState(""),[u,h]=F.useState(!1);F.useEffect(()=>{e&&(e.role===ye.ADMIN?n("/admin"):n("/dashboard"))},[e]);const p=async m=>{m.preventDefault(),l(""),h(!0);try{r?await t(o.email,o.password)===ye.ADMIN?n("/admin"):n("/dashboard"):(await zU({username:o.username,password:o.password,email:o.email,department:o.department,role:ye.EMPLOYEE}),alert("Registration successful. Please login."),i(!0))}catch(_){let E=_.message;E.includes("auth/invalid-credential")||E.includes("auth/user-not-found")||E.includes("INVALID_LOGIN_CREDENTIALS")?E="Invalid credentials. If you haven't registered yet, please switch to the 'Register' tab to create your account.":E.includes("auth/email-already-in-use")?E="Email already in use. Please login.":E.includes("auth/weak-password")&&(E="Password should be at least 6 characters."),l(E)}finally{h(!1)}};return y.jsx("div",{className:"min-h-screen flex items-center justify-center bg-slate-50 px-4",children:y.jsxs(je,{className:"w-full max-w-md p-8",children:[y.jsx("h2",{className:"text-2xl font-bold mb-6 text-center",children:r?"Login":"Register"}),a&&y.jsx("div",{className:"bg-red-50 text-red-600 p-3 rounded mb-4 text-sm font-medium",children:a}),y.jsxs("form",{onSubmit:p,children:[!r&&y.jsx(Kt,{label:"Username",value:o.username,onChange:m=>s({...o,username:m.target.value}),required:!0}),y.jsx(Kt,{label:"Email",type:"email",value:o.email,onChange:m=>s({...o,email:m.target.value}),required:!0}),y.jsx(Kt,{label:"Password",type:"password",value:o.password,onChange:m=>s({...o,password:m.target.value}),required:!0}),!r&&y.jsx(oc,{label:"Department",options:["Operations","Safety","Engineering","IT","HR"],value:o.department,onChange:m=>s({...o,department:m.target.value}),required:!0}),y.jsx(we,{type:"submit",disabled:u,className:"w-full mt-4",children:u?"Processing...":r?"Sign In":"Create Account"})]}),y.jsx("p",{className:"mt-4 text-center text-sm text-slate-500 cursor-pointer hover:text-eprom-blue",onClick:()=>{i(!r),l("")},children:r?"Need an account? Register":"Already have an account? Login"})]})})},AH=()=>{var Ut,At;const{user:t,settings:e}=ai(),n=Cn(),r=Oi(),i=(Ut=r.state)==null?void 0:Ut.idea,o=(At=r.state)==null?void 0:At.parentIdea,[s,a]=F.useState((i==null?void 0:i.title)||(o?`Contribution: ${o.title}`:"")),[l,u]=F.useState((i==null?void 0:i.description)||""),[h,p]=F.useState((i==null?void 0:i.category)||"Innovation"),[m,_]=F.useState((i==null?void 0:i.templateId)||""),[E,P]=F.useState((i==null?void 0:i.dynamicData)||{}),[x,I]=F.useState((i==null?void 0:i.coverImage)||""),[T,C]=F.useState((i==null?void 0:i.attachments)||[]),[M,U]=F.useState(!1),[L,R]=F.useState(!1),[w,A]=F.useState([]),{isRecording:N,startRecording:D,stopRecording:b}=gH(),[k,ge]=F.useState(!1),[ht,Je]=F.useState([]);F.useEffect(()=>{(async()=>{const se=await Ym();A(se),!i&&se.length>0&&_(se[0].id),e&&Je(e.categories)})()},[i,e]);const it=async()=>{if(!l)return;ge(!0);const Y=await mH(l);u(Y),ge(!1)},z=async()=>{if(N){const Y=await b();if(Y){u(qe=>qe+`
[Processing Audio...]`);const se=await hH(Y.base64,Y.mimeType);u(qe=>qe.replace(`
[Processing Audio...]`,"")+" "+se)}}else D()},X=async Y=>{var se;if((se=Y.target.files)!=null&&se[0]){R(!0);try{const qe=await SC(Y.target.files[0]);I(qe)}catch(qe){alert("Image Upload Failed: "+qe.message)}finally{R(!1)}}},te=async Y=>{var se;if((se=Y.target.files)!=null&&se[0]){const qe=Y.target.files[0];U(!0);try{const tn=await Lh(qe);C(H=>[...H,tn]),alert("File uploaded to Drive successfully!")}catch(tn){console.error(tn),alert(`Upload failed: ${tn.message||"Unknown error"}. Check console for details.`)}finally{U(!1),Y.target.value=""}}},Ee=Y=>{C(se=>se.filter((qe,tn)=>tn!==Y))},me=async Y=>{if(Y.preventDefault(),!t)return;U(!0);const se=w.find(H=>H.id===m);let qe=(i==null?void 0:i.status)||ne.SUBMITTED;t.role===ye.EMPLOYEE&&(qe===ne.NEEDS_REVISION||qe===ne.REJECTED||qe===ne.DRAFT)&&(qe=ne.SUBMITTED);const tn={id:(i==null?void 0:i.id)||Date.now().toString(),authorId:t.id,authorName:t.username,department:t.department,createdAt:(i==null?void 0:i.createdAt)||new Date().toISOString(),updatedAt:new Date().toISOString(),title:s,description:l,category:h,coverImage:x,templateId:m,templateName:(se==null?void 0:se.name)||"Unknown",parentIdeaId:(o==null?void 0:o.id)||(i==null?void 0:i.parentIdeaId),dynamicData:E,tags:[],status:qe,ratings:(i==null?void 0:i.ratings)||[],comments:(i==null?void 0:i.comments)||[],attachments:T,managerFeedback:i==null?void 0:i.managerFeedback};await bh(tn),U(!1),n("/dashboard")},Ie=w.find(Y=>Y.id===m);return y.jsxs("div",{className:"max-w-4xl mx-auto px-4 py-24 fade-in",children:[y.jsxs("div",{className:"mb-8 border-b border-slate-200 pb-4 flex justify-between items-center",children:[y.jsx("div",{children:y.jsx("h1",{className:"text-3xl font-bold text-slate-900 uppercase tracking-tight",children:i?"Refine Protocol":o?"Collaborate on Protocol":"Initialize Protocol"})}),y.jsx(we,{variant:"ghost",onClick:()=>n(-1),className:"text-xs uppercase",children:"Cancel"})]}),y.jsxs("form",{onSubmit:me,className:"space-y-8",children:[y.jsxs(je,{className:"p-8 border-none shadow-lg",children:[y.jsx("h3",{className:"text-sm font-bold text-slate-400 uppercase tracking-widest mb-6 border-b border-slate-100 pb-2",children:"01 // Core Intelligence"}),y.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[y.jsx(Kt,{label:"Protocol Title",value:s,onChange:Y=>a(Y.target.value),required:!0,placeholder:"e.g. Flare Gas Recovery"}),y.jsx(oc,{label:"Category",options:ht,value:h,onChange:Y=>p(Y.target.value),required:!0})]}),y.jsxs("div",{className:"mb-6 relative",children:[y.jsxs("div",{className:"flex justify-between items-end mb-1.5",children:[y.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase tracking-wide",children:"Technical Description"}),y.jsxs("div",{className:"flex gap-2",children:[y.jsxs("button",{type:"button",onClick:it,disabled:k,className:"text-[10px] font-bold uppercase text-indigo-500 hover:text-indigo-700 disabled:opacity-50 flex items-center gap-1",children:[k?y.jsx("span",{className:"w-2 h-2 bg-indigo-500 rounded-full animate-ping"}):""," AI Enhance"]}),y.jsxs("button",{type:"button",onClick:z,className:`text-[10px] font-bold uppercase flex items-center gap-1 ${N?"text-red-600 animate-pulse":"text-slate-400 hover:text-slate-900"}`,children:[y.jsx("span",{className:`w-2 h-2 rounded-full ${N?"bg-red-600":"bg-slate-400"}`})," ",N?"Stop Rec":"Dictate"]})]})]}),y.jsx("textarea",{className:"w-full px-4 py-3 bg-slate-50/50 border border-slate-300 rounded text-slate-900 placeholder-slate-400 focus:outline-none focus:border-eprom-blue focus:ring-1 focus:ring-eprom-blue transition-all min-h-[160px] text-sm leading-relaxed",value:l,onChange:Y=>u(Y.target.value),required:!0,placeholder:"Describe the operational challenge and proposed solution..."})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-xs font-bold text-slate-500 mb-2 uppercase tracking-wide",children:"Visual Reference (Cover)"}),y.jsxs("div",{className:"flex items-start gap-6",children:[y.jsxs("label",{className:"flex-shrink-0 cursor-pointer bg-slate-100 hover:bg-slate-200 text-slate-600 px-4 py-3 rounded text-xs font-bold uppercase transition-colors border border-slate-200 hover:border-slate-300 flex flex-col items-center justify-center w-32 h-32",children:[y.jsx("span",{children:L?"...":"Select Img"}),y.jsx("input",{type:"file",accept:"image/*",onChange:X,disabled:L,className:"hidden"})]}),x?y.jsxs("div",{className:"h-32 w-full flex-1 overflow-hidden rounded border border-slate-200 bg-slate-50 relative group",children:[y.jsx("img",{src:x,className:"w-full h-full object-cover",alt:"Cover"}),y.jsx("button",{type:"button",onClick:()=>I(""),className:"absolute inset-0 bg-black/50 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity text-white text-xs uppercase font-bold",children:"Remove"})]}):y.jsx("div",{className:"h-32 w-full flex-1 rounded border border-dashed border-slate-300 bg-slate-50 flex items-center justify-center text-slate-400 text-xs",children:"No Image Selected"})]})]})]}),Ie&&y.jsxs(je,{className:"p-8 border-none shadow-lg",children:[y.jsx("h3",{className:"text-sm font-bold text-slate-400 uppercase tracking-widest mb-6 border-b border-slate-100 pb-2",children:"02 // Specific Data"}),y.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:Ie.fields.map(Y=>y.jsx("div",{className:Y.type==="textarea"?"col-span-1 md:col-span-2":"",children:Y.type==="textarea"?y.jsx(yA,{label:Y.label,required:Y.required,value:E[Y.id]||"",onChange:se=>P({...E,[Y.id]:se.target.value})}):Y.type==="select"&&Y.options?y.jsx(oc,{label:Y.label,options:Y.options,required:Y.required,value:E[Y.id]||"",onChange:se=>P({...E,[Y.id]:se.target.value})}):Y.type==="checkbox"?y.jsx("div",{className:"flex items-center h-full pt-6",children:y.jsxs("label",{className:"flex items-center cursor-pointer",children:[y.jsx("input",{type:"checkbox",checked:!!E[Y.id],onChange:se=>P({...E,[Y.id]:se.target.checked}),className:"form-checkbox h-5 w-5 text-eprom-blue rounded border-slate-300"}),y.jsx("span",{className:"ml-2 text-sm text-slate-700 font-medium",children:Y.label})]})}):y.jsx(Kt,{label:Y.label,type:Y.type,required:Y.required,value:E[Y.id]||"",onChange:se=>P({...E,[Y.id]:se.target.value})})},Y.id))})]}),y.jsxs(je,{className:"p-8 border-none shadow-lg",children:[y.jsx("h3",{className:"text-sm font-bold text-slate-400 uppercase tracking-widest mb-6 border-b border-slate-100 pb-2",children:"03 // Supporting Documents (Drive)"}),y.jsx("div",{className:"mb-4",children:y.jsxs("label",{className:"flex items-center justify-center w-full h-24 px-4 transition bg-white border-2 border-slate-300 border-dashed rounded-md appearance-none cursor-pointer hover:border-slate-400 focus:outline-none bg-slate-50 hover:bg-slate-100",children:[y.jsx("span",{className:"flex items-center space-x-2 text-slate-500",children:M?y.jsx("span",{className:"flex items-center gap-2 text-sm font-bold animate-pulse",children:"Uploading to Drive..."}):y.jsx("span",{className:"text-xs font-bold uppercase",children:"Upload to Google Drive"})}),y.jsx("input",{type:"file",name:"file_upload",className:"hidden",disabled:M,onChange:te})]})}),T.length>0&&y.jsx("div",{className:"grid grid-cols-1 gap-2",children:T.map((Y,se)=>y.jsxs("div",{className:"flex justify-between items-center p-3 bg-blue-50 border border-blue-100 rounded text-sm text-blue-800",children:[y.jsxs("a",{href:Y,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 hover:underline truncate max-w-[80%]",children:["Attachment ",se+1]}),y.jsx("button",{type:"button",onClick:()=>Ee(se),className:"text-red-500 hover:text-red-700 text-xs font-bold uppercase",children:"Remove"})]},se))})]}),y.jsx("div",{className:"flex justify-end gap-4 pt-4",children:y.jsx(we,{type:"submit",disabled:M||L,className:"px-12 py-4 shadow-xl bg-slate-900 hover:bg-slate-800 text-white font-bold tracking-widest text-sm",children:M?"Processing...":i&&(i.status===ne.NEEDS_REVISION||i.status===ne.REJECTED)?"Resubmit Protocol":"Launch Protocol"})})]})]})},RH=({u:t,onApprove:e,onReject:n,onDelete:r})=>{const[i,o]=F.useState(ye.EMPLOYEE);return y.jsxs("tr",{className:"hover:bg-amber-50 transition-colors bg-amber-50 border-l-4 border-amber-400",children:[y.jsx("td",{className:"px-6 py-4 font-bold text-slate-800",children:t.username}),y.jsx("td",{className:"px-6 py-4 text-slate-600",children:t.email}),y.jsx("td",{className:"px-6 py-4 text-slate-600",children:t.department}),y.jsx("td",{className:"px-6 py-4",children:y.jsxs("select",{value:i,onChange:s=>o(s.target.value),className:"bg-white border border-slate-300 text-slate-800 text-xs rounded p-1",children:[y.jsx("option",{value:ye.EMPLOYEE,children:"Employee"}),y.jsx("option",{value:ye.MANAGER,children:"Manager"}),y.jsx("option",{value:ye.ADMIN,children:"Admin"}),y.jsx("option",{value:ye.GUEST,children:"Guest"})]})}),y.jsx("td",{className:"px-6 py-4",children:y.jsxs("div",{className:"flex space-x-2",children:[y.jsx(we,{variant:"ghost",onClick:()=>e(t.id,i),className:"text-green-600 hover:text-green-700 text-xs px-2 py-1 uppercase font-bold",children:"Approve"}),y.jsx(we,{variant:"ghost",onClick:()=>n(t.id),className:"text-red-600 hover:text-red-700 text-xs px-2 py-1 uppercase font-bold",children:"Reject"}),y.jsx(we,{variant:"ghost",onClick:()=>r(t.id),className:"text-red-600 hover:text-red-700 text-xs px-2 py-1 uppercase font-bold",children:"Delete"})]})})]})},xH=()=>{const{settings:t,refreshSettings:e}=ai(),[n,r]=F.useState([]),[i,o]=F.useState([]),[s,a]=F.useState("users"),[l,u]=F.useState(!1),[h,p]=F.useState(""),[m,_]=F.useState(""),[E,P]=F.useState(null),[x,I]=F.useState(""),[T,C]=F.useState(""),[M,U]=F.useState([]),[L,R]=F.useState({}),w=[{id:"impact",name:"Impact on Business Goals",description:"Reduces cost, increases revenue, improves safety.",weight:30},{id:"feasibility",name:"Feasibility",description:"Ease of implementation (resources, time).",weight:20},{id:"roi",name:"Cost vs. Benefit",description:"Estimated cost compared to expected benefits.",weight:20},{id:"innovation",name:"Innovation Level",description:"New approach vs incremental improvement.",weight:15},{id:"risk",name:"Risk Level",description:"Operational, financial, or safety risks (High Score = Low Risk).",weight:15}],[A,N]=F.useState(w),[D,b]=F.useState({});F.useEffect(()=>{k()},[]);const k=async()=>{r(await KU()),o(await Ym())},ge=async(H,Pe)=>{await q_(H,Xn.ACTIVE,Pe),k()},ht=async H=>{await q_(H,Xn.REJECTED),k()},Je=async H=>{confirm("Are you sure? This cannot be undone.")&&(await YU(H),k())},it=async(H,Pe)=>{await JU(H,Pe),k()},z=async()=>{h&&t&&(await af({...t,categories:[...t.categories,h]}),e(),p(""))},X=async()=>{m&&t&&(await af({...t,departments:[...t.departments,m]}),e(),_(""))},te=async H=>{if(H.target.files&&H.target.files[0]&&t){u(!0);try{const Pe=H.target.files[0],zi=await SC(Pe);await af({...t,logoUrl:zi}),e(),alert("Logo updated successfully!")}catch(Pe){alert("Logo upload failed: "+Pe.message)}finally{u(!1)}}},Ee=()=>{if(!L.label||!L.type)return;const H={id:L.label.toLowerCase().replace(/\s+/g,"_")+"_"+Date.now(),label:L.label,type:L.type,required:L.required||!1,options:L.options?L.options.split(","):void 0};U([...M,H]),R({})},me=()=>{if(!D.name||!D.weight)return;const H={id:(D.name.toLowerCase().replace(/\s+/g,"_")+"_"+Date.now()).substring(0,15),name:D.name,description:D.description||"",weight:Number(D.weight)};N([...A,H]),b({})},Ie=H=>{N(A.filter(Pe=>Pe.id!==H))},Ut=()=>N(w),At=A.reduce((H,Pe)=>H+Pe.weight,0),Y=H=>{P(H.id),I(H.name),C(H.description),U(H.fields),N(H.ratingConfig||[]),window.scrollTo({top:0,behavior:"smooth"})},se=()=>{P(null),I(""),C(""),U([]),N(w)},qe=async()=>{if(!x||M.length===0)return;const H={id:E||Date.now().toString(),name:x,description:T,fields:M,ratingConfig:A,isActive:!0};await XU(H),se(),k()},tn=async H=>{confirm("Are you sure?")&&(await ZU(H),k())};return t?y.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-24 fade-in",children:[y.jsxs("div",{className:"flex items-center justify-between mb-8",children:[y.jsx("h1",{className:"text-3xl font-bold text-slate-900 tracking-tight",children:"Control Room"}),y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx("div",{className:"w-2 h-2 rounded-full bg-red-500 animate-pulse"}),y.jsx("span",{className:"text-xs font-bold text-red-500 uppercase tracking-widest",children:"Admin Privileges Active"})]})]}),y.jsxs("div",{className:"flex space-x-8 mb-10 border-b border-slate-200",children:[y.jsxs("button",{onClick:()=>a("users"),className:`pb-4 px-1 font-bold text-sm uppercase tracking-wider transition-all relative ${s==="users"?"text-slate-900":"text-slate-400 hover:text-slate-600"}`,children:["Personnel ",s==="users"&&y.jsx("span",{className:"absolute bottom-0 left-0 w-full h-[3px] bg-slate-900"})]}),y.jsxs("button",{onClick:()=>a("forms"),className:`pb-4 px-1 font-bold text-sm uppercase tracking-wider transition-all relative ${s==="forms"?"text-slate-900":"text-slate-400 hover:text-slate-600"}`,children:["Protocol Builder ",s==="forms"&&y.jsx("span",{className:"absolute bottom-0 left-0 w-full h-[3px] bg-slate-900"})]}),y.jsxs("button",{onClick:()=>a("settings"),className:`pb-4 px-1 font-bold text-sm uppercase tracking-wider transition-all relative ${s==="settings"?"text-slate-900":"text-slate-400 hover:text-slate-600"}`,children:["System Config ",s==="settings"&&y.jsx("span",{className:"absolute bottom-0 left-0 w-full h-[3px] bg-slate-900"})]})]}),s==="users"&&y.jsx(je,{className:"overflow-hidden border-none shadow-lg",children:y.jsx("div",{className:"overflow-x-auto",children:y.jsxs("table",{className:"w-full text-left text-sm text-slate-600",children:[y.jsx("thead",{className:"bg-slate-50 border-b border-slate-200 uppercase text-xs font-bold text-slate-500 tracking-wider",children:y.jsxs("tr",{children:[y.jsx("th",{className:"px-6 py-4",children:"Username"}),y.jsx("th",{className:"px-6 py-4",children:"Email"}),y.jsx("th",{className:"px-6 py-4",children:"Department"}),y.jsx("th",{className:"px-6 py-4",children:"Role"}),y.jsx("th",{className:"px-6 py-4",children:"Status"})]})}),y.jsxs("tbody",{className:"divide-y divide-slate-100",children:[n.filter(H=>H.status===Xn.PENDING).map(H=>y.jsx(RH,{u:H,onApprove:ge,onReject:ht,onDelete:Je},H.id)),n.filter(H=>H.status===Xn.ACTIVE).map(H=>y.jsxs("tr",{className:"hover:bg-slate-50 transition-colors",children:[y.jsx("td",{className:"px-6 py-4 font-bold text-slate-800",children:H.username}),y.jsx("td",{className:"px-6 py-4",children:H.email}),y.jsx("td",{className:"px-6 py-4",children:H.department}),y.jsx("td",{className:"px-6 py-4",children:y.jsxs("select",{value:H.role,onChange:Pe=>it(H.id,Pe.target.value),className:"bg-transparent border border-slate-200 rounded p-1 text-slate-700 focus:bg-white focus:border-slate-900 text-xs uppercase font-bold",children:[y.jsx("option",{value:ye.EMPLOYEE,children:"Employee"}),y.jsx("option",{value:ye.MANAGER,children:"Manager"}),y.jsx("option",{value:ye.ADMIN,children:"Admin"}),y.jsx("option",{value:ye.GUEST,children:"Guest"})]})}),y.jsx("td",{className:"px-6 py-4",children:y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-green-500"}),y.jsx("span",{className:"text-xs font-bold text-green-600 uppercase",children:"Active"})]})})]},H.id))]})]})})}),s==="forms"&&y.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[y.jsx("div",{className:"lg:col-span-1 space-y-6",children:y.jsxs(je,{className:"p-6",children:[y.jsx("h3",{className:"text-sm font-bold text-slate-900 uppercase tracking-widest mb-4",children:"Template Manager"}),y.jsxs("div",{className:"space-y-3",children:[i.map(H=>{var Pe;return y.jsxs("div",{className:"flex justify-between items-center p-3 bg-slate-50 border border-slate-200 rounded hover:border-slate-300",children:[y.jsxs("div",{children:[y.jsx("div",{className:"text-xs font-bold text-slate-800",children:H.name}),y.jsxs("div",{className:"text-[10px] text-slate-500",children:[H.fields.length," fields  ",((Pe=H.ratingConfig)==null?void 0:Pe.length)||0," KPIs"]})]}),y.jsxs("div",{className:"flex gap-2",children:[y.jsx("button",{onClick:()=>Y(H),className:"text-blue-600 text-xs font-bold uppercase",children:"Edit"}),y.jsx("button",{onClick:()=>tn(H.id),className:"text-red-600 text-xs font-bold uppercase",children:"Del"})]})]},H.id)}),y.jsx(we,{onClick:()=>{P(null),I(""),C(""),U([]),N(w)},className:"w-full mt-4 text-xs",children:"New Template"})]})]})}),y.jsx("div",{className:"lg:col-span-2 space-y-8",children:y.jsxs(je,{className:"p-8",children:[y.jsxs("div",{className:"flex justify-between items-start mb-6",children:[y.jsx("h3",{className:"text-sm font-bold text-slate-900 uppercase tracking-widest",children:E?"Edit Protocol Template":"Create Protocol Template"}),E&&y.jsx(we,{variant:"ghost",onClick:se,className:"text-xs text-red-500",children:"Cancel Edit"})]}),y.jsxs("div",{className:"space-y-4 mb-8",children:[y.jsx(Kt,{label:"Template Name",value:x,onChange:H=>I(H.target.value),placeholder:"e.g. Safety Incident Report"}),y.jsx(yA,{label:"Description",value:T,onChange:H=>C(H.target.value),placeholder:"Purpose of this form..."})]}),y.jsxs("div",{className:"mb-8 border-t border-slate-100 pt-6",children:[y.jsx("h4",{className:"text-xs font-bold text-slate-400 uppercase tracking-widest mb-4",children:"Form Fields Schema"}),y.jsx("div",{className:"space-y-3 mb-4",children:M.map((H,Pe)=>y.jsxs("div",{className:"flex items-center gap-3 p-3 bg-slate-50 border border-slate-200 rounded",children:[y.jsx("span",{className:"text-[10px] font-mono text-slate-400 bg-white border border-slate-200 px-1 rounded",children:H.type}),y.jsx("span",{className:"text-sm font-bold text-slate-700 flex-1",children:H.label}),H.required&&y.jsx("span",{className:"text-[10px] text-red-500 font-bold uppercase",children:"Req"}),y.jsx("button",{onClick:()=>U(M.filter((zi,is)=>is!==Pe)),className:"text-slate-400 hover:text-red-500",children:""})]},Pe))}),y.jsxs("div",{className:"grid grid-cols-12 gap-3 items-end bg-slate-50 p-4 rounded border border-slate-200",children:[y.jsx("div",{className:"col-span-4",children:y.jsx(Kt,{label:"Label",value:L.label||"",onChange:H=>R({...L,label:H.target.value}),className:"mb-0"})}),y.jsx("div",{className:"col-span-3",children:y.jsx(oc,{label:"Type",options:["text","textarea","number","select","checkbox","date"],value:L.type||"",onChange:H=>R({...L,type:H.target.value}),className:"mb-0"})}),y.jsx("div",{className:"col-span-2 flex items-center h-[42px]",children:y.jsxs("label",{className:"flex items-center",children:[y.jsx("input",{type:"checkbox",checked:L.required||!1,onChange:H=>R({...L,required:H.target.checked}),className:"mr-2"})," ",y.jsx("span",{className:"text-xs font-bold uppercase text-slate-500",children:"Req"})]})}),y.jsx("div",{className:"col-span-3",children:y.jsx(we,{onClick:Ee,className:"w-full text-xs",children:"Add Field"})}),L.type==="select"&&y.jsx("div",{className:"col-span-12 mt-3",children:y.jsx(Kt,{label:"Options (comma separated)",value:L.options||"",onChange:H=>R({...L,options:H.target.value}),className:"mb-0"})})]})]}),y.jsxs("div",{className:"mb-8 border-t border-slate-100 pt-6",children:[y.jsx("h4",{className:"text-xs font-bold text-slate-400 uppercase tracking-widest mb-4",children:"Evaluation KPIs"}),y.jsxs("div",{className:"space-y-3 mb-4",children:[A.map(H=>y.jsxs("div",{className:"flex justify-between items-center p-3 bg-indigo-50 border border-indigo-100 rounded text-indigo-900",children:[y.jsxs("div",{children:[y.jsxs("div",{className:"text-xs font-bold",children:[H.name," ",y.jsxs("span",{className:"opacity-50",children:["(",H.weight,"%)"]})]}),y.jsx("div",{className:"text-[10px] opacity-75",children:H.description})]}),y.jsx("button",{onClick:()=>Ie(H.id),className:"text-indigo-400 hover:text-indigo-700",children:""})]},H.id)),y.jsxs("div",{className:"flex justify-between items-center text-xs font-bold text-slate-500 pt-2",children:[y.jsxs("span",{children:["Total Weight: ",At,"%"]}),At!==100&&y.jsx("span",{className:"text-red-500",children:"Warning: Should equal 100%"})]})]}),y.jsxs("div",{className:"grid grid-cols-12 gap-3 items-end bg-slate-50 p-4 rounded border border-slate-200",children:[y.jsx("div",{className:"col-span-4",children:y.jsx(Kt,{label:"KPI Name",value:D.name||"",onChange:H=>b({...D,name:H.target.value}),className:"mb-0"})}),y.jsx("div",{className:"col-span-2",children:y.jsx(Kt,{label:"Weight %",type:"number",value:D.weight||"",onChange:H=>b({...D,weight:Number(H.target.value)}),className:"mb-0"})}),y.jsx("div",{className:"col-span-4",children:y.jsx(Kt,{label:"Description",value:D.description||"",onChange:H=>b({...D,description:H.target.value}),className:"mb-0"})}),y.jsx("div",{className:"col-span-2",children:y.jsx(we,{onClick:me,className:"w-full text-xs",children:"Add"})})]}),y.jsx("div",{className:"mt-2 text-right",children:y.jsx("button",{onClick:Ut,className:"text-[10px] font-bold uppercase text-slate-400 hover:text-slate-600 underline",children:"Reset to Default KPIs"})})]}),y.jsx(we,{onClick:qe,className:"w-full py-4 text-sm tracking-widest",children:"Save Protocol Template"})]})})]}),s==="settings"&&y.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[y.jsxs(je,{className:"p-8",children:[y.jsx("h3",{className:"text-sm font-bold text-slate-900 uppercase tracking-widest mb-6",children:"Departments"}),y.jsx("div",{className:"flex flex-wrap gap-2 mb-6",children:t.departments.map(H=>y.jsx("span",{className:"px-3 py-1 bg-slate-100 text-slate-600 rounded-full text-xs font-bold",children:H},H))}),y.jsxs("div",{className:"flex gap-2",children:[y.jsx(Kt,{value:m,onChange:H=>_(H.target.value),placeholder:"New Department",className:"flex-1 mb-0"}),y.jsx(we,{onClick:X,children:"Add"})]})]}),y.jsxs(je,{className:"p-8",children:[y.jsx("h3",{className:"text-sm font-bold text-slate-900 uppercase tracking-widest mb-6",children:"Categories"}),y.jsx("div",{className:"flex flex-wrap gap-2 mb-6",children:t.categories.map(H=>y.jsx("span",{className:"px-3 py-1 bg-slate-100 text-slate-600 rounded-full text-xs font-bold",children:H},H))}),y.jsxs("div",{className:"flex gap-2",children:[y.jsx(Kt,{value:h,onChange:H=>p(H.target.value),placeholder:"New Category",className:"flex-1 mb-0"}),y.jsx(we,{onClick:z,children:"Add"})]})]}),y.jsxs(je,{className:"p-8 md:col-span-2",children:[y.jsx("h3",{className:"text-sm font-bold text-slate-900 uppercase tracking-widest mb-6",children:"Branding"}),y.jsxs("div",{className:"flex items-center gap-6",children:[t.logoUrl?y.jsx("img",{src:t.logoUrl,className:"h-16 w-auto",alt:"Logo"}):y.jsx("div",{className:"h-16 w-16 bg-slate-200 rounded flex items-center justify-center text-slate-400 font-bold",children:"LOGO"}),y.jsxs("div",{children:[y.jsx("label",{className:`block text-xs font-bold uppercase mb-2 ${l?"text-blue-500 animate-pulse":"text-slate-500"}`,children:l?"Uploading to Firebase...":"Upload Company Logo"}),y.jsx("input",{type:"file",accept:"image/*",onChange:te,disabled:l,className:"text-sm text-slate-500 disabled:opacity-50"})]})]})]})]})]}):null},PH=()=>y.jsx(SN,{children:y.jsx(_H,{children:y.jsxs("div",{className:"min-h-screen bg-eprom-bg text-slate-800 font-sans selection:bg-eprom-blue selection:text-white pb-20",children:[y.jsx(yH,{}),y.jsxs(gN,{children:[y.jsx(xn,{path:"/",element:y.jsx(SH,{})}),y.jsx(xn,{path:"/auth",element:y.jsx(CH,{})}),y.jsx(xn,{path:"/dashboard",element:y.jsx(TH,{})}),y.jsx(xn,{path:"/submit",element:y.jsx(AH,{})}),y.jsx(xn,{path:"/view/:id",element:y.jsx(EH,{})}),y.jsx(xn,{path:"/admin",element:y.jsx(xH,{})}),y.jsx(xn,{path:"/collaboration",element:y.jsx(wH,{})}),y.jsx(xn,{path:"/search",element:y.jsx(IH,{})}),y.jsx(xn,{path:"*",element:y.jsx(zw,{to:"/",replace:!0})})]})]})})}),_A=document.getElementById("root");if(!_A)throw new Error("Could not find root element to mount to");const NH=cf.createRoot(_A);NH.render(y.jsx(ME.StrictMode,{children:y.jsx(PH,{})}));
